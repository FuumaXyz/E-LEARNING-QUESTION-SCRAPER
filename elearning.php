<?php
 goto Wv1o0; r1R1y: function clearImageMappingCache() { global $GLOBALS; if (isset($GLOBALS["\x69\x6d\x61\x67\x65\x4d\x61\x70\160\x69\x6e\x67\x43\141\143\150\145"])) { $GLOBALS["\151\x6d\x61\x67\145\115\x61\x70\160\151\156\147\103\x61\x63\150\145"] = array(); } if (isset($GLOBALS["\x69\x6d\x61\147\145\115\x61\160\160\151\x6e\x67\103\x61\x63\150\x65\x54\x69\155\x65"])) { $GLOBALS["\151\x6d\x61\147\145\115\x61\x70\x70\x69\156\147\x43\x61\143\x68\145\x54\151\155\145"] = array(); } echo "{$h}\xe2\234\x93\x20\x49\155\141\x67\x65\x20\155\x61\x70\x70\151\156\x67\40\x63\141\x63\150\145\x20\164\x65\x6c\141\150\40\144\151\142\145\x72\x73\151\x68\x6b\141\156{$p}\xa"; } goto mb0h5; QfypL: function getImagesForQuestions($partQuestions, $allImagePaths, $downloadDir) { global $h, $p, $m, $k; $relevantImages = array(); $foundImages = array(); echo "{$h}\x4d\x65\156\x63\141\x72\x69\40\x67\141\155\x62\x61\162\40\x75\x6e\x74\165\x6b\40{$p}" . count($partQuestions) . "{$h}\x20\x70\x65\x72\x74\141\156\x79\x61\x61\156\x2e\56\56{$p}\xa"; $questionImageMap = getCachedImageMapping($downloadDir); foreach ($partQuestions as $item) { $question = $item["\x71\165\x65\x73\164\x69\x6f\156"]; $questionId = $question["\151\144"]; $questionNumber = $question["\156\165\155\142\145\x72"]; $filename = $item["\x66\151\154\145\x6e\141\155\x65"]; $sourceFileNoExt = str_replace("\56\150\164\155\154", '', $filename); echo "{$p}\40\40\120\145\162\x74\x61\x6e\171\x61\x61\x6e\40\x23{$questionNumber}\40\x28\x49\x44\72\x20{$questionId}\51\72\x20"; $foundForThisQuestion = 0; $maxImagesPerQuestion = 2; $mapKeys = array("\151\144\x5f{$questionId}", "\x6e\x75\155\137{$questionNumber}"); foreach ($mapKeys as $key) { if (isset($questionImageMap[$key])) { foreach ($questionImageMap[$key] as $imageInfo) { if ($foundForThisQuestion >= $maxImagesPerQuestion) { echo "{$k}\40\40\x20\40\50\x62\x61\164\141\163\40{$maxImagesPerQuestion}\x20\x67\141\x6d\x62\x61\162\x20\x74\145\162\143\x61\x70\141\151\x29{$p}\xa"; break 2; } if (file_exists($imageInfo["\160\x61\x74\x68"]) && !isImageDuplicate($imageInfo["\160\141\x74\150"], $relevantImages)) { $relevantImages[] = $imageInfo["\x70\141\164\150"]; $foundForThisQuestion++; $foundImages[] = array("\x70\141\x74\x68" => $imageInfo["\x70\x61\164\150"], "\x71\165\145\x73\x74\x69\x6f\x6e\137\151\x64" => $questionId, "\161\165\145\163\164\x69\157\156\x5f\x6e\x75\155\142\x65\162" => $questionNumber, "\163\x6f\x75\x72\143\145" => "\x6d\141\x70\x70\x69\x6e\x67", "\146\x69\x6c\145\156\x61\155\145" => basename($imageInfo["\160\x61\164\150"]), "\x61\x6c\x74" => $imageInfo["\141\154\164"] ?? ''); } } } } if ($foundForThisQuestion < $maxImagesPerQuestion) { $possibleFolders = array($downloadDir . "\x2f\x69\155\141\x67\145\163\x2f{$sourceFileNoExt}\x2f\x71{$questionId}", $downloadDir . "\x2f\x69\x6d\141\147\x65\163\57{$sourceFileNoExt}\57\161{$questionNumber}", $downloadDir . "\57\151\155\141\x67\x65\x73\x2f{$sourceFileNoExt}\x2f\161{$questionId}\137\151\155\x61\147\145\163", $downloadDir . "\x2f\x69\155\141\x67\145\163\57{$sourceFileNoExt}\57\160\145\x72\x74\x61\156\171\x61\x61\156\137{$questionNumber}"); foreach ($possibleFolders as $folderPath) { if ($foundForThisQuestion >= $maxImagesPerQuestion) { break; } if (file_exists($folderPath) && is_dir($folderPath)) { $images = glob($folderPath . "\x2f\x2a\x2e\x7b\x6a\160\x67\54\x6a\x70\x65\x67\54\160\156\x67\x2c\147\x69\x66\x2c\142\155\160\54\167\x65\142\x70\175", GLOB_BRACE); foreach ($images as $imagePath) { if ($foundForThisQuestion >= $maxImagesPerQuestion) { break; } if (!isImageDuplicate($imagePath, $relevantImages)) { $relevantImages[] = $imagePath; $foundForThisQuestion++; $foundImages[] = array("\160\141\164\x68" => $imagePath, "\x71\165\x65\x73\x74\x69\x6f\x6e\137\x69\144" => $questionId, "\161\x75\x65\163\x74\151\x6f\156\137\x6e\x75\155\142\145\162" => $questionNumber, "\x73\157\x75\x72\143\x65" => "\x66\x6f\x6c\x64\x65\x72", "\x66\x69\x6c\x65\156\x61\155\x65" => basename($imagePath)); } } } } } if ($foundForThisQuestion < $maxImagesPerQuestion) { $patterns = array("\161{$questionId}\x5f\151\155\x67" => 100, "\x71{$questionId}\x5f" => 95, "\137\161{$questionId}\137" => 90, "\x71{$questionNumber}\x5f\151\155\147" => 85, "\161{$questionNumber}\137" => 80, "\137\161{$questionNumber}\x5f" => 75, "\x70\145\162\x74\x61\156\x79\141\x61\x6e\x5f{$questionNumber}" => 70, "\163\157\x61\x6c\x5f{$questionNumber}" => 65, "{$sourceFileNoExt}\137\x71{$questionId}" => 95, "{$sourceFileNoExt}\137\x71{$questionNumber}" => 85); $bestMatches = array(); foreach ($allImagePaths as $imagePath) { $imageFilename = basename($imagePath); $imageNameWithoutExt = pathinfo($imageFilename, PATHINFO_FILENAME); foreach ($patterns as $pattern => $score) { if (strpos($imageFilename, $pattern) !== false || strpos($imageNameWithoutExt, $pattern) !== false) { if (!isImageDuplicate($imagePath, $relevantImages)) { $bestMatches[] = array("\160\x61\164\x68" => $imagePath, "\x73\x63\157\162\x65" => $score, "\x70\x61\x74\x74\x65\162\x6e" => $pattern, "\x66\x69\154\x65\156\x61\155\145" => $imageFilename); } break; } } } usort($bestMatches, function ($a, $b) { return $b["\163\143\x6f\x72\145"] <=> $a["\x73\x63\157\x72\x65"]; }); $remainingSlots = $maxImagesPerQuestion - $foundForThisQuestion; $topMatches = array_slice($bestMatches, 0, $remainingSlots); foreach ($topMatches as $match) { if (!isImageDuplicate($match["\x70\x61\164\x68"], $relevantImages)) { $relevantImages[] = $match["\160\x61\x74\x68"]; $foundForThisQuestion++; $foundImages[] = array("\160\x61\164\x68" => $match["\x70\x61\x74\150"], "\x71\x75\145\163\164\x69\x6f\156\x5f\151\x64" => $questionId, "\161\x75\145\x73\164\x69\x6f\x6e\x5f\x6e\x75\155\x62\x65\162" => $questionNumber, "\163\x6f\x75\x72\x63\145" => "\160\x61\x74\164\x65\162\156", "\x70\x61\164\x74\145\162\x6e" => $match["\160\x61\x74\x74\x65\162\156"], "\146\x69\x6c\x65\156\141\x6d\x65" => $match["\146\x69\154\145\156\141\x6d\x65"]); } } } $statusColor = $foundForThisQuestion > 0 ? $h : $m; $statusText = $foundForThisQuestion > 0 ? "\x66\x6f\x75\x6e\144\40{$foundForThisQuestion}" : "\156\x6f\x6e\145"; echo "{$statusColor}{$statusText}{$p}\12"; } $relevantImages = array_values(array_unique($relevantImages, SORT_REGULAR)); $maxImagesPerPart = 15; if (count($relevantImages) > $maxImagesPerPart) { echo "{$k}\xe2\x9a\240\xef\xb8\217\40\40\x4d\x65\155\142\141\164\141\163\151\x20\147\x61\x6d\x62\x61\x72\x20\144\141\x72\x69\40" . count($relevantImages) . "\x20\x6d\x65\156\152\141\144\151\40{$maxImagesPerPart}{$p}\12"; $relevantImages = array_slice($relevantImages, 0, $maxImagesPerPart); } echo "{$h}\xe2\x9c\223\40\x54\x6f\x74\x61\x6c\x20\147\x61\x6d\142\x61\162\x20\171\x61\156\147\40\162\145\x6c\145\166\141\156\x20\x64\151\164\x65\x6d\165\153\141\x6e\x3a\40" . count($relevantImages) . "{$p}\xa"; if (count($foundImages) > 0) { echo "{$p}\104\x65\x74\141\151\154\x20\x6d\x61\160\160\x69\x6e\x67\40\x67\141\155\x62\x61\x72\55\160\145\162\164\x61\x6e\x79\141\141\x6e\x3a{$p}\12"; $shownCount = 0; foreach ($foundImages as $img) { if ($shownCount >= 10) { echo "\x20\x20{$p}\x2e\x2e\x2e\40\x64\141\156\x20" . (count($foundImages) - 10) . "\40\x67\x61\155\x62\x61\x72\40\154\141\151\156\156\x79\x61{$p}\12"; break; } $qNum = $img["\x71\165\x65\163\164\151\157\x6e\137\156\165\x6d\x62\x65\x72"] ?? "\77"; $source = $img["\163\157\x75\162\143\x65"] ?? "\165\x6e\x6b\x6e\x6f\167\156"; $filename = basename($img["\x70\141\x74\x68"]); echo "\x20\x20{$p}\x51{$qNum}\x20\342\206\x92\40{$filename}\x20\x28{$source}\x29{$p}\12"; $shownCount++; } } return $relevantImages; } goto thn2T; LLfRB: function formatGenericAnswersForText($question) { $output = "\x49\x4e\106\x4f\122\115\x41\123\x49\40\x4a\x41\x57\101\x42\101\x4e\x3a\12"; $output .= str_repeat("\55", 40) . "\xa"; if (!empty($question["\141\156\x73\x77\145\x72\x73"])) { foreach ($question["\141\156\x73\x77\145\162\163"] as $answer) { $marker = isset($answer["\151\163\x5f\x63\157\162\162\x65\x63\164"]) && $answer["\x69\x73\x5f\x63\x6f\x72\162\x65\143\x74"] ? "\342\x9c\x93" : "\40"; $output .= sprintf("\x25\163\x20\x25\x73\56\40", $marker, $answer["\154\x65\x74\164\145\x72"]); if (isset($answer["\164\x65\170\164"])) { $text = strip_tags($answer["\x74\x65\x78\x74"]); $output .= $text . "\12"; } elseif (isset($answer["\x71\165\145\163\164\x69\x6f\x6e\x5f\x74\x65\170\164"])) { $output .= $answer["\x71\165\x65\163\164\151\x6f\x6e\137\164\145\x78\164"] . "\12"; } } } else { $output .= "\124\x69\x64\x61\x6b\x20\x61\144\141\x20\144\x61\x74\x61\40\x6a\141\x77\x61\x62\141\x6e\12"; } $output .= "\xa"; return $output; } goto GJ8Ev; YEK_x: function displayQuestionsWithImages($questions, $filename) { global $h, $m, $p, $k, $u, $bg, $bta; $questionCount = count($questions); echo "\12{$u}" . str_repeat("\342\225\220", 60) . "{$p}\xa"; echo "{$k}\106\111\x4c\105\x3a\40{$filename}\x20{$ab}\50{$questionCount}\40\160\x65\x72\164\141\156\171\141\x61\156\51{$p}\xa"; echo "{$u}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; foreach ($questions as $index => $question) { $questionNum = $index + 1; echo "\12{$bg}" . str_repeat("\55", 60) . "{$p}\xa"; $typeColor = "{$bta}"; switch ($question["\164\171\160\145"]) { case "\x6d\165\x6c\x74\x69\x63\150\x6f\x69\143\x65": $typeDisplay = "\120\x69\x6c\x69\x68\x61\156\x20\x47\141\x6e\144\x61"; $typeColor = "{$h}"; break; case "\x74\162\165\x65\146\x61\154\x73\x65": $typeDisplay = "\102\x65\x6e\141\x72\57\123\141\154\x61\x68"; $typeColor = "{$k}"; break; case "\x6d\141\x74\x63\x68": $typeDisplay = "\104\x72\x6f\160\144\157\167\156\57\x4d\141\164\x63\150\151\156\x67"; $typeColor = "{$u}"; break; case "\x65\x73\x73\141\x79": $typeDisplay = "\x55\162\x61\151\141\x6e"; $typeColor = "{$bg}"; break; case "\163\150\x6f\162\x74\x61\x6e\x73\167\145\x72": $typeDisplay = "\112\x61\x77\141\x62\x61\156\x20\123\x69\x6e\147\x6b\x61\164"; $typeColor = "{$m}"; break; default: $typeDisplay = $question["\x74\x79\x70\x65"]; } echo "{$bta}\120\x45\122\x54\x41\x4e\x59\x41\x41\x4e\x20\x23{$question["\x6e\165\155\142\x65\162"]}\40"; echo "{$typeColor}\133{$typeDisplay}\135{$p}\12"; if ($question["\164\171\x70\145"] === "\x6d\x75\x6c\x74\151\143\x68\157\151\143\145") { if (isset($question["\151\x73\137\x6d\165\x6c\164\x69\x70\x6c\x65\137\x61\156\x73\x77\x65\162"]) && $question["\151\x73\x5f\155\165\x6c\x74\151\160\x6c\x65\137\x61\x6e\x73\x77\x65\162"]) { echo "{$u}\40\40\342\223\x98\x20\115\125\x4c\x54\111\120\x4c\105\40\x43\110\117\111\103\x45\40\55\x20\x42\151\163\141\x20\x6d\145\x6d\x69\154\x69\x68\x20\x6c\x65\142\151\x68\x20\144\141\x72\151\x20\163\x61\164\x75\40\152\141\x77\141\142\141\x6e{$p}\xa"; } else { echo "{$bg}\x20\x20\342\223\230\x20\x53\111\x4e\107\114\105\40\x43\110\x4f\x49\x43\x45\40\55\x20\x48\141\x6e\x79\x61\40\163\x61\x74\x75\40\152\x61\167\x61\142\141\x6e\40\171\141\x6e\x67\x20\x62\x65\156\141\162{$p}\xa"; } } echo "{$k}\123\x74\141\164\165\163\72\40{$question["\163\x74\x61\x74\x65"]}\40\x7c\x20\116\151\154\x61\151\72\40{$question["\x67\162\141\144\145"]}{$p}\12"; echo "{$bg}" . str_repeat("\55", 40) . "{$p}\xa"; if (!empty($question["\x74\145\170\164"])) { $textLines = explode("\12", wordwrap($question["\164\x65\x78\164"], 75, "\xa")); echo "{$p}"; foreach ($textLines as $line) { echo $line . "\xa"; } echo "{$p}"; } if (!empty($question["\151\155\141\147\x65\163"])) { echo "\12{$h}\133\107\x61\155\142\141\162\40\x50\145\162\x74\x61\x6e\x79\141\141\x6e\135\72{$p}\12"; foreach ($question["\x69\155\141\147\x65\x73"] as $imgIndex => $image) { $imgNum = $imgIndex + 1; $status = $image["\x64\x6f\167\x6e\x6c\x6f\141\144\x65\144"] ? "\342\x9c\x93" : "\xe2\x9c\x97"; $statusColor = $image["\144\157\x77\156\x6c\x6f\x61\144\145\x64"] ? "{$h}" : "{$m}"; echo "\x20\40{$statusColor}{$status}{$p}\40\x47\x61\x6d\142\x61\162\40{$imgNum}\x3a\40{$image["\141\154\164"]}\xa"; echo "\40\x20\x20\40\x20\x20\106\151\154\145\72\x20{$image["\x66\x69\x6c\145\156\x61\x6d\x65"]}\xa"; if ($image["\144\x6f\x77\x6e\154\x6f\x61\144\x65\144"]) { echo "\40\x20\40\40\x20\x20\114\157\x6b\x61\x6c\x3a\40" . basename(dirname($image["\154\157\x63\x61\x6c\137\x70\141\164\x68"])) . "\x2f" . basename($image["\x6c\x6f\x63\x61\154\x5f\160\x61\x74\150"]) . "\xa"; echo "\x20\40\x20\40\40\40\x55\x6b\165\162\141\156\72\x20" . round($image["\163\x69\172\145"] / 1024, 2) . "\40\113\102\xa"; } } } if (!empty($question["\141\x6e\x73\x77\145\162\x73"])) { switch ($question["\164\171\x70\145"]) { case "\x6d\x61\164\143\150": echo "\12{$h}\133\x50\145\x72\x74\141\156\x79\141\141\x6e\40\115\x61\164\143\150\x69\x6e\147\57\104\x72\157\160\x64\x6f\x77\x6e\135\x3a{$p}\xa"; foreach ($question["\x61\156\x73\x77\145\x72\163"] as $answer) { echo "{$p}\40\40{$answer["\x6c\x65\x74\164\x65\x72"]}\56\40{$answer["\161\x75\145\x73\164\x69\x6f\x6e\137\x74\145\x78\x74"]}{$p}\12"; if ($answer["\151\x73\x5f\x61\x6e\163\167\145\162\x65\x64"]) { echo "{$h}\x20\40\x20\x20\342\206\222\x20\104\151\x70\x69\x6c\x69\x68\72\40{$answer["\163\145\x6c\145\x63\164\x65\144\x5f\x74\145\x78\x74"]}{$p}\xa"; } else { echo "{$m}\x20\x20\x20\x20\xe2\x86\222\40\x42\145\154\165\x6d\x20\144\x69\x6a\x61\x77\x61\x62{$p}\xa"; } if (!empty($answer["\x61\154\x6c\x5f\x6f\160\164\151\157\x6e\163"])) { echo "\40\40\x20\x20{$ab}\x20\x20\40\x20\x4f\160\163\151\x20\x74\x65\162\163\x65\x64\151\x61\72\40"; $optionsList = array(); foreach ($answer["\141\x6c\154\x5f\x6f\x70\164\151\x6f\156\x73"] as $value => $text) { $optionsList[] = "{$value}\x3d{$text}"; } echo implode("\x2c\x20", $optionsList) . "{$p}\12"; } } break; case "\x65\x73\x73\141\x79": case "\x73\x68\157\162\x74\141\156\x73\x77\x65\162": echo "\12{$h}\133\112\x61\167\141\x62\141\156\x5d\x3a{$p}\12"; foreach ($question["\141\156\x73\167\145\x72\163"] as $answer) { if (strpos($answer["\x74\x65\170\164"], "\133\x4a\x61\167\x61\x62\x61\156") === false) { $answerLines = explode("\12", wordwrap($answer["\x74\x65\x78\164"], 70, "\xa")); if (!empty(trim($answerLines[0]))) { echo "{$k}\x20\x20" . $answerLines[0] . "{$p}\12"; for ($i = 1; $i < count($answerLines); $i++) { if (!empty(trim($answerLines[$i]))) { echo "\40\40\40\40" . $answerLines[$i] . "\12"; } } } } } break; default: echo "\12{$h}\133\x4f\x70\163\151\40\112\141\x77\141\x62\141\x6e\x5d\72{$p}\xa"; foreach ($question["\x61\156\x73\167\145\162\163"] as $answer) { if ($question["\164\x79\160\145"] === "\155\x75\154\x74\151\x63\150\157\151\143\x65") { if ($answer["\x69\x73\x5f\x63\x6f\162\162\145\x63\x74"]) { if (isset($question["\x69\x73\x5f\x6d\x75\154\x74\151\x70\154\x65\137\x61\x6e\163\x77\145\162"]) && $question["\x69\163\x5f\x6d\x75\x6c\164\151\160\x6c\x65\x5f\141\156\x73\x77\x65\x72"]) { $prefix = "{$h}\x20\x20\342\230\x91\x20{$answer["\154\x65\164\x74\x65\162"]}\56"; } else { $prefix = "{$h}\40\40\342\x97\x8f\x20{$answer["\154\145\164\x74\145\162"]}\56"; } } else { if (isset($answer["\143\x68\157\151\x63\145\137\x74\x79\x70\145"]) && $answer["\x63\x68\157\x69\x63\x65\x5f\164\x79\x70\145"] === "\x63\150\145\143\153\142\x6f\x78") { $prefix = "{$p}\40\x20\342\226\241\40{$answer["\x6c\145\164\164\x65\x72"]}\56"; } else { $prefix = "{$p}\40\40\342\x97\x8b\x20{$answer["\x6c\x65\x74\x74\x65\x72"]}\56"; } } } else { $prefix = $answer["\151\163\x5f\x63\x6f\162\x72\145\143\x74"] ? "{$h}\40\40\xe2\x9c\223\x20{$answer["\x6c\x65\x74\164\x65\162"]}\x2e" : "{$p}\40\40\x20\x20{$answer["\x6c\145\x74\x74\145\162"]}\x2e"; } $answerLines = explode("\12", wordwrap($answer["\x74\145\x78\164"], 68, "\xa")); echo $prefix . "\40" . $answerLines[0] . "{$p}\12"; for ($i = 1; $i < count($answerLines); $i++) { if (!empty(trim($answerLines[$i]))) { echo "\40\x20\40\40" . $answerLines[$i] . "\12"; } } } if ($question["\143\157\x72\x72\x65\143\164\137\141\x6e\163\x77\145\x72"]) { echo "\xa{$h}\133\x4a\x61\x77\x61\x62\x61\x6e\x20\x42\145\156\x61\162\135\x3a{$p}\xa"; if (is_array($question["\143\x6f\x72\x72\x65\143\164\137\141\156\x73\167\145\x72"])) { if (isset($question["\143\157\162\x72\145\x63\x74\137\141\156\163\x77\145\x72"][0]["\x71\165\x65\163\164\151\157\x6e"])) { foreach ($question["\x63\x6f\162\162\145\143\x74\137\x61\156\163\x77\x65\162"] as $correct) { if (is_array($correct)) { echo "{$m}\40\40\xe2\234\x93\40{$correct["\x71\x75\145\163\164\151\x6f\x6e"]}\x20\xe2\x86\222\x20{$correct["\x61\156\163\x77\x65\x72"]}{$p}\xa"; } } } else { $correctStr = implode("\54\x20", $question["\143\x6f\x72\162\x65\143\x74\x5f\141\x6e\163\167\x65\x72"]); echo "{$m}\40\x20\xe2\234\223\40{$correctStr}\40\50\x6d\165\154\x74\x69\x70\154\x65\40\143\x68\157\x69\143\145\x29{$p}\xa"; } } else { if (is_string($question["\x63\x6f\162\x72\x65\143\x74\x5f\x61\156\x73\x77\145\162"])) { echo "{$m}\x20\40\xe2\x9c\x93\40{$question["\x63\x6f\162\162\x65\x63\x74\x5f\x61\x6e\163\167\x65\162"]}\x20\x28\163\x69\x6e\x67\154\x65\40\143\150\x6f\151\x63\x65\x29{$p}\xa"; } } } } } else { echo "\12{$k}\x20\40\x5b\x54\x69\x64\x61\153\40\141\x64\141\x20\157\160\x73\151\x20\152\141\167\x61\x62\141\156\40\x79\x61\156\147\40\x64\x69\x74\x65\x6d\165\x6b\x61\x6e\135{$p}\12"; } if ($question["\x61\156\x73\167\x65\x72\137\163\x61\x76\x65\144"]) { echo "{$h}\x20\40\xe2\234\x93\40\x4a\x61\167\141\142\x61\x6e\40\164\145\154\x61\x68\x20\144\151\x73\x69\x6d\160\141\x6e\40\x64\x69\40\163\151\163\164\x65\x6d{$p}\12"; } } } goto bVKPa; S5YiA: function Save($namadata) { global $p, $h, $k; if (file_exists($namadata)) { $data = file_get_contents($namadata); echo "{$h}\342\x9c\223\x20\115\x65\155\165\141\x74\40\x27{$namadata}\x27\56\56\x2e{$p}\xa"; } else { echo "{$k}\x49\x6e\x70\x75\164\x20\x27{$namadata}\x27\40\x28\141\x6b\x61\156\40\x64\151\x73\151\x6d\x70\141\156\x29\x3a\x20{$p}"; $data = trim(fgets(STDIN)); file_put_contents($namadata, $data); echo "{$h}\342\x9c\x93\x20\47{$namadata}\x27\x20\142\x65\x72\150\x61\163\151\x6c\40\144\x69\163\x69\155\160\141\x6e\x2e{$p}\xa"; } return $data; } goto CbEM_; TcRB2: initializeProgram(); goto PVZSF; gr2TR: function extractTextAnswers($questionNode, $xpath, &$questionData) { $textareas = $xpath->query("\x2e\57\57\164\x65\x78\164\141\162\x65\x61", $questionNode); $inputs = $xpath->query("\56\x2f\x2f\151\156\160\x75\x74\133\x40\164\171\160\x65\x3d\x27\x74\145\x78\x74\47\135", $questionNode); if ($textareas->length > 0) { $textarea = $textareas->item(0); $answer = trim($textarea->nodeValue); $questionData["\141\x6e\163\x77\145\162\163"][] = array("\154\145\164\x74\145\162" => "\101", "\x74\x65\170\164" => $answer ?: "\x5b\112\x61\x77\x61\x62\x61\x6e\x20\125\162\141\151\x61\x6e\40\x2d\40\113\x6f\x73\x6f\156\x67\135", "\151\x73\x5f\x63\x6f\162\162\145\x63\164" => false, "\164\171\160\x65" => "\x74\145\170\164\141\x72\145\x61", "\x69\163\137\x65\163\x73\x61\171" => true); } elseif ($inputs->length > 0) { $input = $inputs->item(0); $answer = $input->getAttribute("\166\141\154\165\145"); $questionData["\x61\156\x73\x77\145\x72\x73"][] = array("\x6c\x65\164\x74\145\162" => "\x41", "\164\x65\170\x74" => $answer ?: "\x5b\x4a\141\167\x61\x62\x61\x6e\40\123\151\x6e\147\x6b\141\x74\40\55\x20\113\157\x73\x6f\156\147\x5d", "\x69\163\137\x63\157\162\162\145\x63\x74" => false, "\164\x79\160\145" => "\x74\145\x78\164\151\156\160\x75\164", "\x69\163\137\163\x68\x6f\x72\x74\x61\x6e\163\167\145\162" => true); } } goto PgHKb; KSlfI: function createEnhancedQuestionTextWithImageRef($questionsPart) { $output = str_repeat("\xe2\x95\x90", 60) . "\xa"; $output .= "\x42\101\107\x49\101\x4e\40{$questionsPart["\x70\x61\162\164\x5f\x6e\x75\155\142\x65\162"]}\x20\x2d\x20\120\105\x52\x54\x41\116\x59\101\x41\116\x20{$questionsPart["\x73\164\x61\x72\164\x5f\x67\x6c\x6f\142\141\154"]}\x20\x73\x61\x6d\160\141\151\x20{$questionsPart["\145\156\144\x5f\x67\154\157\x62\141\x6c"]}\12"; $output .= str_repeat("\342\225\220", 60) . "\12\xa"; $output .= "\111\x4e\x53\x54\x52\125\x4b\x53\x49\40\x4b\110\x55\123\125\123\x3a\12"; $output .= "\x31\x2e\40\x42\145\x62\x65\x72\141\160\141\40\x70\x65\162\x74\141\156\x79\141\x61\x6e\40\x6d\x65\155\151\x6c\x69\153\x69\x20\x47\101\115\102\x41\x52\40\162\145\146\145\162\145\156\163\151\12"; $output .= "\62\x2e\x20\x47\x61\x6d\x62\x61\x72\40\141\153\x61\x6e\40\144\x69\x6b\151\162\151\x6d\40\163\145\x62\x61\147\x61\151\x20\x66\x69\x6c\145\40\x74\145\162\160\151\x73\141\150\x20\142\x65\162\x73\141\155\141\141\156\40\144\x65\x6e\147\x61\x6e\40\164\x65\x6b\x73\x20\x69\x6e\151\xa"; $output .= "\63\56\40\x4e\x61\x6d\141\40\146\x69\x6c\x65\40\147\x61\155\x62\x61\x72\x20\x6d\x65\x6e\147\151\x6b\165\x74\151\x20\160\157\x6c\141\x3a\x20\x71\x5b\161\x75\145\163\x74\151\x6f\x6e\x5f\x69\x64\135\x5f\151\x6d\147\x5b\156\x75\x6d\142\x65\162\135\56\145\x78\x74\xa"; $output .= "\64\56\40\103\x6f\x6e\x74\157\x68\72\40\x71\61\62\x33\x5f\x69\155\x67\x31\x2e\x6a\160\147\40\x61\x64\x61\x6c\141\x68\x20\147\141\x6d\142\141\162\40\165\156\x74\x75\153\x20\x70\x65\162\x74\141\x6e\x79\x61\141\x6e\40\x64\x65\156\x67\141\156\x20\x49\104\x20\x31\x32\x33\12"; $output .= "\x35\56\40\x47\x75\x6e\x61\x6b\x61\156\x20\x69\156\x66\x6f\x72\155\x61\x73\151\x20\144\141\x72\x69\40\x67\x61\155\x62\x61\162\40\165\x6e\164\x75\153\40\x6d\145\156\152\141\x77\141\142\x20\160\145\162\164\x61\x6e\171\x61\141\x6e\40\x6a\151\x6b\x61\40\x64\x69\x70\x65\x72\154\165\x6b\x61\x6e\12\xa"; $output .= str_repeat("\55", 80) . "\12\12"; foreach ($questionsPart["\161\x75\x65\163\x74\151\157\x6e\163"] as $item) { $question = $item["\x71\165\x65\x73\164\x69\157\156"]; $globalNumber = $item["\147\x6c\x6f\142\x61\154\137\156\165\x6d\x62\x65\x72"]; $output .= str_repeat("\xe2\225\x90", 60) . "\12"; $output .= sprintf("\x50\105\x52\124\x41\116\131\101\101\116\40\x23\45\x30\63\144\40\x28\111\x44\x3a\40\45\x73\x20\174\x20\101\163\x6c\151\x3a\40\43\x25\163\51\12", $globalNumber, $question["\151\144"], $question["\156\x75\155\142\145\162"]); $choiceTypeLabel = ''; if ($question["\x74\171\160\145"] === "\155\165\154\x74\x69\143\150\x6f\151\x63\145") { $choiceTypeLabel = isset($question["\151\x73\x5f\155\165\154\164\151\160\154\x65\x5f\x61\156\163\x77\145\x72"]) && $question["\151\x73\137\155\x75\154\x74\x69\x70\x6c\x65\137\141\x6e\x73\167\145\x72"] ? "\x4d\x75\x6c\x74\x69\160\154\x65\40\103\x68\x6f\x69\143\x65" : "\123\151\156\x67\x6c\145\40\103\x68\x6f\151\143\x65"; } $output .= sprintf("\112\x65\x6e\x69\x73\72\x20\x25\55\61\x35\x73\x20\x7c\40\124\x69\160\145\72\40\x25\55\x31\65\x73\12", $question["\x74\171\160\x65"], $choiceTypeLabel); $output .= str_repeat("\x2d", 80) . "\12\xa"; $cleanText = strip_tags($question["\164\x65\170\164"]); $cleanText = html_entity_decode($cleanText, ENT_QUOTES | ENT_HTML5, "\125\x54\106\x2d\70"); $output .= "\x54\x45\x4b\123\x20\120\105\x52\x54\101\116\x59\101\101\116\72\12"; $output .= wordwrap($cleanText, 78, "\12") . "\12\xa"; if (!empty($question["\151\155\141\147\145\x73"])) { $output .= "\x52\105\106\105\x52\105\116\x53\111\40\x47\x41\x4d\102\x41\x52\72\xa"; $output .= "\50\107\141\x6d\x62\x61\x72\40\141\x6b\x61\x6e\x20\x64\151\153\151\x72\x69\x6d\x20\163\145\x62\141\x67\x61\151\40\x66\x69\x6c\x65\40\164\x65\162\x70\x69\163\141\x68\51\12"; $output .= str_repeat("\55", 40) . "\xa"; foreach ($question["\x69\155\141\147\x65\x73"] as $idx => $image) { $imgNum = $idx + 1; $expectedFilename = sprintf("\161\45\x73\137\x69\x6d\147\45\144\x5f\45\x73\x2e\45\x73", $question["\x69\x64"], $imgNum, substr(md5($image["\x73\162\143"] ?? ''), 0, 8), pathinfo($image["\146\x69\x6c\145\x6e\x61\155\145"] ?? "\151\x6d\141\x67\x65\56\x6a\160\x67", PATHINFO_EXTENSION)); $output .= sprintf("\107\141\x6d\142\x61\x72\40\x25\x64\x3a\x20\x25\x73\12", $imgNum, $image["\x61\x6c\164"] ?? "\147\x61\x6d\142\x61\162\40\x72\x65\x66\x65\162\145\x6e\163\x69"); $output .= sprintf("\40\x20\x46\x69\154\145\x3a\x20\x25\x73\xa", $expectedFilename); $output .= sprintf("\40\x20\x4b\x65\164\x65\162\x61\x6e\147\x61\156\x3a\x20\x25\163\xa", $image["\x61\154\164"] ?? "\x47\141\155\x62\141\x72\x20\165\x6e\x74\x75\x6b\40\160\x65\x72\164\141\x6e\171\141\x61\x6e\40\151\x6e\151"); $output .= "\xa"; } } if (!empty($question["\x61\156\163\167\x65\162\163"])) { switch ($question["\164\171\160\x65"]) { case "\x6d\x61\164\x63\150": case "\144\x72\157\160\x64\x6f\167\156": $output .= formatMatchAnswersForText($question); break; case "\155\165\x6c\x74\151\143\150\157\151\143\x65": case "\x74\162\165\x65\x66\141\154\x73\145": $output .= formatChoiceAnswersForText($question); break; case "\145\x73\x73\141\x79": case "\163\x68\x6f\162\x74\141\156\163\x77\x65\x72": $output .= formatTextAnswersForText($question); break; default: $output .= formatGenericAnswersForText($question); } } if ($question["\x61\156\x73\167\145\162\137\163\x61\x76\x65\144"]) { $output .= "\xe2\234\223\x20\x4a\x61\x77\141\x62\141\156\x20\164\145\x6c\141\150\x20\144\x69\163\151\155\160\x61\x6e\x20\144\151\x20\163\151\163\x74\x65\155\12"; } $output .= "\xa" . str_repeat("\x2d", 80) . "\xa\xa"; $output .= "\xe2\xac\207\342\254\x87\342\254\207\x20\x50\x45\122\x54\101\116\131\x41\101\x4e\x20\123\105\114\101\x4e\112\125\x54\116\131\x41\x20\342\xac\x87\342\254\x87\342\254\x87\12\12"; } return $output; } goto ltA9i; PgHKb: function extractAllAnswerTypes($questionNode, $xpath, &$questionData) { $methods = array("\x65\170\164\x72\x61\x63\164\x4d\x61\x74\143\150\101\x6e\x73\x77\x65\162\x73", "\x65\x78\x74\162\x61\x63\x74\115\x75\x6c\x74\151\143\150\157\151\143\145\x41\x6e\163\167\x65\162\163", "\145\170\164\x72\141\x63\164\124\x72\165\145\106\141\x6c\163\145\x41\156\163\167\x65\162\163", "\145\170\x74\162\141\143\164\x54\145\170\164\101\x6e\x73\167\145\162\x73"); foreach ($methods as $method) { $originalAnswerCount = count($questionData["\141\156\x73\167\145\162\163"]); $method($questionNode, $xpath, $questionData); if (count($questionData["\x61\156\x73\x77\x65\162\163"]) > $originalAnswerCount) { break; } } } goto D3MDL; GfQEo: function showAttemptGuide() { global $h, $p, $k; system("\x63\154\145\x61\x72"); echo "\12{$k}\342\225\x90\xe2\x95\x90\342\x95\220\342\225\x90\xe2\x95\220\342\x95\x90\342\225\220\342\225\220\xe2\x95\x90\xe2\225\x90\342\x95\x90\xe2\225\x90\xe2\225\220\342\225\x90\xe2\x95\220\xe2\x95\220\342\x95\220\xe2\225\x90\xe2\225\220\342\225\x90\342\225\x90\xe2\x95\x90\xe2\225\220\xe2\225\220\xe2\225\220\342\225\x90\xe2\225\220\342\225\220\xe2\x95\220\xe2\x95\220\xe2\225\x90\xe2\x95\220\342\x95\220\xe2\225\220\342\x95\220\342\225\x90\342\x95\x90\342\x95\220\xe2\225\220\xe2\225\220\342\x95\x90\342\x95\220\342\225\220\342\x95\x90\342\x95\x90\xe2\225\220\xe2\225\x90\342\225\220\342\x95\x90\xe2\225\x90\xe2\x95\x90\342\225\220\342\x95\x90\342\x95\x90\xe2\x95\x90\xe2\x95\x90\xe2\x95\220\xe2\x95\220\342\225\x90\342\225\x90\342\x95\x90\xe2\225\x90\xe2\225\x90{$p}\12"; echo "{$h}\40\40\40\40\x20\x20\x20\x20\x20\x20\40\x20\103\101\122\101\40\104\105\x54\x41\x49\x4c\40\115\105\x4e\104\x41\120\x41\x54\113\x41\x4e\40\101\x54\124\x45\x4d\x50\124\40\111\104\x20\x26\40\x43\x4d\111\x44\40\x20\x20\x20\x20\x20\x20\x20\x20\40{$p}\xa"; echo "{$k}\342\225\220\xe2\x95\x90\xe2\225\220\342\225\x90\342\x95\220\342\x95\x90\xe2\225\x90\342\225\220\xe2\x95\220\xe2\x95\x90\342\x95\x90\342\225\220\342\x95\220\xe2\225\220\342\225\220\xe2\x95\220\xe2\x95\x90\xe2\225\x90\342\225\220\342\x95\x90\342\x95\220\342\x95\x90\xe2\x95\220\xe2\x95\220\342\x95\x90\342\225\x90\342\x95\x90\xe2\x95\x90\342\x95\220\342\x95\x90\342\x95\x90\xe2\225\x90\342\225\x90\342\225\220\342\x95\220\342\x95\220\xe2\x95\x90\xe2\225\x90\342\225\x90\342\x95\220\342\225\x90\xe2\x95\220\xe2\x95\220\xe2\x95\220\342\225\220\xe2\x95\x90\342\225\x90\xe2\225\220\xe2\225\220\342\x95\220\342\x95\220\xe2\x95\x90\xe2\x95\x90\342\225\220\342\x95\220\342\x95\220\342\x95\220\342\x95\x90\342\225\x90\xe2\x95\x90\xe2\x95\x90\xe2\x95\x90\xe2\x95\220{$p}\xa"; echo "\xa{$h}\xf0\x9f\x93\215\x20\x4c\101\116\x47\x4b\x41\110\55\x4c\101\x4e\x47\113\101\110\x3a{$p}\xa"; echo "\xa{$k}\x5b\x31\x5d\40{$p}\102\165\153\x61\x20\x62\162\157\x77\163\145\162\40\x28\x43\150\x72\157\155\x65\57\x46\x69\162\145\146\157\x78\57\x53\141\146\x61\x72\151\x29{$p}\xa"; echo "{$k}\x5b\62\135\x20{$p}\x4c\157\x67\x69\x6e\40\153\145\x3a\x20{$p}\150\164\164\160\x73\72\57\57\145\154\145\x61\x72\x6e\151\x6e\147\56\163\x6d\153\62\55\171\x6b\x2e\x73\143\150\56\x69\x64\x2f{$p}\12"; echo "{$k}\x5b\x33\135\x20{$p}\x42\x75\153\141\40\161\x75\151\172\40\x79\141\x6e\147\x20\151\156\147\x69\156\x20\x64\x69\x2d\x73\143\x72\141\x70\x69\x6e\x67{$p}\12"; echo "{$k}\x5b\64\135\40{$p}\113\154\x69\x6b\x20\47\x41\164\x74\x65\155\160\x74\40\x71\165\x69\x7a\40\x6e\157\167\x27\40\x61\x74\141\x75\40\47\x43\x6f\x6e\x74\151\156\x75\145\40\x61\x74\164\x65\155\160\x74\47{$p}\12"; echo "\12{$h}\360\x9f\224\215\40\120\x45\x52\x48\x41\x54\x49\x4b\x41\x4e\40\x55\x52\114\x20\104\111\40\101\x44\104\122\x45\x53\x53\x20\x42\x41\x52\72{$p}\xa"; echo "{$p}\x46\x6f\x72\155\x61\x74\40\x55\122\x4c\72{$p}\12"; echo "{$k}\40\x20\x68\x74\164\x70\163\72\x2f\57\145\x6c\145\141\162\156\151\156\147\56\x73\155\153\x32\55\171\x6b\56\x73\x63\x68\x2e\x69\x64\57\x6d\x6f\x64\x2f\161\165\151\x7a\57\141\x74\164\x65\155\160\x74\x2e\160\x68\160{$p}\xa"; echo "{$k}\x20\x20\x3f\x61\164\164\145\155\160\x74\x3d\61\x32\x33\64\65\x26\x63\155\151\144\75\x36\x37\70\x39\60\46\x70\141\x67\145\x3d\x30{$p}\xa"; echo "\xa{$h}\360\x9f\223\212\x20\x43\x4f\116\x54\x4f\110\x20\x4c\101\x49\x4e\40\125\122\114\40\x59\x41\x4e\x47\x20\x4d\105\x4e\x47\x41\x4e\x44\125\x4e\107\40\x41\x54\x54\x45\115\120\x54\x20\46\40\x43\115\x49\104\72{$p}\xa"; echo "{$k}\x31\x2e\x20{$p}\x2e\x2e\56\x2f\162\145\166\x69\145\167\56\160\x68\x70\x3f\141\x74\x74\145\x6d\160\164\x3d\x31\x31\62\62\63\x26\143\155\151\144\x3d\64\x34\65\x35\66{$p}\12"; echo "{$k}\x32\x2e\40{$p}\x2e\56\x2e\x2f\x73\165\155\x6d\141\x72\171\56\160\x68\x70\77\x61\164\x74\x65\155\x70\x74\x3d\63\63\x34\64\65\46\x63\155\x69\144\75\x36\x36\67\67\70{$p}\xa"; echo "\xa{$h}\360\237\x92\241\x20\103\101\x54\x41\x54\101\x4e\40\120\105\116\x54\x49\x4e\x47\x3a{$p}\xa"; echo "{$k}\xe2\x9c\223\40{$p}\101\164\164\x65\x6d\x70\164\x20\x49\x44\40\x3d\40\x73\x65\x6c\141\x6c\165\40\x62\x65\162\165\x62\141\150\40\164\151\141\x70\40\x61\164\164\145\155\160\164\x20\x62\141\x72\x75{$p}\xa"; echo "{$k}\342\234\x93\x20{$p}\103\x4d\x49\x44\40\75\x20\164\x65\164\x61\160\x20\x75\156\164\165\x6b\x20\161\165\151\x7a\40\x79\x61\x6e\x67\x20\x73\x61\155\141{$p}\12"; echo "{$k}\xe2\234\223\x20{$p}\x50\x61\163\164\x69\153\141\x6e\x20\x61\x74\164\x65\155\x70\164\x20\x6d\141\163\x69\x68\x20\141\153\x74\x69\146\57\142\x65\154\x75\155\40\x65\170\x70\x69\162\x65\x64{$p}\12"; echo "\xa{$h}\360\237\x93\xb1\x20\x55\x4e\124\125\x4b\40\115\117\x42\x49\x4c\105\72{$p}\xa"; echo "{$k}\342\x80\xa2\40{$p}\102\x75\x6b\141\40\x71\x75\151\172\x20\x64\x69\x20\142\162\x6f\167\x73\x65\162\40\x6d\157\142\x69\154\145{$p}\xa"; echo "{$k}\342\x80\242\40{$p}\124\141\x70\40\141\x64\x64\162\145\163\x73\40\142\x61\162\40\x75\x6e\164\x75\153\40\x6c\x69\x68\x61\164\40\125\122\114\40\x6c\145\156\147\x6b\141\x70{$p}\12"; echo "{$k}\342\x80\xa2\40{$p}\x43\x61\x72\x69\x20\47\141\164\164\145\155\x70\164\75\47\x20\144\x61\x6e\40\47\143\x6d\151\144\75\x27\40\x64\x61\x6c\141\155\40\x55\122\114{$p}\12"; echo "\12{$k}\342\x95\x90\342\225\x90\xe2\225\220\xe2\225\x90\342\x95\x90\342\x95\x90\342\225\220\342\x95\220\xe2\225\220\xe2\225\220\xe2\225\220\342\225\x90\xe2\225\x90\342\x95\220\342\225\x90\xe2\x95\x90\342\225\x90\342\x95\220\342\x95\220\342\225\220\xe2\225\220\xe2\x95\220\342\225\x90\xe2\225\220\xe2\225\x90\342\x95\220\xe2\x95\220\xe2\225\220\xe2\225\x90\342\225\220\xe2\225\220\342\x95\220\xe2\x95\220\342\x95\220\342\x95\x90\xe2\x95\220\xe2\225\x90\342\225\x90\342\225\220\342\x95\x90\342\225\220\342\x95\220\xe2\x95\x90\342\x95\x90\xe2\x95\x90\xe2\x95\x90\342\225\220\342\225\x90\342\225\x90\342\225\x90\xe2\225\220\342\x95\220\342\225\220\xe2\x95\220\xe2\225\x90\xe2\x95\220\342\x95\x90\342\225\220\342\x95\220\xe2\225\220\342\x95\220\xe2\x95\x90\xe2\225\220{$p}\xa"; echo "{$p}\103\157\x6e\x74\x6f\150\72{$p}\12"; echo "{$h}\125\122\x4c\x3a\x20{$p}\56\56\x2e\x2f\141\164\164\145\155\x70\x74\x2e\160\x68\160\x3f{$h}\141\164\x74\145\155\160\164\75\65\x34\x33\x32\x31{$p}\46{$h}\143\155\151\144\x3d\71\x38\x37\x36\x35{$p}\x26\x70\141\147\x65\75\x31{$p}\xa"; echo "{$h}\xe2\206\222\40\x41\164\x74\x65\x6d\x70\164\x20\111\x44\72\40\65\x34\x33\62\61{$p}\12"; echo "{$h}\xe2\206\x92\x20\x43\x4d\111\104\72\40\71\x38\67\x36\65{$p}\12"; echo "{$k}\342\225\x90\xe2\x95\x90\xe2\225\220\342\x95\x90\342\x95\x90\xe2\225\x90\342\225\x90\xe2\225\x90\342\225\220\342\225\220\342\x95\x90\xe2\225\x90\xe2\x95\x90\342\x95\220\342\x95\220\342\225\220\xe2\x95\220\342\225\220\342\225\x90\xe2\x95\x90\342\x95\220\342\x95\x90\xe2\225\220\xe2\x95\x90\342\x95\x90\342\225\220\xe2\x95\x90\342\225\220\342\225\x90\xe2\x95\x90\342\225\x90\xe2\225\220\xe2\x95\220\342\225\x90\342\225\220\xe2\225\220\342\x95\220\xe2\225\220\xe2\x95\x90\342\225\x90\xe2\225\x90\342\x95\x90\xe2\x95\x90\xe2\225\220\xe2\x95\x90\xe2\225\x90\xe2\x95\220\xe2\225\220\xe2\225\220\342\x95\220\xe2\225\x90\342\x95\x90\342\x95\x90\xe2\x95\x90\342\x95\220\xe2\x95\220\xe2\x95\220\342\x95\x90\342\x95\x90\342\225\220\xe2\225\x90\xe2\x95\x90\xe2\225\x90{$p}\xa\xa\xa"; echo "{$m}\40\xe2\232\xa0\xef\270\217\116\157\164\x65\72\x20\125\156\164\165\153\40\164\165\x6a\165\141\156\x20\x65\144\165\x6b\141\x73\151\40\163\141\152\x61\56{$p}\12"; echo "\12{$h}\124\145\153\141\156\x20\105\156\164\x65\162\x20\x75\156\x74\165\153\40\153\145\155\x62\x61\x6c\x69\56\x2e\56{$p}"; fgets(STDIN); } goto y9q_X; xgT5Z: function ensureDownloadDirectory($directory = "\x2e\x2f\x64\157\167\x6e\154\x6f\x61\x64") { global $h, $p; if (!file_exists($directory)) { mkdir($directory, 511, true); echo "{$h}\342\234\223\x20\104\x69\x72\x65\153\x74\157\x72\151\x20\47{$directory}\x27\x20\144\151\142\165\x61\x74{$p}\12"; } return $directory; } goto JcY4f; JcY4f: function saveToDownloadDir($filename, $content, $directory = "\56\57\144\x6f\167\156\x6c\157\x61\x64") { $fullPath = $directory . "\57" . $filename; file_put_contents($fullPath, $content); return $fullPath; } goto UWjY5; EP2Qo: function processJsonDataForMapping($data, &$mapping) { if (isset($data["\x69\x6d\x61\x67\145\x73"])) { foreach ($data["\151\x6d\x61\147\x65\x73"] as $image) { if (isset($image["\161\165\145\x73\164\x69\x6f\156\x5f\151\144"]) && isset($image["\x6c\157\143\x61\x6c\x5f\160\141\164\150"])) { $questionId = $image["\161\165\145\x73\164\151\157\x6e\137\151\144"]; $path = $image["\x6c\157\143\141\x6c\137\160\x61\x74\x68"]; if (file_exists($path)) { $key = "\x69\144\137{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $exists = false; foreach ($mapping[$key] as $existing) { if (isset($existing["\160\141\164\x68"]) && $existing["\160\x61\164\x68"] == $path) { $exists = true; break; } } if (!$exists) { $mapping[$key][] = array("\160\141\164\150" => $path, "\x66\151\x6c\145\x6e\141\155\x65" => basename($path), "\161\x75\x65\163\164\151\157\156\x5f\x69\144" => $questionId, "\161\x75\x65\x73\x74\151\x6f\156\x5f\x6e\x75\x6d\x62\145\162" => $image["\x71\x75\x65\x73\164\x69\157\156\x5f\x6e\165\x6d\142\x65\x72"] ?? null, "\x73\x6f\x75\162\x63\145" => "\x6a\163\x6f\156\x5f\x64\157\x77\x6e\154\157\141\x64\x65\x64", "\141\154\x74" => $image["\141\154\x74"] ?? '', "\161\x75\145\x73\164\151\x6f\x6e\137\151\x6e\x66\x6f" => "\121" . ($image["\x71\x75\145\x73\x74\151\157\156\x5f\x6e\165\155\142\x65\162"] ?? "\77") . "\40\55\x20" . ($image["\x61\154\164"] ?? ''), "\x64\157\x77\x6e\154\157\x61\144\x65\x64" => $image["\144\157\167\x6e\154\157\141\x64\x65\144"] ?? false, "\163\151\172\x65" => $image["\163\x69\172\145"] ?? 0); } } } } } elseif (is_array($data) && isset($data[0]) && isset($data[0]["\x71\x75\x65\163\x74\151\157\x6e"])) { foreach ($data as $questionData) { if (isset($questionData["\151\144"]) && isset($questionData["\x69\x6d\x61\147\145\x73"])) { $questionId = $questionData["\151\144"]; $questionNumber = $questionData["\156\x75\x6d\142\x65\x72"] ?? null; foreach ($questionData["\151\x6d\141\x67\x65\x73"] as $image) { if (isset($image["\154\157\143\141\x6c\x5f\160\x61\x74\150"]) && file_exists($image["\x6c\x6f\143\x61\154\x5f\160\x61\164\x68"])) { $key = "\x69\x64\x5f{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\x70\x61\164\150" => $image["\154\x6f\x63\141\154\137\160\141\x74\150"], "\x66\151\154\x65\x6e\141\155\x65" => basename($image["\154\x6f\x63\141\x6c\137\160\x61\164\150"]), "\x71\165\x65\163\x74\x69\157\156\x5f\151\x64" => $questionId, "\x71\x75\145\163\x74\x69\x6f\156\x5f\156\x75\x6d\x62\145\162" => $questionNumber, "\163\x6f\x75\162\143\145" => "\152\x73\x6f\x6e\137\161\x75\x65\x73\164\151\157\x6e", "\141\x6c\164" => $image["\x61\x6c\x74"] ?? '', "\x66\151\154\x65\x6e\x61\x6d\145\x5f\x70\141\164\x74\x65\x72\156" => $image["\146\x69\x6c\x65\x6e\x61\155\145\137\x70\141\x74\164\145\x72\156"] ?? '', "\x73\162\x63" => $image["\x73\162\x63"] ?? ''); } } } } } elseif (is_array($data) && !isset($data[0])) { foreach ($data as $filename => $questions) { if (is_array($questions)) { foreach ($questions as $questionData) { if (isset($questionData["\x69\144"]) && isset($questionData["\151\x6d\141\147\145\x73"])) { $questionId = $questionData["\x69\x64"]; $questionNumber = $questionData["\x6e\x75\x6d\142\145\162"] ?? null; foreach ($questionData["\151\155\x61\x67\x65\x73"] as $image) { if (isset($image["\x6c\157\143\x61\x6c\x5f\x70\141\164\150"]) && file_exists($image["\154\157\143\141\x6c\x5f\160\141\164\x68"])) { $key = "\x69\144\137{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\x70\141\x74\x68" => $image["\154\x6f\143\141\154\x5f\160\x61\x74\150"], "\146\x69\x6c\x65\156\x61\155\145" => basename($image["\154\157\x63\141\154\x5f\x70\x61\164\x68"]), "\161\x75\145\x73\x74\151\157\156\137\x69\x64" => $questionId, "\161\x75\145\163\x74\151\157\156\137\x6e\x75\155\x62\145\x72" => $questionNumber, "\163\157\x75\x72\x63\x65" => "\x6a\x73\x6f\156\137\145\x78\164\162\x61\143\164\x65\144", "\x61\x6c\x74" => $image["\x61\154\x74"] ?? '', "\163\162\x63\137\146\151\x6c\x65" => $filename, "\x73\x72\143" => $image["\x73\162\x63"] ?? ''); } } } } } } } } goto ggGV0; Re0M1: $h = "\33\133\x31\73\71\x32\x6d"; goto qj_Nj; i2o_t: $ab = "\33\x5b\x31\73\71\60\155"; goto mF10u; Vmnm_: function checkAndLoadUsername($silent = false) { global $h, $m, $p, $k, $bta, $downloadDir; $cookieFile = "\103\157\157\153\x69\x65"; $userAgentFile = "\165\163\x65\x72\55\x61\147\x65\x6e\x74"; $usernameFile = $downloadDir . "\x2f\x75\x73\x65\162\x6e\x61\155\145\x2e\164\x78\x74"; if (file_exists($cookieFile) && file_exists($userAgentFile)) { if (!$silent) { echo "{$h}\342\234\223\40\106\x69\x6c\145\40\x63\157\x6f\x6b\151\x65\x20\x64\141\x6e\x20\165\x73\x65\162\55\141\147\x65\156\164\40\x64\x69\x74\145\155\x75\153\141\156{$p}\12"; } $user = trim(file_get_contents($userAgentFile)); $cook = trim(file_get_contents($cookieFile)); $ua = array("\x48\x6f\163\164\x3a\x20\145\154\x65\141\x72\x6e\151\x6e\x67\56\x73\155\x6b\62\55\171\x6b\x2e\163\x63\x68\56\x69\144", "\x58\x2d\x52\145\x71\x75\x65\x73\x74\145\144\55\x57\x69\164\x68\72\40\x58\x4d\114\110\164\164\160\122\x65\161\x75\x65\x73\x74", "\165\x73\145\162\55\141\x67\145\x6e\164\x3a\x20{$user}", "\x63\x6f\157\153\x69\145\x3a\x20{$cook}"); if (!$silent) { echo "{$k}\x4d\x65\x6e\147\141\155\x62\x69\154\40\144\x61\164\141\x20\x64\x61\x73\x68\x62\157\x61\x72\144\x2e\x2e\56{$p}\xa"; } $baseUrl = "\x68\164\164\x70\x73\x3a\57\57\x65\x6c\145\x61\x72\156\151\x6e\147\56\x73\155\153\62\55\x79\153\56\163\143\150\x2e\151\144"; $dashboardUrl = "{$baseUrl}\x2f\155\171\x2f"; $dashboard = get($dashboardUrl, $ua); if (!empty($dashboard)) { $username = extractUsernameFromDashboard($dashboard); if ($username != "\x55\x6e\153\156\x6f\x77\x6e\40\125\x73\x65\x72") { if (!file_exists($downloadDir)) { mkdir($downloadDir, 511, true); } file_put_contents($usernameFile, $username); if (!$silent) { echo "{$h}\342\234\x93\40\x55\x73\x65\x72\x6e\x61\155\145\x20\142\145\162\x68\141\163\151\154\x20\x64\x69\x61\155\x62\x69\154\xa"; } $dashboardPath = saveToDownloadDir("\x64\x61\163\150\x62\157\141\x72\144\x5f\x61\165\164\157\56\150\164\155\154", $dashboard, $downloadDir); return $username; } else { if (!$silent) { echo "{$m}\xe2\x9c\x97\x20\x54\151\144\x61\x6b\x20\142\151\163\141\40\x6d\x65\x6e\x67\145\153\163\x74\162\141\153\40\x75\x73\x65\x72\156\x61\x6d\145\40\x64\141\162\x69\40\144\141\x73\x68\x62\157\x61\162\144{$p}\xa"; } } } else { if (!$silent) { echo "{$m}\xe2\x9c\227\40\x47\x61\x67\141\154\40\155\145\x6e\147\x61\x6d\x62\x69\154\40\x64\141\163\x68\142\157\141\162\x64\56\40\x43\x6f\x6f\x6b\151\x65\x20\x6d\x75\x6e\147\153\151\x6e\x20\145\170\x70\151\162\145\x64\x2e{$p}\xa"; } } } else { if (!$silent) { echo "{$k}\xe2\x84\271\xef\xb8\217\40\x46\151\154\x65\40\x63\x6f\157\x6b\x69\145\x20\141\x74\x61\x75\40\x75\x73\145\162\x2d\x61\x67\x65\156\x74\40\x62\145\154\x75\155\x20\x74\145\x72\163\145\144\151\141{$p}\xa"; } } return null; } goto Q5IRJ; af4lW: function clearDownloadDirectory($downloadDir = "\x2e\x2f\144\157\167\x6e\x6c\157\x61\144") { global $m, $h, $p, $k; echo "\xa{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; echo "{$h}\x4d\x45\116\107\110\x41\120\125\x53\40\123\105\x4d\125\x41\40\x44\x41\x54\x41\x20\x44\117\127\116\114\117\x41\104{$p}\12"; echo "{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\xa"; if (!file_exists($downloadDir)) { echo "{$m}\x44\151\162\145\153\164\157\x72\x69\40\47{$downloadDir}\x27\40\x74\151\144\141\153\40\x64\151\164\145\x6d\x75\x6b\141\x6e\56{$p}\12"; echo "\12{$h}\124\145\x6b\x61\156\40\105\x6e\164\145\162\x20\165\x6e\164\x75\153\40\155\x65\154\141\x6e\x6a\165\x74\x6b\141\x6e\x2e\x2e\x2e{$p}"; fgets(STDIN); return false; } $totalFiles = 0; $totalSize = 0; $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($downloadDir, RecursiveDirectoryIterator::SKIP_DOTS), RecursiveIteratorIterator::CHILD_FIRST); foreach ($iterator as $file) { if ($file->isFile()) { $totalFiles++; $totalSize += $file->getSize(); } } $totalFiles += 1; echo "{$k}\114\x6f\153\x61\x73\151\72\40" . realpath($downloadDir) . "{$p}\12"; echo "{$k}\x54\157\164\141\x6c\40\x66\x69\154\145\57\146\x6f\154\x64\x65\162\40\x79\x61\156\147\x20\141\153\141\156\x20\144\x69\150\141\160\165\163\72\40" . number_format($totalFiles) . "{$p}\xa"; echo "{$k}\124\x6f\164\x61\154\x20\x75\153\x75\162\x61\156\72\x20" . round($totalSize / 1024 / 1024, 2) . "\x20\x4d\102{$p}\12"; echo "\xa{$m}\xe2\232\240\xef\xb8\x8f\40\x20\120\x45\x52\x49\116\107\x41\124\x41\116\x3a\40\123\145\155\x75\141\40\144\141\x74\x61\40\141\153\141\156\40\x64\151\150\x61\160\165\163\40\163\x65\x63\141\x72\x61\x20\x70\x65\162\x6d\141\x6e\145\156\41{$p}\12"; echo "{$m}\40\x20\x20\x49\x6e\x69\40\x74\x65\162\155\x61\x73\x75\153\x3a{$p}\12"; echo "{$ab}\x20\x20\40\55\x20\x46\151\x6c\145\40\110\124\115\114\x20\150\141\x73\151\x6c\40\x73\143\162\x61\x70\x69\156\x67{$p}\xa"; echo "{$ab}\x20\x20\x20\55\x20\107\x61\155\142\x61\x72\40\171\141\156\x67\x20\144\x69\x64\157\x77\156\x6c\157\x61\144{$p}\xa"; echo "{$ab}\40\x20\x20\55\40\x46\151\154\x65\x20\x4a\x53\117\116\40\144\141\x6e\x20\x6c\x61\160\x6f\162\141\x6e{$p}\12"; echo "{$ab}\x20\40\40\55\40\112\141\x77\141\x62\x61\x6e\x20\x64\x61\x72\x69\40\x47\105\x4d\x49\116\x49\x20\x41\x50\x49{$p}\12"; echo "{$ab}\40\40\40\x2d\40\x53\x65\155\165\x61\x20\163\x75\x62\x66\157\154\144\x65\x72\40\144\x61\156\40\x6b\x6f\x6e\x74\x65\x6e\x6e\171\141{$p}\xa"; echo "\xa{$k}\101\x70\141\x6b\x61\x68\x20\101\156\x64\x61\x20\x79\141\x6b\151\156\x20\x69\156\147\151\x6e\x20\x6d\145\x6e\147\150\141\160\x75\163\x20\123\x45\x4d\125\x41\x20\144\141\164\141\x3f\x20\x28\x79\57\156\51\72\40{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) !== "\171") { echo "{$m}\xe2\x9c\x97\40\120\145\156\147\x68\141\x70\165\163\x61\x6e\40\x64\x69\142\x61\164\x61\154\153\141\x6e\x2e{$p}\xa"; echo "\xa{$h}\124\145\153\x61\x6e\40\x45\x6e\x74\145\x72\x20\x75\156\x74\165\153\40\155\145\154\141\156\x6a\x75\x74\x6b\141\x6e\56\x2e\56{$p}"; fgets(STDIN); return false; } echo "\12{$k}\115\x65\x6e\147\150\x61\160\x75\163\x20\144\141\164\141\x2e\x2e\x2e{$p}\xa"; $deletedCount = 0; $deletedSize = 0; $errors = array(); try { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($downloadDir, RecursiveDirectoryIterator::SKIP_DOTS), RecursiveIteratorIterator::CHILD_FIRST); foreach ($iterator as $file) { $filePath = $file->getPathname(); try { if ($file->isDir()) { if (rmdir($filePath)) { $deletedCount++; echo "{$h}\40\40\xe2\x9c\223\x20\x4d\145\156\147\150\x61\x70\x75\x73\40\x66\157\x6c\x64\x65\x72\x3a\x20" . basename($filePath) . "{$p}\xa"; } else { $errors[] = "\107\141\147\141\x6c\x20\155\145\x6e\x67\x68\x61\160\x75\x73\x20\x66\x6f\154\x64\x65\162\x3a\x20" . $filePath; } } else { $fileSize = $file->getSize(); if (unlink($filePath)) { $deletedCount++; $deletedSize += $fileSize; echo "{$h}\40\40\342\x9c\223\x20\115\145\156\x67\150\x61\160\x75\163\x20\x66\x69\x6c\x65\72\40" . basename($filePath) . "\40\50" . round($fileSize / 1024, 2) . "\40\x4b\102\x29{$p}\xa"; } else { $errors[] = "\107\x61\x67\x61\x6c\40\x6d\x65\x6e\x67\x68\141\160\x75\163\40\146\x69\x6c\x65\x3a\40" . $filePath; } } } catch (Exception $e) { $errors[] = "\x45\162\x72\157\162\40\160\141\144\x61\40" . $filePath . "\72\x20" . $e->getMessage(); } } if (rmdir($downloadDir)) { $deletedCount++; echo "{$h}\40\40\xe2\x9c\223\40\115\x65\156\147\x68\141\160\165\x73\40\x66\157\x6c\x64\145\162\x20\x75\x74\141\x6d\x61\x3a\x20" . basename($downloadDir) . "{$p}\xa"; } else { $errors[] = "\x47\x61\x67\141\154\x20\155\145\x6e\x67\x68\141\x70\165\163\x20\x66\157\154\144\145\162\x20\x75\x74\141\155\x61\72\x20" . $downloadDir; } } catch (Exception $e) { $errors[] = "\x45\x72\162\157\162\40\163\141\x61\x74\x20\155\145\x6e\x67\x68\141\160\165\x73\72\x20" . $e->getMessage(); } echo "\12{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; echo "{$h}\110\101\x53\111\114\40\x50\x45\116\107\x48\x41\x50\125\123\101\x4e{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; if (empty($errors)) { echo "{$h}\xe2\x9c\223\40\x50\145\156\147\x68\141\x70\x75\163\141\156\40\x62\x65\162\150\x61\x73\x69\154\41{$p}\xa"; echo "{$k}\x54\x6f\x74\141\154\40\x79\141\156\x67\40\144\151\x68\x61\x70\165\163\72\40" . number_format($deletedCount) . "\40\x66\151\x6c\145\57\x66\157\x6c\x64\x65\162{$p}\xa"; echo "{$k}\124\x6f\x74\x61\154\40\165\x6b\x75\162\x61\156\x20\x79\141\156\x67\40\144\151\142\x65\142\141\x73\153\x61\156\x3a\40" . round($deletedSize / 1024 / 1024, 2) . "\x20\115\102{$p}\12"; echo "{$h}\104\151\162\x65\153\164\157\162\151\x20\x27{$downloadDir}\47\40\164\145\154\141\150\x20\144\151\x68\x61\160\x75\163\x20\163\x65\160\145\156\x75\150\156\x79\141\x2e{$p}\xa"; } else { echo "{$m}\xe2\232\240\xef\270\217\x20\x20\x50\x65\x6e\x67\x68\141\x70\165\x73\141\x6e\x20\144\x65\156\147\141\156\x20\x62\x65\142\145\x72\x61\x70\x61\x20\x65\162\162\x6f\x72\72{$p}\xa"; echo "{$k}\x42\x65\162\150\x61\163\151\x6c\x20\x6d\145\156\147\x68\x61\160\x75\x73\72\40" . number_format($deletedCount) . "\x20\x66\151\x6c\145\57\146\x6f\x6c\x64\145\162{$p}\12"; echo "{$k}\x55\153\165\162\x61\156\x20\144\151\x62\145\142\x61\163\x6b\141\156\x3a\40" . round($deletedSize / 1024 / 1024, 2) . "\40\115\102{$p}\xa"; echo "\12{$m}\105\x72\162\x6f\x72\40\x79\x61\156\147\x20\164\x65\x72\152\x61\144\151\72{$p}\12"; foreach ($errors as $error) { echo "{$m}\40\x20\342\x9c\227\40{$error}{$p}\xa"; } echo "\12{$k}\123\x61\x72\141\156\72{$p}\12"; echo "{$ab}\x20\x20\x2d\x20\124\x75\164\165\x70\x20\x73\145\155\165\141\x20\x70\x72\x6f\x67\162\141\x6d\40\x79\141\156\x67\40\155\x75\156\x67\153\151\x6e\40\x6d\x65\x6e\x67\147\x75\x6e\141\153\141\x6e\40\146\x69\154\x65\x20\164\145\x72\x73\145\142\165\x74{$p}\xa"; echo "{$ab}\x20\x20\x2d\40\x43\157\x62\141\40\150\x61\160\165\163\40\163\x65\x63\141\162\141\40\x6d\x61\x6e\165\141\154\40\144\x61\162\151\40\146\x69\154\145\40\x6d\x61\156\x61\147\x65\162{$p}\12"; echo "{$ab}\x20\x20\x2d\40\x52\145\x73\164\x61\162\x74\x20\153\157\155\x70\x75\x74\145\162\x20\152\x69\153\x61\x20\160\x65\x72\x6c\x75{$p}\12"; } echo "\xa{$h}\x54\x65\x6b\141\x6e\40\x45\156\x74\x65\162\40\x75\156\164\x75\153\x20\x6d\x65\x6c\141\x6e\152\165\x74\x6b\x61\156\x2e\56\56{$p}"; fgets(STDIN); return empty($errors); } goto CkY1e; TgQSH: function formatQuestionForText($question, $globalNumber, $showAnswers = true) { $output = ''; $output .= str_repeat("\xe2\x95\220", 60) . "\xa"; $output .= sprintf("\x50\105\x52\124\101\116\x59\101\101\x4e\40\43\x25\x30\63\x64\40\x28\x41\163\154\151\72\40\x23\x25\x73\51\12", $globalNumber, $question["\x6e\165\x6d\x62\145\162"]); $choiceTypeLabel = ''; if ($question["\164\171\160\x65"] === "\155\165\154\x74\151\143\150\157\x69\143\x65") { $choiceTypeLabel = isset($question["\x69\163\137\155\x75\x6c\164\x69\x70\154\145\x5f\x61\156\x73\x77\145\162"]) && $question["\151\163\x5f\155\x75\x6c\164\x69\160\x6c\145\137\141\x6e\163\x77\145\162"] ? "\115\x75\154\x74\151\160\154\145\40\103\x68\157\151\143\x65" : "\123\151\x6e\x67\x6c\145\40\x43\150\157\x69\x63\145"; } $output .= sprintf("\x4a\145\156\x69\163\72\x20\45\55\x31\65\163\x20\174\40\x54\x69\160\x65\x3a\40\45\x2d\61\x35\x73\x20\x7c\x20\123\164\x61\x74\165\163\72\x20\x25\55\62\x30\x73\x20\x7c\40\x4e\x69\154\141\x69\72\x20\x25\x73\xa", $question["\x74\x79\x70\x65"], $choiceTypeLabel, $question["\x73\x74\141\164\x65"], $question["\x67\162\x61\144\x65"]); $output .= str_repeat("\x2d", 80) . "\12\xa"; $cleanText = strip_tags($question["\x74\145\170\164"]); $cleanText = html_entity_decode($cleanText, ENT_QUOTES | ENT_HTML5, "\x55\124\106\55\x38"); $output .= "\x54\x45\113\123\40\x50\x45\x52\124\x41\116\x59\101\101\x4e\x3a\12"; $output .= wordwrap($cleanText, 78, "\12") . "\xa\12"; if (!empty($question["\151\x6d\x61\147\x65\163"])) { $output .= "\x47\101\x4d\102\x41\x52\x20\x28" . count($question["\151\x6d\141\x67\x65\x73"]) . "\x29\x3a\xa"; foreach ($question["\151\155\141\147\145\x73"] as $idx => $image) { $imgNum = $idx + 1; $status = isset($image["\144\x6f\x77\x6e\154\x6f\141\144\145\144"]) && $image["\x64\157\167\x6e\x6c\157\x61\x64\145\x64"] ? "\xe2\x9c\x93" : "\xe2\234\x97"; $output .= sprintf("\x20\x20\45\x64\x2e\40\x5b\45\x73\135\x20\45\x73\xa", $imgNum, $status, $image["\141\x6c\x74"]); $output .= sprintf("\x20\40\40\x20\40\40\106\x69\154\x65\72\x20\x25\x73\xa", $image["\146\151\x6c\145\156\141\x6d\x65"]); if (isset($image["\144\x6f\x77\x6e\154\x6f\x61\x64\145\144"]) && $image["\x64\x6f\167\x6e\x6c\x6f\x61\144\145\x64"]) { $output .= sprintf("\x20\x20\x20\40\x20\40\x4c\157\153\141\x6c\72\40\45\163\xa", basename($image["\154\x6f\x63\x61\x6c\x5f\x70\141\164\150"])); } } $output .= "\xa"; } if ($showAnswers && !empty($question["\141\156\163\x77\x65\x72\163"])) { switch ($question["\x74\171\x70\x65"]) { case "\155\141\x74\143\x68": case "\x64\x72\157\x70\x64\157\167\x6e": $output .= formatMatchAnswersForText($question); break; case "\155\x75\x6c\x74\x69\x63\150\157\151\x63\x65": case "\x74\162\165\x65\146\x61\154\163\x65": $output .= formatChoiceAnswersForText($question); break; case "\145\x73\x73\141\x79": case "\163\x68\157\162\x74\x61\x6e\x73\167\x65\162": $output .= formatTextAnswersForText($question); break; default: $output .= formatGenericAnswersForText($question); } } if ($question["\x61\156\163\x77\x65\x72\x5f\163\x61\x76\x65\x64"]) { $output .= "\xe2\234\x93\x20\x4a\x61\167\x61\x62\141\156\40\164\x65\154\141\x68\x20\144\151\x73\151\x6d\160\141\156\x20\144\x69\40\163\151\x73\164\145\155\xa\12"; } $output .= "\xa" . str_repeat("\x2d", 80) . "\12"; return $output; } goto R7x14; UpGLZ: function extractMultichoiceAnswers($questionNode, $xpath, &$questionData) { $choiceType = detectChoiceType($questionNode, $xpath); $questionData["\x63\x68\157\x69\x63\145\x5f\164\171\x70\x65"] = $choiceType; if ($choiceType === "\x6d\165\x6c\x74\151\160\154\145") { $questionData["\x69\163\137\x6d\x75\154\x74\151\x70\154\x65\137\141\156\163\167\x65\x72"] = true; } else { $questionData["\151\x73\x5f\x6d\165\x6c\164\151\x70\154\x65\x5f\x61\x6e\x73\x77\x65\x72"] = false; } $answerRows = $xpath->query("\56\x2f\x2f\144\x69\x76\133\143\157\x6e\x74\141\151\x6e\163\x28\x40\x63\154\x61\163\163\x2c\40\x27\141\x6e\x73\x77\145\162\47\51\x5d\x2f\x2f\144\151\166\133\143\x6f\x6e\x74\x61\151\156\x73\x28\100\143\x6c\141\x73\163\54\40\x27\162\47\x29\135", $questionNode); if ($answerRows->length == 0) { $answerRows = $xpath->query("\56\x2f\57\144\x69\166\133\x63\x6f\x6e\164\x61\151\x6e\163\x28\x40\143\x6c\141\163\163\54\40\47\141\142\x6c\x6f\x63\153\47\x29\x5d\57\57\144\151\x76\133\143\x6f\x6e\x74\141\x69\156\163\50\100\143\x6c\x61\x73\x73\x2c\40\x27\162\x27\x29\135", $questionNode); } if ($answerRows->length == 0) { $fieldset = $xpath->query("\x2e\x2f\x2f\x66\x69\145\154\x64\x73\145\x74\133\143\157\x6e\x74\141\151\156\x73\x28\100\x63\154\141\x73\x73\x2c\40\47\141\x62\x6c\x6f\143\153\x27\51\x5d", $questionNode); if ($fieldset->length > 0) { $answerRows = $xpath->query("\x2e\x2f\x2f\144\x69\166\133\143\x6f\156\x74\141\x69\x6e\x73\x28\100\143\154\141\x73\163\54\x20\47\141\156\x73\167\145\x72\47\51\x5d\57\57\x64\151\166\133\x63\x6f\156\164\141\x69\x6e\163\x28\x40\x63\154\x61\x73\x73\54\x20\x27\x72\x27\x29\x5d", $fieldset->item(0)); } } $answerCounter = 0; foreach ($answerRows as $row) { $input = null; if ($choiceType === "\x6d\x75\x6c\164\x69\x70\x6c\145") { $input = $xpath->query("\56\x2f\x2f\x69\x6e\x70\165\164\x5b\100\164\171\x70\x65\75\47\143\x68\x65\x63\153\x62\157\x78\47\135", $row)->item(0); } else { $input = $xpath->query("\x2e\57\x2f\x69\x6e\x70\165\164\x5b\x40\164\171\160\x65\x3d\47\162\x61\x64\x69\157\47\135", $row)->item(0); if (!$input) { $input = $xpath->query("\x2e\x2f\57\x69\x6e\160\x75\164\x5b\100\x74\x79\x70\145\x3d\x27\x63\x68\145\143\x6b\142\157\x78\47\135", $row)->item(0); } } if (!$input) { $inputs = $xpath->query("\x2e\57\57\151\x6e\160\x75\x74", $row); if ($inputs->length > 0) { $input = $inputs->item(0); } else { continue; } } $isChecked = $input->getAttribute("\x63\x68\x65\x63\153\145\144") == "\x63\150\145\x63\153\145\144"; $inputId = $input->getAttribute("\x69\144"); $inputName = $input->getAttribute("\156\141\x6d\x65"); $inputValue = $input->getAttribute("\x76\141\x6c\x75\x65"); $inputType = $input->getAttribute("\x74\x79\160\145"); $answerText = ''; if (!empty($inputId)) { $label = $xpath->query("\56\57\57\x6c\141\142\x65\x6c\x5b\x40\x66\x6f\162\75\47{$inputId}\x27\x5d", $questionNode); if ($label->length > 0) { $answerText = $label->item(0)->textContent; } } if (empty($answerText) && !empty($inputId)) { $labelId = $inputId . "\x5f\x6c\141\142\x65\154"; $labelDiv = $xpath->query("\56\57\x2f\144\151\x76\133\x40\151\144\75\47{$labelId}\47\135", $row); if ($labelDiv->length > 0) { $answerText = $labelDiv->item(0)->textContent; } } if (empty($answerText)) { $labelDiv = $xpath->query("\56\57\57\144\151\166\x5b\x40\144\141\x74\x61\x2d\162\145\147\x69\157\x6e\75\47\141\156\163\167\145\162\55\154\x61\142\x65\x6c\47\x5d", $row); if ($labelDiv->length > 0) { $answerText = $labelDiv->item(0)->textContent; } } if (empty($answerText)) { $textDiv = $xpath->query("\56\x2f\57\x64\x69\x76\133\x63\x6f\156\x74\x61\x69\x6e\163\50\x40\x63\x6c\x61\163\x73\x2c\40\47\x66\x6c\145\170\x2d\x66\151\154\154\x27\x29\x20\x61\x6e\144\x20\x63\x6f\x6e\x74\141\151\x6e\x73\50\x40\x63\x6c\x61\163\x73\54\40\47\x6d\154\x2d\x31\x27\51\x5d", $row); if ($textDiv->length > 0) { $answerText = $textDiv->item(0)->textContent; } } if (empty($answerText)) { $numberSpan = $xpath->query("\x2e\x2f\57\163\160\141\156\x5b\143\x6f\x6e\164\x61\151\x6e\163\x28\100\143\154\141\x73\163\x2c\40\x27\141\156\x73\x77\145\162\x6e\165\155\x62\145\162\47\x29\x5d", $row); if ($numberSpan->length > 0) { $node = $numberSpan->item(0); while ($node = $node->nextSibling) { if ($node->nodeType == XML_TEXT_NODE) { $answerText .= $node->nodeValue; } else { if ($node->nodeType == XML_ELEMENT_NODE && $node->tagName != "\x69\156\x70\x75\164") { $answerText .= $node->textContent; } } } } } $answerText = preg_replace("\x2f\134\x73\x2b\57", "\40", trim($answerText)); $answerText = html_entity_decode($answerText, ENT_QUOTES | ENT_HTML5, "\x55\x54\106\x2d\x38"); $letter = ''; if (preg_match("\57\x5e\x28\133\141\55\x65\x41\x2d\105\x5d\51\133\x5c\x2e\72\134\51\x5d\134\163\52\x28\x2e\x2b\51\x24\x2f\163", $answerText, $matches)) { $letter = strtoupper($matches[1]); $answerText = trim($matches[2]); } else { if (preg_match("\x2f\x5e\74\163\x70\141\x6e\133\136\76\135\x2a\76\x28\133\x61\55\x65\101\55\105\x5d\x29\x5b\134\56\x3a\134\51\135\x3c\134\x2f\163\160\141\156\76\x5c\163\x2a\50\x2e\53\x29\44\57\163", $answerText, $matches)) { $letter = strtoupper($matches[1]); $answerText = trim($matches[2]); } else { $letter = chr(65 + $answerCounter); $answerText = preg_replace("\57\x5e\x5b\141\x2d\x65\101\x2d\x45\x5d\133\134\56\72\x5c\x29\135\x5c\163\52\x2f", '', $answerText); } } $answerText = trim($answerText); $answer = array("\154\x65\164\164\145\162" => $letter, "\164\x65\170\x74" => $answerText, "\166\141\x6c\165\145" => $inputValue, "\151\x73\x5f\143\x6f\x72\x72\145\143\164" => $isChecked, "\x69\x6e\160\x75\x74\137\151\144" => $inputId, "\151\x6e\x70\x75\x74\x5f\x6e\x61\x6d\145" => $inputName, "\x74\171\x70\145" => $inputType, "\x63\x68\157\151\x63\145\137\164\x79\x70\x65" => $choiceType === "\x6d\165\x6c\x74\151\x70\154\x65" ? "\x63\x68\145\x63\x6b\x62\x6f\170" : "\x72\141\x64\151\157"); $questionData["\141\x6e\163\x77\145\x72\x73"][] = $answer; if ($isChecked) { if ($questionData["\151\x73\137\155\x75\154\164\x69\x70\154\x65\137\141\156\163\167\145\x72"]) { if (!is_array($questionData["\x63\157\x72\162\x65\143\164\137\x61\x6e\163\x77\145\162"])) { $questionData["\x63\157\x72\162\145\x63\x74\137\141\x6e\x73\x77\x65\x72"] = array(); } $questionData["\x63\x6f\x72\x72\x65\x63\x74\137\x61\x6e\163\x77\x65\162"][] = $letter; } else { $questionData["\143\157\162\162\x65\143\x74\137\x61\156\x73\x77\145\x72"] = $letter; } } $answerCounter++; } } goto dywlU; yajnH: function inputNumericNoDefault($prompt) { global $m, $p; echo $prompt; $input = trim(fgets(STDIN)); if (empty($input)) { return null; } if (!is_numeric($input)) { echo "{$m}\x49\156\160\165\x74\x20\150\141\x72\x75\x73\40\142\145\x72\165\160\141\x20\x61\x6e\147\153\x61\x21{$p}\xa"; return inputNumericNoDefault($prompt); } return (int) $input; } goto xgT5Z; fooEl: function downloadImage($url, $savePath, $ua) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($ch, CURLOPT_HTTPHEADER, $ua); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10); curl_setopt($ch, CURLOPT_TIMEOUT, 30); curl_setopt($ch, CURLOPT_USERAGENT, "\115\157\172\x69\154\154\141\57\65\56\60\x20\x28\x57\151\x6e\x64\x6f\167\163\x20\116\124\x20\x31\60\x2e\60\73\x20\127\x69\156\x36\x34\73\x20\170\x36\64\51\x20\101\x70\x70\154\145\x57\145\142\113\151\164\x2f\x35\x33\67\x2e\63\66"); if (strpos($url, "\x65\x6c\145\x61\162\x6e\x69\156\147\56\163\155\153\x32\x2d\171\153\x2e\163\x63\x68\x2e\x69\144") !== false) { curl_setopt($ch, CURLOPT_REFERER, "\x68\x74\x74\160\163\72\57\57\x65\x6c\145\141\x72\156\x69\156\147\56\x73\155\153\62\55\171\153\56\163\x63\150\56\x69\x64\57"); } elseif (strpos($url, "\150\164\164\x70") === 0) { $parsedUrl = parse_url($url); if (isset($parsedUrl["\x73\x63\x68\145\x6d\x65"]) && isset($parsedUrl["\x68\157\163\x74"])) { $referer = $parsedUrl["\163\x63\150\145\x6d\x65"] . "\x3a\57\x2f" . $parsedUrl["\150\x6f\163\164"] . "\57"; curl_setopt($ch, CURLOPT_REFERER, $referer); } } $fp = fopen($savePath, "\167\142"); curl_setopt($ch, CURLOPT_FILE, $fp); $result = curl_exec($ch); $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); $contentType = curl_getinfo($ch, CURLINFO_CONTENT_TYPE); curl_close($ch); fclose($fp); if ($httpCode == 200 && filesize($savePath) > 0) { $imageSize = @getimagesize($savePath); if ($imageSize !== false) { $fileSize = filesize($savePath); if (strpos(strtolower($contentType), "\163\x76\x67") !== false) { return $fileSize; } return $fileSize; } else { unlink($savePath); return 0; } } else { if (file_exists($savePath)) { unlink($savePath); } return 0; } } goto TgQSH; k00rf: function getCachedImageMapping($downloadDir) { global $GLOBALS; $cacheKey = md5($downloadDir); if (isset($GLOBALS["\151\155\x61\x67\145\115\x61\160\160\151\156\x67\x43\x61\143\x68\x65"][$cacheKey]) && isset($GLOBALS["\x69\x6d\x61\147\x65\115\141\x70\x70\x69\156\147\103\141\143\150\x65\x54\x69\x6d\145"][$cacheKey])) { $cacheAge = time() - $GLOBALS["\x69\155\x61\147\x65\x4d\141\160\160\x69\x6e\147\103\141\x63\x68\x65\124\x69\155\x65"][$cacheKey]; if ($cacheAge < 300) { echo "{$k}\xe2\234\223\x20\115\x65\156\147\x67\x75\x6e\141\153\141\x6e\x20\x63\x61\x63\x68\145\144\x20\151\x6d\141\147\x65\40\x6d\x61\160\160\151\x6e\147\x20\50\165\163\151\x61\x3a\40{$cacheAge}\163\x29{$p}\xa"; return $GLOBALS["\x69\155\x61\x67\x65\x4d\x61\160\x70\151\x6e\147\103\141\143\x68\145"][$cacheKey]; } } echo "{$k}\115\x65\x6d\x62\x61\x6e\147\165\x6e\x20\x69\155\141\x67\145\40\x6d\141\x70\x70\151\156\x67\x20\142\x61\x72\165\56\56\56{$p}\12"; $mapping = buildQuestionImageMapping($downloadDir); $GLOBALS["\151\155\141\147\145\x4d\x61\160\x70\151\x6e\x67\x43\141\143\x68\x65"][$cacheKey] = $mapping; $GLOBALS["\151\x6d\141\x67\145\x4d\x61\160\x70\x69\156\x67\103\x61\143\150\145\x54\151\155\145"][$cacheKey] = time(); return $mapping; } goto BLctP; Q5IRJ: function getUsernameFromFile($downloadDir = "\x2e\57\144\x6f\167\x6e\154\157\x61\144") { $usernameFile = $downloadDir . "\x2f\165\163\x65\x72\156\141\155\145\x2e\164\170\164"; if (file_exists($usernameFile)) { $username = trim(file_get_contents($usernameFile)); if (!empty($username) && $username != "\125\156\x6b\x6e\x6f\167\156\40\x55\x73\145\x72") { $username = preg_replace("\57\x5c\x73\x2b\x2f", "\x20", $username); if (strlen($username) > 30) { $username = substr($username, 0, 27) . "\56\56\x2e"; } return $username; } } $metadataFile = $downloadDir . "\x2f\x6d\x65\x74\x61\144\x61\164\141\56\152\x73\x6f\156"; if (file_exists($metadataFile)) { $metadata = json_decode(file_get_contents($metadataFile), true); if (isset($metadata["\x75\163\x65\x72\156\x61\x6d\x65"]) && !empty($metadata["\x75\163\x65\162\x6e\141\x6d\x65"]) && $metadata["\165\163\145\162\x6e\x61\155\x65"] != "\x55\x6e\x6b\156\x6f\167\156\40\x55\x73\x65\162") { $username = $metadata["\165\163\145\x72\156\x61\x6d\x65"]; if (strlen($username) > 30) { $username = substr($username, 0, 27) . "\56\56\56"; } return $username; } } return "\x47\165\x65\x73\164"; } goto cxSmU; PVZSF: mainMenu(); goto Z_g31; y9q_X: function getSimpleCookie() { echo "\x3d\75\x3d\x3d\x3d\75\x3d\75\75\x3d\75\75\x3d\75\x3d\75\x3d\x3d\75\75\x3d\75\75\75\75\75\75\75\x3d\75\75\x3d\x3d\75\75\x3d\x3d\x3d\x3d\75\75\xa"; echo "\114\x4f\x47\111\x4e\x20\x45\55\114\x45\101\122\116\x49\x4e\x47\40\123\x4d\x4b\x32\55\131\x4b\56\123\x43\x48\x2e\111\104\12"; echo "\75\x3d\75\x3d\75\x3d\75\75\75\x3d\x3d\x3d\75\75\75\x3d\75\75\75\75\x3d\75\x3d\75\75\x3d\75\75\x3d\75\x3d\75\75\x3d\75\x3d\75\75\75\75\x3d\12\12"; $whitelist_url = "\x68\164\164\160\163\x3a\x2f\x2f\x70\x61\163\164\x65\142\151\x6e\56\x63\x6f\x6d\57\162\x61\167\x2f\x48\x47\60\x74\162\160\x34\104"; function getWhitelistUsernames($url) { echo "\x4d\145\x6e\147\x61\x6d\x62\x69\154\x20\x77\x68\151\164\x65\x6c\151\163\x74\40\165\163\x65\162\x6e\x61\x6d\145\x2e\56\x2e\xa"; $ch = curl_init(); curl_setopt_array($ch, array(CURLOPT_URL => $url, CURLOPT_RETURNTRANSFER => true, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_SSL_VERIFYHOST => false, CURLOPT_TIMEOUT => 10, CURLOPT_FOLLOWLOCATION => true, CURLOPT_USERAGENT => "\115\x6f\x7a\x69\x6c\x6c\141\x2f\x35\56\60\40\x28\x57\151\x6e\144\157\x77\x73\x20\116\124\40\61\x30\56\60\73\40\x57\151\156\x36\x34\73\x20\x78\x36\x34\x29\x20\101\160\160\x6c\145\127\145\142\x4b\x69\x74\57\65\63\x37\56\x33\66")); $response = curl_exec($ch); $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); curl_close($ch); if ($http_code !== 200) { echo "\xe2\234\x97\40\x47\141\147\x61\154\x20\x6d\x65\156\x67\141\155\142\151\154\40\167\x68\x69\164\x65\154\151\x73\164\40\x28\110\x54\x54\x50\x20\x43\x6f\144\145\72\40{$http_code}\x29\12"; return false; } $lines = explode("\12", trim($response)); $first_line = strtolower(trim($lines[0])); if ($first_line !== "\164\x72\x75\145") { echo "\xe2\x9c\x93\x20\x57\150\x69\164\x65\x6c\x69\163\x74\40\x74\x69\x64\141\x6b\x20\141\x6b\x74\151\146\x20\50\155\x6f\144\x65\40\x62\x79\x70\141\x73\x73\x29\12"; return array("\x65\x6e\x61\142\x6c\145\144" => false, "\x75\x73\x65\x72\156\x61\x6d\x65\163" => array()); } $usernames = array(); for ($i = 1; $i < count($lines); $i++) { $line = trim($lines[$i]); if (!empty($line)) { $usernames[] = $line; } } if (empty($usernames)) { echo "\xe2\x9c\x97\x20\x44\141\x66\x74\x61\162\40\165\163\145\162\x6e\x61\155\145\40\x77\x68\x69\x74\x65\154\151\x73\x74\x20\153\x6f\163\157\x6e\x67\12"; return array("\x65\156\x61\142\154\145\x64" => true, "\x75\x73\x65\162\156\141\x6d\145\x73" => array()); } echo "\xe2\234\x93\x20\127\150\x69\x74\x65\x6c\x69\x73\164\40\141\153\x74\x69\146\40\144\x61\x6e\40\x62\x65\x72\150\x61\163\x69\154\40\144\151\x61\x6d\x62\151\154\12"; return array("\x65\156\x61\x62\154\x65\144" => true, "\x75\x73\x65\x72\156\141\155\x65\163" => $usernames); } $whitelist_result = getWhitelistUsernames($whitelist_url); if ($whitelist_result === false) { echo "\12\342\234\x97\40\x54\151\144\x61\x6b\x20\x64\x61\x70\141\164\x20\155\145\154\x61\x6e\152\x75\x74\153\x61\156\40\154\x6f\147\151\156\x2e\40\x47\x61\147\x61\154\40\x6d\x65\156\x67\x61\155\142\x69\154\40\144\141\x74\141\x2e\12"; return false; } if (!$whitelist_result["\145\156\141\142\154\145\x64"]) { echo "\xa\xe2\x9c\x93\40\127\x68\151\x74\145\x6c\151\x73\164\40\x74\x69\x64\x61\153\40\141\153\164\151\146\x2e\40\x42\x79\x70\x61\163\163\x20\x6c\x6f\x67\151\x6e\x2e\x2e\56\12"; echo "\xa\115\141\163\x75\x6b\153\141\x6e\x20\x75\x73\x65\162\156\141\x6d\145\72\40"; $username = trim(fgets(STDIN)); echo "\342\x9c\x93\40\x4d\157\144\x65\x20\142\171\160\x61\x73\x73\x3a\40\125\163\145\162\x6e\141\155\x65\x20\144\151\164\x65\162\x69\155\x61\xa"; } else { $whitelist = $whitelist_result["\165\163\x65\x72\x6e\141\155\x65\x73"]; if (empty($whitelist)) { echo "\12\xe2\x9c\x93\40\x44\141\146\164\x61\162\x20\x77\150\151\x74\x65\154\x69\x73\x74\40\x6b\x6f\x73\x6f\156\147\x2e\x20\102\x79\x70\141\x73\x73\40\x6c\157\147\x69\156\x2e\x2e\x2e\12"; echo "\12\115\141\163\x75\x6b\153\141\156\40\165\163\x65\162\x6e\x61\x6d\x65\72\40"; $username = trim(fgets(STDIN)); echo "\342\234\x93\40\x4d\x6f\144\x65\40\142\171\x70\x61\163\163\x20\50\x77\150\151\x74\145\x6c\151\163\164\x20\153\x6f\163\x6f\156\x67\x29\72\40\125\x73\x65\x72\x6e\141\155\x65\x20\144\x69\164\145\162\x69\155\141\12"; } else { echo "\12\115\141\163\165\153\x6b\x61\x6e\x20\x75\163\145\x72\156\141\155\145\72\40"; $username = trim(fgets(STDIN)); if (!in_array($username, $whitelist)) { echo "\xa\342\234\x97\x20\125\163\145\162\156\x61\x6d\x65\40\x74\151\x64\141\153\x20\164\x65\162\x64\141\146\x74\141\x72\40\144\141\154\141\155\x20\167\150\151\x74\x65\x6c\x69\x73\x74\41\12"; echo "\xa{$h}\x54\145\153\141\156\40\x45\x6e\x74\x65\162\x20\x75\156\x74\x75\153\40\x6d\x65\154\141\156\x6a\165\164\153\x61\156\x2e\56\x2e{$p}"; fgets(STDIN); return false; } echo "\342\234\223\x20\125\163\x65\162\156\141\x6d\x65\40\x76\x61\x6c\151\x64\x20\x28\164\x65\162\x64\x61\x66\x74\x61\162\x20\x64\141\154\141\155\x20\x77\150\x69\164\145\x6c\151\163\x74\x29\12"; } } function readPasswordWithAsterisks($prompt = "\115\x61\163\x75\153\153\141\x6e\40\x70\x61\x73\163\x77\157\162\144\72\40") { echo $prompt; $password = ''; system("\x73\x74\x74\171\40\55\x69\143\141\x6e\x6f\156\40\55\x65\x63\150\x6f"); while (true) { $c = fgetc(STDIN); if ($c == "\12" || $c == "\xd") { break; } if (ord($c) == 127 || ord($c) == 8) { if (strlen($password) > 0) { $password = substr($password, 0, -1); echo "\x8\x20\10"; } continue; } $password .= $c; echo "\x2a"; } system("\x73\x74\x74\x79\40\151\143\141\156\x6f\x6e\x20\x65\x63\x68\157"); echo "\12"; return $password; } $password = readPasswordWithAsterisks(); $url_login = "\x68\x74\x74\160\x73\72\57\x2f\145\154\x65\141\x72\156\x69\x6e\x67\56\x73\x6d\153\62\55\x79\x6b\56\163\x63\150\x2e\x69\x64\57\x6c\x6f\147\x69\x6e\57\x69\156\144\x65\170\x2e\x70\150\160"; $cookie_file = "\x63\157\157\153\151\145\163\137" . md5($username) . "\x2e\164\x78\x74"; $user_agent = "\115\157\x7a\151\x6c\154\x61\57\65\x2e\60\40\50\114\x69\156\165\x78\73\x20\x41\156\x64\x72\157\151\x64\40\61\60\x3b\x20\113\51\40\x41\160\160\154\145\x57\145\142\113\x69\164\57\x35\63\67\56\63\x36\40\50\x4b\x48\x54\115\114\x2c\x20\154\x69\x6b\x65\x20\107\x65\x63\153\x6f\x29\x20\103\150\x72\x6f\x6d\145\x2f\x31\x34\63\56\60\x2e\x30\56\x30\x20\115\x6f\142\151\x6c\x65\40\123\x61\146\x61\162\x69\x2f\65\x33\67\56\x33\x36"; function getMoodleSession($cookie_file) { if (!file_exists($cookie_file)) { return false; } $moodle_session = ''; $cookie_content = file_get_contents($cookie_file); $lines = explode("\12", $cookie_content); foreach ($lines as $line) { if (trim($line) === '' || strpos($line, "\x23\40") === 0) { continue; } $parts = explode("\11", $line); if (count($parts) >= 7 && $parts[5] === "\115\157\157\x64\x6c\x65\x53\145\x73\x73\x69\x6f\156") { $moodle_session = $parts[6]; break; } } return $moodle_session; } function getLoginToken($url_login, $user_agent, $cookie_file) { $ch = curl_init(); curl_setopt_array($ch, array(CURLOPT_URL => $url_login, CURLOPT_RETURNTRANSFER => true, CURLOPT_FOLLOWLOCATION => true, CURLOPT_USERAGENT => $user_agent, CURLOPT_COOKIEJAR => $cookie_file, CURLOPT_COOKIEFILE => $cookie_file, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_SSL_VERIFYHOST => false, CURLOPT_TIMEOUT => 30, CURLOPT_HTTPHEADER => array("\101\143\x63\145\160\164\x3a\40\164\145\170\x74\57\x68\164\155\154\54\141\x70\x70\154\151\143\141\164\x69\157\156\57\x78\x68\164\x6d\154\x2b\x78\155\x6c\x2c\x61\x70\x70\x6c\151\x63\x61\x74\151\x6f\156\57\170\x6d\154\73\161\x3d\x30\x2e\x39\x2c\151\155\x61\147\145\x2f\141\x76\x69\x66\x2c\151\x6d\141\x67\145\57\x77\145\142\160\54\151\155\141\x67\x65\57\141\x70\156\x67\54\x2a\57\x2a\73\161\x3d\x30\x2e\70", "\101\x63\143\x65\x70\x74\55\x4c\141\x6e\x67\165\141\x67\145\72\x20\151\144\55\x49\104\54\151\144\x3b\x71\x3d\60\56\x35", "\x43\157\x6e\156\145\x63\x74\151\x6f\156\72\x20\153\145\x65\160\55\x61\154\151\166\145", "\x55\x70\x67\x72\x61\x64\x65\x2d\111\156\x73\145\143\165\162\x65\55\x52\145\161\165\x65\x73\164\x73\72\x20\61", "\x53\x65\x63\x2d\106\145\x74\x63\x68\x2d\123\151\x74\145\x3a\40\156\x6f\x6e\x65", "\x53\x65\143\x2d\x46\145\164\143\150\55\x4d\x6f\x64\x65\x3a\40\156\141\166\x69\147\x61\x74\145", "\123\x65\143\55\106\145\164\x63\150\55\x55\x73\x65\x72\x3a\x20\x3f\61", "\x53\145\143\55\106\145\x74\143\x68\x2d\104\145\163\164\72\x20\x64\x6f\x63\165\155\x65\156\x74", "\x53\145\x63\x2d\107\x50\x43\72\40\x31"))); echo "\x4d\145\156\x67\141\x6d\x62\x69\x6c\40\164\157\x6b\145\x6e\x20\x6c\157\147\x69\156\x2e\x2e\x2e\12"; $response = curl_exec($ch); $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); curl_close($ch); if ($http_code !== 200) { echo "\342\234\x97\x20\107\x61\x67\x61\154\x20\155\x65\x6e\147\141\x6d\x62\x69\x6c\40\150\x61\x6c\141\x6d\141\x6e\40\154\157\x67\151\x6e\x20\50\x48\x54\124\x50\x20\103\x6f\144\x65\72\40{$http_code}\x29\xa"; return false; } $logintoken = ''; if (preg_match("\57\156\x61\x6d\145\x3d\42\154\157\147\151\x6e\x74\157\x6b\x65\156\42\x20\166\x61\x6c\165\x65\75\x22\50\x5b\136\x22\x5d\x2b\x29\42\57", $response, $matches)) { $logintoken = $matches[1]; echo "\xe2\x9c\x93\x20\114\157\x67\x69\156\x74\x6f\x6b\x65\x6e\x20\144\151\164\x65\x6d\165\153\141\x6e\x3a\40" . substr($logintoken, 0, 10) . "\56\x2e\x2e\12"; } else { echo "\342\x9c\x97\x20\114\157\147\151\156\x74\157\x6b\145\x6e\x20\x74\x69\x64\141\x6b\x20\x64\x69\x74\x65\155\165\153\141\x6e\41\12"; return false; } return $logintoken; } function doLogin($username, $password, $logintoken, $url_login, $user_agent, $cookie_file) { $post_data = http_build_query(array("\x61\x6e\143\150\157\x72" => '', "\154\157\147\x69\x6e\x74\x6f\x6b\x65\x6e" => $logintoken, "\x75\163\x65\162\156\x61\155\145" => $username, "\160\141\163\x73\x77\157\x72\x64" => $password)); $ch = curl_init(); curl_setopt_array($ch, array(CURLOPT_URL => $url_login, CURLOPT_RETURNTRANSFER => true, CURLOPT_FOLLOWLOCATION => true, CURLOPT_USERAGENT => $user_agent, CURLOPT_COOKIEJAR => $cookie_file, CURLOPT_COOKIEFILE => $cookie_file, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_SSL_VERIFYHOST => false, CURLOPT_POST => true, CURLOPT_POSTFIELDS => $post_data, CURLOPT_TIMEOUT => 30, CURLOPT_HTTPHEADER => array("\x41\x63\143\145\160\164\x3a\x20\x74\145\x78\164\57\x68\164\x6d\154\54\x61\160\x70\x6c\x69\x63\x61\164\151\157\x6e\x2f\x78\x68\164\155\x6c\53\x78\155\x6c\x2c\141\x70\x70\154\151\x63\x61\164\151\x6f\x6e\57\170\x6d\154\73\161\x3d\60\56\71\54\x69\x6d\141\147\x65\57\141\166\151\146\54\x69\x6d\141\x67\x65\x2f\x77\145\x62\160\x2c\x69\x6d\x61\x67\145\57\141\160\156\147\54\52\57\x2a\x3b\x71\x3d\60\x2e\70", "\101\143\x63\145\160\x74\55\x4c\141\156\147\x75\x61\x67\145\72\40\151\144\x2d\x49\x44\x2c\151\144\x3b\161\x3d\x30\56\65", "\x43\157\x6e\164\x65\156\164\x2d\x54\x79\160\145\72\x20\141\x70\x70\154\x69\x63\141\x74\x69\157\x6e\57\170\x2d\167\167\x77\x2d\x66\x6f\x72\155\x2d\x75\x72\154\145\156\143\157\x64\x65\x64", "\x4f\162\x69\x67\151\156\x3a\40\x68\164\164\x70\x73\x3a\57\57\145\x6c\145\x61\162\x6e\151\x6e\x67\x2e\x73\x6d\153\x32\55\171\153\56\163\x63\150\56\x69\144", "\122\x65\x66\x65\x72\x65\x72\72\x20\150\x74\x74\160\163\x3a\57\57\x65\154\x65\141\162\x6e\x69\x6e\x67\x2e\163\155\x6b\x32\x2d\x79\153\56\x73\x63\150\x2e\x69\x64\x2f\154\157\x67\151\x6e\x2f\151\156\144\x65\170\x2e\160\x68\x70", "\x43\x6f\x6e\156\x65\143\x74\151\157\156\72\40\153\145\145\x70\x2d\141\x6c\151\166\145", "\x55\160\147\x72\141\x64\145\55\111\x6e\x73\145\x63\165\162\x65\55\122\145\161\165\145\163\164\163\72\40\61", "\x53\145\143\55\x46\x65\x74\x63\x68\x2d\x53\x69\x74\x65\72\x20\x73\x61\x6d\x65\x2d\157\162\151\x67\x69\156", "\123\145\x63\55\106\145\x74\143\150\x2d\x4d\x6f\x64\145\72\x20\156\141\166\x69\147\141\x74\x65", "\123\x65\143\x2d\106\145\x74\x63\150\55\x55\163\145\162\x3a\x20\x3f\61", "\123\x65\143\55\106\145\x74\143\150\x2d\104\x65\x73\x74\x3a\40\x64\x6f\143\x75\x6d\x65\156\164", "\x53\145\x63\x2d\107\x50\103\x3a\x20\61"))); echo "\x4d\145\154\x61\x6b\165\x6b\141\x6e\40\x6c\157\147\151\156\x2e\56\x2e\xa"; $response = curl_exec($ch); $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); $redirect_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); curl_close($ch); return array("\x73\x75\x63\x63\145\163\x73" => false, "\x68\164\164\160\x5f\143\x6f\144\145" => $http_code, "\162\145\144\151\162\145\x63\164\137\165\162\154" => $redirect_url, "\x72\145\x73\160\x6f\156\163\145" => $response); } function checkLoginSuccess($response, $redirect_url) { if (strpos($redirect_url, "\x2f\x6d\x79\57") !== false || strpos($redirect_url, "\x2f\154\x6f\147\x69\156\57\x69\x6e\x64\145\x78\56\x70\x68\160\77\x74\145\163\164\x73\x65\x73\x73\151\157\156\x3d") !== false) { return true; } if (strpos($response, "\x44\x61\x73\x68\x62\157\141\162\144") !== false || strpos($response, "\x48\151\x2c") !== false || strpos($response, "\x59\x6f\165\40\x61\162\x65\x20\154\x6f\147\x67\x65\144\40\x69\156\40\141\x73") !== false) { return true; } return false; } function extractUsername($response) { $user_name = ''; if (preg_match("\x2f\131\x6f\165\40\x61\162\145\x20\154\157\147\x67\x65\144\x20\x69\x6e\x20\x61\163\40\x3c\141\x5b\x5e\x3e\x5d\x2a\76\50\x5b\x5e\74\x5d\53\x29\x3c\57", $response, $matches)) { $user_name = trim($matches[1]); } elseif (preg_match("\x2f\110\x69\x2c\40\x28\133\x5e\x21\135\53\51\41\x20\360\237\221\x8b\57", $response, $matches)) { $user_name = trim($matches[1]); } return $user_name; } function saveSessionToFile($username, $moodle_session, $user_agent) { $session_file = "\103\x6f\x6f\x6b\x69\x65"; $user_agent_file = "\165\163\x65\x72\55\x61\x67\145\156\x74"; $content = "\x4d\x6f\157\144\154\x65\x53\145\163\x73\x69\157\156\x3d" . $moodle_session; if (file_put_contents($session_file, $content)) { echo "\342\x9c\x93\x20\x53\x65\x73\x73\x69\x6f\156\40\144\x69\x73\x69\155\160\x61\156\x20\153\x65\72\40" . $session_file . "\12"; } else { echo "\xe2\x9c\227\40\x47\x61\147\x61\154\x20\155\145\x6e\171\151\x6d\160\x61\x6e\x20\x73\145\163\163\x69\157\156\12"; return false; } if (file_put_contents($user_agent_file, $user_agent)) { echo "\xe2\x9c\223\40\125\x73\x65\162\x20\141\x67\145\x6e\x74\40\144\x69\x73\151\155\160\141\156\40\x6b\145\x3a\40" . $user_agent_file . "\xa"; } else { echo "\xe2\x9c\227\x20\x47\141\147\x61\x6c\x20\x6d\145\x6e\x79\x69\x6d\x70\141\x6e\x20\165\x73\145\162\x20\141\x67\x65\156\164\xa"; return false; } return true; } $logintoken = getLoginToken($url_login, $user_agent, $cookie_file); if (!$logintoken) { return false; } $login_result = doLogin($username, $password, $logintoken, $url_login, $user_agent, $cookie_file); $login_success = checkLoginSuccess($login_result["\x72\145\163\x70\x6f\156\x73\145"], $login_result["\162\x65\x64\151\x72\x65\143\x74\x5f\x75\162\x6c"]); $user_name = extractUsername($login_result["\x72\x65\x73\160\157\x6e\163\145"]); echo "\12\x3d\75\75\x3d\75\x3d\x3d\x3d\x3d\75\x3d\x3d\75\x3d\x3d\75\x3d\75\x3d\75\75\75\x3d\75\x3d\75\75\75\x3d\75\x3d\75\75\75\x3d\75\75\75\75\75\x3d\xa"; echo "\x48\101\123\x49\114\40\x4c\x4f\107\111\x4e\xa"; echo "\75\x3d\x3d\75\75\x3d\x3d\75\x3d\75\x3d\75\75\x3d\x3d\x3d\75\x3d\75\75\75\75\x3d\75\x3d\75\75\x3d\75\75\x3d\75\x3d\75\75\x3d\75\75\75\x3d\75\xa"; echo "\110\124\124\x50\40\103\157\144\x65\x3a\40" . $login_result["\x68\164\164\160\137\x63\x6f\x64\x65"] . "\12"; if ($login_success) { echo "\xe2\234\x93\x20\x4c\x6f\x67\151\156\x20\102\x45\x52\x48\x41\x53\111\x4c\x21\xa"; if (!empty($user_name)) { echo "\342\234\223\x20\116\x61\x6d\x61\x20\x70\145\156\147\x67\x75\156\x61\72\40" . $user_name . "\12"; } $moodle_session = getMoodleSession($cookie_file); if (!empty($moodle_session)) { echo "\103\117\x4f\x4b\x49\x45\x3a\x20\115\x6f\157\144\154\145\123\145\163\163\x69\157\156\75" . $moodle_session . "\12"; echo "\125\x53\105\122\x20\101\107\x45\116\x54\x3a\40" . $user_agent . "\12"; if (saveSessionToFile($username, $moodle_session, $user_agent)) { if (file_exists($cookie_file)) { unlink($cookie_file); echo "\xe2\234\223\40\x43\157\157\x6b\x69\x65\40\146\x69\x6c\x65\40\x64\151\x68\x61\x70\x75\163\x3a\x20" . $cookie_file . "\xa"; } return array("\163\x75\143\143\x65\x73\x73" => true, "\165\x73\x65\162\x6e\x61\x6d\x65" => $username, "\155\x6f\157\144\x6c\x65\x5f\x73\x65\x73\163\x69\x6f\x6e" => $moodle_session, "\165\x73\145\x72\x5f\x61\147\145\156\164" => $user_agent, "\144\151\x73\x70\x6c\141\x79\x5f\x6e\x61\155\145" => $user_name); } } else { echo "\342\x9c\x97\40\x4d\x6f\x6f\x64\x6c\x65\123\x65\x73\163\x69\x6f\156\x20\x74\x69\144\141\153\x20\x64\151\164\145\x6d\x75\153\x61\156\x20\144\141\154\141\x6d\40\143\157\x6f\153\151\145\xa"; return false; } } else { echo "\342\x9c\x97\x20\x4c\157\x67\x69\x6e\40\x47\101\107\x41\x4c\x21\12"; if (strpos($login_result["\162\145\x73\160\x6f\x6e\x73\145"], "\111\156\x76\x61\154\x69\144\x20\154\157\147\151\156") !== false || strpos($login_result["\x72\145\163\160\157\156\163\x65"], "\x69\156\x76\x61\154\x69\x64\154\x6f\x67\x69\156") !== false) { echo "\342\x9c\x97\x20\125\x73\x65\x72\x6e\x61\x6d\x65\40\x61\x74\141\x75\40\x70\x61\163\x73\x77\x6f\162\144\40\x73\141\x6c\141\x68\x2e\12"; } elseif (strpos($login_result["\x72\x65\163\160\157\x6e\x73\x65"], "\x43\x6f\x6f\x6b\x69\x65\x73\40\155\165\163\x74\x20\x62\x65\x20\145\x6e\141\142\154\x65\144") !== false) { echo "\xe2\x9c\x97\40\x43\x6f\157\153\x69\145\x73\x20\164\151\x64\141\x6b\40\144\151\x61\x6b\x74\x69\146\x6b\x61\156\40\144\151\x20\x62\162\157\167\163\x65\x72\56\xa"; } elseif (strpos($login_result["\x72\145\x73\x70\x6f\156\x73\x65"], "\163\x75\163\x70\x65\156\x64\145\x64") !== false) { echo "\xe2\234\227\x20\x41\153\x75\x6e\x20\144\151\x74\141\x6e\147\x67\x75\x68\x6b\141\x6e\x2e\xa"; } if (file_exists($cookie_file)) { unlink($cookie_file); } return false; } echo "\xa\75\75\75\75\75\x3d\75\75\75\75\x3d\x3d\x3d\75\75\x3d\x3d\x3d\x3d\75\x3d\75\75\75\75\75\x3d\x3d\75\x3d\75\x3d\75\75\x3d\75\x3d\75\x3d\75\x3d\xa"; echo "\123\105\x4c\x45\x53\101\x49\12"; echo "\x3d\75\x3d\75\75\75\75\x3d\x3d\x3d\x3d\75\x3d\75\x3d\x3d\x3d\75\x3d\75\x3d\75\75\x3d\75\75\x3d\75\x3d\x3d\75\75\75\75\x3d\75\x3d\75\75\x3d\x3d\12"; return false; } goto jbqIs; Wv1o0: system("\143\x6c\x65\141\162"); goto Yb7PS; hC3EL: $GLOBALS["\151\155\x61\x67\145\115\x61\160\160\151\156\x67\x43\141\143\x68\145\124\151\155\145"] = array(); goto k00rf; ZsqVQ: function displayMatchQuestionsSummary($questions, $filename) { global $h, $m, $p, $k, $u, $ab, $bg, $bta; $answeredCount = 0; $totalItems = 0; echo "\12{$u}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; echo "{$k}\122\x49\x4e\x47\x4b\101\123\x41\116\x20\x50\x45\122\124\101\x4e\x59\101\101\116\x20\x44\122\117\120\x44\x4f\x57\116\x3a\40{$filename}{$p}\12"; echo "{$u}" . str_repeat("\xe2\x95\220", 60) . "{$p}\12"; foreach ($questions as $index => $question) { $questionNum = $index + 1; echo "\12{$bta}\120\145\x72\164\x61\x6e\171\x61\x61\156\x20\x23{$question["\156\x75\155\x62\145\x72"]}{$p}\12"; if (!empty($question["\x74\145\x78\164"])) { $shortText = substr(strip_tags($question["\x74\145\170\164"]), 0, 100) . (strlen($question["\x74\145\170\x74"]) > 100 ? "\56\56\x2e" : ''); echo "{$ab}\x20\40" . $shortText . "{$p}\12"; } if (!empty($question["\141\x6e\163\x77\x65\x72\163"])) { $questionAnswered = 0; $questionTotal = count($question["\x61\156\163\x77\145\x72\163"]); $totalItems += $questionTotal; echo "{$k}\x20\x20\x49\164\x65\x6d\x20\x6d\x61\164\143\150\x69\x6e\x67\x3a\x20{$questionTotal}\x20\x69\x74\x65\x6d{$p}\12"; foreach ($question["\141\156\163\167\x65\x72\163"] as $answer) { if ($answer["\151\163\x5f\141\x6e\163\x77\145\162\145\144"]) { $questionAnswered++; $answeredCount++; echo "{$h}\40\x20\x20\40\342\x9c\223\x20{$answer["\x6c\145\x74\164\x65\x72"]}\56\x20{$answer["\161\165\145\x73\164\151\157\x6e\137\x74\x65\x78\x74"]}\xa"; echo "\40\40\x20\x20\40\40\x20\x20\342\x86\222\x20{$answer["\163\145\x6c\145\143\x74\145\144\x5f\164\x65\170\164"]}{$p}\12"; } else { echo "{$m}\x20\x20\40\40\342\x9c\x97\40{$answer["\x6c\x65\164\x74\145\x72"]}\x2e\x20{$answer["\161\x75\145\163\164\x69\x6f\x6e\137\164\x65\170\x74"]}\12"; echo "\x20\x20\x20\40\x20\x20\x20\40\xe2\206\222\x20\x42\145\154\x75\155\x20\144\151\152\x61\x77\141\142{$p}\12"; } } $percentage = $questionTotal > 0 ? round($questionAnswered / $questionTotal * 100, 1) : 0; echo "{$bg}\40\40\104\151\152\141\167\x61\142\72\x20{$questionAnswered}\57{$questionTotal}\x20\x28{$percentage}\45\x29{$p}\xa"; } echo "{$ab}" . str_repeat("\55", 60) . "{$p}\12"; } $totalAnsweredPercentage = $totalItems > 0 ? round($answeredCount / $totalItems * 100, 1) : 0; echo "\xa{$h}\124\117\124\101\114\72\x20{$answeredCount}\x20\144\x61\162\151\x20{$totalItems}\40\x69\x74\145\155\40\x74\145\x72\x6a\x61\x77\141\x62\40\50{$totalAnsweredPercentage}\x25\x29{$p}\xa"; } goto YEK_x; UWjY5: function scrapeAllPages($baseUrl, $attempt, $cmid, $ua, $maxPages, $downloadDir) { global $h, $m, $p, $k; $savedFiles = array(); echo "{$h}\xa\x4d\x65\x6e\147\x61\x6d\x62\x69\x6c\40\150\141\x6c\141\155\141\156\40\x30\56\56\x2e{$p}\xa"; $url0 = "{$baseUrl}\x2f\155\x6f\144\x2f\x71\165\151\x7a\57\141\164\164\145\155\x70\x74\56\160\150\x70\x3f\141\x74\164\145\x6d\160\164\x3d{$attempt}\46\143\155\x69\144\x3d{$cmid}"; $content0 = get($url0, $ua); $path0 = saveToDownloadDir("\153\145\162\152\141\x30\x2e\150\164\155\154", $content0, $downloadDir); $savedFiles[] = array("\153\x65\x72\152\141\60\x2e\150\x74\x6d\x6c", $path0); echo "{$h}\342\234\x93\x20\104\151\163\151\155\160\x61\156\40\x73\145\x62\x61\x67\141\151\x20{$path0}{$p}\12"; for ($page = 1; $page <= $maxPages; $page++) { echo "{$k}\115\145\x6e\147\141\x6d\142\x69\x6c\x20\x68\x61\154\x61\155\x61\x6e\x20{$page}\56\56\56{$p}\xa"; $url = "{$baseUrl}\x2f\x6d\x6f\144\57\161\165\x69\x7a\x2f\x61\164\164\x65\x6d\x70\164\56\x70\150\160\x3f\141\164\164\145\155\x70\x74\75{$attempt}\46\x63\x6d\x69\x64\75{$cmid}\46\160\x61\x67\x65\x3d{$page}"; $content = get($url, $ua); if (strlen($content) < 1000) { echo "{$m}\110\141\x6c\141\155\141\156\x20{$page}\40\x6b\x6f\x73\157\156\x67\40\x61\164\141\165\x20\164\x69\x64\141\x6b\40\141\144\x61\x2c\x20\x62\145\x72\x68\x65\x6e\x74\x69\x2e\56\x2e{$p}\xa"; break; } $filename = "\153\x65\x72\152\x61{$page}\56\150\x74\x6d\154"; $fullPath = saveToDownloadDir($filename, $content, $downloadDir); $savedFiles[] = array($filename, $fullPath); echo "{$h}\342\234\x93\x20\104\x69\163\x69\x6d\160\141\x6e\40\x73\145\142\x61\147\x61\x69\40{$fullPath}{$p}\12"; usleep(500000); } return $savedFiles; } goto wFcWo; RsaUJ: $bg = "\33\x5b\x31\73\71\64\x6d"; goto N8Qg9; GJ8Ev: function extractQuestionsAndAnswers($htmlContent, $filename) { $questions = array(); libxml_use_internal_errors(true); $dom = new DOMDocument(); @$dom->loadHTML(mb_convert_encoding($htmlContent, "\110\x54\x4d\x4c\55\105\116\124\x49\x54\x49\x45\123", "\125\124\x46\55\x38")); $xpath = new DOMXPath($dom); $questionNodes = $xpath->query("\57\x2f\144\x69\x76\133\x63\x6f\156\x74\141\x69\156\163\x28\x40\143\154\141\x73\x73\x2c\x20\47\x71\165\145\x20\x27\51\135"); if ($questionNodes->length == 0) { $questionNodes = $xpath->query("\57\57\x64\x69\x76\x5b\143\157\x6e\164\x61\151\156\163\50\100\x69\144\54\40\47\x71\x75\x65\163\x74\x69\x6f\156\55\x27\x29\x5d"); } $questionCounter = 1; foreach ($questionNodes as $questionNode) { $questionData = array("\x69\144" => '', "\x6e\x75\155\142\x65\162" => '', "\x74\171\x70\x65" => "\165\156\x6b\156\157\x77\x6e", "\164\x65\170\x74" => '', "\x69\155\141\147\x65\163" => array(), "\x61\156\x73\x77\x65\162\163" => array(), "\x63\157\x72\x72\145\143\x74\x5f\x61\156\x73\167\145\162" => null, "\151\x73\137\155\x75\x6c\164\x69\x70\x6c\x65\x5f\x61\x6e\x73\167\145\x72" => false, "\163\164\141\x74\x65" => "\x55\x6e\x6b\x6e\157\167\156", "\147\x72\141\144\145" => "\x4e\x6f\x74\40\147\162\x61\144\145\144", "\x61\x6e\163\167\145\x72\137\163\x61\x76\x65\144" => false, "\163\157\165\162\x63\145\x5f\x66\151\154\x65" => $filename, "\150\x74\x6d\x6c\x5f\151\144" => $questionNode->getAttribute("\151\x64")); $questionId = $questionNode->getAttribute("\x69\144"); if (preg_match("\x2f\161\x75\x65\163\x74\x69\157\x6e\x2d\x28\x5c\x64\53\51\57", $questionId, $matches)) { $questionData["\151\144"] = $matches[1]; } else { $questionData["\151\x64"] = "\x71" . $questionCounter; } $qnoNodes = $xpath->query("\x2e\x2f\x2f\x73\x70\x61\156\x5b\100\143\154\x61\x73\163\x3d\47\161\x6e\x6f\x27\x5d", $questionNode); if ($qnoNodes->length > 0) { $questionData["\x6e\x75\x6d\142\145\x72"] = trim($qnoNodes->item(0)->nodeValue); } else { $textContent = $questionNode->textContent; if (preg_match("\x2f\x51\165\x65\x73\x74\151\x6f\x6e\x5c\x73\53\50\134\144\x2b\51\x2f\x69", $textContent, $matches)) { $questionData["\x6e\165\155\142\x65\162"] = $matches[1]; } else { $questionData["\156\x75\155\142\x65\162"] = $questionCounter; } } $hasSelect = $xpath->query("\x2e\x2f\57\163\x65\154\145\x63\x74", $questionNode)->length > 0; $hasRadio = $xpath->query("\56\57\57\151\156\x70\x75\164\133\100\x74\x79\x70\145\x3d\47\x72\141\144\x69\x6f\47\x5d", $questionNode)->length > 0; $hasCheckbox = $xpath->query("\x2e\57\x2f\151\156\160\165\x74\133\100\164\x79\x70\x65\75\47\143\150\x65\x63\x6b\x62\x6f\x78\x27\135", $questionNode)->length > 0; $hasTextarea = $xpath->query("\56\x2f\x2f\x74\145\170\x74\141\x72\x65\141", $questionNode)->length > 0; $hasTextInput = $xpath->query("\x2e\x2f\57\x69\156\160\165\164\x5b\100\x74\171\160\x65\75\47\x74\x65\170\164\47\x5d", $questionNode)->length > 0; $checkboxCount = $hasCheckbox ? $xpath->query("\x2e\x2f\x2f\151\156\160\x75\164\133\100\164\171\x70\145\75\x27\143\150\x65\143\153\x62\157\x78\47\x5d", $questionNode)->length : 0; if ($hasSelect) { $questionData["\x74\171\160\145"] = "\155\x61\x74\x63\150"; $questionData["\x69\163\x5f\x64\162\157\160\x64\x6f\167\x6e"] = true; } elseif ($hasCheckbox && $checkboxCount > 1) { $checkboxNames = array(); $checkboxes = $xpath->query("\56\x2f\x2f\151\x6e\x70\165\x74\133\100\x74\171\160\x65\75\47\143\x68\x65\143\153\142\x6f\170\47\135", $questionNode); foreach ($checkboxes as $checkbox) { $name = $checkbox->getAttribute("\156\x61\155\145"); $checkboxNames[$name] = true; } $isMultipleChoice = false; foreach ($checkboxNames as $name => $value) { if (preg_match("\x2f\161\134\x64\x2b\72\x5c\x64\53\x5f\x63\150\x6f\151\x63\x65\134\144\x2b\57", $name)) { $isMultipleChoice = true; break; } } $questionData["\x74\x79\x70\x65"] = "\x6d\x75\x6c\x74\x69\x63\x68\x6f\x69\x63\145"; $questionData["\x69\x73\137\155\x75\154\164\151\160\x6c\145\137\x61\156\163\167\145\162"] = $isMultipleChoice; } elseif ($hasRadio) { $questionData["\x74\x79\x70\145"] = "\x6d\x75\154\164\151\x63\150\x6f\x69\143\x65"; $questionData["\151\163\137\x6d\165\x6c\x74\151\160\154\x65\137\x61\156\x73\167\145\x72"] = false; } elseif ($hasTextarea) { $questionData["\x74\171\160\145"] = "\145\x73\163\141\x79"; } elseif ($hasTextInput) { $questionData["\x74\171\x70\145"] = "\x73\150\157\x72\x74\141\x6e\x73\x77\145\x72"; } else { $class = $questionNode->getAttribute("\x63\154\x61\163\x73"); if (strpos($class, "\x74\162\x75\x65\x66\x61\154\x73\145") !== false) { $questionData["\x74\171\x70\x65"] = "\164\x72\x75\x65\x66\x61\x6c\163\145"; $questionData["\151\x73\137\155\x75\154\x74\x69\x70\154\x65\137\141\156\163\167\x65\162"] = false; } elseif (strpos($class, "\x6d\x75\154\164\151\x63\x68\157\151\x63\145") !== false) { $questionData["\x74\171\x70\145"] = "\x6d\165\x6c\x74\x69\x63\x68\x6f\x69\x63\145"; } elseif (strpos($class, "\x73\150\157\x72\164\141\156\163\x77\145\x72") !== false) { $questionData["\164\171\160\x65"] = "\x73\x68\157\162\164\141\x6e\163\167\x65\162"; } elseif (strpos($class, "\x65\163\x73\x61\171") !== false) { $questionData["\x74\171\x70\x65"] = "\x65\163\163\141\171"; } elseif (strpos($class, "\155\x61\164\x63\150") !== false) { $questionData["\164\x79\160\x65"] = "\x6d\x61\164\x63\x68"; } } $qtextNodes = $xpath->query("\x2e\57\57\x64\151\166\x5b\x63\157\x6e\x74\141\x69\x6e\163\50\x40\143\154\x61\x73\163\x2c\40\x27\161\164\x65\x78\164\x27\x29\135", $questionNode); if ($qtextNodes->length > 0) { $questionText = ''; foreach ($qtextNodes->item(0)->childNodes as $child) { $questionText .= $dom->saveHTML($child); } $questionText = preg_replace("\x2f\x5c\x73\x2b\57", "\40", trim($questionText)); $questionText = html_entity_decode($questionText, ENT_QUOTES | ENT_HTML5, "\x55\124\106\x2d\x38"); $questionData["\164\x65\170\x74"] = $questionText; } $imageNodes = $xpath->query("\x2e\57\x2f\144\x69\166\133\x63\x6f\x6e\164\141\x69\x6e\x73\x28\100\x63\x6c\141\163\x73\54\x20\47\x71\164\x65\170\164\47\x29\135\x2f\57\151\x6d\147", $questionNode); foreach ($imageNodes as $imgNode) { $src = $imgNode->getAttribute("\x73\x72\x63"); $alt = $imgNode->getAttribute("\141\154\x74"); $title = $imgNode->getAttribute("\x74\x69\x74\x6c\x65"); $imageFilename = "\161" . $questionData["\151\x64"] . "\x5f" . md5($src) . "\56" . pathinfo(parse_url($src, PHP_URL_PATH), PATHINFO_EXTENSION); if (empty($imageFilename) || !strpos($imageFilename, "\x2e")) { $imageFilename = "\x71" . $questionData["\151\144"] . "\x5f" . md5($src) . "\56\x6a\x70\x67"; } if (empty($alt) && !empty($title)) { $alt = $title; } if (empty($alt)) { $alt = "\x67\141\x6d\142\141\162\x5f\x70\x65\162\164\x61\x6e\171\x61\x61\x6e\x5f" . $questionData["\156\165\x6d\142\x65\162"]; } $questionData["\x69\155\141\x67\x65\163"][] = array("\x73\x72\143" => $src, "\141\x6c\x74" => $alt, "\x66\x69\154\145\156\141\x6d\145" => $imageFilename, "\x6f\x72\x69\x67\x69\x6e\141\x6c\x5f\x6e\x61\x6d\145" => basename(parse_url($src, PHP_URL_PATH)), "\x71\165\145\x73\x74\x69\157\x6e\137\151\x64" => $questionData["\151\x64"], "\x71\165\145\x73\x74\x69\x6f\156\x5f\x6e\x75\x6d\x62\145\162" => $questionData["\156\x75\x6d\142\x65\x72"]); } $stateNodes = $xpath->query("\56\57\x2f\x64\x69\166\x5b\100\x63\x6c\x61\163\163\75\47\163\x74\x61\x74\x65\x27\135", $questionNode); if ($stateNodes->length > 0) { $questionData["\x73\x74\141\x74\x65"] = trim($stateNodes->item(0)->nodeValue); $questionData["\141\x6e\163\167\145\162\137\x73\x61\166\145\x64"] = stripos($questionData["\x73\164\141\164\x65"], "\163\141\166\145\x64") !== false || stripos($questionData["\163\164\x61\164\x65"], "\x61\156\x73\167\145\x72\x65\x64") !== false; } $gradeNodes = $xpath->query("\x2e\x2f\57\x64\151\166\133\x40\x63\x6c\x61\x73\x73\x3d\x27\x67\162\141\x64\145\47\135", $questionNode); if ($gradeNodes->length > 0) { $questionData["\x67\162\141\x64\x65"] = trim($gradeNodes->item(0)->nodeValue); } switch ($questionData["\x74\x79\x70\145"]) { case "\164\162\165\145\146\x61\x6c\163\x65": extractTrueFalseAnswers($questionNode, $xpath, $questionData); break; case "\x6d\x75\x6c\x74\151\143\150\157\x69\143\x65": extractMultichoiceAnswers($questionNode, $xpath, $questionData); break; case "\155\x61\x74\143\x68": extractMatchAnswers($questionNode, $xpath, $questionData); break; case "\145\x73\x73\x61\171": case "\163\x68\x6f\162\164\141\156\163\167\x65\162": extractTextAnswers($questionNode, $xpath, $questionData); break; default: extractAllAnswerTypes($questionNode, $xpath, $questionData); break; } $questions[] = $questionData; $questionCounter++; } libxml_clear_errors(); return $questions; } goto jqBs6; D3MDL: function downloadQuestionImages($questions, $downloadDir, $ua) { global $h, $m, $p, $k; $imagesDir = $downloadDir . "\x2f\151\155\x61\147\145\163"; if (!file_exists($imagesDir)) { mkdir($imagesDir, 511, true); } $filename = basename($questions[0]["\x73\157\x75\x72\x63\145\x5f\146\151\154\145"] ?? "\x75\x6e\x6b\x6e\x6f\x77\156"); $pageDir = $imagesDir . "\57" . str_replace("\x2e\150\164\x6d\x6c", '', $filename); if (!file_exists($pageDir)) { mkdir($pageDir, 511, true); } $downloadedImages = array(); foreach ($questions as &$question) { if (!empty($question["\x69\155\x61\147\145\x73"])) { $questionDir = $pageDir . "\57\x71" . $question["\x69\x64"]; if (count($question["\x69\155\x61\x67\145\163"]) > 0 && !file_exists($questionDir)) { mkdir($questionDir, 511, true); } foreach ($question["\151\x6d\141\147\x65\x73"] as $imgIdx => &$image) { $src = $image["\163\162\x63"]; $urlPath = parse_url($src, PHP_URL_PATH); $extension = ''; if ($urlPath) { $extension = pathinfo($urlPath, PATHINFO_EXTENSION); if (strpos($extension, "\x3f") !== false) { $extension = substr($extension, 0, strpos($extension, "\77")); } if (strpos($extension, "\43") !== false) { $extension = substr($extension, 0, strpos($extension, "\43")); } } $validExtensions = array("\152\x70\147", "\x6a\x70\x65\147", "\160\x6e\147", "\147\x69\146", "\142\155\x70", "\x77\x65\x62\x70", "\x73\166\147"); if (!empty($extension) && in_array(strtolower($extension), $validExtensions)) { $cleanExtension = strtolower($extension); } else { $cleanExtension = "\x6a\160\x67"; } $imageFilename = sprintf("\161\x25\163\137\x69\155\147\x25\144\137\x25\x73\x2e\45\163", $question["\151\x64"], $imgIdx + 1, substr(md5($src), 0, 8), $cleanExtension); $image["\x66\151\154\145\x6e\141\x6d\x65"] = $imageFilename; $savePath = $questionDir . "\57" . $imageFilename; if (file_exists($savePath)) { $image["\x64\x6f\x77\x6e\154\157\141\x64\145\144"] = true; $image["\154\x6f\143\141\x6c\137\x70\141\164\150"] = $savePath; $image["\x73\x69\x7a\x65"] = filesize($savePath); $image["\x71\x75\x65\163\x74\151\157\156\137\x69\144"] = $question["\x69\144"]; $image["\x71\165\x65\x73\x74\151\157\156\137\156\165\x6d\142\145\162"] = $question["\x6e\x75\155\142\145\x72"]; $image["\x73\x6f\x75\162\x63\x65\x5f\146\x69\x6c\145"] = $filename; $downloadedImages[] = $image; echo "{$h}\x20\x20\342\234\223\x20\107\x61\x6d\142\141\162\x20\163\x75\x64\141\x68\40\141\x64\x61\40\165\x6e\x74\x75\x6b\40\x51{$question["\156\165\155\x62\145\x72"]}\72\40{$imageFilename}{$p}\xa"; continue; } echo "{$k}\40\40\x44\157\167\x6e\154\x6f\x61\144\x20\x67\x61\155\142\x61\x72\x20\165\156\x74\165\153\x20\x51{$question["\156\x75\x6d\x62\145\162"]}\40\x28\111\x44\72\x20{$question["\x69\x64"]}\51\x2e\56\x2e{$p}"; echo "{$p}\40\40\x46\151\x6c\145\72\x20{$imageFilename}{$p}\xa"; $size = downloadImage($src, $savePath, $ua); if ($size > 0) { echo "{$h}\40\x20\342\x9c\223\x20\102\x65\162\x68\x61\x73\151\x6c\x20\x28{$size}\40\142\x79\x74\145\x73\51{$p}\12"; $image["\144\x6f\167\x6e\x6c\x6f\x61\144\145\x64"] = true; $image["\154\x6f\143\141\154\137\x70\x61\x74\150"] = $savePath; $image["\163\x69\x7a\x65"] = $size; $image["\161\165\x65\163\164\x69\x6f\x6e\x5f\x69\144"] = $question["\x69\144"]; $image["\x71\165\x65\163\x74\x69\157\156\137\156\165\155\142\145\162"] = $question["\x6e\x75\x6d\142\145\x72"]; $image["\x73\x6f\x75\162\143\145\137\146\151\x6c\x65"] = $filename; $image["\146\151\x6c\x65\156\x61\155\x65\137\160\141\164\164\x65\162\x6e"] = "\161{$question["\x69\x64"]}\x5f\151\155\147" . ($imgIdx + 1); $downloadedImages[] = $image; } else { echo "{$m}\40\40\342\234\227\40\107\141\x67\141\154\x20\144\x6f\167\156\x6c\x6f\x61\144\x20\x64\141\162\x69\x3a\40" . substr($src, 0, 50) . "\x2e\x2e\56{$p}\12"; $image["\144\157\x77\156\154\157\x61\144\145\x64"] = false; if (!filter_var($src, FILTER_VALIDATE_URL)) { $fullUrl = "\150\x74\x74\x70\163\72\x2f\x2f\x65\x6c\x65\x61\162\x6e\151\156\147\x2e\163\155\x6b\x32\55\171\x6b\56\x73\x63\150\x2e\151\x64" . (strpos($src, "\57") === 0 ? '' : "\x2f") . $src; echo "{$k}\x20\x20\40\40\x4d\x65\x6e\143\157\x62\141\40\x55\122\114\x20\154\x65\x6e\147\x6b\x61\160\x3a\40" . substr($fullUrl, 0, 60) . "\x2e\56\x2e{$p}\12"; $size = downloadImage($fullUrl, $savePath, $ua); if ($size > 0) { echo "{$h}\40\x20\40\40\342\234\223\x20\x42\x65\162\150\x61\x73\x69\154\x20\x64\x65\x6e\x67\141\156\x20\125\x52\114\x20\154\145\x6e\147\153\141\160\x20\x28{$size}\40\x62\171\x74\x65\x73\x29{$p}\12"; $image["\x64\x6f\167\156\x6c\157\141\x64\x65\144"] = true; $image["\154\157\143\141\x6c\137\160\141\164\x68"] = $savePath; $image["\163\151\x7a\145"] = $size; $image["\x73\x72\x63"] = $fullUrl; $image["\x71\x75\x65\163\164\151\x6f\x6e\137\x69\x64"] = $question["\151\144"]; $image["\x71\165\145\163\x74\x69\x6f\156\137\156\x75\155\142\145\162"] = $question["\156\x75\155\142\x65\x72"]; $image["\163\x6f\x75\x72\x63\x65\137\146\x69\154\x65"] = $filename; $image["\146\151\x6c\145\156\141\155\x65\137\x70\141\164\164\145\x72\156"] = "\x71{$question["\151\x64"]}\x5f\x69\155\x67" . ($imgIdx + 1); $downloadedImages[] = $image; } else { echo "{$m}\40\x20\x20\x20\xe2\x9c\x97\x20\x54\145\x74\141\160\x20\x67\141\147\x61\x6c\40\144\145\x6e\147\141\156\x20\x55\x52\x4c\40\154\x65\x6e\147\x6b\141\160{$p}\xa"; } } } usleep(300000); } echo "{$h}\40\40\xe2\234\223\x20\123\145\x6c\145\163\x61\x69\40\155\145\155\160\162\x6f\x73\x65\x73\x20\147\141\155\142\x61\x72\x20\x75\x6e\x74\x75\153\x20\x51{$question["\156\165\155\x62\145\162"]}\x20\50{$p}" . count($question["\x69\x6d\x61\x67\x65\x73"]) . "{$h}\x20\x67\141\155\x62\x61\x72\51{$p}\12"; } else { echo "{$k}\40\x20\xe2\x84\xb9\xef\270\x8f\40\x20\121{$question["\156\x75\155\x62\145\x72"]}\40\164\151\x64\141\153\x20\155\145\155\151\154\x69\153\x69\40\x67\x61\155\x62\x61\162{$p}\xa"; } } $successCount = 0; $failCount = 0; foreach ($downloadedImages as $img) { if ($img["\144\x6f\167\x6e\x6c\157\141\x64\145\x64"] ?? false) { $successCount++; } else { $failCount++; } } echo "\12{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\xa"; echo "{$h}\x52\x49\116\107\x4b\x41\123\x41\116\x20\x44\x4f\127\116\x4c\x4f\101\x44\40\x47\x41\115\102\x41\122{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; echo "{$h}\124\x6f\164\141\x6c\x20\x67\141\x6d\x62\x61\x72\40\144\x69\160\x72\157\x73\x65\x73\72\x20" . count($downloadedImages) . "{$p}\xa"; echo "{$h}\x42\145\x72\x68\141\x73\151\154\x20\x64\x69\144\x6f\167\x6e\x6c\157\x61\144\x3a\40{$successCount}{$p}\12"; echo "{$m}\107\x61\147\x61\x6c\40\x64\x69\144\x6f\167\x6e\154\x6f\141\144\72\40{$failCount}{$p}\12"; echo "{$k}\104\x69\x73\x69\x6d\160\141\156\40\144\151\x3a\40{$pageDir}{$p}\12"; $mappingFile = $imagesDir . "\x2f\151\155\x61\x67\x65\x5f\x6d\141\x70\x70\x69\156\x67\137" . str_replace("\x2e\x68\x74\x6d\x6c", '', $filename) . "\56\152\x73\x6f\156"; $mappingData = array("\x73\x6f\x75\162\x63\x65\x5f\146\151\154\x65" => $filename, "\144\x6f\x77\x6e\154\157\141\x64\137\144\141\164\145" => date("\x59\x2d\155\55\x64\x20\x48\72\x69\72\x73"), "\x74\157\164\141\154\137\161\165\x65\x73\x74\151\157\156\x73" => count($questions), "\x71\x75\x65\163\164\x69\x6f\156\163\x5f\x77\x69\164\150\x5f\151\155\141\x67\x65\163" => count(array_filter($questions, function ($q) { return !empty($q["\x69\155\141\x67\x65\163"]); })), "\151\155\141\x67\145\163" => $downloadedImages); file_put_contents($mappingFile, json_encode($mappingData, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE)); echo "{$h}\342\x9c\223\x20\x4d\141\x70\x70\x69\156\x67\x20\x67\141\155\x62\141\x72\40\144\x69\163\151\155\160\x61\156\x20\153\145\72\40" . basename($mappingFile) . "{$p}\12"; return array("\144\x6f\167\x6e\x6c\157\141\x64\145\x64\x5f\151\155\141\x67\x65\163" => $downloadedImages, "\151\x6d\141\x67\x65\163\x5f\144\151\162" => $imagesDir, "\160\x61\x67\x65\x5f\x64\x69\x72" => $pageDir, "\163\x75\143\x63\145\163\x73\x5f\x63\x6f\165\x6e\164" => $successCount, "\146\141\151\154\137\x63\157\165\x6e\x74" => $failCount, "\x6d\141\160\160\x69\x6e\x67\137\x66\x69\x6c\145" => $mappingFile); } goto T_yfc; N8Qg9: $u = "\33\x5b\61\x3b\71\65\155"; goto klHaP; ggGV0: $GLOBALS["\151\x6d\x61\x67\x65\x4d\141\160\x70\151\x6e\x67\x43\x61\143\x68\145"] = array(); goto hC3EL; TB9TS: function extractAndDownloadAllQuestions($downloadDir, $allFiles, $ua) { global $h, $m, $p, $k, $u, $bta; clearImageMappingCache(); $allQuestions = array(); $totalQuestions = 0; $allDownloadedImages = array(); echo "\12{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\12"; echo "{$h}\105\x4b\123\124\122\x41\x4b\123\x49\x20\x50\105\x52\124\x41\116\131\x41\101\116\x20\x44\x41\x4e\40\104\x4f\x57\x4e\114\117\x41\x44\x20\x47\x41\115\102\x41\x52{$p}\xa"; echo "{$h}\x44\145\x6e\147\x61\x6e\x20\x6f\x72\x67\141\x6e\x69\x73\x61\x73\x69\40\146\x6f\x6c\144\145\x72\x20\142\x65\x72\x64\141\163\141\x72\x6b\141\x6e\x20\160\145\x72\164\141\156\x79\x61\141\156{$p}\12"; echo "{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\xa"; $attemptFiles = array(); foreach ($allFiles as $filename => $path) { if (preg_match("\57\x5e\153\145\x72\x6a\141\134\144\53\x5c\56\x68\164\x6d\154\44\x2f", $filename)) { $attemptFiles[$filename] = $path; } } if (empty($attemptFiles)) { echo "{$m}\x54\151\144\141\153\x20\144\x69\164\145\x6d\x75\x6b\x61\156\40\146\x69\x6c\x65\40\x61\164\164\x65\155\x70\164\40\110\124\115\114\x20\165\x6e\164\x75\153\40\144\x69\145\x6b\x73\x74\162\141\153\x21{$p}\12"; return array("\161\165\x65\x73\x74\151\157\156\163" => array(), "\151\x6d\x61\x67\145\x73" => array(), "\151\x6d\x61\147\145\163\137\144\151\x72" => ''); } echo "{$k}\x44\151\164\x65\x6d\165\x6b\141\x6e\40" . count($attemptFiles) . "\40\146\151\x6c\145\x20\141\x74\164\x65\155\160\164\x20\x48\124\x4d\114\56{$p}\12"; foreach ($attemptFiles as $filename => $filepath) { echo "\12{$u}" . str_repeat("\x2d", 60) . "{$p}\xa"; echo "{$h}\115\x65\155\160\x72\157\163\x65\163\40\x66\151\154\x65\72\x20{$filename}{$p}\xa"; echo "{$u}" . str_repeat("\55", 60) . "{$p}\12"; $htmlContent = file_get_contents($filepath); $questions = extractQuestionsAndAnswers($htmlContent, $filename); echo "{$h}\342\x9c\x93\x20\104\151\164\145\155\x75\153\x61\x6e\40" . count($questions) . "\40\160\145\x72\164\x61\156\171\x61\x61\x6e{$p}\12"; $downloadResult = downloadQuestionImages($questions, $downloadDir, $ua); $allDownloadedImages = array_merge($allDownloadedImages, $downloadResult["\144\x6f\167\156\154\x6f\x61\144\145\144\137\x69\155\x61\147\145\163"]); $allQuestions[$filename] = $questions; $totalQuestions += count($questions); } $jsonPath = $downloadDir . "\57\161\x75\145\x73\x74\151\x6f\x6e\x73\137\145\x78\x74\x72\141\x63\164\x65\x64\56\x6a\x73\157\156"; file_put_contents($jsonPath, json_encode($allQuestions, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES)); $imagesJsonPath = $downloadDir . "\57\x64\157\167\156\154\x6f\141\x64\x65\x64\x5f\x69\x6d\x61\x67\x65\x73\x2e\152\163\157\156"; file_put_contents($imagesJsonPath, json_encode($allDownloadedImages, JSON_PRETTY_PRINT)); echo "\xa{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\xa"; echo "{$h}\105\113\x53\x54\x52\x41\x4b\x53\111\40\104\x41\116\x20\104\x4f\127\x4e\x4c\117\x41\104\x20\123\105\x4c\x45\x53\x41\111\41{$p}\xa"; echo "{$h}\124\157\x74\141\x6c\x20\x70\145\162\x74\x61\x6e\x79\141\141\156\x20\x64\141\x72\151\40\163\145\x6d\165\x61\x20\146\151\154\x65\72\40{$totalQuestions}{$p}\xa"; echo "{$h}\124\x6f\x74\141\x6c\x20\147\x61\155\142\141\162\x20\144\151\144\157\167\156\x6c\157\x61\144\72\x20" . count($allDownloadedImages) . "{$p}\12"; echo "{$h}\x48\x61\163\151\x6c\x20\112\123\117\x4e\x20\x64\151\163\151\155\160\141\156\x20\x6b\145\72\40{$jsonPath}{$p}\xa"; echo "{$h}\x49\156\146\157\x20\147\x61\x6d\x62\141\162\x20\144\x69\x73\151\x6d\160\141\156\x20\153\145\x3a\40{$imagesJsonPath}{$p}\12"; echo "{$h}\x47\x61\x6d\142\141\162\x20\x64\151\163\x69\x6d\160\x61\156\x20\144\x69\72\40{$downloadDir}\x2f\151\x6d\x61\147\145\x73\57{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\xa"; if (count($allDownloadedImages) > 0) { echo "{$k}\12\x53\164\162\x75\153\164\165\x72\x20\x66\157\x6c\144\145\x72\40\147\x61\x6d\x62\141\162\72{$p}\xa"; echo "{$ab}\144\x6f\167\156\x6c\x6f\141\144\x2f\151\x6d\x61\x67\x65\x73\x2f{$p}\12"; echo "{$ab}\xe2\x94\234\342\224\200\xe2\224\200\x20\133\x6e\x61\155\x61\137\x66\151\x6c\145\137\164\x61\x6e\x70\141\137\145\x6b\163\x74\145\x6e\x73\151\135\57{$p}\xa"; echo "{$ab}\342\224\202\x20\40\40\342\224\x9c\xe2\224\x80\xe2\224\x80\40\x71\x5b\x71\x75\145\163\x74\x69\157\x6e\x5f\x69\x64\x5d\x2f{$p}\12"; echo "{$ab}\xe2\x94\x82\40\40\x20\xe2\x94\x82\x20\40\x20\xe2\x94\x94\342\224\200\xe2\224\200\40\133\156\x61\155\141\x5f\x66\x69\x6c\x65\x5f\147\x61\x6d\142\141\x72\135{$p}\12"; echo "{$ab}\xe2\x94\202\40\x20\x20\xe2\224\x94\342\224\200\342\x94\200\40\x71\x5b\x71\165\x65\x73\x74\151\157\x6e\137\151\144\x5d\x2f{$p}\xa"; echo "{$ab}\342\224\202\x20\x20\40\40\x20\40\x20\342\x94\x94\342\x94\x80\xe2\224\200\x20\133\x6e\x61\155\141\137\x66\151\x6c\145\137\x67\141\155\142\141\x72\135{$p}\xa"; echo "{$ab}\xe2\x94\x94\342\224\x80\342\x94\200\40\x2e\56\56{$p}\12"; } if (count($allDownloadedImages) > 0) { echo "\xa{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\xa"; echo "{$h}\120\x45\116\107\125\x4d\120\125\114\x41\116\40\123\x45\x4d\x55\x41\40\107\x41\x4d\x42\101\x52{$p}\xa"; echo "{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\xa"; $collectionResult = collectAllImagesToSingleFolder($allDownloadedImages, $downloadDir); echo "\xa{$k}\111\156\147\151\156\x20\155\145\x6d\x62\165\141\x74\40\146\151\x6c\x65\40\x5a\111\x50\x20\144\141\x72\151\x20\x73\x65\155\x75\x61\x20\x67\x61\155\x62\141\162\77\x20\50\x79\57\x6e\54\x20\144\145\146\x61\x75\x6c\164\x3a\40\171\x29\72\x20{$p}"; $createZip = trim(fgets(STDIN)); $createZip = strtolower($createZip) === "\x6e" ? false : true; $zipResult = null; if ($createZip) { $zipResult = createImagesZip($allDownloadedImages, $downloadDir); } echo "\12{$k}\115\x65\155\142\165\x61\164\x20\154\x61\160\x6f\x72\141\x6e\40\x67\141\155\142\141\x72\56\x2e\56{$p}\12"; $reportPath = createImagesReport($allDownloadedImages, $downloadDir); echo "\xa{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\xa"; echo "{$h}\x52\x49\x4e\107\113\101\x53\x41\116\40\120\105\116\107\125\115\x50\125\114\101\116\x20\x47\101\x4d\x42\x41\122{$p}\12"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\12"; echo "{$h}\xe2\x9c\223\40\123\x65\155\x75\141\x20\x67\141\155\142\141\162\40\x74\145\x6c\x61\x68\x20\144\151\x6b\165\155\x70\165\x6c\153\x61\x6e\40\144\x69\x3a\x20{$collectionResult["\x61\x6c\x6c\x5f\151\x6d\141\147\x65\x73\137\144\151\x72"]}{$p}\xa"; echo "{$h}\342\x9c\223\x20\107\141\x6c\x6c\x65\162\x79\x20\110\x54\115\114\72\40{$collectionResult["\141\x6c\154\137\x69\155\141\147\145\163\137\144\x69\x72"]}\57\151\x6e\x64\145\x78\56\x68\x74\x6d\154{$p}\xa"; if ($zipResult) { echo "{$h}\342\234\x93\40\106\151\x6c\x65\40\x5a\x49\x50\x3a\x20{$zipResult["\x7a\151\160\137\160\141\164\150"]}\x20\50{$zipResult["\x66\x69\x6c\145\x5f\x63\157\165\x6e\x74"]}\40\x66\151\x6c\x65\x73\51{$p}\12"; } echo "{$h}\342\x9c\x93\x20\114\141\160\x6f\x72\141\156\x3a\40{$reportPath}{$p}\xa"; echo "{$h}\342\234\223\x20\102\x65\162\150\141\x73\x69\x6c\x20\155\145\156\x67\x75\x6d\160\165\x6c\153\x61\156\72\x20{$collectionResult["\x73\x75\x63\x63\145\x73\163\137\143\x6f\165\x6e\x74"]}\40\x67\141\155\142\x61\162{$p}\xa"; echo "{$h}\xe2\234\223\40\107\141\x67\141\154\x20\155\145\156\x67\165\155\160\165\154\153\141\x6e\72\40{$collectionResult["\x66\141\151\x6c\137\x63\157\x75\156\x74"]}\x20\x67\x61\155\142\141\162{$p}\12"; } return array("\161\x75\145\163\x74\151\157\x6e\x73" => $allQuestions, "\151\x6d\x61\x67\x65\x73" => $allDownloadedImages, "\151\x6d\x61\x67\x65\x73\x5f\144\x69\162" => $downloadDir . "\57\151\x6d\141\147\145\163", "\141\154\x6c\x5f\151\155\141\147\145\163\137\144\151\162" => isset($collectionResult) ? $collectionResult["\x61\154\x6c\x5f\x69\155\x61\147\145\x73\137\x64\x69\x72"] : null); } goto yk3ac; ShqoF: function formatChoiceAnswersForText($question) { $output = "\120\x49\114\111\x48\101\116\x20\x4a\101\127\101\102\101\x4e\x3a\xa"; $output .= str_repeat("\x2d", 40) . "\12"; if ($question["\x74\x79\x70\145"] === "\155\165\154\164\x69\x63\x68\x6f\151\x63\145") { $typeLabel = isset($question["\151\163\x5f\155\165\x6c\164\151\160\x6c\x65\137\141\x6e\x73\x77\145\x72"]) && $question["\x69\x73\x5f\x6d\x75\154\164\x69\x70\x6c\x65\137\141\156\x73\167\145\162"] ? "\x4d\x55\x4c\124\x49\120\x4c\105\x20\103\x48\117\111\x43\105\x20\x28\142\151\163\x61\x20\154\145\142\151\150\40\144\141\x72\x69\40\163\x61\x74\x75\51" : "\x53\x49\116\107\114\x45\x20\103\110\x4f\x49\103\x45\x20\50\x68\141\x6e\171\141\40\x73\141\x74\165\x20\152\x61\167\141\142\141\x6e\x29"; $output .= "\124\x69\x70\x65\72\x20{$typeLabel}\xa"; $output .= str_repeat("\55", 20) . "\xa"; } foreach ($question["\x61\156\x73\x77\x65\x72\163"] as $answer) { $symbol = ''; if ($question["\164\171\160\x65"] === "\155\x75\154\164\x69\x63\150\x6f\x69\x63\x65") { if (isset($answer["\151\163\x5f\143\x6f\162\162\145\143\x74"]) && $answer["\151\163\x5f\x63\157\162\162\145\x63\x74"]) { if (isset($question["\151\x73\x5f\155\165\154\x74\151\160\x6c\x65\x5f\141\x6e\163\x77\x65\x72"]) && $question["\x69\163\137\155\165\154\x74\x69\x70\154\145\137\x61\x6e\x73\x77\145\162"]) { $symbol = "\x5b\342\234\223\x5d"; } else { $symbol = "\x5b\xe2\230\x85\x5d"; } } else { if (isset($answer["\x63\x68\x6f\x69\143\x65\137\x74\x79\x70\x65"]) && $answer["\x63\x68\x6f\x69\x63\x65\x5f\x74\x79\x70\x65"] === "\143\150\145\143\x6b\x62\157\170") { $symbol = "\133\x20\135"; } else { $symbol = "\133\342\x97\213\x5d"; } } } else { $symbol = $answer["\151\163\x5f\x63\157\162\x72\x65\143\x74"] ? "\133\xe2\x9c\223\x5d" : "\x5b\40\135"; } $answerText = strip_tags($answer["\x74\x65\170\164"]); $answerText = html_entity_decode($answerText, ENT_QUOTES | ENT_HTML5, "\x55\x54\x46\x2d\70"); $output .= sprintf("\45\163\x20\x25\x73\56\40\45\163\12", $symbol, $answer["\154\145\x74\164\145\162"], $answerText); if (isset($answer["\x69\156\x70\x75\x74\x5f\156\x61\155\x65"])) { $output .= sprintf("\x20\40\40\x20\x5b\x6e\x61\x6d\x65\x3a\40\45\x73\54\x20\166\141\x6c\x75\x65\x3a\x20\45\x73\x2c\x20\x74\171\160\145\72\40\x25\x73\135\xa", $answer["\151\156\x70\x75\164\137\x6e\x61\155\145"], $answer["\x76\x61\154\x75\x65"], $answer["\164\171\160\x65"] ?? "\x75\x6e\153\x6e\x6f\x77\156"); } } if ($question["\143\x6f\x72\x72\145\x63\x74\x5f\x61\x6e\163\167\x65\162"]) { $output .= "\xa\x4a\x41\x57\101\x42\x41\x4e\x20\x42\x45\x4e\101\x52\72\40"; if (is_array($question["\143\157\162\x72\x65\143\164\137\x61\x6e\x73\x77\x65\x72"])) { if (isset($question["\x63\x6f\x72\x72\145\x63\x74\137\141\156\x73\167\145\x72"][0]["\x71\x75\145\163\164\151\x6f\x6e"])) { foreach ($question["\x63\x6f\162\x72\x65\x63\164\137\x61\x6e\163\167\x65\x72"] as $correct) { $output .= sprintf("\x25\163\x20\xe2\x86\x92\40\x25\163\x2c\40", $correct["\x71\165\145\x73\x74\x69\x6f\156"], $correct["\141\x6e\163\167\x65\162"]); } } else { $output .= implode("\x2c\40", $question["\x63\x6f\162\x72\x65\143\164\x5f\141\156\x73\x77\x65\x72"]); if ($question["\164\171\160\145"] === "\155\165\x6c\x74\x69\143\150\157\151\143\145" && isset($question["\x69\163\x5f\155\x75\154\164\x69\160\x6c\145\x5f\141\x6e\x73\167\145\x72"]) && $question["\x69\x73\137\155\165\154\164\x69\160\154\x65\137\x61\x6e\x73\x77\145\x72"]) { $output .= "\x20\50\155\165\154\164\x69\x70\154\145\x20\x63\150\x6f\x69\x63\145\x29"; } } } else { $output .= $question["\143\157\x72\162\145\143\164\137\x61\156\x73\167\x65\162"]; if ($question["\164\x79\x70\x65"] === "\155\165\154\164\151\x63\150\x6f\x69\143\x65") { $output .= "\40\50\163\x69\x6e\x67\154\x65\x20\143\150\157\x69\x63\x65\51"; } } $output .= "\12"; } $output .= "\xa"; return $output; } goto rkoib; klHaP: $bta = "\33\133\x31\73\71\66\x6d"; goto DPpe0; Yb7PS: error_reporting(0); goto BN32U; qvjHh: function normalizeAnswerFormat($answers) { $lines = explode("\12", $answers); $normalizedLines = array(); $currentNumber = null; $isMatchingBlock = false; $matchingLines = array(); foreach ($lines as $line) { $trimmedLine = trim($line); if (empty($trimmedLine)) { if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\40\40\x20" . $matchingLines[$i]; } $matchingLines = array(); $isMatchingBlock = false; } $normalizedLines[] = ''; continue; } if (preg_match("\57\x5e\50\x5c\x64\x2b\x29\134\x2e\x5c\x73\x2b\50\133\101\x2d\132\135\x29\x5c\x2e\57", $trimmedLine, $matches)) { $currentNumber = $matches[1]; if (strpos($trimmedLine, "\342\206\x92") !== false) { $isMatchingBlock = true; $matchingLines = array($trimmedLine); } else { if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\40\40\40" . $matchingLines[$i]; } $matchingLines = array(); } $isMatchingBlock = false; $normalizedLines[] = $trimmedLine; } } elseif ($isMatchingBlock && preg_match("\x2f\136\50\x5b\101\55\132\135\x29\134\56\x5c\163\53\56\x2b\xe2\x86\222\x2f", $trimmedLine)) { $matchingLines[] = $trimmedLine; } elseif (preg_match("\57\x5e\x28\134\x64\53\x29\134\56\x5c\x73\53\x28\133\x41\x2d\132\135\x29\x5c\56\134\x73\53\x2e\53\342\x86\x92\x2f", $trimmedLine, $matches)) { $lineNumber = $matches[1]; if ($lineNumber == $currentNumber && $isMatchingBlock) { $fixedLine = preg_replace("\x2f\x5e\x5c\144\x2b\134\x2e\x5c\163\x2b\57", '', $trimmedLine); $matchingLines[] = $fixedLine; } else { $currentNumber = $lineNumber; if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\x20\x20\x20" . $matchingLines[$i]; } $matchingLines = array(); } $isMatchingBlock = true; $matchingLines = array($trimmedLine); } } else { if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\40\40\x20" . $matchingLines[$i]; } $matchingLines = array(); $isMatchingBlock = false; } $normalizedLines[] = $trimmedLine; } } if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\x20\x20\x20" . $matchingLines[$i]; } } return implode("\12", $normalizedLines); } goto QfypL; DPpe0: $p = "\x1b\x5b\x31\73\71\67\x6d"; goto mfWkA; qj_Nj: $k = "\33\133\x31\73\x39\x33\x6d"; goto RsaUJ; CkY1e: function extractUsernameFromDashboard($dashboardContent) { global $m, $h, $p, $k; if (empty($dashboardContent)) { return "\125\156\153\x6e\157\x77\x6e\40\x55\x73\145\x72"; } libxml_use_internal_errors(true); $dom = new DOMDocument(); @$dom->loadHTML(mb_convert_encoding($dashboardContent, "\x48\x54\x4d\x4c\x2d\105\x4e\x54\x49\x54\111\x45\x53", "\x55\x54\106\55\x38")); $xpath = new DOMXPath($dom); $username = ''; $userElements = $xpath->query("\57\57\163\160\141\x6e\133\x63\x6f\x6e\x74\x61\151\x6e\163\x28\100\x63\154\x61\x73\163\54\40\x27\x75\x73\145\x72\x69\x6e\151\x74\x69\x61\x6c\163\x27\51\x5d"); if ($userElements->length > 0) { foreach ($userElements as $element) { $title = $element->getAttribute("\164\x69\x74\154\x65"); if (!empty($title)) { $username = trim($title); break; } $ariaLabel = $element->getAttribute("\141\x72\151\x61\x2d\154\x61\x62\145\154"); if (!empty($ariaLabel)) { $username = trim($ariaLabel); break; } $text = trim($element->nodeValue); if (!empty($text) && strlen($text) <= 5) { $parent = $element->parentNode; if ($parent) { $parentTitle = $parent->getAttribute("\164\151\x74\x6c\x65"); if (!empty($parentTitle)) { $username = trim($parentTitle); break; } } } } } if (empty($username)) { $dropdownElements = $xpath->query("\x2f\57\141\x5b\x40\151\x64\75\47\x75\163\x65\x72\x2d\x6d\145\156\165\x2d\x74\157\147\147\x6c\x65\x27\x5d"); if ($dropdownElements->length > 0) { $dropdown = $dropdownElements->item(0); $spans = $xpath->query("\56\57\x2f\163\x70\x61\x6e", $dropdown); foreach ($spans as $span) { $title = $span->getAttribute("\x74\x69\164\154\145"); if (!empty($title) && strlen($title) > 10) { $username = trim($title); break; } $ariaLabel = $span->getAttribute("\141\x72\151\x61\55\154\141\142\x65\x6c"); if (!empty($ariaLabel) && strlen($ariaLabel) > 10) { $username = trim($ariaLabel); break; } } } } if (empty($username)) { $userButtons = $xpath->query("\x2f\x2f\x73\160\x61\156\x5b\143\x6f\156\x74\x61\151\156\x73\x28\100\143\154\141\x73\x73\x2c\40\47\165\163\x65\x72\142\x75\164\x74\157\156\47\x29\135"); foreach ($userButtons as $button) { $title = $button->getAttribute("\164\151\164\154\x65"); $ariaLabel = $button->getAttribute("\141\x72\151\141\x2d\x6c\141\x62\145\154"); if (!empty($title) && strlen($title) > 10) { $username = trim($title); break; } if (!empty($ariaLabel) && strlen($ariaLabel) > 10) { $username = trim($ariaLabel); break; } $childSpans = $xpath->query("\56\x2f\57\x73\160\x61\156", $button); foreach ($childSpan as $child) { $childTitle = $child->getAttribute("\x74\x69\164\x6c\x65"); if (!empty($childTitle) && strlen($childTitle) > 10) { $username = trim($childTitle); break 2; } } } } if (empty($username)) { $fullHtml = $dom->saveHTML(); if (preg_match("\57\133\x41\55\132\135\x5b\101\x2d\132\134\x73\135\x2b\133\x41\x2d\132\x5d\x2b\x5c\x64\x2b\x5f\x5c\x64\x2b\57", $fullHtml, $matches)) { $username = trim($matches[0]); } elseif (preg_match("\57\x5b\x41\x2d\132\135\x5b\x61\55\x7a\x5d\53\x20\133\x41\x2d\132\x5d\133\141\x2d\x7a\135\x2b\40\133\101\x2d\132\x5d\133\x61\x2d\172\x5d\53\x2f", $fullHtml, $matches)) { $username = trim($matches[0]); } elseif (preg_match("\x2f\164\x69\x74\x6c\145\75\42\x28\x5b\x5e\42\135\x7b\x31\x35\x2c\175\51\x22\57", $fullHtml, $matches)) { $username = trim($matches[1]); } elseif (preg_match("\x2f\x61\x72\151\x61\55\x6c\x61\142\x65\154\75\42\x28\133\x5e\x22\135\x7b\x31\65\54\x7d\51\42\57", $fullHtml, $matches)) { $username = trim($matches[1]); } } if (!empty($username)) { $username = html_entity_decode($username, ENT_QUOTES | ENT_HTML5, "\x55\x54\x46\55\70"); $username = preg_replace("\x2f\134\163\x2b\57", "\40", $username); $username = preg_replace("\57\x5c\x73\52\x73\x69\172\x65\x2d\x5c\x64\53\57\151", '', $username); $username = preg_replace("\x2f\136\134\x73\x2a\x5b\101\55\132\135\173\x31\x2c\65\x7d\134\163\x2a\44\x2f\151", '', $username); if (strlen($username) < 5) { $username = ''; } } if (empty($username)) { $username = "\125\156\153\156\157\x77\x6e\40\125\x73\145\x72"; } return $username; } goto Vmnm_; mfWkA: function post($link, $data, $ua) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $link); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_HTTPHEADER, $ua); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_POSTFIELDS, $data); return curl_exec($ch); } goto PeD4D; CbEM_: function g() { global $u, $p; return "{$u}\x5f\x5f\x5f\x5f\137\137\x5f\137\137\137\137\x5f\137\x5f\x5f\137\x5f\137\x5f\137\x5f\137\x5f\x5f\x5f\137\x5f\137\137\137\x5f\x5f\x5f\137\x5f\x5f\x5f\137\137\x5f\x5f\x5f\137\x5f\x5f\x5f\x5f\x5f\x5f\x5f\12{$p}"; } goto XHjc7; PeD4D: function get($link, $ua) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $link); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_HTTPHEADER, $ua); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_HEADER, 0); return curl_exec($ch); } goto S5YiA; mF10u: $m = "\x1b\133\61\x3b\x39\x31\x6d"; goto Re0M1; jqBs6: function extractTrueFalseAnswers($questionNode, $xpath, &$questionData) { $inputs = $xpath->query("\x2e\57\x2f\x69\156\x70\x75\x74\x5b\100\164\x79\160\145\x3d\x27\162\141\144\x69\x6f\x27\135", $questionNode); foreach ($inputs as $input) { $id = $input->getAttribute("\x69\144"); $value = $input->getAttribute("\x76\x61\154\165\145"); $checked = $input->getAttribute("\143\150\145\143\153\x65\144") == "\x63\150\145\x63\153\145\x64"; $label = $xpath->query("\57\57\154\x61\x62\x65\154\x5b\x40\x66\157\x72\75\47{$id}\47\x5d", $questionNode); $text = ''; if ($label->length > 0) { $text = trim($label->item(0)->nodeValue); } if (empty($text)) { $text = $value == "\x31" ? "\124\x72\x75\x65" : "\106\141\x6c\x73\x65"; } $letter = $value == "\61" ? "\x41" : "\x42"; $answer = array("\x6c\x65\164\x74\145\162" => $letter, "\164\145\x78\x74" => $text, "\x76\x61\154\165\x65" => $value, "\151\x73\x5f\143\157\x72\x72\x65\x63\x74" => $checked, "\151\x6e\160\x75\x74\137\x69\x64" => $id, "\164\x79\x70\x65" => "\x74\162\x75\145\x66\x61\x6c\163\145"); $questionData["\x61\156\x73\x77\x65\162\x73"][] = $answer; if ($checked) { $questionData["\x63\x6f\x72\162\x65\x63\x74\x5f\141\156\x73\x77\145\162"] = $letter; } } } goto UpGLZ; qy8rd: function initializeProgram() { global $m, $h, $p, $k, $bta, $ab, $bg, $u; system("\143\154\145\141\x72"); echo "\33\x5b\x31\x3b\x39\x36\155" . str_repeat("\xe2\x95\x90", 50) . "\x1b\133\60\x6d\xa"; echo "\33\133\x31\x3b\71\66\x6d" . str_pad("\105\55\x4c\x45\101\122\x4e\111\116\x47\x20\x51\125\105\x53\124\111\x4f\x4e\x20\x53\x43\122\101\120\105\x52", 50, "\x20", STR_PAD_BOTH) . "\x1b\133\x30\x6d\12"; echo "\x1b\x5b\61\x3b\x39\62\155" . str_pad("\x49\x6e\x69\x74\x69\x61\x6c\x69\172\151\156\x67\40\x53\171\x73\164\145\155\x2e\x2e\x2e", 50, "\x20", STR_PAD_BOTH) . "\33\133\60\x6d\12"; echo "\33\x5b\61\73\x39\x36\x6d" . str_repeat("\342\x95\220", 50) . "\33\x5b\60\155\xa\xa"; $currentVersion = "\61\x2e\x32\56\62"; echo "\33\x5b\61\73\71\67\155" . str_pad("\123\131\x53\x54\105\x4d\x20\103\110\x45\103\113", 50, "\40", STR_PAD_BOTH) . "\33\x5b\x30\155\xa"; echo "\33\x5b\61\73\x39\x30\155" . str_repeat("\xe2\224\200", 50) . "\33\x5b\60\155\xa"; echo "{$h}\xe2\234\223{$p}\x20\x43\165\162\x72\145\x6e\164\40\x76\145\x72\163\151\157\156\x20\40\40\x20\x20\40\x3a\x20\x76{$currentVersion}\xa"; $updateAvailable = false; $latestVersion = ''; $githubVersionURL = "\150\x74\164\160\x73\x3a\x2f\x2f\x72\x61\x77\x2e\x67\151\x74\x68\165\x62\x75\x73\x65\162\x63\157\x6e\x74\145\156\x74\56\143\157\x6d\x2f\106\165\165\155\141\130\171\172\57\x45\x2d\x4c\105\101\x52\x4e\111\x4e\x47\55\121\125\x45\123\x54\111\117\116\55\x53\103\x52\x41\120\105\122\57\x72\x65\146\x73\57\x68\x65\141\x64\x73\x2f\x6d\141\x69\x6e\57\166\x2e\x74\170\x74"; echo "{$h}\xe2\x8f\263{$p}\40\103\x68\x65\x63\153\x69\156\x67\x20\x75\160\x64\x61\x74\145\x73\40\x20\40\40\x20\72\40"; try { $latestVersion = trim(@file_get_contents($githubVersionURL, false, stream_context_create(array("\x68\164\x74\160" => array("\164\x69\155\x65\x6f\x75\x74" => 5), "\x73\x73\x6c" => array("\166\x65\x72\x69\x66\x79\137\160\x65\x65\x72" => false, "\166\145\x72\151\x66\x79\137\160\x65\145\x72\137\156\x61\155\145" => false))))); if ($latestVersion) { if (version_compare($latestVersion, $currentVersion, "\76")) { $updateAvailable = true; echo "{$h}\125\x70\144\x61\x74\x65\x20\x61\166\141\x69\x6c\141\x62\x6c\x65\x21{$p}\12"; echo "{$h}\xe2\x9c\x93{$p}\40\114\141\x74\x65\x73\x74\x20\x76\x65\x72\163\x69\157\x6e\x20\x20\40\x20\40\40\x3a\x20\x76{$latestVersion}\xa"; } else { echo "{$h}\x55\160\40\164\157\40\144\x61\164\145{$p}\xa"; echo "{$h}\342\234\223{$p}\40\x4c\x61\164\145\163\164\x20\x76\145\162\163\x69\x6f\x6e\x20\x20\40\40\40\x20\72\40\x76{$latestVersion}\12"; } } else { echo "{$ab}\106\141\x69\x6c\x65\144\x20\x74\x6f\x20\x63\150\145\x63\x6b{$p}\12"; } } catch (Exception $e) { echo "{$ab}\103\x6f\156\x6e\145\143\164\151\157\x6e\x20\145\162\x72\x6f\162{$p}\xa"; } $downloadDir = "\56\x2f\x64\x6f\167\156\154\x6f\x61\144"; if (!file_exists($downloadDir)) { mkdir($downloadDir, 511, true); echo "{$h}\xe2\234\x93{$p}\40\x44\x6f\167\156\x6c\x6f\141\x64\40\x64\x69\x72\145\143\x74\x6f\x72\x79\40\x20\72\40\x43\x72\145\x61\x74\x65\144\12"; } else { echo "{$h}\xe2\x9c\223{$p}\40\x44\157\x77\x6e\x6c\x6f\x61\x64\40\x64\151\x72\x65\143\164\157\162\171\x20\40\72\x20\122\145\141\x64\171\xa"; } $cookieFile = "\x43\157\x6f\153\151\145"; $userAgentFile = "\165\163\145\x72\55\x61\147\145\x6e\x74"; $hasConfig = file_exists($cookieFile) && file_exists($userAgentFile); echo "{$h}\342\x9c\x93{$p}\x20\103\157\156\146\x69\147\165\162\x61\164\x69\157\x6e\40\x66\x69\x6c\x65\x73\40\40\x3a\40" . ($hasConfig ? "\106\157\x75\156\x64" : "\x4e\157\164\40\x66\x6f\165\x6e\144") . "\xa"; if ($hasConfig) { echo "\x1b\x5b\61\73\x39\x37\x6d" . str_pad("\101\125\124\x48\105\x4e\x54\x49\x43\101\x54\x49\117\116\40\x53\x54\x41\x54\125\x53", 50, "\40", STR_PAD_BOTH) . "\x1b\x5b\60\155\12"; echo "\33\x5b\x31\73\x39\60\x6d" . str_repeat("\xe2\224\x80", 50) . "\x1b\x5b\60\x6d\xa"; $username = checkAndLoadUsername(); if ($username && $username != "\125\x6e\x6b\156\157\167\156\40\x55\x73\145\162") { $displayUsername = $username; if (strlen($username) > 20) { $displayUsername = substr($username, 0, 17) . "\56\x2e\x2e"; } echo "{$h}\xe2\234\x93{$p}\40\114\x6f\147\151\x6e\40\x64\x65\164\145\x63\x74\145\144\40\40\x20\x20\x20\x20\72\40{$bg}{$displayUsername}{$p}\12"; echo "{$h}\xe2\234\x93{$p}\40\x53\145\163\x73\x69\157\x6e\40\x73\x74\141\x74\x75\163\40\x20\40\x20\x20\x20\72\40{$h}\x41\143\x74\x69\166\145{$p}\xa"; if (strlen($username) > 20) { echo "{$h}\xe2\x93\x98{$p}\x20\106\165\x6c\x6c\x20\165\x73\145\x72\156\141\155\145\x20\x20\x20\x20\x20\40\40\x3a\x20{$k}{$username}{$p}\xa"; } } else { echo "{$m}\342\234\227{$p}\x20\114\157\x67\151\x6e\40\144\145\164\145\143\x74\x65\144\x20\40\40\40\x20\x20\72\40{$ab}\105\x78\160\151\x72\x65\144\x2f\x49\x6e\166\141\154\151\144{$p}\12"; echo "{$ab}\342\x9a\xa0\xef\270\217\x20\x20\x50\154\145\x61\163\145\40\x75\160\144\x61\164\145\x20\x79\x6f\x75\x72\40\x63\x6f\x6f\x6b\151\145{$p}\xa"; } } echo "\x1b\133\x31\73\x39\x37\x6d" . str_pad("\x55\120\104\x41\124\x45\40\123\x54\x41\124\125\x53", 50, "\40", STR_PAD_BOTH) . "\33\x5b\x30\155\xa"; echo "\x1b\133\x31\73\x39\60\x6d" . str_repeat("\xe2\224\x80", 50) . "\33\133\x30\x6d\xa"; if ($updateAvailable) { echo "\xa{$h}\xf0\237\232\200\x20\125\120\104\101\124\x45\x20\101\126\x41\x49\114\x41\102\x4c\x45\41{$p}\xa"; echo "{$h}\xe2\x8f\xb3{$p}\x20\104\157\x77\x6e\x6c\x6f\141\x64\151\x6e\x67\x20\165\160\x64\x61\x74\145\x20\166{$latestVersion}\x2e\x2e\56\xa"; $githubMainURL = "\150\164\x74\160\x73\72\57\x2f\162\x61\167\x2e\147\x69\x74\x68\165\142\x75\163\145\162\x63\157\x6e\164\145\156\164\56\x63\x6f\x6d\x2f\x46\165\165\x6d\x61\x58\x79\172\57\x45\x2d\114\x45\101\122\x4e\x49\x4e\x47\55\x51\x55\x45\123\124\x49\x4f\116\x2d\x53\x43\122\x41\x50\x45\122\57\162\x65\x66\x73\x2f\150\x65\x61\144\x73\x2f\x6d\x61\151\x6e\57\x65\x6c\x65\141\x72\156\x69\156\x67\56\160\x68\x70"; try { echo "{$h}\342\217\xb3{$p}\x20\x44\157\167\156\x6c\x6f\141\144\x69\156\147\x20\155\x61\x69\156\40\163\x63\162\151\160\164\x2e\56\x2e\40"; $mainScript = @file_get_contents($githubMainURL, false, stream_context_create(array("\150\x74\x74\160" => array("\164\x69\x6d\x65\157\x75\164" => 10), "\x73\x73\154" => array("\x76\145\162\x69\x66\171\x5f\160\x65\x65\x72" => false, "\x76\145\162\x69\146\x79\137\x70\145\x65\x72\137\x6e\141\155\x65" => false)))); if ($mainScript) { if (file_put_contents(__FILE__, $mainScript)) { echo "{$h}\xe2\234\223{$p}\xa"; echo "{$h}\xe2\x8f\xb3{$p}\40\104\157\x77\x6e\154\x6f\141\x64\x69\156\147\40\166\x65\x72\x73\x69\x6f\156\x20\146\151\154\x65\56\56\56\40"; if (file_put_contents("\x76\56\x74\x78\x74", $latestVersion)) { echo "{$h}\342\x9c\223{$p}\12"; echo "\12{$h}\360\x9f\x8e\211\40\x55\120\104\x41\x54\105\x20\123\125\x43\x43\x45\x53\x53\106\x55\x4c\x21{$p}\xa"; echo "{$h}\360\237\224\204{$p}\40\122\x65\x73\164\x61\x72\x74\151\156\147\40\160\162\157\147\x72\141\x6d\40\151\x6e\x20\63\40\x73\145\143\x6f\156\144\163\56\56\56\12\12"; for ($i = 3; $i > 0; $i--) { echo "\15{$k}\xe2\x8f\xb3\40\122\145\x73\164\x61\162\x74\151\x6e\x67\40\151\x6e\x20{$i}\40\x73\145\143\x6f\156\x64" . ($i > 1 ? "\x73" : '') . "\x2e\56\56" . str_repeat("\40", 10) . "{$p}"; sleep(1); } echo "\15{$h}\360\x9f\x9a\200\40\x52\145\163\164\x61\x72\x74\x69\156\x67\x2e\x2e\56" . str_repeat("\40", 20) . "{$p}\12\xa"; system("\160\150\x70\40" . __FILE__); die; } else { echo "{$m}\xe2\234\227{$p}\12"; echo "{$ab}\xe2\232\xa0\357\270\217\40\40\x46\141\151\154\145\x64\40\x74\157\40\163\x61\166\145\40\x76\145\162\163\x69\157\156\x20\146\151\x6c\145{$p}\xa"; } } else { echo "{$m}\342\x9c\227{$p}\xa"; echo "{$ab}\xe2\232\240\357\xb8\x8f\40\x20\106\141\151\154\x65\144\x20\164\157\40\163\141\166\x65\40\155\x61\x69\156\x20\x73\x63\x72\151\x70\164{$p}\12"; } } else { echo "{$m}\342\x9c\227{$p}\12"; echo "{$ab}\xe2\232\240\357\xb8\x8f\x20\40\106\141\151\154\x65\144\x20\x74\x6f\40\144\x6f\167\x6e\x6c\x6f\x61\x64\x20\x75\x70\144\x61\x74\x65{$p}\xa"; } } catch (Exception $e) { echo "{$m}\xe2\x9c\x97{$p}\12"; echo "{$ab}\xe2\x9a\240\357\270\217\x20\40\x55\x70\x64\141\x74\145\40\x65\x72\x72\157\x72\x3a\x20" . $e->getMessage() . "{$p}\xa"; } echo "\12{$ab}\342\x9a\240\xef\270\x8f\x20\40\x43\x6f\x6e\x74\151\156\165\x69\x6e\x67\x20\x77\151\x74\150\x20\x63\165\x72\162\145\x6e\x74\40\x76\x65\x72\x73\151\157\156\40\x76{$currentVersion}{$p}\xa"; } else { echo "{$h}\342\234\223{$p}\40\125\160\144\x61\164\x65\x20\163\x74\141\x74\x75\x73\x20\x20\x20\40\40\x20\x20\72\x20{$h}\x53\171\x73\164\x65\155\40\151\x73\x20\x75\160\40\164\x6f\x20\144\x61\x74\x65{$p}\xa"; } echo "\12" . str_repeat("\xe2\224\x80", 50) . "\xa"; echo "\33\x5b\61\73\71\67\155" . str_pad("\x53\124\101\122\124\111\116\107\x20\x49\x4e\40\62\x20\123\105\x43\x4f\116\x44\123", 50, "\40", STR_PAD_BOTH) . "\x1b\x5b\x30\x6d\12"; for ($i = 2; $i > 0; $i--) { echo "\15{$k}\xe2\x8f\263\x20\x53\x74\141\x72\x74\151\156\147\40\151\x6e\40{$i}\x20\163\x65\143\157\x6e\144" . ($i > 1 ? "\163" : '') . "\56\x2e\x2e" . str_repeat("\x20", 10) . "{$p}"; sleep(1); } echo "\15{$h}\xf0\x9f\232\200\x20\x4c\141\165\156\143\150\x69\x6e\147\40\160\x72\157\147\x72\141\155\x2e\56\56" . str_repeat("\40", 20) . "{$p}\xa\12"; } goto TcRB2; BN32U: date_default_timezone_set("\101\x73\x69\141\x2f\112\141\153\x61\162\x74\x61"); goto i2o_t; bVKPa: function collectAllImagesToSingleFolder($allDownloadedImages, $downloadDir) { global $h, $m, $p, $k; $allImagesDir = $downloadDir . "\x2f\141\154\154\x5f\x69\x6d\x61\x67\x65\x73"; if (!file_exists($allImagesDir)) { mkdir($allImagesDir, 511, true); echo "{$h}\342\x9c\223\x20\x4d\145\155\x62\x75\x61\x74\x20\146\x6f\x6c\x64\145\162\40\153\165\x6d\x70\x75\x6c\141\x6e\40\163\145\155\165\141\40\x67\x61\155\142\141\x72\x3a\x20{$allImagesDir}{$p}\12"; } $collectedImages = array(); $successCount = 0; $failCount = 0; echo "{$k}\12\x4d\145\156\x67\165\x6d\160\165\154\153\x61\x6e\x20\x73\145\x6d\165\141\x20\x67\x61\x6d\x62\x61\162\x20\153\145\40\x73\x61\x74\x75\x20\x66\x6f\x6c\144\x65\x72\56\56\56{$p}\12"; foreach ($allDownloadedImages as $index => $imageInfo) { if (isset($imageInfo["\144\157\x77\156\x6c\157\x61\144\x65\144"]) && $imageInfo["\144\157\x77\x6e\154\x6f\141\x64\x65\x64"] && isset($imageInfo["\x6c\x6f\x63\x61\x6c\137\160\x61\164\x68"])) { $originalPath = $imageInfo["\x6c\x6f\x63\141\x6c\137\x70\x61\x74\x68"]; $newFilename = sprintf("\x71\x25\163\137\160\141\147\145\x25\163\x5f\x25\x73", $imageInfo["\x71\165\145\x73\164\x69\x6f\x6e\x5f\x6e\165\x6d\x62\145\162"] ?? "\165\156\153\156\157\167\156", isset($imageInfo["\x73\x6f\165\x72\x63\145\x5f\146\151\154\x65"]) ? str_replace(array("\153\x65\x72\152\x61", "\x2e\150\164\155\x6c"), '', $imageInfo["\x73\x6f\165\x72\x63\x65\137\146\x69\154\x65"]) : "\x75\156\x6b\x6e\157\x77\156", $imageInfo["\146\x69\x6c\x65\x6e\141\155\145"]); $newPath = $allImagesDir . "\x2f" . $newFilename; if (file_exists($originalPath) && copy($originalPath, $newPath)) { $successCount++; $collectedImages[] = array_merge($imageInfo, array("\x63\x6f\x6c\x6c\145\143\x74\145\144\x5f\x70\x61\x74\x68" => $newPath, "\x63\157\x6c\x6c\x65\x63\x74\145\x64\x5f\146\x69\x6c\x65\x6e\x61\x6d\145" => $newFilename)); echo "{$h}\x20\x20\xe2\x9c\223\x20" . basename($newFilename) . "{$p}\xa"; } else { $failCount++; echo "{$m}\x20\40\342\234\x97\x20\x47\141\x67\141\154\x20\155\x65\156\147\165\x6d\x70\x75\x6c\x6b\141\156\x3a\x20" . basename($originalPath) . "{$p}\12"; } } } } goto f3ZhP; BDrZy: function createTextForGeminiPart($questionsPart) { $output = str_repeat("\342\225\x90", 60) . "\xa"; $output .= "\102\x41\x47\x49\101\x4e\40{$questionsPart["\160\141\162\164\x5f\x6e\x75\155\142\x65\162"]}\x20\x2d\40\x50\105\x52\124\x41\x4e\x59\x41\x41\x4e\40{$questionsPart["\163\x74\141\162\x74\x5f\147\154\157\142\141\154"]}\x20\163\141\x6d\160\x61\151\40{$questionsPart["\x65\156\144\x5f\x67\x6c\x6f\142\x61\x6c"]}\12"; $output .= str_repeat("\342\225\220", 60) . "\12\12"; foreach ($questionsPart["\161\x75\145\x73\x74\x69\157\156\163"] as $item) { $output .= formatQuestionForText($item["\x71\x75\x65\163\x74\151\x6f\x6e"], $item["\147\154\x6f\142\x61\x6c\137\156\x75\155\142\x65\x72"], true); } return $output; } goto r1R1y; jbqIs: function runScrapingProcess() { global $ab, $m, $h, $k, $bg, $u, $bta, $p; system("\x63\154\145\x61\162"); echo "\33\133\61\x3b\71\66\x6d\75\x3d\x3d\75\x3d\x3d\x3d\x3d\x3d\x3d\75\x3d\75\75\x3d\x3d\75\75\x3d\75\x3d\75\75\75\75\75\x3d\75\75\75\75\x3d\x3d\75\x3d\75\x3d\75\x3d\x3d\75\x3d\x3d\75\x3d\75\75\75\x3d\x3d\12"; echo "\x20\x20\x20\x20\40\x20\x20\40\x4d\105\x4d\125\114\101\111\40\120\122\117\x53\105\x53\40\123\x43\122\x41\x50\111\x4e\107\40\x26\40\105\113\123\124\122\x41\113\123\111\xa"; echo "\x3d\75\75\x3d\x3d\x3d\x3d\x3d\x3d\x3d\75\x3d\x3d\75\x3d\75\75\x3d\75\x3d\75\75\x3d\x3d\75\75\x3d\75\x3d\75\75\x3d\x3d\x3d\75\x3d\x3d\75\x3d\x3d\75\75\75\75\75\75\x3d\75\x3d\75\x1b\133\x30\x6d\12\xa"; $downloadDir = ensureDownloadDirectory(); echo "\12{$h}\x3e\76\x3e\40\115\145\155\165\141\x74\x20\113\x6f\156\x66\151\x67\x75\162\141\x73\151\x20\120\145\156\x67\x67\165\156\x61\40\x3c\x3c\x3c{$p}\xa"; $usernameFile = $downloadDir . "\x2f\x75\163\145\x72\x6e\141\155\x65\56\x74\170\164"; $existingUsername = ''; if (file_exists($usernameFile)) { $existingUsername = trim(file_get_contents($usernameFile)); if ($existingUsername != "\x55\x6e\x6b\156\157\167\156\40\125\163\145\x72" && !empty($existingUsername)) { echo "{$h}\xe2\234\x93\40\125\x73\x65\162\x6e\x61\x6d\145\x3a\x20{$existingUsername}{$p}\12"; echo "{$k}\107\x75\x6e\141\x6b\x61\156\x20\165\163\x65\x72\x6e\141\155\145\x20\x79\141\x6e\x67\40\163\x75\144\141\x68\40\141\x64\141\x3f\x20\50\171\75\147\165\156\x61\x6b\x61\156\57\x74\75\141\155\x62\151\154\x20\142\141\162\165\x29\72\40{$p}"; $useExisting = trim(fgets(STDIN)); if (strtolower($useExisting) === "\x79") { $username = $existingUsername; if (file_exists("\x75\x73\x65\162\55\141\x67\x65\156\164") && file_exists("\103\157\157\x6b\151\145")) { $user = trim(file_get_contents("\165\x73\x65\x72\55\x61\147\145\156\164")); $cook = trim(file_get_contents("\103\x6f\x6f\x6b\x69\145")); echo "{$h}\342\234\x93\x20\103\x6f\157\153\x69\145\40\144\141\x6e\x20\x75\163\x65\162\x2d\141\147\145\156\164\x20\x64\151\155\165\x61\164\x20\144\x61\162\x69\40\146\151\154\145{$p}\12"; } else { $user = Save("\165\163\145\162\x2d\141\x67\x65\156\x74"); $cook = Save("\103\157\157\x6b\x69\145"); } echo "\12\33\133\x31\73\71\66\x6d\133\x4b\157\x6e\x66\x69\x67\x75\162\x61\x73\x69\x20\101\x74\x74\x65\155\x70\x74\135\x1b\x5b\x30\155\xa"; $attempt = inputNumericNoDefault("\33\x5b\61\x3b\71\63\x6d\115\x61\x73\165\x6b\153\x61\x6e\40\141\164\164\145\155\160\164\40\x49\x44\x3a\x20\x1b\x5b\x30\155"); if ($attempt === null) { return; } $cmid = inputNumericNoDefault("\33\x5b\61\x3b\x39\x33\x6d\x4d\x61\x73\165\x6b\153\x61\x6e\x20\x63\x6d\151\x64\72\40\33\x5b\60\155"); if ($cmid === null) { return; } goto config_pages; } } } $user = Save("\x75\x73\x65\162\55\x61\x67\145\x6e\164"); $cook = Save("\x43\157\x6f\153\151\145"); echo "\12\33\x5b\x31\x3b\x39\x36\x6d\133\x4b\157\x6e\146\x69\147\165\162\x61\x73\x69\40\101\164\164\145\155\160\x74\x5d\x1b\x5b\60\x6d\xa"; $attempt = inputNumericNoDefault("\x1b\x5b\x31\x3b\x39\63\155\x4d\x61\163\x75\153\153\x61\156\x20\141\164\x74\145\155\x70\164\40\111\104\72\x20\33\133\x30\155"); if ($attempt === null) { return; } $cmid = inputNumericNoDefault("\33\x5b\61\x3b\71\63\x6d\x4d\141\163\165\x6b\153\141\156\x20\x63\x6d\151\x64\72\40\33\133\x30\155"); if ($cmid === null) { return; } config_pages: echo "\12\33\133\x31\73\71\x36\x6d\133\x4b\x6f\x6e\x66\151\x67\165\x72\141\x73\x69\40\110\141\x6c\141\155\x61\x6e\135\33\133\60\x6d\xa"; $input = inputNumeric("\33\133\61\73\71\x33\x6d\x4d\x61\163\x75\x6b\153\141\156\40\152\x75\155\154\x61\150\x20\x73\157\141\x6c\40\x28\144\x65\146\x61\x75\x6c\164\40\x33\60\51\72\x20\33\x5b\60\155", 30); $maxPages = max(0, $input - 1); echo "\12\x1b\x5b\61\73\71\66\155\x5b\117\x70\163\151\x20\124\x61\155\142\141\x68\141\156\x5d\33\x5b\x30\155\12"; echo "\33\x5b\x31\73\71\63\x6d\123\x69\x6d\x70\x61\156\x20\150\x61\x6c\x61\x6d\x61\x6e\x20\141\156\141\x6c\151\x73\x69\x73\x3f\x20\50\x79\x2f\156\x2c\x20\x64\145\x66\x61\x75\154\x74\x3a\x20\x79\x29\x3a\x20\x1b\x5b\x30\155"; $saveAnalisis = trim(fgets(STDIN)); $saveAnalisis = strtolower($saveAnalisis) === "\x6e" ? false : true; echo "\x1b\x5b\61\x3b\x39\x33\155\123\151\x6d\x70\x61\156\40\150\x61\154\x61\x6d\141\156\x20\146\x69\156\151\x73\x68\77\x20\50\x79\x2f\x6e\x2c\40\x64\145\x66\141\x75\x6c\x74\72\x20\x79\51\x3a\x20\x1b\x5b\60\x6d"; $saveFinish = trim(fgets(STDIN)); $saveFinish = strtolower($saveFinish) === "\x6e" ? false : true; $extractQuestions = true; $downloadImages = true; echo "\x1b\133\x31\73\x39\x32\155\xe2\234\223\x20\x45\x6b\x73\x74\x72\x61\x6b\x73\x69\x20\160\x65\x72\164\141\x6e\171\x61\x61\156\x20\x64\141\x6e\40\144\x6f\x77\x6e\x6c\157\x61\x64\x20\x67\x61\x6d\142\141\162\40\x64\x69\141\153\x74\x69\146\x6b\141\x6e\33\133\x30\155\xa"; $collectImages = false; if ($downloadImages) { echo "\12\x1b\x5b\61\73\x39\66\x6d\133\x4f\x70\x73\x69\40\x50\145\x6e\x67\165\x6d\x70\x75\x6c\x61\x6e\x20\107\141\x6d\142\141\x72\x5d\33\x5b\x30\x6d\xa"; echo "\33\x5b\x31\x3b\x39\63\155\113\x75\155\160\165\x6c\153\x61\x6e\40\x73\x65\155\x75\x61\x20\147\x61\155\x62\141\162\40\x6b\145\40\x73\141\x74\165\x20\x66\157\x6c\144\x65\x72\x3f\x20\50\171\57\x6e\x2c\40\x64\x65\x66\x61\x75\x6c\x74\72\40\x79\x29\x3a\40\33\x5b\x30\x6d"; $collectImagesInput = trim(fgets(STDIN)); $collectImages = strtolower($collectImagesInput) === "\156" ? false : true; } echo "\x1b\133\x31\73\x39\63\155\xa\115\145\x6d\165\x6c\x61\x69\x20\x73\x63\x72\x61\x70\151\x6e\x67\40\144\141\154\x61\x6d\40\63\x20\x64\x65\164\x69\x6b\x2e\56\x2e{$p}\12"; sleep(3); system("\x63\154\145\x61\162"); $ua = array("\x48\157\163\x74\72\40\x65\x6c\145\141\x72\156\x69\x6e\147\x2e\x73\x6d\153\x32\x2d\171\153\56\163\143\x68\x2e\151\144", "\130\55\122\x65\161\165\145\163\164\x65\x64\x2d\x57\x69\164\150\72\x20\x58\115\x4c\x48\x74\164\x70\122\x65\x71\165\145\x73\x74", "\165\163\145\162\55\x61\147\145\156\164\72\x20{$user}", "\x63\x6f\157\x6b\151\x65\x3a\x20{$cook}"); $baseUrl = "\x68\164\x74\x70\x73\x3a\57\57\x65\x6c\x65\x61\162\x6e\151\156\x67\56\x73\x6d\153\62\x2d\171\x6b\56\x73\x63\150\56\151\x64"; $dashboardUrl = "{$baseUrl}\x2f\x6d\x79\x2f"; $soalUrl = "{$baseUrl}\x2f\155\157\144\57\x71\x75\151\x7a\x2f\166\x69\145\167\x2e\x70\x68\x70\77\x69\x64\x3d{$cmid}"; echo "\x1b\133\x31\73\71\x36\x6d" . str_repeat("\342\225\x90", 60) . "\33\133\60\155\12"; echo "\x1b\x5b\61\73\x39\x32\x6d\x4d\x45\x4d\x55\114\101\111\x20\123\x43\122\x41\120\111\x4e\x47\40\104\101\124\x41\x1b\133\60\x6d\12"; echo "\33\133\61\x3b\71\62\155\104\151\x72\x65\153\x74\x6f\x72\x69\x20\160\145\156\x79\x69\x6d\160\141\x6e\141\156\x3a\x20{$downloadDir}\33\x5b\x30\x6d\12"; echo "\x1b\133\x31\73\x39\66\155" . str_repeat("\342\225\x90", 60) . "\x1b\x5b\x30\155\xa"; if (isset($username) && $username != "\125\x6e\153\156\x6f\167\x6e\x20\x55\x73\x65\162") { echo "\33\133\x31\x3b\x39\62\x6d\120\145\156\x67\x67\x75\156\x61\x3a\x20\33\x5b\x31\x3b\x39\x36\x6d{$username}\33\133\60\155\12"; } echo "\x1b\x5b\x31\73\71\66\155" . str_repeat("\xe2\225\x90", 60) . "\x1b\133\x30\x6d\12"; $allFiles = array(); echo "\x1b\x5b\x31\x3b\x39\62\155\133\x31\x5d\x20\115\x65\x6e\x67\141\x6d\142\151\x6c\40\x64\141\164\x61\x20\x64\141\x73\150\x62\157\141\162\x64\56\56\56\x1b\133\x30\155\xa"; $dashboard = get($dashboardUrl, $ua); $dashboardPath = saveToDownloadDir("\144\141\163\x68\142\x6f\x61\162\144\56\150\164\155\x6c", $dashboard, $downloadDir); $allFiles["\x64\141\163\x68\x62\x6f\x61\x72\x64\x2e\150\164\x6d\x6c"] = $dashboardPath; echo "\x1b\x5b\x31\73\71\62\155\xe2\234\223\x20\x44\141\x73\x68\142\x6f\x61\162\144\40\x64\x69\163\151\155\x70\x61\x6e\x20\x6b\x65\x20{$dashboardPath}\x1b\133\x30\155\12"; echo "\xa\x1b\x5b\61\73\x39\x32\x6d\133\61\141\135\40\115\145\x6e\x67\x65\x6b\163\x74\162\x61\153\x20\x69\x6e\146\x6f\x72\155\141\163\x69\x20\x70\x65\x6e\x67\x67\x75\156\x61\x2e\56\56\33\x5b\60\155\12"; $username = extractUsernameFromDashboard($dashboard); echo "\x1b\x5b\61\x3b\71\62\x6d\xe2\234\x93\x20\x55\163\x65\x72\156\141\x6d\145\40\x74\145\162\x64\145\164\x65\x6b\163\x69\x3a\40\x1b\133\61\x3b\71\66\x6d{$username}\x1b\133\x30\x6d\xa"; $usernamePath = saveToDownloadDir("\165\163\x65\162\156\141\x6d\x65\x2e\x74\170\x74", $username, $downloadDir); echo "\x1b\x5b\x31\x3b\71\x32\155\xe2\x9c\x93\40\x55\163\145\162\x6e\x61\155\145\40\144\x69\x73\x69\x6d\x70\x61\x6e\40\153\x65\40{$usernamePath}\x1b\x5b\60\155\12"; echo "\xa\x1b\133\x31\73\x39\x32\155\x5b\62\135\x20\115\145\x6e\147\141\155\142\x69\x6c\40\x64\141\x74\x61\40\163\x6f\x61\x6c\56\x2e\56\x1b\133\x30\155\xa"; $soal = get($soalUrl, $ua); $soalPath = saveToDownloadDir("\x73\157\141\154\x2e\150\164\x6d\154", $soal, $downloadDir); $allFiles["\x73\x6f\x61\154\x2e\x68\164\155\x6c"] = $soalPath; echo "\x1b\x5b\61\x3b\x39\x32\155\xe2\234\223\x20\123\157\x61\154\40\144\151\163\x69\x6d\160\141\x6e\x20\x6b\x65\40{$soalPath}\x1b\x5b\60\155\12"; echo "\12\x1b\133\x31\73\71\x32\x6d\133\x33\x5d\x20\115\145\x6e\x67\141\x6d\142\x69\x6c\x20\150\141\154\x61\155\x61\x6e\x20\141\164\164\145\x6d\x70\x74\x2e\56\56\33\133\x30\155\12"; $savedFiles = scrapeAllPages($baseUrl, $attempt, $cmid, $ua, $maxPages, $downloadDir); foreach ($savedFiles as $file) { $allFiles[$file[0]] = $file[1]; } if ($saveFinish) { echo "\xa\x1b\x5b\61\73\x39\x32\155\133\x34\x5d\x20\x4d\145\x6e\x67\x61\x6d\x62\151\154\x20\150\141\x6c\141\155\141\x6e\x20\146\151\156\151\x73\150\56\56\x2e\33\133\x30\155\xa"; $finishUrl = "{$baseUrl}\57\155\x6f\144\x2f\x71\165\151\x7a\57\163\x75\x6d\155\x61\162\x79\56\160\x68\x70\x3f\x61\164\x74\x65\x6d\160\x74\75{$attempt}\x26\143\155\151\144\x3d{$cmid}"; $finish = get($finishUrl, $ua); $finishPath = saveToDownloadDir("\146\x69\x6e\x69\x73\150\56\150\x74\155\154", $finish, $downloadDir); $allFiles["\x66\151\156\151\163\x68\56\x68\164\x6d\154"] = $finishPath; echo "\33\133\61\73\x39\x32\155\342\x9c\x93\x20\x48\x61\154\141\x6d\141\156\40\x66\151\x6e\151\x73\150\x20\x64\151\163\151\x6d\160\x61\x6e\40\x6b\145\40{$finishPath}\33\x5b\60\x6d\12"; } if ($saveAnalisis) { echo "\xa\33\133\x31\x3b\x39\x32\x6d\133\65\x5d\40\x4d\x65\x6e\x67\x61\155\x62\x69\x6c\x20\150\x61\x6c\141\x6d\x61\x6e\40\141\156\x61\x6c\151\x73\151\163\x2e\56\56\33\x5b\x30\155\xa"; $analisisAttempt = $attempt; $analisisUrl = "{$baseUrl}\x2f\155\x6f\x64\x2f\161\165\x69\172\x2f\162\x65\166\x69\145\167\56\160\150\160\x3f\141\x74\x74\x65\155\160\164\x3d{$analisisAttempt}\46\143\x6d\x69\x64\x3d{$cmid}"; $analisis = get($analisisUrl, $ua); $analisisPath = saveToDownloadDir("\141\156\x61\x6c\151\163\151\163\x2e\150\164\x6d\154", $analisis, $downloadDir); $allFiles["\x61\x6e\x61\x6c\x69\x73\x69\163\56\150\x74\x6d\154"] = $analisisPath; echo "\33\x5b\x31\73\71\62\x6d\xe2\x9c\223\40\x48\x61\x6c\141\155\x61\156\40\x61\x6e\x61\x6c\x69\x73\x69\163\x20\144\151\163\x69\x6d\160\x61\156\x20\x6b\x65\40{$analisisPath}\33\x5b\x30\x6d\xa"; } $totalFiles = count($allFiles); echo "\12\33\133\61\73\71\x36\x6d" . str_repeat("\342\225\220", 60) . "\33\133\60\155\12"; echo "\33\x5b\61\73\x39\62\155\x53\x43\x52\101\120\x49\x4e\107\x20\x53\105\114\105\x53\x41\111\x21\x1b\x5b\60\x6d\xa"; echo "\33\133\61\73\71\62\155\123\145\155\165\141\x20\x66\x69\x6c\145\x20\144\x69\x73\x69\x6d\x70\x61\156\40\144\x69\x3a\40{$downloadDir}\x1b\x5b\60\x6d\xa"; echo "\x1b\x5b\x31\x3b\71\66\155" . str_repeat("\342\x95\220", 60) . "\x1b\x5b\x30\x6d\xa"; echo "\33\x5b\x31\73\x39\x33\x6d\x41\164\x74\x65\155\160\164\40\111\104\72\40\33\x5b\x31\x3b\x39\x37\x6d{$attempt}\33\133\60\155\xa"; echo "\x1b\x5b\x31\x3b\71\63\x6d\103\157\x75\162\x73\x65\40\x4d\x6f\x64\165\154\145\x20\x49\x44\x3a\x20\33\x5b\61\x3b\71\67\155{$cmid}\33\133\x30\155\12"; echo "\33\x5b\61\x3b\x39\x33\x6d\x4a\165\155\x6c\141\150\x20\150\141\x6c\x61\x6d\141\x6e\x20\x64\x69\x63\x6f\142\141\72\x20\33\133\x31\73\x39\67\155" . ($maxPages + 1) . "\x1b\x5b\x30\155\xa"; echo "\33\x5b\61\73\x39\63\x6d\110\141\x6c\141\x6d\x61\156\x20\141\x74\164\x65\x6d\x70\x74\40\142\x65\x72\150\141\163\151\154\x20\144\x69\141\155\142\151\154\x3a\40\33\x5b\x31\73\x39\67\x6d" . count($savedFiles) . "\33\x5b\60\x6d\xa"; echo "\33\x5b\x31\73\x39\63\155\x54\157\x74\x61\x6c\40\x66\151\x6c\145\x20\x64\x69\163\151\x6d\x70\141\x6e\x3a\x20\33\133\61\x3b\71\67\x6d{$totalFiles}\x1b\133\60\x6d\xa"; echo "\xa\33\133\61\73\x39\x36\155\x5b\x44\101\106\124\101\122\40\x46\x49\x4c\x45\x20\124\105\x52\123\x49\x4d\x50\x41\116\x5d\33\x5b\60\x6d\xa"; $counter = 1; foreach ($allFiles as $filename => $fullPath) { $fileSize = filesize($fullPath); $sizeFormatted = round($fileSize / 1024, 2) . "\x20\x4b\x42"; echo "\33\133\61\x3b\71\x32\155{$counter}\56\40{$filename}\40\x1b\x5b\61\73\71\x30\x6d\50{$sizeFormatted}\51\x20\55\x3e\x20{$fullPath}\33\133\60\x6d\xa"; $counter++; } echo "\33\133\61\x3b\x39\66\x6d" . str_repeat("\342\225\x90", 60) . "\33\x5b\60\155\xa"; $allQuestions = array(); if ($extractQuestions) { $extractionResult = extractAndDownloadAllQuestions($downloadDir, $allFiles, $ua); $allQuestions = $extractionResult["\161\x75\x65\163\x74\x69\x6f\156\163"]; if (!empty($allQuestions)) { echo "\xa\x1b\133\61\73\x39\63\x6d\111\x6e\147\151\156\x20\155\x65\154\151\x68\141\x74\x20\160\x72\x65\x76\151\145\x77\x20\160\145\x72\164\x61\x6e\171\x61\x61\156\x3f\x20\50\171\x2f\156\x2c\x20\x64\145\146\141\x75\x6c\x74\x3a\x20\x79\51\x3a\40\33\x5b\x30\155"; $showPreview = trim(fgets(STDIN)); $showPreview = strtolower($showPreview) === "\156" ? false : true; if ($showPreview) { echo "\x1b\133\x31\73\x39\63\x6d\120\x69\x6c\151\150\40\x6d\157\144\145\40\160\x72\145\166\x69\145\167\72\x1b\133\60\x6d\xa"; echo "\33\133\61\x3b\x39\x32\155\40\x20\61\x2e\x20\x50\x72\x65\166\x69\x65\x77\x20\163\145\155\x75\x61\40\160\x65\x72\x74\x61\x6e\x79\141\x61\x6e\40\x64\x61\x72\x69\40\163\145\x6d\x75\x61\40\x66\x69\154\145\x1b\133\x30\155\xa"; echo "\33\x5b\61\x3b\x39\62\x6d\x20\40\x32\x2e\x20\x50\162\x65\166\151\145\167\40\146\151\x6c\145\40\164\x65\x72\x74\145\156\x74\x75\40\163\141\x6a\141\33\x5b\60\x6d\12"; echo "\33\133\61\x3b\71\x32\155\x20\40\63\56\x20\120\x72\145\166\x69\145\167\x20\x70\x65\162\164\141\x6e\x79\141\x61\156\x20\x64\145\x6e\x67\141\156\40\x67\141\x6d\x62\141\162\40\x73\141\x6a\141\33\x5b\x30\155\12"; echo "\33\133\61\73\x39\x32\x6d\40\40\x34\56\40\x50\162\x65\x76\151\x65\x77\x20\x62\x65\162\x64\x61\163\141\x72\153\141\156\x20\152\x65\x6e\151\x73\x20\x70\x65\162\164\141\156\x79\141\x61\x6e\33\x5b\60\x6d\12"; echo "\x1b\x5b\x31\73\71\x32\x6d\x20\40\65\x2e\40\x50\162\x65\x76\151\145\x77\40\153\150\165\x73\x75\163\40\x70\145\x72\164\x61\156\x79\141\141\156\40\x64\x72\157\x70\x64\157\167\156\57\x6d\x61\x74\143\150\x1b\133\x30\x6d\xa"; echo "\x1b\133\x31\x3b\71\63\x6d\120\x69\154\x69\150\141\156\40\x28\61\x2d\x35\54\x20\x64\x65\146\x61\165\154\x74\x3a\x20\x31\51\x3a\x20\33\x5b\60\x6d"; $previewChoice = trim(fgets(STDIN)); if ($previewChoice == "\62") { echo "\12\33\133\x31\73\x39\x33\155\120\x69\154\x69\x68\40\x66\151\x6c\x65\x20\x75\x6e\x74\165\153\40\x70\162\145\166\x69\x65\167\40\50\155\x61\163\165\x6b\x6b\141\x6e\40\156\157\x6d\157\162\x29\x3a\40\x1b\133\x30\155\xa"; $fileList = array(); $fileCounter = 1; foreach ($allQuestions as $filename => $questions) { echo "\33\133\61\x3b\x39\62\x6d\40\x20{$fileCounter}\x2e\x20{$filename}\x20\x1b\x5b\61\x3b\71\x30\x6d\50" . count($questions) . "\40\160\145\x72\164\141\x6e\171\141\x61\156\x29\x1b\133\60\x6d\12"; $fileList[$fileCounter] = $filename; $fileCounter++; } echo "\x1b\x5b\61\x3b\x39\x33\x6d\120\151\154\151\150\x61\156\x3a\40\x1b\x5b\60\155"; $fileChoice = inputNumeric('', 1); if (isset($fileList[$fileChoice])) { $selectedFile = $fileList[$fileChoice]; displayQuestionsWithImages($allQuestions[$selectedFile], $selectedFile); } } elseif ($previewChoice == "\63") { echo "\xa\x1b\x5b\x31\x3b\x39\63\155\120\162\x65\x76\x69\x65\x77\40\160\145\162\x74\x61\x6e\x79\141\141\x6e\x20\144\145\156\147\x61\156\40\147\x61\155\x62\x61\x72\72\x1b\x5b\60\155\xa"; $questionsWithImages = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { if (!empty($question["\x69\x6d\x61\147\145\x73"])) { $questionsWithImages++; echo "\12\33\x5b\x31\73\x39\65\x6d" . str_repeat("\x2d", 60) . "\x1b\x5b\x30\x6d\xa"; echo "\33\x5b\x31\x3b\x39\66\x6d\120\x45\122\124\x41\x4e\131\x41\x41\x4e\x20\43{$question["\x6e\x75\x6d\142\145\162"]}\x20\x64\141\162\151\x20{$filename}\x1b\x5b\60\155\12"; echo "\33\x5b\61\x3b\71\x33\x6d\112\145\x6e\151\163\72\x20{$question["\164\171\x70\145"]}\x20\174\x20\x53\164\141\164\x75\163\72\40{$question["\x73\x74\x61\x74\x65"]}\x1b\x5b\60\x6d\xa"; $shortText = substr(strip_tags($question["\x74\145\x78\164"]), 0, 100) . (strlen($question["\164\x65\x78\x74"]) > 100 ? "\x2e\x2e\56" : ''); echo "\33\133\61\x3b\71\67\x6d" . $shortText . "\33\133\x30\155\12"; echo "\33\x5b\61\73\x39\x32\x6d\107\141\x6d\142\x61\162\72\x20" . count($question["\151\x6d\141\x67\x65\x73"]) . "\x1b\133\x30\x6d\xa"; foreach ($question["\151\155\141\147\x65\163"] as $image) { echo "\x20\x20\55\40{$image["\146\x69\x6c\145\x6e\x61\x6d\145"]}\40\50{$image["\141\x6c\164"]}\x29\12"; } } } } echo "\12\33\x5b\61\x3b\71\x32\155\124\157\164\x61\x6c\x20\160\x65\162\164\x61\x6e\x79\141\x61\156\x20\144\145\x6e\147\x61\156\40\147\141\x6d\x62\141\x72\x3a\x20{$questionsWithImages}\x1b\x5b\60\x6d\xa"; } elseif ($previewChoice == "\x34") { echo "\xa\33\x5b\61\73\x39\63\x6d\x50\x69\x6c\x69\150\40\152\x65\156\x69\x73\x20\x70\x65\162\x74\x61\156\171\141\141\156\x20\165\156\x74\165\x6b\x20\x70\x72\145\x76\151\x65\x77\x3a\33\133\60\155\xa"; echo "\33\x5b\61\73\x39\x32\x6d\x20\x20\x31\56\x20\x50\151\x6c\151\150\141\156\x20\x47\141\156\144\x61\40\50\115\165\x6c\164\151\x70\154\145\x20\103\x68\157\151\143\x65\51\33\x5b\x30\155\12"; echo "\x1b\133\61\73\71\62\155\x20\x20\x32\56\40\104\162\157\x70\144\157\x77\x6e\x2f\x4d\x61\x74\143\x68\151\156\x67\x1b\x5b\60\155\xa"; echo "\x1b\x5b\61\73\x39\62\x6d\x20\40\x33\x2e\x20\102\145\x6e\x61\162\x2f\123\141\154\x61\x68\x20\50\124\162\165\145\x2f\106\x61\154\x73\145\x29\33\x5b\x30\155\xa"; echo "\33\x5b\61\73\71\x32\x6d\x20\40\64\x2e\40\x55\x72\x61\x69\141\156\x20\x28\x45\163\x73\141\x79\x29\33\x5b\60\x6d\xa"; echo "\x1b\133\x31\x3b\x39\x32\155\x20\x20\x35\x2e\40\x4a\141\167\x61\142\141\156\40\x53\x69\x6e\x67\x6b\141\164\40\x28\x53\x68\157\162\x74\x20\101\x6e\163\x77\x65\162\51\x1b\x5b\x30\155\xa"; echo "\x1b\133\61\x3b\x39\63\155\120\x69\154\151\150\x61\156\x20\50\61\55\65\51\72\x20\x1b\133\x30\155"; $typeChoice = trim(fgets(STDIN)); $typeMap = array("\61" => "\155\x75\154\164\x69\x63\150\157\x69\x63\145", "\x32" => "\x6d\x61\164\x63\x68", "\63" => "\164\162\x75\145\x66\141\154\x73\145", "\x34" => "\x65\x73\163\141\171", "\65" => "\163\150\x6f\x72\x74\141\156\163\167\145\x72"); $selectedType = isset($typeMap[$typeChoice]) ? $typeMap[$typeChoice] : "\155\x75\154\x74\151\143\x68\x6f\x69\143\x65"; $typeCount = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { if ($question["\x74\x79\160\145"] === $selectedType) { $typeCount++; echo "\xa\x1b\x5b\x31\73\71\65\155" . str_repeat("\x2d", 60) . "\33\x5b\60\x6d\xa"; echo "\33\x5b\x31\73\71\x36\x6d\x50\x45\122\x54\101\116\x59\101\101\x4e\x20\43{$question["\156\x75\155\x62\x65\x72"]}\x20\x64\x61\x72\151\x20{$filename}\x1b\133\60\155\xa"; echo "\33\x5b\61\x3b\x39\x33\155\112\x65\156\x69\163\x3a\x20{$question["\164\171\160\x65"]}\40\174\x20\x53\x74\x61\164\165\163\72\x20{$question["\163\x74\x61\164\x65"]}\33\133\60\x6d\xa"; $shortText = substr(strip_tags($question["\x74\145\170\164"]), 0, 150) . (strlen($question["\x74\x65\170\x74"]) > 150 ? "\x2e\x2e\56" : ''); echo "\33\x5b\x31\73\71\x37\155" . $shortText . "\33\133\x30\155\12"; } } } echo "\xa\33\133\x31\73\x39\62\155\x54\157\164\x61\x6c\40\x70\145\162\x74\141\156\171\141\141\x6e\40\152\145\156\x69\x73\x20\x27{$selectedType}\x27\x3a\x20{$typeCount}\33\x5b\x30\x6d\xa"; } elseif ($previewChoice == "\65") { echo "\12\33\133\x31\x3b\x39\63\155\120\x72\145\x76\x69\145\x77\40\x6b\150\165\x73\x75\163\x20\x70\x65\x72\x74\x61\156\x79\141\x61\x6e\40\144\162\157\160\144\x6f\x77\156\57\x6d\141\164\x63\x68\72\33\133\x30\155\12"; $matchQuestionsCount = 0; foreach ($allQuestions as $filename => $questions) { $matchQuestions = array(); foreach ($questions as $question) { if ($question["\x74\171\x70\x65"] === "\x6d\141\164\x63\150") { $matchQuestions[] = $question; $matchQuestionsCount++; } } if (!empty($matchQuestions)) { displayMatchQuestions($matchQuestions, $filename); } } if ($matchQuestionsCount == 0) { echo "\12\x1b\133\x31\73\x39\x31\x6d\124\151\x64\x61\x6b\40\144\x69\164\x65\155\x75\x6b\x61\156\x20\160\x65\162\x74\x61\156\171\141\141\156\40\144\x72\x6f\160\144\x6f\x77\x6e\57\x6d\141\x74\143\x68\x2e\33\133\60\x6d\12"; } else { echo "\xa\x1b\133\x31\x3b\71\x32\x6d\124\x6f\164\x61\x6c\40\x70\145\x72\x74\x61\x6e\x79\x61\x61\x6e\x20\x64\162\157\x70\144\x6f\167\x6e\57\155\x61\164\143\x68\40\144\x69\164\x65\x6d\165\x6b\x61\x6e\x3a\40{$matchQuestionsCount}\33\133\60\x6d\xa"; } } else { $totalAllQuestions = 0; foreach ($allQuestions as $filename => $questions) { displayQuestionsWithImages($questions, $filename); $totalAllQuestions += count($questions); } echo "\xa\x1b\x5b\x31\73\71\62\155\x54\117\124\x41\114\40\123\x45\x4d\x55\101\40\120\105\x52\x54\x41\116\x59\101\101\116\72\x20{$totalAllQuestions}\x1b\133\x30\155\xa"; } } echo "\12{$h}\124\145\x6b\141\156\x20\x45\x6e\x74\145\162\40\165\156\164\x75\153\40\x6d\x65\x6c\x61\156\x6a\x75\x74\x6b\x61\x6e\x2e\56\56{$p}"; fgets(STDIN); echo "\12\x1b\133\x31\x3b\x39\62\x6d\342\234\x93\x20\x4d\x6f\144\145\x20\160\x65\156\171\x69\155\160\x61\x6e\x61\156\x20\164\145\x6b\x73\x20\144\x69\x61\x6b\x74\151\x66\153\141\x6e\33\133\60\x6d\12"; $saveAllTxt = "\171"; if (strtolower($saveAllTxt) === "\x79") { $allTxtContent = str_repeat("\342\225\220", 60) . "\xa"; $allTxtContent .= "\x4b\x55\115\120\125\114\x41\x4e\x20\123\x45\x4d\125\101\x20\120\105\122\124\101\x4e\131\x41\x41\116\40\x44\101\116\40\x4a\x41\127\x41\x42\x41\116\xa"; $allTxtContent .= "\x3d\x3d\x3d\x3d\75\x3d\75\x3d\75\75\75\x3d\x3d\x3d\x3d\x3d\75\x3d\x3d\x3d\75\x3d\x3d\75\75\x3d\75\75\75\x3d\75\75\75\75\75\75\12\12"; $allTxtContent .= "\x4d\105\124\101\104\101\x54\x41\x3a\xa"; $allTxtContent .= str_repeat("\x2d", 40) . "\12"; $allTxtContent .= sprintf("\101\164\x74\145\x6d\x70\164\x20\111\x44\x20\x20\40\x20\40\72\40\x25\163\xa", $attempt); $allTxtContent .= sprintf("\103\115\111\x44\40\40\40\x20\x20\40\x20\40\x20\40\x20\x3a\40\45\163\12", $cmid); $allTxtContent .= sprintf("\120\145\156\147\147\165\x6e\141\x20\x20\x20\x20\40\x20\40\72\40\45\x73\xa", isset($username) ? $username : "\x55\156\x6b\156\157\x77\156\x20\125\163\x65\162"); $allTxtContent .= sprintf("\124\141\156\x67\x67\141\x6c\40\123\x63\x72\x61\x70\x65\x20\x3a\x20\x25\x73\12", date("\131\x2d\x6d\55\x64\40\110\x3a\x69\72\x73")); $allTxtContent .= sprintf("\124\x6f\x74\x61\x6c\40\x46\151\154\145\40\40\40\40\40\72\40\45\144\12", count($allQuestions)); $typeStats = array(); $multipleChoiceCount = 0; $singleChoiceCount = 0; $totalQuestionsCount = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { $totalQuestionsCount++; $type = $question["\x74\171\x70\x65"]; if (!isset($typeStats[$type])) { $typeStats[$type] = 0; } $typeStats[$type]++; if ($type === "\155\165\154\x74\x69\143\x68\x6f\151\143\145") { if (isset($question["\151\163\x5f\155\165\x6c\x74\151\x70\x6c\145\x5f\141\x6e\x73\167\145\162"]) && $question["\x69\x73\x5f\x6d\165\154\164\x69\160\x6c\145\137\141\x6e\x73\167\x65\x72"]) { $multipleChoiceCount++; } else { $singleChoiceCount++; } } } } $allTxtContent .= sprintf("\x54\x6f\x74\x61\154\x20\120\145\162\x74\x61\x6e\171\x61\x61\156\x3a\40\45\x64\xa", $totalQuestionsCount); $allTxtContent .= sprintf("\115\165\x6c\x74\151\160\x6c\145\40\103\150\157\x69\x63\145\40\72\x20\45\x64\xa", $multipleChoiceCount); $allTxtContent .= sprintf("\x53\151\x6e\x67\154\x65\x20\103\150\157\x69\143\x65\40\40\x20\x3a\40\x25\x64\xa", $singleChoiceCount); $allTxtContent .= "\xa" . str_repeat("\xe2\225\x90", 60) . "\xa\xa"; $questionCounter = 0; foreach ($allQuestions as $filename => $questions) { $allTxtContent .= "\12" . str_repeat("\xe2\x95\x90", 60) . "\xa"; $allTxtContent .= "\106\x49\114\105\72\x20" . strtoupper($filename) . "\xa"; $allTxtContent .= sprintf("\x4a\x75\155\154\141\x68\40\120\145\162\x74\141\x6e\x79\x61\141\x6e\x3a\x20\x25\144\12", count($questions)); $allTxtContent .= str_repeat("\342\225\x90", 60) . "\12\xa"; foreach ($questions as $question) { $questionCounter++; $allTxtContent .= formatQuestionForText($question, $questionCounter); } $allTxtContent .= "\12" . str_repeat("\x2d", 60) . "\12"; $allTxtContent .= "\123\124\x41\x54\x49\123\x54\x49\113\x20\x46\111\114\x45\x20" . strtoupper($filename) . "\72\xa"; $allTxtContent .= str_repeat("\x2d", 60) . "\xa"; $fileTypeStats = array(); foreach ($questions as $question) { $type = $question["\164\171\160\145"]; if (!isset($fileTypeStats[$type])) { $fileTypeStats[$type] = 0; } $fileTypeStats[$type]++; } foreach ($fileTypeStats as $type => $count) { $typeName = ucfirst($type); $percentage = round($count / count($questions) * 100, 1); if ($type === "\155\165\x6c\x74\x69\x63\x68\157\x69\143\145") { $multiCount = 0; $singleCount = 0; foreach ($questions as $q) { if ($q["\164\x79\160\145"] === "\155\165\x6c\x74\151\143\x68\x6f\151\143\145") { if (isset($q["\x69\163\137\155\165\x6c\164\151\x70\154\x65\137\x61\156\163\167\145\162"]) && $q["\151\x73\x5f\x6d\x75\x6c\x74\151\160\154\x65\x5f\141\156\163\x77\145\162"]) { $multiCount++; } else { $singleCount++; } } } $allTxtContent .= sprintf("\45\55\62\60\163\72\40\45\x32\144\x20\50\x25\x35\56\x31\x66\x25\45\51\xa", $typeName, $count, $percentage); $allTxtContent .= sprintf("\40\40\55\40\x4d\165\x6c\164\x69\x70\154\145\x20\103\150\157\151\143\x65\72\x20\x25\x32\x64\x20\x28\x25\65\56\x31\146\x25\45\x29\xa", $multiCount, round($multiCount / count($questions) * 100, 1)); $allTxtContent .= sprintf("\x20\x20\55\x20\x53\x69\x6e\x67\154\x65\40\x43\x68\157\x69\143\x65\x20\x20\72\x20\45\x32\x64\x20\50\x25\65\x2e\x31\x66\x25\45\x29\xa", $singleCount, round($singleCount / count($questions) * 100, 1)); } else { $allTxtContent .= sprintf("\45\55\x32\60\x73\72\x20\x25\62\x64\x20\x28\x25\65\56\x31\146\x25\x25\x29\12", $typeName, $count, $percentage); } } $allTxtContent .= "\xa" . str_repeat("\xe2\225\x90", 60) . "\12\12"; } $allTxtContent .= "\xa" . str_repeat("\xe2\225\x90", 60) . "\12"; $allTxtContent .= "\x52\x49\116\x47\113\x41\123\101\116\x20\101\113\110\x49\122\12"; $allTxtContent .= str_repeat("\xe2\x95\x90", 60) . "\xa\xa"; $allTxtContent .= "\123\124\101\x54\x49\x53\124\x49\113\40\112\105\x4e\x49\123\x20\x50\105\122\124\x41\x4e\131\x41\101\116\x3a\12"; $allTxtContent .= str_repeat("\x2d", 40) . "\xa"; foreach ($typeStats as $type => $count) { $typeName = ucfirst($type); $percentage = round($count / $totalQuestionsCount * 100, 1); if ($type === "\x6d\x75\154\x74\151\x63\x68\157\x69\143\x65") { $multiPercentage = $totalQuestionsCount > 0 ? round($multipleChoiceCount / $totalQuestionsCount * 100, 1) : 0; $singlePercentage = $totalQuestionsCount > 0 ? round($singleChoiceCount / $totalQuestionsCount * 100, 1) : 0; $allTxtContent .= sprintf("\45\x2d\62\x30\x73\x3a\x20\x25\x33\x64\x20\50\45\65\56\x31\146\45\x25\51\xa", $typeName, $count, $percentage); $allTxtContent .= sprintf("\x20\40\55\40\115\165\154\164\151\x70\154\x65\x20\x43\150\x6f\151\x63\145\72\x20\x25\x33\x64\x20\x28\45\65\56\61\x66\x25\x25\51\12", $multipleChoiceCount, $multiPercentage); $allTxtContent .= sprintf("\40\40\x2d\40\x53\x69\x6e\x67\x6c\145\40\103\150\157\x69\143\x65\40\40\72\40\45\x33\144\40\x28\45\65\x2e\61\146\x25\x25\x29\xa", $singleChoiceCount, $singlePercentage); } else { $allTxtContent .= sprintf("\45\x2d\x32\60\163\x3a\40\x25\63\144\40\x28\x25\65\x2e\x31\146\x25\x25\51\12", $typeName, $count, $percentage); } } $allTxtContent .= "\xa" . str_repeat("\x2d", 40) . "\12"; $allTxtContent .= sprintf("\x54\117\124\x41\x4c\x20\120\105\x52\x54\101\116\x59\101\x41\x4e\40\40\72\x20\x25\144\xa", $totalQuestionsCount); $allTxtContent .= "\xa\xa" . str_repeat("\xe2\225\x90", 60) . "\xa"; $allTxtContent .= "\x49\116\106\117\x52\x4d\101\x53\111\x20\106\x49\x4c\105\xa"; $allTxtContent .= str_repeat("\342\225\220", 60) . "\12\xa"; $allTxtContent .= sprintf("\x46\x69\x6c\145\x20\151\x6e\151\x20\x64\151\x62\165\x61\x74\x20\x70\x61\144\141\40\40\x3a\x20\x25\163\xa", date("\x59\55\155\x2d\x64\x20\110\72\x69\x3a\163")); $allTxtContent .= sprintf("\104\151\162\x65\x6b\164\x6f\162\x69\x20\160\145\x6e\x79\151\155\x70\141\x6e\x61\156\x20\72\x20\x25\x73\12", realpath($downloadDir)); $allTxtContent .= sprintf("\x4a\x75\155\154\141\x68\40\x66\151\x6c\x65\40\x73\x75\x6d\142\145\x72\40\x20\x20\40\72\x20\45\144\xa", count($allQuestions)); if (isset($extractionResult["\151\x6d\x61\147\145\x73"])) { $imageCount = count($extractionResult["\x69\x6d\x61\x67\x65\163"]); $allTxtContent .= sprintf("\x54\x6f\164\x61\154\x20\x67\141\x6d\x62\141\162\40\x20\x20\x20\x20\40\40\x20\x20\x3a\40\45\x64\xa", $imageCount); } $allTxtContent .= "\xa" . str_repeat("\x2a", 80) . "\xa"; $allTxtContent .= "\114\105\x47\x45\116\x44\x41\x3a\xa"; $allTxtContent .= "\133\xe2\x9c\223\135\40\55\x20\x43\x68\145\143\x6b\142\x6f\x78\x20\171\141\x6e\x67\40\x64\151\x70\x69\x6c\151\x68\x20\50\x4d\x75\154\164\151\160\x6c\x65\x20\103\150\157\151\x63\145\51\12"; $allTxtContent .= "\133\342\x98\205\x5d\40\55\x20\122\141\144\x69\157\40\171\141\x6e\147\40\144\x69\x70\151\x6c\151\150\x20\50\123\151\156\x67\154\145\x20\x43\150\x6f\151\x63\x65\x29\12"; $allTxtContent .= "\133\40\x5d\x20\55\40\x4f\x70\163\x69\40\164\151\x64\141\x6b\40\144\151\x70\x69\x6c\x69\150\xa"; $allTxtContent .= "\x5b\342\x97\x8b\x5d\40\55\x20\122\141\144\151\157\x20\x74\x69\x64\141\x6b\40\144\151\160\x69\x6c\x69\x68\12"; $allTxtContent .= "\342\x9c\x93\40\x20\x20\x20\x2d\40\111\x74\x65\155\x20\144\162\157\160\144\157\x77\x6e\40\171\x61\x6e\147\x20\164\x65\154\x61\x68\40\x64\x69\152\141\167\141\142\xa"; $allTxtContent .= "\xe2\234\x97\x20\x20\40\x20\x2d\x20\111\x74\145\x6d\x20\144\x72\157\x70\x64\157\x77\156\40\x62\145\x6c\165\x6d\x20\144\151\x6a\141\167\141\x62\12"; $allTxtContent .= str_repeat("\52", 80) . "\12"; $allTxtPath = $downloadDir . "\x2f\123\105\115\125\x41\x5f\x50\x45\x52\124\101\116\x59\101\101\x4e\56\x74\x78\164"; file_put_contents($allTxtPath, $allTxtContent); echo "\x1b\x5b\61\x3b\x39\62\155\xe2\234\223\40\106\x69\x6c\x65\40\147\141\x62\x75\156\147\x61\x6e\40\x73\x65\155\x75\x61\40\x70\x65\162\x74\x61\x6e\171\141\x61\x6e\x20\144\x69\x73\151\x6d\x70\141\156\40\153\145\x20{$allTxtPath}\33\133\60\x6d\xa"; foreach ($allQuestions as $filename => $questions) { $individualContent = str_repeat("\xe2\x95\220", 60) . "\xa"; $individualContent .= strtoupper(str_replace("\56\x68\x74\155\154", '', $filename)) . "\xa"; $individualContent .= sprintf("\x44\x61\x72\x69\40\x41\164\164\145\x6d\x70\164\x3a\x20\x25\x73\x20\174\x20\x43\x4d\x49\x44\x3a\x20\45\x73\12", $attempt, $cmid); $individualContent .= str_repeat("\xe2\225\x90", 60) . "\xa\12"; $fileQuestionCount = 0; $fileTypeStats = array(); $fileMultiCount = 0; $fileSingleCount = 0; foreach ($questions as $question) { $fileQuestionCount++; $individualContent .= formatQuestionForText($question, $fileQuestionCount); $type = $question["\x74\x79\160\145"]; if (!isset($fileTypeStats[$type])) { $fileTypeStats[$type] = 0; } $fileTypeStats[$type]++; if ($type === "\155\x75\154\x74\151\x63\x68\157\x69\x63\145") { if (isset($question["\151\x73\x5f\155\x75\x6c\164\151\x70\154\x65\x5f\141\156\x73\x77\x65\162"]) && $question["\151\x73\x5f\x6d\165\x6c\164\x69\x70\x6c\x65\x5f\x61\x6e\163\167\x65\x72"]) { $fileMultiCount++; } else { $fileSingleCount++; } } } $individualContent .= "\xa" . str_repeat("\xe2\225\220", 60) . "\12"; $individualContent .= "\x53\x54\x41\x54\x49\123\x54\x49\113\12"; $individualContent .= str_repeat("\342\x95\x90", 60) . "\12\12"; $individualContent .= "\x4a\x75\155\154\141\x68\40\120\145\162\164\141\x6e\x79\x61\x61\x6e\x3a\x20" . count($questions) . "\12\xa"; foreach ($fileTypeStats as $type => $count) { $typeName = ucfirst($type); $percentage = round($count / count($questions) * 100, 1); if ($type === "\x6d\x75\x6c\164\x69\x63\x68\x6f\x69\143\x65") { $multiPercent = round($fileMultiCount / count($questions) * 100, 1); $singlePercent = round($fileSingleCount / count($questions) * 100, 1); $individualContent .= sprintf("\x25\55\62\x30\x73\x3a\x20\x25\62\x64\x20\x28\45\65\56\x31\x66\45\x25\51\xa", $typeName, $count, $percentage); $individualContent .= sprintf("\x20\40\55\40\115\165\154\x74\151\x70\154\145\x20\103\x68\157\x69\143\145\x3a\x20\x25\62\x64\40\x28\x25\65\56\61\146\x25\45\51\12", $fileMultiCount, $multiPercent); $individualContent .= sprintf("\40\x20\55\x20\x53\151\156\147\x6c\145\x20\103\x68\x6f\151\143\x65\40\x20\x3a\40\45\62\x64\x20\x28\45\65\x2e\x31\146\45\x25\51\12", $fileSingleCount, $singlePercent); } else { $individualContent .= sprintf("\45\x2d\x32\x30\163\72\x20\x25\x32\x64\x20\50\45\x35\56\61\x66\45\45\x29\xa", $typeName, $count, $percentage); } } $individualContent .= "\12" . str_repeat("\52", 80) . "\xa"; $individualContent .= "\104\151\142\165\x61\x74\72\x20" . date("\131\x2d\155\55\x64\40\110\x3a\151\72\163") . "\12"; $individualContent .= "\106\x69\x6c\145\x3a\40" . $filename . "\12"; $individualContent .= str_repeat("\52", 80) . "\12"; $txtFilename = str_replace("\x2e\x68\164\155\154", "\x5f\x44\x45\x54\101\111\114\56\164\170\x74", $filename); $txtPath = $downloadDir . "\57" . $txtFilename; file_put_contents($txtPath, $individualContent); echo "\x1b\x5b\x31\x3b\x39\62\x6d\342\234\x93\40\110\x61\x73\x69\x6c\x20{$filename}\40\144\151\163\151\155\160\x61\156\40\153\145\40{$txtPath}\x1b\x5b\x30\x6d\xa"; } echo "\12\33\x5b\x31\x3b\x39\x32\155\xe2\234\223\x20\x47\105\115\111\x4e\x49\40\101\x50\111\x20\x64\x69\141\x6b\164\x69\x66\153\x61\156\x1b\133\60\155\12"; $useGeminiStaged = "\171"; if (strtolower($useGeminiStaged) === "\x79") { $apiKeyFile = "\x47\x45\x4d\111\116\x49\137\x61\x70\151\56\164\x78\x74"; $geminiApiKey = file_exists($apiKeyFile) ? trim(file_get_contents($apiKeyFile)) : ''; if (empty($geminiApiKey)) { echo "{$m}\342\232\xa0\xef\270\217\40\101\x50\111\40\x4b\x65\171\x20\107\x45\x4d\x49\x4e\x49\x20\x74\151\x64\141\153\40\144\151\x74\145\x6d\x75\153\x61\156\56\x20\110\x61\x72\x61\160\x20\x73\x69\155\x70\x61\156\40\101\120\111\40\x4b\145\171\x20\x74\x65\x72\x6c\x65\142\151\150\x20\144\x61\x68\x75\x6c\x75\40\155\x65\154\x61\x6c\165\x69\40\155\145\x6e\165\40\x75\x74\141\x6d\x61\56{$p}\xa"; } else { $geminiConfig = showGeminiMenuStaged($downloadDir, $allQuestions, $geminiApiKey); if ($geminiConfig) { $geminiResult = sendToGeminiAPIInParts($allQuestions, $geminiConfig["\x69\155\x61\147\x65\163\x5f\x64\151\x72"], $geminiConfig["\x61\x70\x69\137\x6b\x65\x79"], $geminiConfig["\x70\141\x72\164\x73"]); if ($geminiResult && $geminiResult["\x73\x75\143\x63\x65\163\x73"]) { echo "\xa\x1b\x5b\x31\x3b\71\x33\x6d\111\x6e\147\x69\156\x20\155\145\155\x62\141\x6e\x64\151\156\147\x6b\x61\x6e\40\x6a\x61\x77\x61\x62\x61\156\40\107\105\x4d\x49\116\111\x20\144\145\x6e\147\x61\x6e\40\152\x61\167\x61\x62\141\x6e\40\171\141\156\147\40\163\x75\144\141\x68\x20\x61\144\141\77\x20\50\x79\57\x6e\51\72\x20\x1b\133\x30\155"; $compareAnswers = trim(fgets(STDIN)); if (strtolower($compareAnswers) === "\171") { if (file_exists($geminiResult["\x63\x6f\155\142\151\156\x65\144\x5f\146\151\154\145"])) { $geminiAnswers = file_get_contents($geminiResult["\143\157\x6d\142\x69\x6e\x65\144\x5f\x66\151\154\145"]); if (!empty($geminiAnswers)) { $comparisonResult = compareAnswersWithGemini($allQuestions, $geminiAnswers, $downloadDir); if ($comparisonResult && isset($comparisonResult["\146\151\154\145\137\160\141\x74\x68"])) { echo "\12\x1b\133\61\x3b\x39\62\x6d\xe2\x9c\x93\40\106\151\x6c\x65\40\x70\145\x72\142\x61\156\x64\x69\x6e\147\x61\156\40\x64\151\142\x75\x61\x74\x3a\40" . basename($comparisonResult["\x66\x69\154\145\x5f\x70\x61\164\x68"]) . "\x1b\x5b\x30\x6d\xa"; echo "\33\133\61\73\71\x33\155\122\x69\x6e\147\153\141\x73\x61\156\x20\120\x65\x72\x62\x61\x6e\x64\x69\x6e\147\x61\x6e\72\33\x5b\60\x6d\xa"; echo "\33\133\61\x3b\71\x32\x6d\x20\40\124\157\x74\x61\x6c\x20\160\x65\x72\164\141\156\171\141\x61\x6e\x3a\40" . $comparisonResult["\x74\x6f\x74\x61\154"] . "\33\x5b\60\155\12"; echo "\33\133\61\73\x39\62\x6d\40\40\103\x6f\143\157\x6b\x3a\x20" . $comparisonResult["\x6d\141\x74\143\x68\151\x6e\x67"] . "\40\x28" . ($comparisonResult["\164\x6f\x74\x61\x6c"] > 0 ? round($comparisonResult["\155\x61\x74\143\150\x69\156\147"] / $comparisonResult["\x74\157\164\x61\154"] * 100, 1) : 0) . "\x25\x29\x1b\133\x30\x6d\xa"; echo "\x1b\133\61\x3b\x39\x31\155\40\40\102\145\x72\x62\x65\144\141\x3a\40" . $comparisonResult["\x64\151\x66\146\x65\162\x65\x6e\164"] . "\40\x28" . ($comparisonResult["\x74\157\x74\x61\x6c"] > 0 ? round($comparisonResult["\144\x69\x66\146\x65\x72\x65\156\164"] / $comparisonResult["\164\x6f\164\141\154"] * 100, 1) : 0) . "\x25\51\x1b\x5b\60\155\12"; } } else { echo "\x1b\133\61\x3b\x39\61\x6d\xe2\x9c\227\40\x46\151\154\x65\40\152\x61\167\141\142\141\156\x20\x47\x65\155\x69\156\x69\40\153\157\x73\157\x6e\147\x20\141\x74\141\x75\40\164\151\144\x61\x6b\40\x62\x69\163\x61\40\144\x69\142\141\x63\x61\x1b\133\60\x6d\xa"; } } else { echo "\33\133\61\73\x39\61\x6d\342\234\x97\40\x46\x69\154\145\40\x6a\141\x77\x61\x62\x61\x6e\40\x47\145\x6d\x69\156\x69\x20\x74\151\144\x61\x6b\x20\x64\151\x74\x65\155\x75\153\x61\156\72\x20" . $geminiResult["\143\157\155\x62\x69\156\x65\144\137\x66\151\x6c\x65"] . "\x1b\x5b\60\155\xa"; } } echo "\12\x1b\133\x31\73\x39\66\x6d" . str_repeat("\342\225\x90", 60) . "\33\133\x30\x6d\xa"; echo "\33\133\61\73\71\62\155\106\x49\x4c\x45\40\x4a\101\127\101\x42\101\116\x20\x59\101\116\x47\x20\104\111\x42\125\x41\x54\x3a\x1b\x5b\x30\x6d\xa"; echo "\33\x5b\x31\x3b\x39\x36\x6d" . str_repeat("\xe2\225\x90", 60) . "\33\x5b\x30\x6d\xa"; if (file_exists($geminiResult["\143\x6f\x6d\142\x69\156\145\x64\137\x66\151\x6c\145"])) { $fileSize = filesize($geminiResult["\x63\157\x6d\x62\151\156\x65\x64\x5f\x66\151\154\145"]); $sizeFormatted = round($fileSize / 1024, 2) . "\40\113\x42"; echo "\x1b\133\x31\73\71\x32\155\xe2\x9c\223\40\112\141\x77\x61\x62\141\156\40\114\145\156\147\x6b\141\x70\72\40" . basename($geminiResult["\x63\157\155\142\x69\156\145\144\137\146\x69\x6c\x65"]) . "\x20\50{$sizeFormatted}\x29\x1b\133\x30\155\xa"; } $partFiles = glob($downloadDir . "\x2f\x4a\101\x57\101\102\x41\116\137\102\101\x47\x49\101\116\x5f\x2a\x2e\x74\170\164"); if (!empty($partFiles)) { echo "\12\33\x5b\x31\x3b\x39\x33\x6d\106\151\154\x65\40\112\141\167\x61\x62\x61\156\40\160\145\x72\40\x42\x61\147\x69\141\x6e\72\x1b\133\x30\155\xa"; foreach ($partFiles as $partFile) { $partSize = filesize($partFile); $partSizeFormatted = round($partSize / 1024, 2) . "\40\x4b\x42"; echo "\x1b\x5b\61\x3b\x39\62\155\x20\40\x2d\40" . basename($partFile) . "\x20\x28{$partSizeFormatted}\x29\x1b\133\x30\x6d\12"; } } $comparisonFiles = glob($downloadDir . "\57\x50\x45\x52\102\x41\x4e\104\111\116\x47\x41\x4e\137\112\101\x57\x41\102\x41\x4e\x5f\x2a\x2e\164\x78\164"); if (!empty($comparisonFiles)) { echo "\xa\33\133\61\x3b\x39\63\155\x46\151\x6c\x65\x20\x50\145\x72\x62\141\x6e\144\151\156\147\x61\156\72\x1b\x5b\x30\x6d\xa"; foreach ($comparisonFiles as $compFile) { $compSize = filesize($compFile); $compSizeFormatted = round($compSize / 1024, 2) . "\x20\113\x42"; echo "\33\x5b\61\73\x39\62\155\40\x20\55\40" . basename($compFile) . "\40\x28{$compSizeFormatted}\x29\33\133\x30\x6d\12"; } } echo "\12\x1b\x5b\x31\73\x39\63\x6d\x49\x6e\147\151\x6e\x20\155\145\154\151\150\x61\x74\x20\x70\162\x65\x76\x69\x65\x77\40\152\141\x77\x61\142\141\156\77\40\50\171\x2f\x6e\51\72\40\33\x5b\x30\x6d"; $previewAnswer = trim(fgets(STDIN)); if (strtolower($previewAnswer) === "\171") { if (file_exists($geminiResult["\x63\x6f\x6d\142\x69\x6e\x65\144\x5f\x66\x69\x6c\145"])) { $content = file_get_contents($geminiResult["\x63\157\155\142\x69\x6e\145\144\137\x66\x69\154\145"]); $lines = explode("\xa", $content); echo "\12\33\133\x31\73\71\x36\155" . str_repeat("\342\225\220", 60) . "\x1b\133\x30\155\12"; echo "\33\133\x31\x3b\71\x32\155\120\x52\105\x56\x49\x45\x57\40\112\x41\x57\x41\102\101\x4e\x20\x47\x45\x4d\x49\116\111\x3a\33\133\x30\155\xa"; echo "\x1b\133\x31\73\71\66\155" . str_repeat("\xe2\225\x90", 60) . "\33\133\60\x6d\12"; $previewCount = 0; for ($i = 0; $i < min(10, count($lines)); $i++) { $line = $lines[$i]; if (trim($line) !== '' && !preg_match("\x2f\136\133\x3d\52\x2d\x5d\53\44\57", $line)) { if (preg_match("\x2f\x5e\x5c\x64\x2b\134\56\x2f", $line)) { echo "\33\133\61\73\71\66\155" . $line . "\33\x5b\x30\155\12"; } else { echo "\x1b\133\61\x3b\71\67\x6d" . $line . "\33\133\x30\x6d\xa"; } $previewCount++; } } if (count($lines) > 10) { echo "\12\33\133\61\x3b\x39\x33\x6d\56\56\x2e\40\x28\154\141\x6e\152\165\x74\153\141\x6e\x20\x64\151\x20\x66\x69\154\x65\40\x6c\145\x6e\147\153\141\x70\x29\33\133\60\155\12"; } echo "\12\33\133\x31\73\71\62\155\x54\157\164\141\154\x20\x62\141\162\151\x73\40\144\x61\154\x61\x6d\40\x66\x69\x6c\x65\x3a\x20" . count($lines) . "\x1b\x5b\60\x6d\12"; echo "\12\x1b\x5b\61\x3b\71\x33\x6d\124\145\x6b\141\x6e\40\105\x6e\x74\x65\x72\40\165\x6e\164\165\x6b\40\155\145\154\141\156\152\165\164\153\141\156\56\56\56\33\x5b\x30\155"; fflush(STDOUT); stream_set_blocking(STDIN, false); while (fgets(STDIN) !== false) { } stream_set_blocking(STDIN, true); fgets(STDIN); } } } } } } } } } $metadata = array("\163\x63\162\x61\x70\x65\x64\137\x61\164" => date("\x59\x2d\x6d\55\144\x20\110\x3a\x69\x3a\163"), "\141\164\x74\145\155\160\164\137\151\x64" => $attempt, "\x63\x6d\151\x64" => $cmid, "\x75\x73\145\x72\156\141\x6d\145" => isset($username) ? $username : "\125\156\x6b\x6e\x6f\167\156\x20\x55\163\x65\162", "\x6d\x61\170\137\x70\141\147\x65\163\137\164\162\151\x65\144" => $maxPages + 1, "\x73\x75\x63\143\x65\x73\163\x66\x75\x6c\137\160\x61\147\145\x73" => count($savedFiles), "\x74\157\x74\141\x6c\137\x66\151\154\x65\x73" => $totalFiles, "\x64\x6f\x77\x6e\154\x6f\141\144\x5f\144\x69\162\145\143\x74\x6f\x72\x79" => realpath($downloadDir), "\x71\165\x65\163\164\151\157\x6e\x73\137\x65\x78\x74\x72\x61\143\x74\x65\144" => $extractQuestions, "\151\x6d\x61\147\145\x73\137\x64\x6f\167\156\x6c\x6f\x61\144\x65\x64" => $downloadImages, "\x66\151\x6c\145\163" => array_keys($allFiles)); $metadataPath = saveToDownloadDir("\155\145\164\x61\144\141\x74\x61\x2e\152\x73\x6f\x6e", json_encode($metadata, JSON_PRETTY_PRINT), $downloadDir); echo "\12\33\133\x31\73\x39\62\155\xe2\x9c\223\40\115\145\164\141\144\141\164\x61\40\x64\151\163\x69\155\x70\141\x6e\40\153\145\x20{$metadataPath}\33\x5b\60\x6d\xa"; echo "\12\33\133\x31\73\x39\x36\155" . str_repeat("\xe2\225\220", 60) . "\x1b\133\60\155\xa"; echo "\x1b\133\x31\73\x39\62\155\x50\x52\x4f\123\x45\123\40\x53\105\114\105\123\101\111\x21\x1b\x5b\60\155\xa"; echo "\33\x5b\x31\73\x39\x33\155\x53\145\155\165\x61\40\x64\x61\164\141\x20\x74\145\154\x61\x68\40\x64\x69\x73\151\155\160\141\x6e\40\x64\x69\x3a\x20" . realpath($downloadDir) . "\x1b\133\60\155\xa"; echo "\xa\33\x5b\61\x3b\71\66\x6d\133\123\x54\122\125\x4b\x54\125\x52\x20\106\x4f\x4c\104\x45\122\x5d\33\133\60\155\xa"; echo "\33\133\61\x3b\x39\60\x6d" . realpath($downloadDir) . "\x2f\33\x5b\60\x6d\xa"; echo "\x1b\133\61\73\71\60\x6d\342\x94\234\xe2\224\200\xe2\x94\200\40\144\141\x73\x68\142\157\x61\x72\144\x2e\150\164\155\154\x1b\x5b\x30\155\12"; echo "\x1b\133\61\x3b\x39\60\155\xe2\224\x9c\xe2\x94\x80\342\224\200\40\163\x6f\141\154\56\150\x74\155\154\33\133\x30\x6d\12"; echo "\x1b\133\61\73\x39\60\x6d\342\x94\x9c\xe2\x94\x80\xe2\x94\x80\40\153\x65\162\152\141\60\56\x68\164\x6d\x6c\x2c\40\x6b\145\x72\x6a\x61\61\56\150\x74\155\154\x2c\40\56\56\56\33\x5b\x30\x6d\xa"; echo "\x1b\133\x31\x3b\71\60\x6d\342\224\x9c\xe2\224\x80\342\x94\x80\40\x66\x69\156\x69\x73\x68\56\150\x74\155\154\x1b\133\60\x6d\12"; echo "\x1b\133\x31\73\71\60\155\342\224\234\342\x94\x80\xe2\x94\200\40\141\x6e\x61\x6c\151\163\151\163\x2e\x68\x74\x6d\x6c\33\133\60\x6d\xa"; echo "\33\133\x31\73\71\60\x6d\342\x94\234\xe2\224\200\342\224\x80\x20\x6d\x65\x74\x61\144\141\164\x61\x2e\x6a\163\x6f\x6e\x1b\133\x30\x6d\xa"; if ($extractQuestions) { echo "\33\x5b\x31\73\x39\x30\x6d\342\x94\x9c\xe2\224\200\xe2\224\x80\x20\x71\165\x65\163\164\x69\x6f\x6e\x73\137\145\x78\164\162\x61\143\164\x65\x64\x2e\x6a\x73\157\156\33\133\60\x6d\xa"; echo "\x1b\133\61\x3b\x39\60\155\xe2\224\x9c\342\x94\200\xe2\224\x80\40\x64\x6f\x77\156\x6c\x6f\x61\x64\x65\x64\137\151\x6d\x61\147\x65\x73\x2e\152\x73\157\x6e\x1b\x5b\x30\x6d\xa"; echo "\33\x5b\61\x3b\71\x30\155\xe2\x94\x9c\342\x94\200\342\224\200\40\x53\x45\115\125\x41\137\x50\x45\122\124\x41\x4e\x59\101\101\116\56\164\x78\164\33\x5b\x30\x6d\xa"; echo "\x1b\133\61\73\71\60\155\xe2\x94\234\342\x94\x80\xe2\224\200\x20\133\156\141\x6d\x61\137\146\151\x6c\x65\x5d\137\104\105\x54\x41\x49\x4c\x2e\x74\x78\164\x1b\x5b\60\155\12"; echo "\x1b\x5b\x31\73\x39\x30\x6d\342\224\x9c\xe2\224\200\xe2\x94\x80\x20\x69\x6d\141\x67\145\163\x2f\x1b\x5b\x30\155\xa"; echo "\x1b\x5b\61\73\71\60\x6d\xe2\224\x82\x20\x20\40\xe2\x94\x9c\342\224\200\342\224\x80\40\153\145\x72\152\141\60\57\33\133\60\155\xa"; echo "\x1b\x5b\61\x3b\71\x30\155\xe2\224\x82\40\x20\x20\342\x94\202\40\x20\40\342\224\x9c\342\x94\x80\xe2\x94\x80\x20\161\133\x71\x75\145\x73\164\151\x6f\156\137\x69\144\x5d\x2f\33\x5b\x30\155\12"; echo "\x1b\133\x31\x3b\x39\60\155\xe2\224\202\40\40\x20\342\x94\202\x20\40\40\342\224\x82\40\40\40\342\224\x94\xe2\x94\x80\xe2\224\x80\x20\x5b\147\141\x6d\x62\141\x72\x5d\x1b\x5b\60\x6d\12"; echo "\x1b\133\x31\x3b\71\60\155\342\x94\202\40\40\40\342\224\x82\x20\x20\x20\xe2\224\224\xe2\224\200\xe2\224\200\x20\x2e\x2e\56\33\133\x30\155\xa"; echo "\33\x5b\x31\x3b\71\x30\x6d\xe2\224\202\x20\x20\x20\342\x94\x94\xe2\x94\x80\342\224\200\40\56\56\56\x1b\x5b\60\x6d\xa"; if (isset($extractionResult["\141\x6c\154\x5f\x69\155\141\147\x65\x73\137\x64\x69\162"])) { echo "\33\133\61\73\71\x30\x6d\342\x94\234\342\x94\200\xe2\x94\x80\x20\x61\154\x6c\137\x69\x6d\141\x67\145\x73\57\33\133\x30\x6d\xa"; echo "\33\133\61\73\x39\x30\x6d\342\x94\x82\40\x20\40\342\x94\x9c\342\x94\x80\xe2\x94\x80\x20\151\156\144\145\170\x2e\150\x74\x6d\154\x20\x28\147\x61\154\x6c\145\162\x79\51\33\x5b\x30\x6d\12"; echo "\33\133\61\73\x39\x30\155\342\x94\202\40\40\x20\xe2\x94\234\xe2\x94\x80\342\224\x80\x20\151\x6d\141\x67\x65\163\137\x64\141\164\x61\56\x6a\x73\157\156\33\x5b\60\155\12"; echo "\33\133\x31\x3b\x39\60\x6d\xe2\224\202\x20\x20\x20\342\224\x94\xe2\224\200\xe2\x94\200\40\133\x73\145\x6d\x75\141\137\147\141\x6d\142\x61\162\137\144\x69\153\x75\x6d\160\165\x6c\153\x61\x6e\x5d\x1b\133\60\155\xa"; } echo "\x1b\x5b\x31\x3b\71\x30\155\xe2\224\x9c\xe2\224\200\xe2\x94\200\x20\x72\x65\x70\157\162\x74\163\57\x1b\x5b\x30\x6d\xa"; echo "\33\133\61\73\x39\x30\155\xe2\x94\x82\40\x20\x20\342\224\x94\342\224\x80\342\224\x80\40\151\155\141\x67\145\x73\x5f\162\145\160\157\162\x74\x5f\133\164\151\155\x65\x73\164\141\155\x70\x5d\56\x74\x78\x74\33\x5b\60\155\xa"; $geminiFiles = glob($downloadDir . "\x2f\112\x41\x57\x41\102\x41\116\x5f\52\56\164\170\164"); if (!empty($geminiFiles)) { foreach ($geminiFiles as $geminiFile) { if (strpos($geminiFile, "\x47\105\x4d\111\116\111") !== false || strpos($geminiFile, "\102\101\x47\111\101\x4e") !== false) { echo "\33\x5b\x31\x3b\71\x32\x6d\342\x94\x9c\342\224\200\342\x94\200\40" . basename($geminiFile) . "\33\x5b\60\155\xa"; } } } $comparisonFiles = glob($downloadDir . "\x2f\x50\105\x52\102\101\116\104\111\x4e\107\101\116\137\52\x2e\164\170\164"); if (!empty($comparisonFiles)) { foreach ($comparisonFiles as $comparisonFile) { echo "\33\x5b\61\73\x39\x34\155\xe2\x94\x9c\xe2\x94\200\342\224\x80\x20" . basename($comparisonFile) . "\33\x5b\60\155\12"; } } if (isset($createZip) && $createZip) { echo "\33\133\x31\x3b\x39\60\x6d\342\224\224\xe2\224\200\342\224\200\x20\141\154\154\x5f\x69\x6d\x61\x67\145\x73\x5f\133\164\151\155\145\x73\164\141\155\x70\x5d\56\x7a\x69\x70\33\133\60\155\xa"; } } echo "\33\x5b\x31\73\71\x36\x6d" . str_repeat("\342\225\x90", 60) . "\x1b\133\x30\x6d\xa"; echo "\xa\33\133\x31\73\x39\x32\x6d\x54\x65\x72\151\155\x61\x20\153\141\163\x69\x68\x20\x74\x65\x6c\x61\150\x20\155\145\156\x67\147\x75\x6e\x61\x6b\x61\156\x20\105\x2d\x4c\145\141\x72\156\151\x6e\147\x20\121\165\145\163\x74\x69\x6f\x6e\x20\x53\x63\x72\141\160\x65\162\41\33\x5b\60\155\xa"; echo "\x1b\133\x31\73\71\63\155\x55\x6e\164\165\x6b\x20\x6d\x65\154\151\x68\141\164\x20\x67\141\154\x6c\145\x72\x79\40\147\x61\x6d\x62\141\x72\54\40\142\x75\x6b\141\x20\146\x69\154\145\72\33\133\x30\155\12"; if (isset($extractionResult["\x61\x6c\154\137\x69\x6d\141\x67\145\163\137\x64\151\162"])) { echo "\x1b\x5b\x31\73\x39\x37\x6d\40\x20" . $extractionResult["\141\x6c\x6c\x5f\x69\x6d\141\147\x65\x73\x5f\x64\151\162"] . "\57\151\156\144\145\170\x2e\x68\164\155\154\x1b\x5b\60\155\12"; } else { echo "\33\x5b\x31\73\71\x37\x6d\x20\40" . realpath($downloadDir) . "\x2f\151\155\141\147\145\x73\57\x1b\x5b\x30\155\12"; } $geminiFiles = glob($downloadDir . "\x2f\x4a\x41\x57\101\x42\x41\x4e\x5f\x2a\56\164\170\164"); if (!empty($geminiFiles)) { echo "\12\x1b\x5b\x31\73\71\x32\x6d\360\x9f\x93\x9d\x20\112\x61\x77\x61\142\x61\x6e\40\x64\141\162\x69\x20\107\105\x4d\111\x4e\111\40\x41\x50\111\72\x1b\133\x30\155\xa"; foreach ($geminiFiles as $geminiFile) { if (strpos($geminiFile, "\107\x45\115\111\x4e\111") !== false || strpos($geminiFile, "\102\101\107\111\x41\x4e") !== false) { echo "\33\x5b\x31\73\71\67\x6d\40\x20" . basename($geminiFile) . "\x1b\x5b\60\x6d\xa"; } } } echo "\xa{$h}\x54\x65\x6b\141\x6e\x20\x45\x6e\164\x65\x72\40\165\x6e\x74\x75\x6b\40\153\x65\155\x62\x61\x6c\151\40\x6b\145\x20\115\145\156\165\x20\x55\164\141\x6d\141\56\56\56{$p}"; fgets(STDIN); } goto MCp5N; sPThL: function displayToolsInfo() { global $m, $h, $p, $k, $bta, $ab; system("\143\x6c\145\x61\162"); echo "\12{$bta}" . str_repeat("\xe2\x95\220", 50) . "{$p}\xa"; echo "{$h}\40\x20\x20\111\116\x46\117\x52\115\101\x53\111\40\x54\117\117\x4c\123{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\220", 50) . "{$p}\xa\12"; echo "{$h}\xf0\x9f\223\x8b\40\106\111\124\125\122\40\125\124\x41\115\101\72{$p}\12"; echo "{$ab}" . str_repeat("\55", 40) . "{$p}\12"; echo "{$h}\342\x9c\x93\40{$p}\123\143\162\141\x70\x69\156\x67\x20\x6f\164\x6f\155\141\164\151\x73\x20\145\55\154\x65\141\x72\156\x69\156\x67{$p}\12"; echo "{$h}\xe2\234\223\x20{$p}\x45\153\x73\164\x72\x61\x6b\163\151\40\x73\145\155\165\x61\40\152\x65\x6e\x69\x73\40\x73\x6f\141\x6c{$p}\12"; echo "{$h}\xe2\234\x93\x20{$p}\x44\x6f\167\x6e\x6c\157\x61\144\40\x67\x61\x6d\142\x61\x72\x20\x70\145\162\164\x61\156\171\141\x61\x6e{$p}\12"; echo "{$h}\xe2\x9c\x93\x20{$p}\101\156\141\x6c\x69\163\x69\163\40\152\141\x77\x61\x62\x61\x6e\x20\x6f\164\157\x6d\141\x74\x69\x73{$p}\xa"; echo "{$ab}" . str_repeat("\55", 40) . "{$p}\xa\12"; echo "{$h}\360\x9f\x92\xb0\x20\x50\105\115\102\x45\114\111\101\x4e\72{$p}\12"; echo "{$ab}" . str_repeat("\x2d", 40) . "{$p}\12"; echo "{$h}\x48\141\x72\147\141\40\40\x3a\x20\x52\160\x20\x31\65\x2e\x30\60\60{$p}\xa"; echo "{$h}\113\x6f\156\164\x61\x6b\40\x3a\x20\100\106\165\x75\x6d\x61\61\66\40\50\x54\x65\x6c\145\147\x72\141\x6d\x29{$p}\12"; echo "{$h}\124\145\x6c\x65\147\x72\141\x6d\40\x3a\x20\150\x74\164\160\x73\72\57\57\x74\56\x6d\145\57\x46\x75\x75\155\x61\61\66{$p}\12"; echo "{$h}\125\160\x64\x61\x74\145\x20\72\x20\x4c\x69\x66\x65\164\x69\x6d\x65\x20\x73\x75\x70\160\157\x72\x74{$p}\xa"; echo "{$ab}" . str_repeat("\x2d", 40) . "{$p}\12\xa"; echo "{$m}\xe2\x9a\240\357\270\217\40\x20\125\x6e\x74\165\153\40\x74\165\152\165\141\x6e\x20\145\x64\x75\153\x61\163\151\40\x73\141\152\x61\56{$p}\xa"; echo "\12{$h}\124\145\153\x61\156\40\x45\156\x74\145\162\40\x75\156\x74\165\153\40\x6b\145\155\x62\x61\154\x69\56\56\x2e{$p}"; fgets(STDIN); } goto umAIW; yjeWS: function viewGeminiAnswerFile($filePath) { global $m, $h, $p, $k, $bta, $ab; while (true) { system("\x63\x6c\x65\141\x72"); echo "\xa{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; echo "{$h}\x49\x53\x49\x20\106\x49\x4c\x45\x3a\x20" . basename($filePath) . "{$p}\12"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; if (!file_exists($filePath)) { echo "{$m}\106\151\154\x65\40\164\151\144\x61\x6b\x20\144\x69\x74\x65\155\165\153\141\156\x2e{$p}\xa"; echo "\xa{$h}\x54\x65\153\x61\x6e\x20\105\x6e\x74\145\162\40\165\156\x74\165\153\40\x6b\x65\x6d\142\141\154\151\56\x2e\56{$p}"; fgets(STDIN); return; } $fileSize = filesize($filePath); $fileDate = date("\131\x2d\x6d\55\144\x20\110\x3a\x69\x3a\x73", filemtime($filePath)); $content = file_get_contents($filePath); $lines = explode("\12", $content); $totalLines = count($lines); echo "{$k}\111\x6e\146\x6f\x72\155\x61\x73\151\x20\106\x69\154\145\72{$p}\xa"; echo "{$ab}\x55\153\165\x72\141\x6e\x3a\x20" . round($fileSize / 1024, 2) . "\x20\x4b\x42{$p}\12"; echo "{$ab}\112\165\155\x6c\x61\x68\40\102\141\162\x69\x73\x3a\x20{$totalLines}{$p}\12"; echo "{$ab}\x44\151\x62\165\141\x74\x3a\x20{$fileDate}{$p}\12"; echo "{$ab}\x50\x61\164\x68\x3a\x20{$filePath}{$p}\12"; echo "\12{$k}\120\151\154\151\x68\x20\x6d\157\144\145\x20\x74\141\x6d\160\x69\154\141\156\72{$p}\xa"; echo "{$h}\x20\x20\x31\56\x20\x50\162\145\x76\151\145\x77\x20\x28\x35\x30\x20\x62\x61\162\x69\x73\40\160\145\x72\164\x61\155\x61\x29{$p}\12"; echo "{$h}\40\x20\62\x2e\40\x43\x61\x72\x69\40\153\x61\164\x61\x20\153\x75\156\143\x69{$p}\12"; echo "{$h}\40\40\63\56\40\114\151\150\x61\164\40\x62\x61\x67\151\141\x6e\x20\x74\x65\x72\x74\145\x6e\x74\x75{$p}\12"; echo "{$h}\x20\40\64\56\x20\x45\x78\x70\157\162\x74\x20\153\x65\40\x66\151\154\145\40\x6c\x61\x69\156{$p}\12"; echo "{$m}\40\x20\x35\x2e\x20\x4b\145\155\x62\x61\154\151\x20\153\145\40\x64\141\146\x74\x61\x72\x20\146\x69\154\145{$p}\12"; echo "{$k}\x50\151\x6c\x69\150\141\x6e\x20\50\61\x2d\x35\51\72\x20{$p}"; $choice = trim(fgets(STDIN)); switch ($choice) { case "\x31": echo "\12{$bta}\115\105\x4e\x41\x4d\120\111\114\x4b\x41\116\x20\x53\x45\x4c\125\x52\x55\x48\40\102\101\x52\111\123\40\x28{$totalLines}\x20\142\x61\x72\151\x73\x29\x3a{$p}\xa"; echo "{$u}" . str_repeat("\55", 80) . "{$p}\xa"; for ($i = 0; $i < $totalLines; $i++) { $lineNum = $i + 1; $line = $lines[$i]; if (preg_match("\x2f\x5e\134\144\x2b\134\x2e\x2f", $line)) { echo "{$h}{$line}{$p}\12"; } elseif (preg_match("\57\x5e\133\x3d\x2a\55\135\x2b\x24\x2f", $line)) { echo "{$ab}{$line}{$p}\xa"; } elseif (strpos(strtolower($line), "\x6a\x61\167\x61\142\x61\156") !== false) { echo "{$k}{$line}{$p}\12"; } else { echo "{$p}{$line}{$p}\xa"; } if (($i + 1) % 50 === 0 && $i + 1 < $totalLines) { echo "\12{$ab}\x2d\x2d\x2d\x20\102\x61\162\x69\163\40{$lineNum}\x20\x64\141\162\x69\x20{$totalLines}\x20\x2d\55\55{$p}\12"; echo "{$h}\124\145\153\x61\156\x20\105\156\x74\x65\162\40\x75\x6e\164\165\x6b\40\155\145\154\141\156\x6a\x75\164\153\x61\156\56\x2e\x2e{$p}"; fgets(STDIN); echo "{$u}" . str_repeat("\55", 80) . "{$p}\xa"; } } echo "\xa{$h}\x54\x6f\x74\141\x6c\x3a\40{$totalLines}\40\142\141\x72\151\x73{$p}\xa"; echo "\12{$h}\x54\145\x6b\141\x6e\x20\x45\156\x74\x65\162\x20\x75\x6e\x74\165\x6b\x20\x6b\145\155\x62\141\x6c\x69\x20\x6b\145\x20\155\x65\156\165\x2e\56\x2e{$p}"; fgets(STDIN); break; case "\62": echo "\xa{$k}\115\x61\163\165\153\x6b\x61\x6e\x20\x6b\x61\164\x61\40\153\x75\x6e\x63\151\40\171\141\x6e\147\40\144\151\143\141\162\151\x3a\x20{$p}"; $keyword = trim(fgets(STDIN)); if (empty($keyword)) { echo "{$m}\113\141\x74\x61\40\153\x75\156\x63\x69\x20\164\x69\x64\x61\x6b\40\142\157\154\145\150\x20\x6b\157\x73\157\156\x67\x2e{$p}\xa"; echo "\xa{$h}\x54\x65\153\x61\x6e\x20\x45\156\x74\x65\162\40\165\x6e\x74\x75\x6b\40\155\x65\x6c\141\x6e\x6a\165\164\153\x61\x6e\x2e\56\x2e{$p}"; fgets(STDIN); break; } $foundLines = array(); $keywordLower = strtolower($keyword); foreach ($lines as $lineNum => $line) { if (stripos($line, $keyword) !== false) { $foundLines[] = array("\x6c\151\156\x65\137\156\165\155" => $lineNum + 1, "\143\x6f\156\164\x65\156\164" => $line); } } echo "\xa{$bta}\110\x41\x53\x49\114\40\120\105\116\103\101\x52\x49\101\116\72\x20\x27{$keyword}\47{$p}\12"; echo "{$u}" . str_repeat("\55", 80) . "{$p}\xa"; if (empty($foundLines)) { echo "{$m}\124\151\144\141\x6b\x20\144\x69\164\x65\155\165\153\x61\156\x20\x62\x61\x72\x69\x73\x20\144\145\156\147\x61\x6e\40\x6b\x61\164\x61\40\153\x75\x6e\143\151\x20\47{$keyword}\47\x2e{$p}\xa"; } else { echo "{$h}\x44\151\x74\145\x6d\165\x6b\141\x6e\40" . count($foundLines) . "\x20\142\x61\x72\151\163\72{$p}\12\12"; foreach ($foundLines as $found) { $highlighted = str_ireplace($keyword, "{$h}{$keyword}{$p}", htmlspecialchars($found["\143\157\x6e\x74\145\x6e\x74"])); echo "{$k}\102\x61\x72\151\x73\x20{$found["\x6c\151\x6e\x65\137\156\x75\155"]}\x3a\40{$p}{$highlighted}{$p}\xa"; } } echo "\xa{$h}\x54\145\x6b\x61\x6e\x20\x45\x6e\x74\x65\162\40\x75\x6e\164\165\x6b\x20\x6d\145\x6c\141\x6e\152\165\164\153\141\156\56\x2e\56{$p}"; fgets(STDIN); break; case "\63": echo "\xa{$k}\115\x61\x73\x75\x6b\x6b\x61\x6e\x20\156\157\x6d\157\162\40\x62\x61\x72\x69\163\40\141\167\141\x6c\40\x28\61\55{$totalLines}\51\72\40{$p}"; $startLine = (int) trim(fgets(STDIN)) - 1; $startLine = max(0, min($startLine, $totalLines - 1)); echo "{$k}\115\141\163\165\x6b\153\141\156\40\x6a\x75\155\x6c\141\x68\40\x62\x61\x72\x69\x73\x20\x79\141\x6e\147\40\141\153\x61\x6e\x20\x64\151\x74\141\x6d\160\151\154\x6b\141\156\x20\50\61\x2d\61\60\60\51\72\40{$p}"; $numLines = (int) trim(fgets(STDIN)); $numLines = max(1, min($numLines, 100)); $endLine = min($startLine + $numLines, $totalLines); echo "\xa{$bta}\x4d\105\x4e\101\x4d\x50\111\x4c\x4b\x41\x4e\40\x42\x41\x52\x49\123\x20{$p}" . ($startLine + 1) . "{$bta}\x20\x53\101\115\120\x41\111\x20{$p}" . $endLine . "{$p}\12"; echo "{$u}" . str_repeat("\55", 80) . "{$p}\12"; for ($i = $startLine; $i < $endLine; $i++) { $lineNum = $i + 1; $line = $lines[$i]; if (preg_match("\x2f\x5e\x5c\144\x2b\134\56\x2f", $line)) { echo "{$h}{$lineNum}\72\x20{$p}{$line}{$p}\xa"; } elseif (preg_match("\57\136\133\x3d\52\55\x5d\x2b\44\57", $line)) { echo "{$ab}{$lineNum}\72\x20{$line}{$p}\12"; } else { echo "{$p}{$lineNum}\72\40{$line}{$p}\xa"; } } echo "\12{$h}\124\145\153\141\156\40\105\x6e\164\x65\162\40\165\x6e\x74\x75\x6b\x20\x6d\x65\154\x61\x6e\x6a\165\164\x6b\141\156\56\x2e\x2e{$p}"; fgets(STDIN); break; case "\x34": echo "\xa{$k}\x4d\141\163\165\x6b\153\141\x6e\x20\156\x61\155\x61\40\146\151\x6c\145\40\142\141\x72\165\40\x28\x63\x6f\x6e\164\157\x68\x3a\40\x6a\x61\x77\141\142\141\156\x5f\146\151\x6c\164\145\162\145\x64\x2e\x74\x78\164\51\72\40{$p}"; $newFilename = trim(fgets(STDIN)); if (empty($newFilename)) { echo "{$m}\116\141\x6d\141\x20\146\x69\x6c\x65\40\164\151\x64\141\153\x20\142\157\x6c\x65\x68\x20\153\x6f\x73\157\x6e\147\56{$p}\xa"; echo "\xa{$h}\x54\x65\153\x61\156\40\105\x6e\x74\145\162\40\x75\156\x74\x75\x6b\40\155\145\x6c\141\156\152\165\x74\x6b\141\x6e\56\56\x2e{$p}"; fgets(STDIN); break; } if (!preg_match("\57\x5c\56\164\170\x74\44\57\151", $newFilename)) { $newFilename .= "\56\x74\x78\x74"; } $newPath = dirname($filePath) . "\57" . $newFilename; if (file_exists($newPath)) { echo "{$k}\106\x69\x6c\145\40\163\x75\x64\x61\x68\40\141\144\141\56\40\x54\x69\x6d\x70\141\x3f\x20\x28\171\57\x6e\51\72\40{$p}"; $overwrite = trim(fgets(STDIN)); if (strtolower($overwrite) !== "\171") { echo "{$m}\x44\151\142\x61\164\141\x6c\x6b\x61\x6e\56{$p}\12"; echo "\xa{$h}\x54\x65\153\x61\x6e\40\105\156\164\145\x72\40\165\156\x74\165\x6b\x20\x6d\145\154\141\156\152\165\164\x6b\141\x6e\56\x2e\56{$p}"; fgets(STDIN); break; } } if (copy($filePath, $newPath)) { echo "{$h}\xe2\234\x93\x20\x46\151\154\145\40\x62\x65\x72\150\x61\x73\x69\154\40\x64\151\x73\141\154\x69\x6e\x20\153\145\72\40{$newPath}{$p}\xa"; } else { echo "{$m}\342\234\227\40\107\x61\x67\141\154\40\x6d\145\x6e\x79\141\x6c\151\x6e\x20\146\151\154\x65\56{$p}\xa"; } echo "\xa{$h}\x54\x65\x6b\141\156\x20\x45\156\x74\145\x72\x20\x75\156\164\165\153\x20\x6d\x65\154\141\156\152\165\x74\153\141\x6e\56\56\56{$p}"; fgets(STDIN); break; case "\65": return; default: echo "{$m}\120\151\154\151\x68\141\156\40\x74\151\144\x61\153\x20\166\141\x6c\x69\144\56{$p}\xa"; echo "\xa{$h}\124\x65\x6b\x61\156\40\x45\x6e\164\x65\x72\x20\165\156\164\165\x6b\40\155\145\x6c\x61\x6e\152\165\164\x6b\141\x6e\56\56\x2e{$p}"; fgets(STDIN); break; } } } goto af4lW; cxSmU: function clearCookies($cookieFile = "\x43\157\x6f\153\151\x65") { global $m, $h, $p, $k; echo "\12{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; echo "{$h}\115\105\x4e\x47\x48\x41\x50\125\x53\x20\x46\111\x4c\x45\x20\x43\x4f\x4f\x4b\111\x45{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; if (!file_exists($cookieFile)) { echo "{$m}\106\x69\154\145\40\47{$cookieFile}\x27\x20\x74\x69\x64\141\x6b\x20\x64\x69\x74\145\155\x75\153\141\x6e\x2e{$p}\xa"; } else { $fileSize = filesize($cookieFile); echo "{$k}\106\151\x6c\x65\x3a\40" . realpath($cookieFile) . "{$p}\xa"; echo "{$k}\125\x6b\x75\162\x61\x6e\72\40" . round($fileSize / 1024, 2) . "\40\x4b\x42{$p}\xa"; echo "\12{$k}\x41\160\x61\x6b\x61\x68\x20\101\x6e\x64\x61\x20\x79\x61\x6b\151\156\40\x69\156\147\151\x6e\40\x6d\x65\x6e\x67\150\141\160\165\163\40\146\151\154\x65\40\x63\157\157\153\x69\145\77\x20\50\171\57\x6e\51\72\40{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) === "\x79") { if (unlink($cookieFile)) { echo "{$h}\342\x9c\x93\40\106\151\x6c\145\x20\143\x6f\157\x6b\151\x65\x20\x62\145\162\150\x61\163\x69\154\40\x64\x69\150\141\160\165\x73\56{$p}\12"; } else { echo "{$m}\xe2\x9c\x97\x20\107\141\x67\141\x6c\40\x6d\145\156\147\150\x61\x70\165\x73\x20\x66\151\154\145\40\x63\157\x6f\153\151\145\x2e{$p}\12"; } } else { echo "{$m}\342\x9c\227\40\x50\145\156\147\150\x61\x70\165\x73\x61\156\40\x64\151\142\x61\164\141\x6c\x6b\x61\x6e\56{$p}\12"; } } echo "\xa{$h}\124\x65\153\141\156\x20\105\x6e\164\145\162\40\x75\156\164\x75\153\40\155\x65\154\141\156\x6a\165\x74\153\x61\x6e\x2e\56\x2e{$p}"; fgets(STDIN); } goto sPThL; D1lW8: function showGeminiMenuStaged($downloadDir, $allQuestions, $apiKey) { global $m, $h, $p, $k; system("\x63\154\145\x61\162"); echo "\12{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\12"; echo "{$h}\x4d\105\x4e\x55\40\x47\x45\x4d\x49\x4e\x49\x20\101\120\111\x20\x2d\40\x50\x45\116\107\x49\122\111\x4d\x41\x4e\x20\x42\105\x52\x54\101\110\101\120{$p}\xa"; echo "{$bta}" . str_repeat("\342\x95\x90", 60) . "{$p}\12"; $totalQuestions = 0; foreach ($allQuestions as $questions) { $totalQuestions += count($questions); } echo "{$h}\124\157\x74\141\154\x20\160\145\x72\164\141\156\171\x61\x61\156\40\x64\151\164\145\155\x75\x6b\141\156\72\40{$totalQuestions}{$p}\12"; $imagesDir = $downloadDir . "\57\141\154\x6c\x5f\x69\x6d\x61\x67\x65\163"; if (!is_dir($imagesDir)) { $imagesDir = $downloadDir . "\57\151\155\141\x67\145\163"; } $imageCount = 0; if (is_dir($imagesDir)) { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($imagesDir)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower(pathinfo($file->getFilename(), PATHINFO_EXTENSION)); if (in_array($ext, array("\x6a\x70\147", "\x6a\160\x65\147", "\x70\156\147", "\x67\x69\146", "\142\155\160", "\x77\145\x62\160"))) { $imageCount++; } } } } echo "{$h}\x54\x6f\x74\x61\154\x20\x67\x61\x6d\x62\x61\x72\x20\x64\x69\x74\x65\x6d\x75\153\x61\156\72\40{$imageCount}{$p}\12\12"; echo "{$k}\115\x65\156\x67\147\x75\x6e\141\153\x61\x6e\x20\x41\x50\x49\x20\x4b\145\171\40\x47\105\x4d\x49\x4e\111\40\x79\141\156\x67\40\x74\x65\x72\x73\151\155\160\141\x6e\x3a\x20{$p}" . substr($apiKey, 0, 8) . "\56\56\x2e" . substr($apiKey, -8) . "{$p}\xa"; echo "\12{$k}\120\x69\x6c\151\x68\x20\x6a\165\x6d\x6c\x61\150\40\x62\x61\x67\151\x61\x6e\x20\160\145\156\147\x69\x72\x69\155\x61\x6e\x3a{$p}\12"; echo "{$h}\x20\x20\x31\x2e\x20\62\x20\142\x61\x67\151\141\156\x20\x28\x73\145\164\x65\156\x67\x61\x68\x2d\x73\145\164\145\156\147\141\150\51{$p}\12"; echo "{$h}\40\x20\62\56\40\x33\x20\x62\141\x67\151\141\156{$p}\xa"; echo "{$h}\x20\40\63\56\x20\x34\40\x62\141\147\151\141\156{$p}\xa"; echo "{$h}\40\x20\64\x2e\x20\65\x20\142\141\x67\151\x61\x6e{$p}\12"; echo "{$h}\40\40\x35\56\40\123\x65\x73\x75\141\x69\x6b\141\156\40\152\165\155\154\x61\x68\40\x62\141\x67\x69\x61\x6e{$p}\12"; echo "{$k}\x50\x69\x6c\x69\150\141\x6e\40\x28\x31\x2d\x35\x2c\x20\x64\x65\146\141\165\154\164\x3a\x20\x33\x20\142\x61\x67\151\x61\156\51\x3a\40{$p}"; $choice = trim(fgets(STDIN)); $parts = 3; switch ($choice) { case "\61": $parts = 2; break; case "\62": $parts = 3; break; case "\x33": $parts = 4; break; case "\64": $parts = 5; break; case "\65": echo "{$k}\115\x61\163\165\x6b\x6b\x61\x6e\40\x6a\165\x6d\154\x61\x68\40\142\x61\x67\x69\141\x6e\x20\x79\x61\x6e\147\40\144\x69\151\x6e\147\151\x6e\x6b\141\156\40\50\x32\x2d\61\60\51\72\x20{$p}"; $customParts = (int) trim(fgets(STDIN)); $parts = max(2, min(10, $customParts)); break; default: $parts = 3; break; } $questionsPerPart = ceil($totalQuestions / $parts); system("\x63\x6c\145\x61\x72"); echo "\12{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; echo "{$h}\x52\x49\116\103\111\x41\116\x20\120\105\x4e\x47\x49\x52\111\115\x41\x4e\x20\x42\x45\x52\x54\101\x48\x41\120{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\xa"; echo "{$h}\124\x6f\164\x61\154\x20\120\x65\162\x74\141\x6e\x79\x61\x61\x6e\x3a\40{$totalQuestions}{$p}\12"; echo "{$h}\112\165\x6d\154\141\150\x20\x42\x61\x67\151\x61\156\x20\40\x3a\40{$parts}{$p}\12"; echo "{$h}\120\x65\162\x20\x42\141\x67\x69\141\156\x20\40\x20\40\x20\x3a\40\x7e{$questionsPerPart}\40\x70\145\x72\164\141\x6e\x79\x61\141\156{$p}\xa"; echo "{$h}\x54\x6f\164\141\154\x20\x47\x61\155\x62\141\162\40\40\x20\72\40{$imageCount}{$p}\xa"; echo "{$h}\x50\x65\x72\153\151\x72\x61\x61\156\40\x47\x61\x6d\142\141\162\40\x70\x65\162\x20\x42\x61\x67\151\x61\156\72\40\176" . ceil($imageCount / $parts) . "\x20\x67\x61\x6d\x62\x61\x72{$p}\12"; echo "\xa{$k}\x4b\x6f\x6e\x66\x69\162\155\x61\163\x69\x20\x70\145\x6e\147\x69\162\x69\x6d\141\x6e\x3f\x20\x28\131\57\156\51\72\40{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm ?: "\171") !== "\x79") { echo "{$m}\xe2\x9c\x97\40\x44\x69\142\141\x74\141\x6c\x6b\x61\x6e\40\x6f\x6c\145\x68\x20\160\145\x6e\147\147\x75\x6e\x61\56{$p}\12"; return false; } return array("\x61\160\151\x5f\153\145\x79" => $apiKey, "\160\x61\162\164\163" => $parts, "\151\155\x61\147\145\x73\137\144\151\162" => $imagesDir, "\x74\157\164\141\x6c\137\161\x75\x65\x73\x74\151\157\x6e\x73" => $totalQuestions, "\x74\157\x74\141\154\137\151\155\141\x67\x65\x73" => $imageCount); } goto Rgq50; XHjc7: function tim($tim) { global $h, $m; for ($i = $tim; $i > 0; $i--) { echo "{$h}\360\x9f\x91\211\120\x6c\x65\x61\163\x65\x20\x77\x61\151\x74\x20{$m}{$i}\40{$h}\x74\x6f\x20\143\154\x61\151\155\360\237\221\210{$p}"; sleep(1); echo "\40\x20\x20\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\xd"; } return $i; } goto BW_cu; T_yfc: function displayMatchQuestions($questions, $filename) { global $h, $m, $p, $k, $u, $bta; $questionCount = count($questions); echo "\xa{$u}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\xa"; echo "{$k}\106\x49\x4c\105\x3a\40{$filename}\x20{$ab}\x28{$questionCount}\x20\x70\145\162\164\141\156\x79\141\x61\156\40\x64\x72\157\x70\x64\x6f\x77\x6e\x29{$p}\xa"; echo "{$u}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\xa"; foreach ($questions as $index => $question) { $questionNum = $index + 1; echo "\xa{$bg}" . str_repeat("\55", 60) . "{$p}\12"; echo "{$bta}\120\x45\122\124\101\116\131\101\x41\116\x20\104\122\x4f\120\104\x4f\127\x4e\40\43{$question["\x6e\165\x6d\x62\145\x72"]}{$p}\xa"; echo "{$k}\123\164\x61\164\x75\163\x3a\x20{$question["\x73\164\141\x74\145"]}\40\174\x20\x4e\x69\x6c\141\151\x3a\x20{$question["\147\x72\x61\x64\x65"]}{$p}\12"; echo "{$bg}" . str_repeat("\55", 40) . "{$p}\xa"; if (!empty($question["\x74\145\x78\x74"])) { $textLines = explode("\12", wordwrap(strip_tags($question["\x74\145\170\x74"]), 75, "\12")); echo "{$p}"; foreach ($textLines as $line) { echo $line . "\12"; } echo "{$p}"; } if (!empty($question["\141\156\x73\x77\145\162\163"])) { echo "\xa{$h}\x5b\x49\x54\x45\x4d\x2d\x49\124\x45\115\40\120\x45\x52\x54\101\116\x59\101\x41\116\135\72{$p}\xa"; foreach ($question["\x61\x6e\163\167\145\x72\x73"] as $answer) { $statusIndicator = $answer["\x69\x73\x5f\141\156\x73\x77\x65\162\145\x64"] ? "{$h}\342\234\x93{$p}" : "{$m}\342\x9c\x97{$p}"; echo "\12{$statusIndicator}\x20{$p}{$answer["\x6c\145\164\164\x65\162"]}\56\40{$answer["\161\x75\145\163\164\x69\157\156\x5f\x74\145\x78\164"]}{$p}\xa"; if ($answer["\x69\163\137\141\x6e\163\167\145\162\x65\144"]) { echo "\x20\40\40{$h}\xe2\x86\x92\40\x44\x69\x70\151\154\x69\150\72\x20{$answer["\x73\145\x6c\145\x63\x74\145\x64\137\x74\x65\x78\x74"]}\40\x28\x76\x61\x6c\165\145\x3a\x20{$answer["\163\145\154\145\143\164\x65\x64\x5f\166\141\154\x75\x65"]}\x29{$p}\xa"; } else { echo "\40\40\x20{$m}\342\x86\222\x20\x42\145\154\x75\x6d\40\x64\151\x6a\141\167\x61\x62\x20\50\103\x68\x6f\157\x73\145\56\56\x2e\x29{$p}\xa"; } if ($answer["\x6c\x65\x74\164\x65\x72"] == "\101" && !empty($answer["\x61\x6c\x6c\x5f\x6f\160\164\x69\x6f\156\163"])) { echo "\40\x20\x20{$ab}\40\x20\x20\x4f\160\x73\x69\x20\164\145\x72\163\x65\144\x69\x61\72{$p}\12"; foreach ($answer["\141\x6c\x6c\x5f\x6f\x70\164\x69\157\x6e\163"] as $value => $text) { echo "\x20\40\x20{$ab}\40\40\x20\40\x20{$value}\x2e\40{$text}{$p}\12"; } } } } if (!empty($question["\x63\x6f\x72\x72\x65\143\x74\137\x61\x6e\x73\167\x65\162"]) && is_array($question["\143\157\162\x72\x65\143\164\x5f\141\156\163\x77\x65\162"])) { echo "\xa{$h}\x5b\112\101\127\x41\x42\x41\116\40\x59\x41\x4e\x47\40\x44\111\x50\111\x4c\x49\x48\135\72{$p}\xa"; foreach ($question["\x63\157\162\x72\x65\x63\164\137\141\x6e\x73\167\145\x72"] as $index => $correct) { $itemNum = $index + 1; echo "{$p}\x20\x20{$itemNum}\x2e\x20{$correct["\x71\x75\x65\x73\x74\x69\157\x6e"]}{$p}\12"; echo "{$h}\x20\x20\40\40\40\xe2\x86\x92\40{$correct["\x61\x6e\x73\167\145\162"]}\x20\50\x76\141\x6c\x75\x65\x3a\40{$correct["\166\141\154\165\x65"]}\51{$p}\xa"; } } echo "\12{$bg}" . str_repeat("\x2d", 60) . "{$p}\12"; } } goto ZsqVQ; f3ZhP: if (!empty($collectedImages)) { $indexContent = "\74\41\x44\x4f\103\x54\x59\120\105\x20\x68\164\x6d\154\76\12"; $indexContent .= "\x3c\150\164\155\x6c\40\x6c\x61\156\x67\x3d\47\151\144\x27\x3e\xa"; $indexContent .= "\x3c\x68\x65\141\144\x3e\xa"; $indexContent .= "\x20\x20\40\40\74\155\x65\164\141\40\x63\150\141\x72\163\145\164\75\47\125\124\106\55\70\47\x3e\xa"; $indexContent .= "\40\40\40\40\74\155\x65\x74\141\x20\x6e\141\x6d\145\x3d\x27\166\x69\x65\167\160\x6f\x72\x74\47\x20\143\157\x6e\164\145\x6e\x74\75\x27\167\151\144\x74\x68\75\x64\x65\x76\151\143\145\55\167\x69\144\164\x68\x2c\40\151\156\151\164\x69\141\x6c\x2d\163\143\141\154\145\x3d\x31\x2e\x30\47\x3e\xa"; $indexContent .= "\40\x20\40\40\74\164\x69\164\x6c\x65\76\x47\x61\x6c\154\x65\x72\171\x20\123\x65\x6d\165\x61\x20\x47\141\155\x62\141\x72\74\57\x74\151\x74\x6c\x65\x3e\12"; $indexContent .= "\x20\x20\40\x20\74\x73\164\x79\154\145\76\xa"; $indexContent .= "\40\x20\x20\40\x20\40\40\x20\142\x6f\144\x79\x20\173\x20\146\157\x6e\x74\55\146\141\x6d\151\154\x79\x3a\40\x41\x72\151\141\x6c\x2c\40\x73\x61\x6e\x73\55\163\145\162\x69\146\73\40\155\141\162\147\151\156\72\40\62\x30\160\x78\73\x20\142\141\x63\x6b\147\x72\x6f\x75\x6e\x64\x3a\40\x23\146\65\146\65\146\65\x3b\x20\175\xa"; $indexContent .= "\x20\x20\x20\x20\40\x20\x20\40\56\150\x65\141\144\145\162\40\x7b\40\142\141\143\x6b\147\x72\x6f\165\156\x64\x3a\40\43\x34\103\101\x46\x35\60\x3b\40\x63\157\154\157\162\72\x20\x77\150\x69\x74\145\73\40\160\141\x64\x64\x69\x6e\x67\72\x20\62\60\160\x78\73\x20\142\x6f\162\x64\145\162\x2d\162\x61\144\151\x75\x73\72\40\65\x70\170\x3b\40\155\x61\162\x67\x69\x6e\55\142\x6f\x74\164\157\155\72\x20\62\60\x70\170\x3b\40\175\12"; $indexContent .= "\x20\40\x20\x20\40\40\40\x20\x2e\x67\x61\x6c\x6c\x65\x72\171\40\x7b\40\144\151\163\160\154\141\x79\72\40\x67\162\151\x64\x3b\40\x67\x72\x69\x64\x2d\164\145\x6d\160\x6c\141\x74\x65\x2d\143\x6f\154\x75\155\156\163\72\40\x72\145\160\145\141\164\x28\141\x75\164\x6f\55\x66\x69\x6c\154\54\40\x6d\x69\156\x6d\141\x78\x28\62\65\x30\x70\x78\54\x20\x31\146\x72\x29\x29\x3b\40\147\x61\160\x3a\x20\62\60\160\170\73\40\175\12"; $indexContent .= "\x20\40\40\40\x20\x20\x20\40\56\151\155\x61\x67\145\x2d\143\141\x72\144\40\x7b\x20\x62\141\143\153\x67\162\157\165\x6e\144\x3a\40\167\x68\x69\164\145\x3b\40\x62\157\162\144\x65\x72\x2d\x72\141\144\151\x75\163\72\x20\x38\160\170\73\x20\x70\141\144\144\151\x6e\x67\72\x20\61\65\160\x78\x3b\40\x62\157\x78\55\x73\150\x61\x64\157\167\72\40\x30\40\x32\x70\170\40\x35\160\x78\x20\162\x67\142\141\50\60\x2c\60\54\x30\54\x30\56\x31\51\x3b\40\x7d\xa"; $indexContent .= "\x20\40\40\x20\40\x20\x20\40\x2e\x69\x6d\141\147\x65\x2d\x63\141\x72\x64\x20\x69\155\x67\40\173\x20\x77\x69\144\164\x68\72\40\61\60\x30\45\73\40\x68\x65\151\147\150\164\x3a\x20\x32\60\60\160\170\73\40\157\x62\x6a\145\143\164\55\x66\151\x74\x3a\x20\x63\157\166\145\x72\73\x20\x62\x6f\x72\x64\x65\x72\x2d\x72\x61\144\151\165\163\x3a\x20\x35\160\x78\73\x20\x7d\xa"; $indexContent .= "\x20\40\x20\40\40\40\40\x20\56\151\155\141\147\x65\x2d\x69\156\x66\157\40\x7b\40\155\141\x72\x67\x69\x6e\55\164\157\160\x3a\40\x31\x30\160\x78\73\x20\146\x6f\156\x74\55\163\151\172\145\x3a\40\x31\x34\x70\170\x3b\40\175\12"; $indexContent .= "\x20\x20\x20\40\x20\40\40\40\x2e\151\x6d\141\x67\x65\55\151\156\x66\x6f\x20\x73\x74\x72\157\x6e\147\40\x7b\40\x63\x6f\x6c\x6f\162\x3a\40\43\63\63\x33\x3b\x20\x7d\xa"; $indexContent .= "\40\x20\40\x20\x20\40\x20\x20\x2e\163\x74\141\164\163\40\173\x20\x62\x61\143\153\147\x72\157\x75\x6e\x64\72\x20\x77\150\151\164\145\x3b\x20\x70\141\144\144\151\156\147\x3a\x20\61\65\x70\x78\73\40\x62\157\162\x64\145\x72\55\162\x61\x64\151\165\x73\x3a\x20\65\x70\170\73\x20\155\141\x72\147\151\156\x2d\142\x6f\164\164\x6f\155\72\x20\x32\60\160\170\73\40\x62\x6f\x78\x2d\163\150\x61\x64\157\167\72\x20\60\40\x32\160\170\40\x35\160\170\x20\x72\x67\142\141\x28\60\x2c\60\54\x30\54\60\x2e\x31\x29\73\x20\175\xa"; $indexContent .= "\40\40\x20\40\x3c\x2f\x73\164\x79\x6c\x65\76\12"; $indexContent .= "\74\57\150\145\x61\144\x3e\xa"; $indexContent .= "\x3c\x62\x6f\144\171\76\xa"; $indexContent .= "\x20\x20\40\40\x3c\x64\x69\x76\40\143\x6c\141\163\163\x3d\x27\x68\x65\141\x64\145\162\x27\x3e\12"; $indexContent .= "\40\40\x20\x20\x20\x20\x20\x20\x3c\150\61\76\360\x9f\x93\270\x20\x47\141\x6c\x6c\145\162\x79\x20\123\145\155\165\x61\x20\107\x61\x6d\x62\x61\162\40\x64\x61\162\x69\x20\x51\x75\151\x7a\74\57\150\x31\x3e\xa"; $indexContent .= "\x20\x20\40\40\40\x20\40\40\74\x70\x3e\124\157\164\141\x6c\x20" . count($collectedImages) . "\40\x67\141\155\142\141\x72\x3c\x2f\x70\76\12"; $indexContent .= "\40\x20\40\40\x3c\57\x64\151\x76\x3e\xa"; $indexContent .= "\x20\x20\x20\x20\xa"; $indexContent .= "\x20\40\40\40\74\x64\151\166\40\143\x6c\141\163\163\x3d\x27\163\164\x61\x74\163\x27\x3e\xa"; $indexContent .= "\40\x20\x20\x20\x20\x20\40\x20\x3c\160\76\x3c\163\x74\x72\157\x6e\147\76\x53\164\141\x74\165\163\x3a\x3c\57\163\x74\x72\157\156\147\76\x20{$successCount}\x20\x67\141\155\x62\x61\x72\x20\x62\x65\x72\x68\141\163\x69\154\40\x64\x69\x6b\x75\x6d\160\165\x6c\153\x61\156\54\40{$failCount}\40\x67\x61\x67\x61\154\74\x2f\160\x3e\12"; $indexContent .= "\x20\40\x20\40\x20\40\x20\x20\x3c\160\x3e\74\163\164\x72\157\x6e\147\76\x4c\157\x6b\141\x73\x69\72\x3c\x2f\x73\x74\162\157\156\147\76\x20" . realpath($allImagesDir) . "\x3c\x2f\x70\x3e\xa"; $indexContent .= "\40\x20\40\x20\74\57\x64\151\166\76\xa"; $indexContent .= "\40\40\x20\40\12"; $indexContent .= "\x20\x20\x20\x20\x3c\x64\151\x76\x20\x63\154\x61\x73\163\x3d\x27\147\141\x6c\x6c\145\x72\x79\47\76\12"; foreach ($collectedImages as $image) { $imagePath = basename($image["\x63\x6f\x6c\154\x65\x63\x74\145\144\137\146\x69\x6c\x65\156\x61\155\145"]); $questionInfo = "\x50\145\x72\164\x61\156\x79\x61\141\156\40\43" . ($image["\x71\165\x65\163\164\x69\157\156\x5f\x6e\x75\155\x62\x65\x72"] ?? "\x3f"); $indexContent .= "\40\x20\40\x20\x20\40\40\x20\74\144\151\x76\40\143\154\141\163\x73\x3d\47\151\155\x61\147\x65\x2d\x63\141\x72\x64\x27\x3e\xa"; $indexContent .= "\40\x20\x20\40\x20\40\40\x20\x20\x20\40\x20\x3c\x69\x6d\147\40\163\162\x63\75\47" . htmlspecialchars($imagePath) . "\47\40\141\154\x74\75\47" . htmlspecialchars($image["\x61\x6c\x74"] ?? '') . "\x27\x3e\xa"; $indexContent .= "\x20\40\40\x20\40\40\40\x20\40\40\x20\40\74\144\151\x76\40\143\x6c\x61\163\163\75\x27\x69\x6d\141\x67\145\55\151\156\x66\x6f\x27\76\12"; $indexContent .= "\40\x20\40\x20\40\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\74\x70\76\74\163\x74\x72\x6f\156\x67\x3e" . htmlspecialchars($questionInfo) . "\x3c\x2f\x73\164\162\x6f\156\x67\x3e\74\x2f\x70\x3e\xa"; $indexContent .= "\40\x20\40\x20\40\x20\40\40\40\40\x20\x20\x20\x20\x20\40\x3c\160\76\74\163\164\x72\x6f\x6e\x67\x3e\106\x69\x6c\145\x3a\74\x2f\163\164\x72\x6f\x6e\x67\x3e\40" . htmlspecialchars($image["\143\157\x6c\154\145\143\x74\x65\144\137\146\151\x6c\x65\156\141\x6d\x65"]) . "\74\57\x70\76\xa"; $indexContent .= "\x20\x20\x20\x20\x20\x20\x20\40\x20\40\x20\x20\40\40\x20\40\74\x70\76\74\163\164\162\x6f\156\147\x3e\x55\153\165\162\x61\156\72\74\57\163\x74\x72\157\x6e\147\76\x20" . round(($image["\163\x69\172\x65"] ?? 0) / 1024, 2) . "\x20\113\102\x3c\57\x70\x3e\12"; $indexContent .= "\40\x20\x20\40\x20\40\x20\40\40\40\40\40\x20\40\x20\40\74\160\76\74\x73\164\162\157\156\x67\x3e\104\x65\163\153\162\151\160\163\x69\72\x3c\x2f\163\164\x72\157\156\x67\x3e\40" . htmlspecialchars($image["\141\154\164"] ?? "\x54\151\x64\x61\x6b\40\x61\x64\141\40\144\145\x73\x6b\162\x69\x70\x73\151") . "\74\x2f\160\x3e\12"; $indexContent .= "\40\x20\x20\x20\x20\40\40\40\x20\x20\40\40\x3c\57\x64\x69\166\76\xa"; $indexContent .= "\x20\40\x20\40\x20\40\x20\x20\74\57\x64\x69\x76\76\xa"; } $indexContent .= "\x20\40\x20\x20\x3c\57\x64\151\166\x3e\12"; $indexContent .= "\x20\40\40\40\xa"; $indexContent .= "\x20\40\40\40\74\144\x69\x76\40\x73\164\171\x6c\x65\75\x27\x6d\141\x72\147\151\156\x2d\164\157\160\72\40\x33\x30\x70\x78\73\40\160\141\144\x64\151\x6e\x67\72\40\x32\x30\x70\x78\x3b\x20\142\x61\143\x6b\x67\162\157\165\x6e\144\72\40\167\x68\151\164\x65\73\40\x62\157\x72\144\145\162\x2d\x72\x61\x64\151\x75\x73\72\x20\x35\160\170\x3b\x27\x3e\12"; $indexContent .= "\40\x20\x20\x20\x20\40\x20\40\x3c\x68\63\76\360\237\223\213\x20\104\x61\x66\x74\x61\162\40\106\151\x6c\145\x20\107\x61\x6d\142\141\162\x3c\57\150\x33\x3e\xa"; $indexContent .= "\40\x20\x20\x20\x20\40\x20\40\x3c\x75\x6c\76\12"; foreach ($collectedImages as $image) { $indexContent .= "\x20\x20\x20\40\40\x20\x20\40\40\x20\40\x20\x3c\154\151\x3e" . htmlspecialchars($image["\x63\157\154\154\x65\143\164\145\144\x5f\146\x69\154\145\156\x61\x6d\x65"]) . "\40\x28" . round(($image["\x73\x69\172\x65"] ?? 0) / 1024, 2) . "\x20\x4b\102\51" . "\40\x2d\x20\120\145\162\x74\141\x6e\x79\x61\x61\156\40\43" . ($image["\161\165\x65\163\164\151\157\x6e\x5f\156\165\x6d\142\x65\162"] ?? "\77") . "\74\57\x6c\x69\x3e\xa"; } $indexContent .= "\x20\x20\40\x20\x20\x20\40\x20\x3c\57\x75\x6c\76\xa"; $indexContent .= "\x20\40\40\x20\x3c\57\x64\x69\166\76\12"; $indexContent .= "\74\57\x62\x6f\x64\x79\76\xa"; $indexContent .= "\x3c\x2f\150\164\155\154\x3e"; $indexPath = $allImagesDir . "\x2f\151\x6e\x64\x65\170\x2e\x68\x74\x6d\154"; file_put_contents($indexPath, $indexContent); $jsonPath = $allImagesDir . "\57\151\x6d\141\147\145\x73\137\144\x61\x74\141\56\152\x73\x6f\x6e"; file_put_contents($jsonPath, json_encode($collectedImages, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE)); echo "{$h}\xa\xe2\234\223\40\x47\x61\154\x6c\145\162\171\x20\x48\x54\115\x4c\x20\x64\x69\x62\x75\141\x74\72\x20{$indexPath}{$p}\12"; echo "{$h}\342\234\x93\40\x44\x61\164\x61\40\112\123\117\x4e\x20\x64\151\x73\x69\x6d\160\141\156\72\40{$jsonPath}{$p}\12"; return array("\143\x6f\x6c\154\145\143\164\x65\x64\x5f\151\155\141\x67\x65\163" => $collectedImages, "\x61\154\154\137\x69\x6d\141\x67\145\163\x5f\x64\x69\162" => $allImagesDir, "\x73\x75\143\143\145\163\163\137\x63\x6f\x75\156\164" => $successCount, "\x66\141\x69\x6c\x5f\x63\x6f\x75\156\164" => $failCount); } goto m3XHv; thn2T: function compareAnswersWithGemini($allQuestions, $geminiAnswers, $downloadDir) { global $h, $m, $p, $k, $bta; echo "\xa{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; echo "{$h}\x4d\105\115\x42\101\116\104\x49\x4e\107\113\101\116\40\112\x41\x57\101\x42\x41\x4e\x20\x47\105\x4d\x49\x4e\x49\x20\104\x45\x4e\107\x41\x4e\40\x4a\101\127\x41\x42\x41\x4e\40\131\x41\x4e\107\40\101\104\101{$p}\12"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; $comparisonPath = $downloadDir . "\57\x50\105\122\x42\x41\x4e\x44\111\116\x47\101\x4e\137\112\101\x57\101\x42\x41\116\x5f" . date("\x59\155\144\137\110\x69\x73") . "\x2e\x74\x78\x74"; $comparisonContent = "\x50\105\122\102\101\x4e\x44\x49\116\107\x41\x4e\x20\x4a\101\127\101\102\101\x4e\72\40\x53\x69\x73\164\145\155\40\x76\x73\40\107\x45\115\x49\x4e\x49\x20\x41\x50\x49\12"; $comparisonContent .= "\75\x3d\x3d\75\x3d\x3d\x3d\x3d\x3d\75\x3d\x3d\x3d\75\x3d\x3d\75\75\x3d\75\x3d\x3d\75\x3d\x3d\75\x3d\75\x3d\x3d\75\x3d\x3d\x3d\x3d\75\x3d\75\75\75\x3d\x3d\x3d\xa\xa"; $totalQuestions = 0; $matchingAnswers = 0; $differentAnswers = 0; $detailedComparison = array(); $geminiLines = explode("\xa", $geminiAnswers); $geminiAnswerMap = array(); $currentQuestion = 0; foreach ($geminiLines as $line) { $line = trim($line); if (preg_match("\57\136\x28\134\144\53\x29\x5c\x2e\x5c\x73\x2b\50\x5b\101\55\x5a\x5d\51\x5c\56\x5c\163\53\x28\x2e\53\x29\44\x2f", $line, $matches)) { $questionNum = intval($matches[1]); $letter = $matches[2]; $answerText = $matches[3]; if (!isset($geminiAnswerMap[$questionNum])) { $geminiAnswerMap[$questionNum] = array(); } $geminiAnswerMap[$questionNum][] = array("\x6c\x65\164\x74\x65\162" => $letter, "\164\x65\x78\x74" => $answerText, "\146\x75\154\x6c" => $line); $currentQuestion = $questionNum; } elseif (preg_match("\x2f\x5e\x5c\163\x2a\x28\x5b\x41\x2d\x5a\x5d\x29\134\56\134\163\x2b\50\56\x2b\x29\44\57", $line, $matches) && $currentQuestion > 0) { $letter = $matches[1]; $answerText = $matches[2]; if (!isset($geminiAnswerMap[$currentQuestion])) { $geminiAnswerMap[$currentQuestion] = array(); } $geminiAnswerMap[$currentQuestion][] = array("\x6c\x65\164\164\x65\162" => $letter, "\x74\145\x78\164" => $answerText, "\146\165\x6c\154" => $line); } elseif (preg_match("\57\136\x28\x5c\144\53\51\x5c\56\x5c\163\53\x28\x5b\101\55\132\x2c\x5d\53\51\x24\57\x69", $line, $matches)) { $questionNum = intval($matches[1]); $answerLetters = strtoupper($matches[2]); if (!isset($geminiAnswerMap[$questionNum])) { $geminiAnswerMap[$questionNum] = array(); } $letters = explode("\x2c", $answerLetters); foreach ($letters as $letter) { $letter = trim($letter); if (!empty($letter)) { $geminiAnswerMap[$questionNum][] = array("\x6c\145\x74\164\x65\x72" => $letter, "\164\x65\170\x74" => '', "\146\165\154\154" => $line); } } } elseif (preg_match("\57\136\50\134\x64\53\51\134\56\134\x73\53\50\133\101\x2d\132\135\51\134\56\134\163\53\50\x54\162\165\145\x7c\x46\x61\154\163\145\51\x24\57\x69", $line, $matches)) { $questionNum = intval($matches[1]); $letter = strtoupper($matches[2]); $answerText = $matches[3]; $geminiAnswerMap[$questionNum] = array(array("\x6c\145\x74\x74\x65\x72" => $letter, "\164\x65\170\164" => $answerText, "\x66\165\x6c\154" => $line)); } } function normalizeAnswer($answer) { if (is_array($answer)) { if (isset($answer[0]["\161\165\145\x73\164\151\157\x6e"])) { $result = array(); foreach ($answer as $item) { if (isset($item["\161\165\x65\x73\x74\x69\157\156"]) && isset($item["\x61\156\163\167\145\162"])) { $q = preg_replace("\x2f\x5c\163\53\x2f", "\40", trim(strtolower($item["\x71\x75\x65\x73\x74\x69\x6f\156"]))); $a = preg_replace("\x2f\134\x73\x2b\57", "\x20", trim(strtolower($item["\141\x6e\163\x77\x65\162"]))); $result[] = $q . "\x20\xe2\x86\x92\40" . $a; } } sort($result); return implode("\73\40", $result); } else { sort($answer); return implode("\54", $answer); } } elseif (is_string($answer)) { $normalized = preg_replace("\57\134\163\53\57", "\40", trim(strtoupper($answer))); $normalized = rtrim($normalized, "\x2e"); return $normalized; } return ''; } function extractLettersFromGemini($geminiAnswer) { if (!is_array($geminiAnswer)) { return array(); } $letters = array(); foreach ($geminiAnswer as $item) { if (isset($item["\x6c\x65\164\164\145\162"])) { $letters[] = strtoupper(trim($item["\154\x65\x74\164\145\x72"])); } } sort($letters); return array_unique($letters); } function extractTextFromGemini($geminiAnswer) { if (!is_array($geminiAnswer)) { return array(); } $items = array(); foreach ($geminiAnswer as $item) { if (isset($item["\x74\x65\170\x74"]) && !empty(trim($item["\164\145\170\x74"]))) { $items[] = preg_replace("\57\134\163\53\57", "\40", trim(strtolower($item["\164\x65\170\x74"]))); } } sort($items); return $items; } $questionCounter = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { $questionCounter++; $comparisonContent .= "\xa" . str_repeat("\x2d", 60) . "\xa"; $comparisonContent .= "\x50\105\122\x54\101\116\131\x41\101\116\x20\x23" . $questionCounter . "\x20\x28\x41\x73\x6c\x69\72\40\x23" . $question["\156\165\x6d\142\x65\162"] . "\x29\xa"; $comparisonContent .= "\112\x65\156\x69\163\x3a\x20" . $question["\164\171\x70\x65"] . "\x20\174\x20\x53\164\141\x74\165\163\x3a\40" . $question["\x73\164\141\x74\145"] . "\xa"; $shortText = substr(strip_tags($question["\164\145\170\x74"]), 0, 100); if (strlen($question["\164\x65\x78\x74"]) > 100) { $shortText .= "\56\56\x2e"; } $comparisonContent .= "\x50\x65\162\164\x61\156\171\x61\141\156\72\40" . $shortText . "\xa\xa"; $systemAnswer = $question["\143\157\x72\162\x65\143\x74\137\141\x6e\x73\x77\x65\x72"] ?? null; $systemNormalized = normalizeAnswer($systemAnswer); $geminiAnswer = isset($geminiAnswerMap[$questionCounter]) ? $geminiAnswerMap[$questionCounter] : null; $comparisonContent .= "\x4a\101\127\x41\102\101\116\40\x53\111\123\x54\105\115\x20\72\40" . (is_array($systemAnswer) ? json_encode($systemAnswer) : $systemAnswer) . "\12"; if ($geminiAnswer) { $geminiDisplay = ''; foreach ($geminiAnswer as $item) { if (isset($item["\x66\165\x6c\154"])) { $geminiDisplay .= $item["\x66\x75\x6c\154"] . "\xa"; } } $comparisonContent .= "\112\101\x57\x41\x42\101\x4e\x20\107\105\x4d\x49\x4e\x49\40\72\12" . trim($geminiDisplay) . "\12\12"; } else { $comparisonContent .= "\112\x41\x57\x41\102\101\116\40\107\x45\115\111\116\111\x20\72\x20\124\151\144\x61\x6b\40\x61\x64\141\40\x6a\x61\x77\x61\142\x61\x6e\x20\144\x61\162\151\40\107\x65\x6d\x69\156\151\xa\12"; } $isMatch = false; if ($geminiAnswer && $systemAnswer) { switch ($question["\x74\171\160\x65"]) { case "\155\165\x6c\164\x69\143\x68\157\151\143\145": case "\164\x72\165\145\x66\x61\154\x73\145": $systemLetters = array(); if (is_array($systemAnswer)) { $systemLetters = $systemAnswer; } elseif (is_string($systemAnswer)) { $systemLetters = array($systemAnswer); } $geminiLetters = extractLettersFromGemini($geminiAnswer); sort($systemLetters); $systemLetters = array_unique($systemLetters); $geminiLetters = array_unique($geminiLetters); $systemStr = implode("\x2c", $systemLetters); $geminiStr = implode("\x2c", $geminiLetters); $isMatch = $systemStr === $geminiStr; if (!$isMatch) { $diff1 = array_diff($systemLetters, $geminiLetters); $diff2 = array_diff($geminiLetters, $systemLetters); $isMatch = empty($diff1) && empty($diff2); } break; case "\x6d\141\164\x63\x68": $systemItems = array(); if (is_array($systemAnswer) && isset($systemAnswer[0]["\161\x75\145\163\164\151\x6f\x6e"])) { foreach ($systemAnswer as $item) { if (isset($item["\161\x75\145\163\164\x69\157\x6e"]) && isset($item["\141\156\163\167\145\x72"])) { $key = preg_replace("\x2f\x5c\163\x2b\57", "\x20", trim(strtolower($item["\161\165\x65\163\x74\x69\157\156"]))); $value = preg_replace("\x2f\x5c\163\53\57", "\40", trim(strtolower($item["\141\156\163\x77\145\x72"]))); $systemItems[$key] = $value; } } } $geminiItems = array(); foreach ($geminiAnswer as $item) { if (isset($item["\164\145\x78\164"])) { if (strpos($item["\x74\x65\x78\x74"], "\342\206\222") !== false) { $parts = explode("\xe2\206\222", $item["\164\x65\170\164"]); if (count($parts) >= 2) { $key = preg_replace("\x2f\134\x73\53\57", "\x20", trim(strtolower($parts[0]))); $value = preg_replace("\57\134\163\x2b\57", "\40", trim(strtolower($parts[1]))); $geminiItems[$key] = $value; } } } } ksort($systemItems); ksort($geminiItems); $isMatch = $systemItems == $geminiItems; if (!$isMatch) { $comparisonContent .= "\104\x45\x42\125\107\40\115\101\124\x43\110\111\x4e\107\x3a\xa"; $comparisonContent .= "\123\x79\163\164\x65\x6d\72\x20" . json_encode($systemItems) . "\xa"; $comparisonContent .= "\107\145\155\x69\x6e\x69\x3a\x20" . json_encode($geminiItems) . "\12"; } break; default: $geminiText = ''; foreach ($geminiAnswer as $item) { if (isset($item["\164\x65\170\164"])) { $geminiText .= $item["\164\145\x78\x74"] . "\40"; } } $geminiText = trim($geminiText); $sysNorm = preg_replace("\x2f\x5b\x5e\x41\55\132\141\x2d\x7a\x30\x2d\71\x5d\x2f", '', strtolower($systemNormalized)); $gemNorm = preg_replace("\x2f\133\136\x41\55\x5a\x61\55\172\x30\55\71\135\57", '', strtolower($geminiText)); $isMatch = $sysNorm === $gemNorm; } } if ($isMatch) { $comparisonContent .= "\123\x54\101\x54\x55\x53\72\x20\xe2\x9c\223\x20\123\101\115\101\12"; $matchingAnswers++; $detailedComparison[] = array("\161\x75\145\x73\x74\x69\157\156" => $questionCounter, "\x73\164\141\x74\x75\163" => "\x6d\x61\x74\143\150", "\x73\x79\163\164\x65\x6d" => $systemAnswer, "\147\145\155\x69\156\151" => $geminiAnswer); } else { $comparisonContent .= "\123\x54\x41\124\x55\x53\x3a\x20\342\x9c\x97\40\x42\105\x52\x42\105\104\x41\12"; $differentAnswers++; $detailedComparison[] = array("\161\165\x65\163\x74\x69\157\x6e" => $questionCounter, "\163\x74\x61\x74\165\x73" => "\x64\x69\146\x66\x65\x72\x65\156\164", "\163\x79\163\164\145\155" => $systemAnswer, "\x67\x65\x6d\151\156\151" => $geminiAnswer); } $totalQuestions++; } } $comparisonContent .= "\12" . str_repeat("\342\225\220", 60) . "\xa"; $comparisonContent .= "\123\x54\101\124\x49\x53\124\x49\113\x20\x50\105\122\x42\101\116\104\x49\x4e\107\101\x4e\12"; $comparisonContent .= str_repeat("\xe2\225\x90", 60) . "\xa\12"; $comparisonContent .= "\124\x6f\164\x61\x6c\x20\x50\145\x72\164\141\x6e\171\141\141\x6e\72\40" . $totalQuestions . "\xa"; $comparisonContent .= "\x4a\x61\x77\x61\x62\x61\156\40\123\141\155\x61\x20\x20\40\40\x3a\x20" . $matchingAnswers . "\x20\50" . ($totalQuestions > 0 ? round($matchingAnswers / $totalQuestions * 100, 1) : 0) . "\45\51\xa"; $comparisonContent .= "\112\x61\167\x61\x62\141\156\x20\102\145\162\x62\145\144\141\40\x3a\40" . $differentAnswers . "\x20\50" . ($totalQuestions > 0 ? round($differentAnswers / $totalQuestions * 100, 1) : 0) . "\45\x29\xa"; if ($differentAnswers > 0) { $comparisonContent .= "\xa" . str_repeat("\x2d", 60) . "\12"; $comparisonContent .= "\104\105\x54\101\111\x4c\x20\120\x45\x52\x42\105\104\x41\101\116\x20\50" . $differentAnswers . "\x20\x70\x65\x72\x74\x61\x6e\x79\x61\x61\x6e\51\72\xa"; $comparisonContent .= str_repeat("\55", 60) . "\12\12"; foreach ($detailedComparison as $item) { if ($item["\163\164\141\x74\165\163"] === "\x64\x69\146\146\x65\x72\145\156\164") { $comparisonContent .= "\x50\145\x72\164\x61\x6e\x79\141\141\156\40\43" . $item["\161\x75\x65\x73\164\151\157\156"] . "\72\xa"; $comparisonContent .= "\40\40\x53\151\x73\164\x65\x6d\x3a\x20" . (is_array($item["\x73\x79\163\164\145\155"]) ? json_encode($item["\x73\x79\x73\164\x65\x6d"]) : $item["\x73\x79\163\164\x65\155"]) . "\12"; $comparisonContent .= "\x20\40\x47\145\155\x69\x6e\x69\x3a\x20" . (is_array($item["\x67\145\x6d\x69\156\151"]) ? json_encode($item["\147\145\x6d\x69\x6e\x69"]) : $item["\x67\x65\155\x69\156\151"]) . "\xa\xa"; } } } $comparisonContent .= "\12" . str_repeat("\342\225\x90", 60) . "\xa"; $comparisonContent .= "\x41\116\101\114\x49\123\111\123\x20\120\105\122\102\x45\x44\101\x41\x4e\12"; $comparisonContent .= str_repeat("\xe2\225\x90", 60) . "\12\12"; $typeAnalysis = array(); foreach ($detailedComparison as $item) { if ($item["\163\164\141\x74\x75\163"] === "\x64\x69\x66\x66\145\162\145\156\164") { $sysType = gettype($item["\x73\171\x73\x74\x65\x6d"]); $gemType = gettype($item["\x67\x65\155\x69\x6e\x69"]); $key = $sysType . "\x20\x76\163\x20" . $gemType; if (!isset($typeAnalysis[$key])) { $typeAnalysis[$key] = 0; } $typeAnalysis[$key]++; } } foreach ($typeAnalysis as $type => $count) { $percentage = round($count / $differentAnswers * 100, 1); $comparisonContent .= sprintf("\x25\x2d\63\x30\x73\72\40\x25\62\x64\40\50\x25\65\56\61\x66\45\x25\51\xa", $type, $count, $percentage); } file_put_contents($comparisonPath, $comparisonContent); echo "{$h}\342\x9c\223\40\x50\x65\x72\x62\141\x6e\144\x69\x6e\x67\141\156\40\144\151\x73\151\155\x70\141\x6e\x20\x6b\x65\x3a\x20{$comparisonPath}{$p}\xa"; echo "{$k}\x54\157\x74\141\x6c\40\160\145\162\164\141\156\171\x61\x61\x6e\72\40{$totalQuestions}{$p}\xa"; echo "{$h}\x4a\141\167\141\x62\x61\x6e\40\163\141\x6d\x61\x3a\x20{$matchingAnswers}\x20\50" . ($totalQuestions > 0 ? round($matchingAnswers / $totalQuestions * 100, 1) : 0) . "\x25\x29{$p}\12"; echo "{$m}\112\141\167\141\142\x61\156\x20\142\145\162\142\145\144\x61\72\40{$differentAnswers}\x20\50" . ($totalQuestions > 0 ? round($differentAnswers / $totalQuestions * 100, 1) : 0) . "\45\51{$p}\12"; if ($differentAnswers > 0) { echo "\12{$k}\x43\157\156\164\x6f\x68\40\160\145\162\142\x65\x64\x61\141\156\x3a{$p}\xa"; $exampleCount = 0; foreach ($detailedComparison as $item) { if ($item["\163\x74\141\x74\x75\x73"] === "\144\151\146\146\145\x72\145\156\x74" && $exampleCount < 3) { echo "{$m}\x20\x20\43{$item["\x71\x75\145\x73\x74\151\x6f\156"]}\x3a\x20\123\151\163\164\x65\x6d\40\75\x20\47{$item["\x73\x79\x73\x74\x65\155"]}\47\x20\x76\x73\x20\x47\145\155\151\156\x69\x20\75\40\47"; if (is_array($item["\147\x65\155\x69\x6e\151"])) { foreach ($item["\147\x65\155\151\x6e\151"] as $gem) { if (isset($gem["\154\145\x74\164\145\162"])) { echo $gem["\154\x65\164\164\x65\x72"]; } if (isset($gem["\164\145\x78\164"])) { echo "\56\40" . $gem["\x74\x65\x78\x74"]; } } } else { echo $item["\147\x65\155\151\156\151"]; } echo "\47{$p}\xa"; $exampleCount++; } } } return array("\164\x6f\x74\141\154" => $totalQuestions, "\155\x61\x74\x63\x68\x69\156\x67" => $matchingAnswers, "\x64\x69\x66\146\x65\162\x65\156\x74" => $differentAnswers, "\x66\151\x6c\145\137\x70\141\164\x68" => $comparisonPath, "\x64\x65\164\141\151\154\163" => $detailedComparison); } goto D1lW8; dywlU: function extractMatchAnswers($questionNode, $xpath, &$questionData) { $questionData["\x61\x6e\163\167\145\x72\163"] = array(); $answerTable = $xpath->query("\x2e\x2f\57\164\141\142\x6c\x65\x5b\x63\x6f\156\164\x61\151\156\163\x28\100\143\154\x61\163\x73\54\x20\x27\141\x6e\163\167\x65\162\47\x29\135", $questionNode); if ($answerTable->length == 0) { $answerTable = $xpath->query("\x2e\57\57\144\x69\x76\133\143\157\156\164\141\x69\x6e\x73\50\100\x63\154\141\x73\163\x2c\40\x27\x61\x62\154\x6f\143\153\47\x29\x5d\57\x2f\164\141\x62\154\145", $questionNode); } if ($answerTable->length > 0) { $table = $answerTable->item(0); $rows = $xpath->query("\56\57\x2f\x74\142\157\x64\x79\x2f\164\x72", $table); if ($rows->length == 0) { $rows = $xpath->query("\56\57\x2f\x74\162", $table); } $answerCounter = 0; $firstSelect = $xpath->query("\56\x2f\x2f\163\145\154\x65\143\x74", $questionNode); $answerOptions = array(); if ($firstSelect->length > 0) { $selectElement = $firstSelect->item(0); $options = $xpath->query("\x2e\x2f\x2f\157\x70\x74\151\157\x6e", $selectElement); foreach ($options as $option) { $value = $option->getAttribute("\x76\x61\154\x75\x65"); $text = trim($option->textContent); if (!empty($value) && $text != "\x43\150\x6f\157\x73\x65\56\x2e\x2e") { $answerOptions[$value] = $text; } } } foreach ($rows as $rowIndex => $row) { $textCell = $xpath->query("\x2e\57\x2f\164\x64\x5b\x63\x6f\156\164\x61\151\156\x73\50\100\x63\154\x61\163\x73\54\x20\x27\x74\x65\170\164\47\x29\x5d", $row); $select = $xpath->query("\x2e\57\57\163\x65\154\x65\143\164", $row); if ($textCell->length > 0 && $select->length > 0) { $questionText = trim($textCell->item(0)->textContent); $questionText = html_entity_decode($questionText, ENT_QUOTES | ENT_HTML5, "\x55\x54\106\x2d\x38"); $questionText = preg_replace("\57\x5c\163\x2b\x2f", "\40", $questionText); $selectElement = $select->item(0); $selectId = $selectElement->getAttribute("\x69\x64"); $selectName = $selectElement->getAttribute("\x6e\141\155\145"); $selectedOption = $xpath->query("\x2e\x2f\x2f\157\160\x74\x69\x6f\156\133\x40\163\145\x6c\145\x63\x74\145\144\x3d\x27\x73\x65\x6c\145\143\x74\145\x64\47\x5d", $selectElement); $selectedValue = ''; $selectedText = ''; if ($selectedOption->length > 0) { $selectedValue = $selectedOption->item(0)->getAttribute("\x76\x61\x6c\x75\x65"); $selectedText = trim($selectedOption->item(0)->textContent); } if (empty($selectedValue) || $selectedValue == "\60") { $selectedValue = "\60"; $selectedText = "\x43\x68\x6f\157\x73\145\56\x2e\x2e"; } $letter = chr(65 + $answerCounter); $answer = array("\154\x65\164\164\x65\162" => $letter, "\x71\165\x65\163\164\x69\157\x6e\137\164\x65\x78\x74" => $questionText, "\163\x65\x6c\x65\143\164\137\151\144" => $selectId, "\x73\145\154\145\143\x74\137\156\x61\155\x65" => $selectName, "\x73\145\154\x65\x63\164\x65\144\137\x76\x61\x6c\x75\x65" => $selectedValue, "\163\x65\x6c\145\143\x74\x65\x64\x5f\x74\x65\x78\164" => $selectedText, "\151\x73\137\141\x6e\163\167\145\x72\x65\x64" => $selectedValue != "\60" && !empty($selectedValue), "\x69\163\x5f\x63\x6f\162\x72\x65\x63\164" => false, "\141\x6c\154\137\x6f\160\x74\x69\157\156\x73" => $answerOptions, "\164\171\x70\x65" => "\x64\x72\x6f\160\x64\157\x77\x6e"); $questionData["\x61\156\163\167\145\x72\163"][] = $answer; if ($selectedValue != "\x30" && !empty($selectedValue)) { if (!isset($questionData["\143\x6f\x72\x72\x65\x63\164\137\x61\x6e\x73\167\145\x72"]) || !is_array($questionData["\143\x6f\x72\162\x65\143\164\x5f\141\x6e\163\167\x65\x72"])) { $questionData["\x63\x6f\x72\162\145\143\164\x5f\x61\156\163\x77\145\162"] = array(); } $questionData["\143\x6f\x72\x72\x65\143\164\x5f\x61\156\x73\167\x65\162"][] = array("\161\165\x65\x73\164\x69\x6f\156" => $questionText, "\x61\156\x73\167\145\162" => $selectedText, "\166\141\154\x75\145" => $selectedValue); } $answerCounter++; } } } else { $selects = $xpath->query("\x2e\57\x2f\x73\x65\154\145\x63\164", $questionNode); if ($selects->length > 0) { $answerCounter = 0; $firstSelect = $selects->item(0); $answerOptions = array(); $options = $xpath->query("\56\57\x2f\157\160\x74\x69\157\x6e", $firstSelect); foreach ($options as $option) { $value = $option->getAttribute("\166\x61\154\x75\x65"); $text = trim($option->textContent); if (!empty($value) && $text != "\103\150\x6f\157\x73\x65\x2e\56\x2e") { $answerOptions[$value] = $text; } } foreach ($selects as $selectIndex => $selectElement) { $questionText = ''; $prevElement = $selectElement->previousSibling; while ($prevElement) { if ($prevElement->nodeType == XML_TEXT_NODE) { $text = trim($prevElement->nodeValue); if (!empty($text)) { $questionText = $text . "\x20" . $questionText; } } else { if ($prevElement->nodeType == XML_ELEMENT_NODE) { if ($prevElement->tagName == "\x6c\141\142\x65\x6c") { $questionText = trim($prevElement->textContent) . "\x20" . $questionText; } else { if ($prevElement->tagName == "\x74\x64" && strpos($prevElement->getAttribute("\143\x6c\141\163\x73"), "\x74\x65\170\164") !== false) { $questionText = trim($prevElement->textContent) . "\x20" . $questionText; } } } } $prevElement = $prevElement->previousSibling; } $questionText = trim($questionText); if (empty($questionText)) { $questionText = "\x49\164\x65\x6d\40" . ($selectIndex + 1); } $questionText = html_entity_decode($questionText, ENT_QUOTES | ENT_HTML5, "\125\x54\x46\x2d\x38"); $questionText = preg_replace("\x2f\x5c\163\x2b\57", "\40", $questionText); $selectId = $selectElement->getAttribute("\x69\x64"); $selectName = $selectElement->getAttribute("\156\141\155\145"); $selectedOption = $xpath->query("\56\57\x2f\157\x70\x74\x69\x6f\156\x5b\x40\x73\145\x6c\145\x63\x74\x65\x64\75\x27\x73\145\x6c\145\x63\164\x65\x64\47\135", $selectElement); $selectedValue = ''; $selectedText = ''; if ($selectedOption->length > 0) { $selectedValue = $selectedOption->item(0)->getAttribute("\x76\141\x6c\x75\145"); $selectedText = trim($selectedOption->item(0)->textContent); } if (empty($selectedValue) || $selectedValue == "\x30") { $selectedValue = "\x30"; $selectedText = "\103\150\x6f\157\163\x65\x2e\56\56"; } $letter = chr(65 + $answerCounter); $answer = array("\x6c\145\x74\x74\145\162" => $letter, "\161\x75\145\x73\164\x69\157\x6e\137\x74\x65\x78\x74" => $questionText, "\163\x65\154\145\143\x74\137\x69\144" => $selectId, "\163\145\x6c\x65\143\x74\x5f\156\x61\155\x65" => $selectName, "\x73\x65\154\x65\143\164\x65\x64\137\166\141\x6c\165\145" => $selectedValue, "\163\x65\154\145\143\x74\145\144\x5f\x74\x65\170\x74" => $selectedText, "\151\x73\137\x61\156\x73\x77\145\162\x65\x64" => $selectedValue != "\x30" && !empty($selectedValue), "\x69\x73\x5f\x63\x6f\x72\x72\145\x63\164" => false, "\x61\x6c\x6c\x5f\x6f\160\x74\x69\x6f\x6e\163" => $answerOptions, "\x74\x79\160\145" => "\x64\162\157\160\144\x6f\167\x6e"); $questionData["\141\x6e\x73\x77\145\x72\x73"][] = $answer; if ($selectedValue != "\60" && !empty($selectedValue)) { if (!isset($questionData["\143\x6f\x72\x72\x65\143\x74\137\141\x6e\x73\167\x65\162"]) || !is_array($questionData["\x63\x6f\162\x72\145\x63\164\x5f\x61\156\163\x77\x65\x72"])) { $questionData["\143\x6f\x72\x72\145\x63\x74\x5f\141\156\x73\x77\145\x72"] = array(); } $questionData["\x63\157\x72\162\x65\x63\164\137\x61\x6e\163\x77\145\162"][] = array("\x71\165\145\163\164\x69\157\156" => $questionText, "\141\x6e\x73\x77\x65\162" => $selectedText, "\166\x61\x6c\x75\x65" => $selectedValue); } $answerCounter++; } } } } goto gr2TR; Og30w: function getBestImagesForQuestion($question, $imageMapping, $allImagePaths) { $questionId = $question["\151\144"]; $questionNumber = $question["\x6e\165\x6d\x62\145\x72"]; $candidates = array(); $keysToTry = array("\x69\x64\137{$questionId}", "\x6e\x75\155\137{$questionNumber}"); foreach ($keysToTry as $key) { if (isset($imageMapping[$key])) { foreach ($imageMapping[$key] as $imageInfo) { if (file_exists($imageInfo["\160\x61\x74\x68"])) { $candidates[] = array("\160\141\164\x68" => $imageInfo["\160\x61\164\150"], "\x73\x63\157\162\145" => 100, "\162\x65\x61\x73\x6f\156" => "\115\x61\x70\x70\x69\156\x67\40{$key}", "\x69\x6e\x66\x6f" => $imageInfo); } } } } if (empty($candidates)) { $patterns = array("\161{$questionId}\x5f" => 90, "\x5f\x71{$questionId}\x5f" => 85, "\161{$questionNumber}\x5f" => 80, "\160\145\162\164\141\156\171\x61\x61\x6e\137{$questionNumber}" => 70, "\x73\157\x61\154\137{$questionNumber}" => 65); foreach ($allImagePaths as $imagePath) { $filename = basename($imagePath); $nameWithoutExt = pathinfo($filename, PATHINFO_FILENAME); foreach ($patterns as $pattern => $score) { if (strpos($filename, $pattern) !== false || strpos($nameWithoutExt, $pattern) !== false) { $candidates[] = array("\x70\x61\164\x68" => $imagePath, "\163\x63\x6f\x72\145" => $score, "\162\x65\x61\163\x6f\156" => "\x50\x61\x74\x74\145\162\x6e\x3a\x20{$pattern}", "\x66\151\x6c\145\156\141\x6d\145" => $filename); break; } } } } usort($candidates, function ($a, $b) { return $b["\163\x63\x6f\162\145"] <=> $a["\163\x63\x6f\x72\145"]; }); $bestImages = array_slice($candidates, 0, 2); $result = array(); foreach ($bestImages as $img) { $result[] = $img["\160\x61\164\x68"]; } return $result; } goto qvjHh; umAIW: function help() { global $h, $p, $k, $m; system("\143\x6c\145\x61\162"); echo "\xa{$k}\xe2\225\224\xe2\x95\x90\xe2\x95\x90\xe2\225\x90\342\x95\x90\xe2\225\220\xe2\225\220\342\225\220\xe2\225\x90\xe2\225\220\xe2\225\220\342\225\220\342\x95\220\xe2\225\x90\xe2\x95\220\xe2\x95\x90\xe2\225\220\xe2\225\220\342\225\220\xe2\225\220\xe2\x95\220\xe2\x95\220\xe2\225\220\xe2\225\220\xe2\225\220\xe2\225\x90\xe2\225\x90\xe2\x95\x90\xe2\x95\220\342\x95\220\342\225\x90\342\x95\220\xe2\225\x90\xe2\225\x90\342\x95\220\342\x95\220\342\x95\220\342\225\x90\xe2\x95\x90\342\x95\x90\342\x95\220\342\x95\220\xe2\x95\x90\342\225\x90\xe2\x95\x90\xe2\x95\x90\xe2\x95\x90\xe2\225\x90\342\225\220\xe2\x95\x90\342\x95\220\342\x95\x90\342\225\x90\xe2\225\220\342\225\x90\xe2\225\220\342\225\x90\xe2\225\220\xe2\225\x97{$p}\12"; echo "{$k}\342\x95\x91\40\x20\x20\40\40\x20\x20\x20\40\40\40\x20\x20\x20\x20\40\40\x48\x45\114\120\x20\x2d\40\103\101\x52\x41\x20\x50\x45\116\107\107\x55\116\101\101\116\x20\x20\40\40\40\40\x20\40\40\x20\x20\x20\x20\40\x20\40\x20\x20\xe2\x95\221{$p}\12"; echo "{$k}\xe2\225\232\342\x95\x90\xe2\x95\220\xe2\x95\220\342\225\x90\342\225\x90\xe2\x95\x90\342\225\220\342\225\220\xe2\x95\x90\342\x95\220\xe2\x95\220\342\225\x90\xe2\225\x90\xe2\x95\220\xe2\225\220\xe2\225\220\342\x95\220\342\225\220\342\225\220\342\225\220\342\x95\220\xe2\x95\x90\xe2\225\x90\xe2\x95\x90\xe2\x95\x90\xe2\x95\x90\342\x95\220\342\225\x90\342\x95\220\xe2\225\x90\342\225\220\xe2\225\x90\342\x95\x90\xe2\225\220\xe2\225\x90\342\x95\x90\xe2\x95\220\xe2\225\220\xe2\x95\x90\342\225\220\xe2\x95\220\342\x95\220\342\x95\220\xe2\225\x90\xe2\225\x90\xe2\225\x90\342\225\220\xe2\225\220\342\x95\220\xe2\x95\x90\342\225\x90\xe2\x95\220\342\x95\x90\xe2\225\220\xe2\x95\220\342\225\x90\342\x95\220\xe2\225\x9d{$p}\12"; echo "\12{$h}\xf0\x9f\223\x8c\40\x4c\101\x4e\x47\113\101\110\x20\x44\101\x53\x41\x52\72{$p}\12"; echo "{$k}\61\x2e\40{$p}\114\x6f\x67\151\x6e\x20\x76\151\x61\40\155\145\156\x75\40\x27\x4c\x6f\x67\151\156\x20\x6b\x65\40\105\55\114\145\x61\x72\156\151\x6e\147\47{$p}\xa"; echo "{$k}\62\x2e\40{$p}\104\x61\x70\141\164\153\141\156\40\x41\x74\164\145\155\160\x74\40\111\x44\40\46\x20\x43\x4d\x49\x44\x20\50\154\151\x68\141\164\x20\143\x61\x72\x61\x20\x64\151\x20\x62\141\167\x61\150\51{$p}\xa"; echo "{$k}\x33\56\x20{$p}\120\151\154\x69\x68\40\x27\123\x63\x72\x61\x70\151\156\147\x20\x26\x20\x45\153\163\x74\162\141\153\163\x69\x20\123\157\141\154\47\x20\x64\151\x20\x6d\x65\x6e\165\x20\165\164\x61\155\141{$p}\xa"; echo "{$k}\x34\56\x20{$p}\x4d\141\163\165\153\153\x61\156\40\101\164\164\145\x6d\160\x74\x20\x49\104\x20\144\x61\x6e\40\x43\115\x49\x44{$p}\12"; echo "{$k}\65\56\x20{$p}\x50\x69\x6c\x69\150\x20\157\160\x73\151\40\171\x61\x6e\x67\40\x64\x69\151\156\x67\151\x6e\153\141\x6e{$p}\12"; echo "{$k}\66\56\40{$p}\x54\165\156\x67\147\165\40\x70\162\x6f\163\145\x73\x20\163\x65\x6c\x65\x73\141\151\54\40\150\x61\163\x69\x6c\x20\x61\x64\141\x20\x64\x69\40\146\157\x6c\144\x65\x72\x20\x27\x64\x6f\x77\156\x6c\x6f\141\144\x2f\47{$p}\xa"; echo "\xa{$h}\360\x9f\x8e\257\x20\103\101\x52\x41\x20\x44\101\x50\101\124\113\101\116\40\x41\x54\x54\105\115\120\124\x20\111\x44\x20\x26\x20\103\x4d\111\104\x3a{$p}\12"; echo "{$k}\xe2\x80\242\40{$p}\x42\x75\153\141\40\161\165\151\172\40\x64\x69\x20\x62\162\x6f\x77\x73\145\x72{$p}\xa"; echo "{$k}\342\200\xa2\x20{$p}\120\x65\x72\x68\141\164\x69\153\x61\x6e\x20\125\x52\x4c\x20\163\145\x74\x65\154\x61\x68\40\x6b\154\x69\x6b\x20\x27\x41\x74\x74\x65\155\160\164\40\x71\165\x69\x7a\47{$p}\xa"; echo "{$k}\xe2\x80\xa2\x20{$p}\103\x6f\x6e\x74\x6f\x68\x20\125\122\x4c\x3a\x20{$p}\x2e\x2e\56\x2f\141\164\164\x65\155\x70\x74\x2e\x70\x68\160\x3f{$k}\141\x74\164\x65\x6d\x70\x74\x3d\x31\x32\63\64\x35{$p}\46{$k}\x63\155\151\144\75\66\67\70\71\60{$p}\46\160\141\x67\145\x3d\60{$p}\xa"; echo "{$k}\342\200\242\x20{$p}\x44\141\162\x69\40\125\x52\x4c\40\x74\x65\162\163\145\142\x75\164\72{$p}\xa"; echo "\x20\40\40\40{$h}\x41\x74\x74\145\155\x70\164\x20\x49\x44\40\x3d\x20\61\x32\63\64\65{$p}\12"; echo "\40\40\x20\x20{$h}\x43\x4d\111\104\40\x3d\40\x36\67\x38\x39\x30{$p}\xa"; echo "\xa{$h}\360\237\223\x81\x20\x48\x41\x53\111\x4c\40\x41\x4b\101\x4e\x20\104\x49\x53\x49\x4d\120\101\x4e\x20\104\111\72{$p}\xa"; echo "{$k}\xe2\x80\xa2\x20{$p}\144\x6f\x77\x6e\154\157\141\x64\57\144\x61\163\x68\x62\157\x61\x72\x64\x2e\150\164\155\x6c\x20\40\x20\x20\x20\x20\55\x20\104\x61\163\x68\142\x6f\141\162\x64\40\145\x2d\154\145\141\162\x6e\151\156\x67{$p}\12"; echo "{$k}\xe2\x80\xa2\40{$p}\144\157\167\x6e\x6c\157\141\x64\x2f\153\x65\162\x6a\141\x30\56\x68\164\155\154\x20\x20\x20\x20\40\40\x20\40\x20\x2d\x20\x48\141\154\141\x6d\x61\x6e\40\x73\x6f\141\154{$p}\12"; echo "{$k}\342\x80\242\40{$p}\x64\x6f\x77\x6e\x6c\157\x61\x64\x2f\x53\105\115\125\101\137\x50\x45\x52\x54\101\x4e\x59\x41\101\x4e\56\x74\170\x74\x20\55\40\x47\x61\142\x75\x6e\147\141\x6e\x20\163\x65\155\165\x61\40\x73\157\x61\154{$p}\12"; echo "{$k}\342\200\xa2\x20{$p}\144\157\x77\156\154\157\x61\144\x2f\151\x6d\141\147\145\x73\57\40\x20\x20\40\x20\x20\x20\40\40\40\40\40\x20\55\40\x46\x6f\x6c\144\145\x72\x20\147\x61\x6d\142\x61\x72\40\163\x6f\141\x6c{$p}\12"; echo "\xa{$h}\360\237\244\x96\40\x47\x45\115\x49\x4e\x49\x20\101\120\111\x20\50\117\120\123\111\x4f\116\x41\114\x29\72{$p}\xa"; echo "{$k}\342\x80\xa2\40{$p}\x44\141\x70\141\164\153\x61\x6e\x20\x41\x50\111\40\144\x61\162\x69\72\40\x68\164\x74\x70\163\x3a\57\x2f\155\141\153\145\x72\x73\165\151\x74\145\x2e\x67\x6f\157\147\x6c\145\56\x63\x6f\x6d\57\141\160\x70\x2f\141\x70\151\153\x65\x79{$p}\xa"; echo "{$k}\342\200\xa2\40{$p}\123\151\x6d\160\x61\x6e\x20\x41\120\x49\x20\x4b\x65\x79\40\x76\151\x61\x20\x6d\145\x6e\165\40\x27\x4d\141\x6e\141\147\145\40\x47\105\115\x49\116\x49\x20\101\x50\x49\x20\x4b\145\171\x27{$p}\xa"; echo "{$k}\xe2\200\242\40{$p}\x4f\164\157\x6d\x61\x74\x69\163\x20\x64\141\x70\x61\x74\40\x6a\141\x77\141\x62\x61\x6e\x20\101\x49\40\163\x65\164\x65\154\141\x68\40\163\x63\x72\141\x70\151\x6e\x67\x20\x73\145\154\x65\163\x61\151{$p}\xa"; echo "\xa{$h}\xe2\232\xa1\x20\124\x49\120\x53\40\103\105\120\x41\x54\x3a{$p}\xa"; echo "{$k}\342\200\242\40{$p}\x41\x74\164\x65\x6d\x70\164\40\x49\x44\x20\x62\145\162\x75\x62\x61\x68\40\x74\x69\x61\160\x20\x6d\165\x6c\141\151\40\x61\x74\x74\x65\155\160\164\40\x62\x61\x72\x75{$p}\xa"; echo "{$k}\342\x80\242\x20{$p}\x43\x4d\x49\x44\x20\164\145\164\141\160\40\165\x6e\164\x75\x6b\40\x71\x75\151\172\x20\171\x61\156\x67\x20\x73\141\x6d\x61{$p}\12"; echo "{$k}\xe2\200\xa2\x20{$p}\x55\156\164\x75\x6b\x20\163\157\141\x6c\x20\142\x61\x6e\171\141\x6b\40\50\x3e\63\x30\x29\x2c\x20\x62\x61\x67\151\x20\x6a\x61\144\151\40\62\x2d\x33\40\x62\x61\147\x69\141\x6e{$p}\12"; echo "{$k}\342\x80\xa2\x20{$p}\103\157\157\153\x69\145\x20\142\x65\162\x6c\141\x6b\x75\x20\142\145\x62\145\162\x61\160\x61\40\152\141\155\54\x20\154\x6f\x67\151\156\40\x75\154\x61\x6e\x67\x20\x6a\151\x6b\x61\40\x65\x78\x70\151\x72\x65\x64{$p}\xa"; echo "\12{$h}\xe2\x9d\x93\40\115\101\x53\x41\x4c\101\110\x20\125\115\125\x4d\x3a{$p}\xa"; echo "{$m}\xe2\x80\xa2\x20\114\157\x67\x69\156\x20\x67\141\147\141\154\x3f\x20{$p}\103\157\142\141\40\154\157\x67\x69\x6e\40\x75\x6c\x61\156\147{$p}\xa"; echo "{$m}\342\x80\242\40\111\x6e\x76\x61\x6c\151\x64\40\x61\164\164\145\x6d\160\x74\x3f\40{$p}\104\x61\160\x61\x74\153\141\156\x20\x61\x74\x74\145\x6d\x70\164\40\111\x44\x20\171\x61\x6e\147\x20\x62\x61\162\x75{$p}\xa"; echo "{$m}\xe2\200\xa2\x20\123\x6f\141\x6c\40\163\145\144\x69\x6b\x69\x74\x3f\40{$p}\124\x61\155\142\x61\150\x20\152\165\155\154\x61\150\40\x73\157\x61\154\x20\x64\x69\x20\151\x6e\x70\165\x74{$p}\12"; echo "{$m}\xe2\200\xa2\x20\101\120\111\40\x4b\145\x79\40\145\162\162\x6f\162\x3f\x20{$p}\x43\x65\153\x20\x76\151\x61\x20\155\x65\x6e\165\x20\x4d\x61\x6e\x61\x67\145\40\101\x50\111\40\x4b\145\x79{$p}\xa"; echo "\xa{$k}\xe2\225\224\342\225\x90\342\225\x90\342\225\x90\342\225\220\342\225\220\342\x95\220\xe2\225\220\xe2\x95\220\342\x95\x90\xe2\225\220\xe2\225\x90\342\x95\220\342\x95\220\xe2\x95\x90\342\x95\x90\xe2\x95\220\xe2\x95\220\xe2\x95\x90\xe2\225\220\xe2\x95\220\342\x95\x90\xe2\x95\x90\342\x95\220\342\225\x90\342\x95\220\342\225\220\342\225\x90\xe2\x95\x90\xe2\225\x90\342\225\220\xe2\x95\220\342\225\220\342\x95\x90\342\x95\x90\xe2\225\x90\342\225\x90\342\x95\220\xe2\x95\x90\xe2\x95\x90\xe2\225\x90\xe2\225\x90\xe2\x95\220\342\225\x90\xe2\x95\220\342\225\220\xe2\x95\x90\xe2\x95\220\342\225\220\xe2\225\220\xe2\225\x90\xe2\225\220\xe2\225\220\342\225\220\xe2\x95\220\xe2\x95\220\342\225\x90\xe2\225\220\342\225\227{$p}\12"; echo "{$k}\342\225\221\40\40\40\40\x20\40\x20\40\40\40\x20\x20\40\x20\x20\x4b\x6f\156\x74\141\x6b\x3a\x20\x40\x46\x75\x75\155\x61\x31\x36\x20\50\x54\145\154\x65\x67\162\141\x6d\x29\x20\40\40\x20\40\40\40\x20\40\40\40\40\40\40\40\xe2\225\221{$p}\xa"; echo "{$k}\342\225\232\xe2\225\220\342\x95\x90\xe2\x95\220\xe2\225\220\342\225\x90\342\x95\x90\xe2\x95\220\342\225\220\342\225\220\342\x95\x90\342\225\220\xe2\225\x90\xe2\x95\x90\xe2\x95\220\342\225\x90\342\225\220\xe2\225\220\xe2\x95\x90\xe2\225\x90\342\225\220\342\225\220\342\x95\x90\xe2\x95\x90\342\x95\220\xe2\225\220\xe2\225\220\342\x95\x90\xe2\225\220\342\225\220\xe2\x95\x90\xe2\x95\220\xe2\x95\x90\xe2\225\220\xe2\225\220\xe2\x95\x90\xe2\x95\220\342\225\220\xe2\225\220\xe2\225\x90\xe2\225\x90\342\x95\220\342\225\220\xe2\225\x90\xe2\225\220\342\225\x90\342\225\220\xe2\x95\220\xe2\225\x90\xe2\225\x90\xe2\x95\x90\xe2\x95\220\342\225\x90\342\225\x90\342\225\220\xe2\225\x90\xe2\x95\220\342\x95\x90\xe2\x95\235{$p}\12"; echo "\12{$h}\124\145\153\x61\x6e\x20\105\x6e\164\145\162\40\165\x6e\x74\x75\153\x20\153\145\x6d\x62\141\154\151\x20\153\x65\x20\155\x65\156\x75\x2e\56\x2e{$p}"; fgets(STDIN); } goto GfQEo; rkoib: function formatTextAnswersForText($question) { $output = "\x4a\101\x57\101\102\x41\x4e\72\xa"; $output .= str_repeat("\55", 40) . "\xa"; foreach ($question["\x61\x6e\163\167\145\x72\163"] as $answer) { $answerText = strip_tags($answer["\x74\145\x78\164"]); $answerText = html_entity_decode($answerText, ENT_QUOTES | ENT_HTML5, "\x55\124\x46\x2d\x38"); if (strpos($answerText, "\133\112\141\167\x61\x62\x61\x6e") === false && !empty(trim($answerText))) { $output .= wordwrap($answerText, 76, "\12") . "\xa"; } else { $output .= "\133\x42\x65\154\165\155\40\x64\x69\152\x61\167\x61\x62\x5d\xa"; } } $output .= "\12"; return $output; } goto LLfRB; R7x14: function formatMatchAnswersForText($question) { $output = "\x49\124\x45\x4d\40\115\101\x54\x43\x48\111\116\x47\57\x44\122\x4f\120\x44\x4f\127\116\x3a\xa"; $output .= str_repeat("\55", 40) . "\12"; foreach ($question["\x61\156\x73\167\145\x72\x73"] as $answer) { $status = $answer["\151\163\137\x61\156\163\167\145\x72\x65\x64"] ? "\342\234\223" : "\342\x9c\227"; $output .= sprintf("\45\163\x20\45\x73\56\40\x25\x73\xa", $status, $answer["\154\x65\x74\164\x65\x72"], $answer["\161\165\145\x73\x74\x69\157\x6e\137\x74\x65\x78\x74"]); if ($answer["\151\x73\137\141\x6e\163\167\145\162\145\144"]) { $output .= sprintf("\40\x20\x20\40\xe2\206\x92\x20\x44\151\160\151\x6c\x69\150\72\x20\45\x73\x20\50\x76\141\x6c\165\x65\72\40\45\x73\x29\xa", $answer["\163\145\x6c\145\143\x74\x65\x64\x5f\x74\145\170\164"], $answer["\163\x65\154\145\x63\x74\x65\144\x5f\166\x61\x6c\x75\x65"]); } else { $output .= "\x20\40\x20\40\342\206\222\40\102\x65\x6c\165\x6d\40\x64\x69\152\141\167\141\142\12"; } if ($answer["\x6c\x65\x74\x74\x65\x72"] == "\101" && !empty($answer["\x61\x6c\154\x5f\x6f\160\164\151\x6f\x6e\163"])) { $output .= "\x20\x20\40\40\x4f\x70\x73\x69\x20\164\145\x72\x73\145\144\151\x61\72\xa"; foreach ($answer["\141\154\154\137\157\x70\164\151\157\x6e\163"] as $value => $text) { $output .= sprintf("\x20\40\x20\x20\40\x20\x25\55\64\x73\40\x3d\x20\45\163\12", $value, $text); } } $output .= "\xa"; } if (!empty($question["\143\157\x72\162\145\x63\164\137\141\x6e\163\167\x65\162"]) && is_array($question["\x63\157\162\x72\x65\x63\164\137\x61\156\x73\167\x65\x72"])) { $output .= "\x4a\x41\x57\x41\102\101\116\40\131\x41\116\x47\x20\x44\x49\x50\111\114\x49\110\72\12"; $output .= str_repeat("\55", 40) . "\xa"; foreach ($question["\x63\157\x72\x72\145\143\x74\137\141\x6e\163\167\145\x72"] as $idx => $correct) { $itemNum = $idx + 1; $output .= sprintf("\45\x32\144\x2e\40\x25\x73\xa", $itemNum, $correct["\x71\165\x65\x73\164\151\157\x6e"]); $output .= sprintf("\x20\40\40\x20\xe2\206\222\x20\45\163\xa", $correct["\141\156\x73\167\145\162"]); } $output .= "\xa"; } return $output; } goto ShqoF; ltA9i: function buildQuestionImageMapping($downloadDir) { $mapping = array(); echo "{$k}\115\x65\x6d\x62\x61\x6e\147\x75\156\x20\x6d\141\160\160\x69\156\147\x20\x67\x61\155\x62\141\x72\x2e\x2e\56{$p}\xa"; $imageFolders = array($downloadDir . "\57\151\x6d\x61\147\145\x73", $downloadDir . "\x2f\141\154\x6c\137\x69\155\141\x67\145\163"); $totalImagesFound = 0; foreach ($imageFolders as $folder) { if (!is_dir($folder)) { continue; } $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($folder, RecursiveDirectoryIterator::SKIP_DOTS)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower($file->getExtension()); if (in_array($ext, array("\152\x70\x67", "\x6a\x70\145\147", "\x70\x6e\147", "\147\x69\146", "\142\x6d\160", "\167\x65\142\x70"))) { $filename = $file->getFilename(); $path = $file->getPathname(); $totalImagesFound++; $questionId = null; $questionNumber = null; if (preg_match("\x2f\161\50\134\x64\53\51\x5f\x69\155\147\134\144\x2b\x5f\x2f", $filename, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\x2f\x71\50\134\144\53\x29\137\133\x61\x2d\x66\60\55\x39\x5d\53\x5c\x2e\57", $filename, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\x2f\161\x28\x5c\144\x2b\51\137\x69\x6d\147\134\144\53\x5c\56\57", $filename, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\57\x71\x28\134\144\53\x29\x5c\57\57", $path, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\x2f\x70\x65\162\164\x61\x6e\x79\141\x61\156\x5f\50\134\144\x2b\x29\x5f\57", $filename, $matches)) { $questionNumber = $matches[1]; } elseif (preg_match("\x2f\163\157\141\154\137\x28\x5c\x64\x2b\x29\x5f\x2f", $filename, $matches)) { $questionNumber = $matches[1]; } elseif (preg_match("\57\161\x75\x65\163\164\151\x6f\156\133\x5f\x2d\x5d\x28\134\x64\x2b\51\x2f\x69", $path, $matches)) { $questionNumber = $matches[1]; } if ($questionId) { $key = "\151\144\x5f{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\160\141\164\x68" => $path, "\x66\151\154\x65\x6e\141\155\145" => $filename, "\x71\165\145\x73\164\x69\157\156\x5f\x69\x64" => $questionId, "\161\165\x65\163\x74\x69\157\x6e\137\156\x75\155\x62\145\x72" => $questionNumber, "\146\x6f\154\x64\145\x72" => basename(dirname($path)), "\x66\x75\154\154\x5f\x70\141\164\x68" => $path); } if ($questionNumber && !$questionId) { $key = "\156\165\155\x5f{$questionNumber}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\160\141\164\x68" => $path, "\x66\x69\154\145\156\141\155\x65" => $filename, "\161\165\x65\x73\x74\151\x6f\x6e\137\x6e\165\155\x62\x65\x72" => $questionNumber, "\x66\157\154\144\145\x72" => basename(dirname($path)), "\x66\x75\x6c\154\x5f\x70\x61\x74\x68" => $path); } } } } } echo "{$h}\342\x9c\x93\40\x44\x69\x74\145\155\x75\x6b\x61\x6e\40{$totalImagesFound}\x20\147\141\x6d\x62\x61\162\40\x75\x6e\x74\x75\153\40\155\141\x70\160\151\156\147{$p}\xa"; $jsonFiles = array($downloadDir . "\57\x64\157\167\x6e\x6c\x6f\x61\x64\145\x64\x5f\151\155\141\x67\145\163\x2e\x6a\163\x6f\156", $downloadDir . "\57\161\165\x65\x73\164\151\157\156\163\137\145\x78\x74\x72\141\143\164\145\x64\x2e\152\163\157\156", $downloadDir . "\57\151\x6d\x61\x67\x65\x73\x2f\x69\x6d\x61\147\x65\x5f\155\141\160\160\151\x6e\x67\x5f\52\x2e\x6a\x73\x6f\156"); $jsonDataProcessed = 0; foreach ($jsonFiles as $jsonPattern) { if (strpos($jsonPattern, "\52") !== false) { $files = glob($jsonPattern); foreach ($files as $jsonFile) { if (file_exists($jsonFile)) { $data = json_decode(file_get_contents($jsonFile), true); if (is_array($data)) { processJsonDataForMapping($data, $mapping); $jsonDataProcessed++; } } } } elseif (file_exists($jsonPattern)) { $data = json_decode(file_get_contents($jsonPattern), true); if (is_array($data)) { processJsonDataForMapping($data, $mapping); $jsonDataProcessed++; } } } if ($jsonDataProcessed > 0) { echo "{$h}\342\x9c\x93\x20\115\x65\155\x70\162\157\x73\x65\163\40{$jsonDataProcessed}\x20\x66\x69\x6c\x65\40\x4a\x53\x4f\x4e\x20\165\156\164\x75\x6b\x20\155\x61\160\x70\151\x6e\147\40\x74\141\x6d\142\141\150\x61\x6e{$p}\12"; } $totalMappings = 0; foreach ($mapping as $key => $items) { $totalMappings += count($items); } echo "{$h}\xe2\234\x93\40\124\x6f\x74\141\x6c\x20\x6d\x61\160\160\x69\x6e\x67\40\171\141\156\147\40\x64\x69\142\x75\141\x74\72\40{$totalMappings}{$p}\12"; return $mapping; } goto EP2Qo; m3XHv: function createImagesZip($allDownloadedImages, $downloadDir) { global $h, $m, $p, $k; if (!extension_loaded("\x7a\151\x70")) { echo "{$m}\xe2\232\240\40\105\153\x73\x74\x65\x6e\163\151\40\132\x49\120\x20\x74\x69\x64\x61\153\x20\164\x65\x72\x73\x65\144\151\x61\x2e\x20\x53\153\151\160\x20\160\145\x6d\x62\x75\x61\164\x61\156\x20\132\111\120\56{$p}\xa"; return null; } echo "{$k}\xa\115\145\155\142\165\141\164\x20\x66\151\x6c\x65\40\x5a\x49\120\40\144\x61\162\x69\40\163\145\155\165\141\40\147\x61\x6d\x62\141\x72\56\x2e\56{$p}\xa"; $zip = new ZipArchive(); $zipFilename = $downloadDir . "\57\141\x6c\154\x5f\x69\x6d\x61\147\x65\163\x5f" . date("\131\x6d\144\x5f\110\151\163") . "\56\172\151\x70"; if ($zip->open($zipFilename, ZipArchive::CREATE | ZipArchive::OVERWRITE) === TRUE) { $addedFiles = 0; foreach ($allDownloadedImages as $imageInfo) { if (isset($imageInfo["\144\157\x77\x6e\154\x6f\x61\x64\145\144"]) && $imageInfo["\x64\x6f\167\156\154\157\141\x64\145\x64"] && isset($imageInfo["\x6c\x6f\143\x61\x6c\137\160\141\x74\x68"])) { $localPath = $imageInfo["\x6c\157\x63\x61\154\137\x70\x61\164\150"]; if (file_exists($localPath)) { $zipEntryName = sprintf("\147\x61\x6d\142\x61\162\x5f\x71\x25\163\57\45\x73", $imageInfo["\161\x75\145\x73\x74\x69\157\156\x5f\156\x75\x6d\142\x65\162"] ?? "\x75\156\x6b\x6e\x6f\167\156", basename($imageInfo["\146\151\x6c\145\x6e\x61\x6d\145"])); if ($zip->addFile($localPath, $zipEntryName)) { $addedFiles++; echo "{$h}\x20\x20\xe2\234\x93\40\x44\151\x74\141\x6d\x62\x61\150\x6b\x61\x6e\40\153\x65\40\132\111\x50\72\x20{$zipEntryName}{$p}\12"; } } } } $zip->close(); $zipSize = filesize($zipFilename); echo "{$h}\xa\xe2\x9c\x93\x20\x46\x69\x6c\x65\x20\x5a\x49\x50\x20\144\151\x62\x75\x61\x74\x3a\x20{$zipFilename}{$p}\12"; echo "{$h}\xe2\234\x93\40\x54\x6f\164\x61\154\40\146\x69\x6c\x65\x20\x64\x61\x6c\141\x6d\40\x5a\x49\120\x3a\x20{$addedFiles}{$p}\xa"; echo "{$h}\342\234\223\x20\x55\x6b\x75\162\141\x6e\40\x5a\111\120\72\x20" . round($zipSize / 1024 / 1024, 2) . "\40\x4d\102{$p}\xa"; return array("\x7a\x69\160\x5f\x70\141\164\x68" => $zipFilename, "\146\151\x6c\x65\137\143\x6f\165\x6e\x74" => $addedFiles, "\x73\151\172\145" => $zipSize); } echo "{$m}\342\234\x97\40\x47\141\x67\141\154\x20\x6d\x65\155\x62\x75\141\x74\40\146\151\154\x65\x20\132\111\x50{$p}\12"; return null; } goto p_2Po; yk3ac: function splitQuestionsIntoParts($allQuestions, $parts = 2) { $questionsArray = array(); $questionCounter = 1; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { $questionsArray[] = array("\147\x6c\x6f\142\141\x6c\137\x6e\165\155\142\x65\x72" => $questionCounter, "\161\x75\x65\x73\164\151\157\x6e" => $question, "\x66\x69\x6c\145\156\x61\x6d\145" => $filename); $questionCounter++; } } $totalQuestions = count($questionsArray); $questionsPerPart = ceil($totalQuestions / $parts); $partsArray = array(); for ($i = 0; $i < $parts; $i++) { $start = $i * $questionsPerPart; $end = min(($i + 1) * $questionsPerPart, $totalQuestions); $partQuestions = array_slice($questionsArray, $start, $questionsPerPart); if (!empty($partQuestions)) { $partsArray[] = array("\x70\141\162\164\137\x6e\165\155\x62\x65\x72" => $i + 1, "\161\x75\x65\x73\x74\151\x6f\x6e\163" => $partQuestions, "\163\x74\141\162\164\x5f\x67\154\157\x62\141\x6c" => $partQuestions[0]["\x67\x6c\x6f\x62\x61\154\137\x6e\165\x6d\x62\145\162"], "\145\156\144\137\x67\x6c\157\x62\141\x6c" => $partQuestions[count($partQuestions) - 1]["\147\x6c\x6f\x62\x61\x6c\x5f\156\165\155\142\145\162"]); } } return $partsArray; } goto BDrZy; BW_cu: function inputNumeric($prompt, $default = null) { global $m, $p; while (true) { echo $prompt; $input = trim(fgets(STDIN)); if (empty($input) && $default !== null) { return $default; } if (is_numeric($input)) { return (int) $input; } echo "{$m}\111\156\160\x75\164\40\150\x61\162\165\163\x20\x62\145\x72\165\160\x61\40\x61\156\147\x6b\x61\x21{$p}\12"; } } goto yajnH; BLctP: function isImageDuplicate($imagePath, $relevantImages) { if (in_array($imagePath, $relevantImages)) { return true; } $filename = basename($imagePath); foreach ($relevantImages as $existingPath) { if (basename($existingPath) === $filename) { return true; } } if (file_exists($imagePath) && filesize($imagePath) < 10485760) { $currentHash = md5_file($imagePath); foreach ($relevantImages as $existingPath) { if (file_exists($existingPath) && md5_file($existingPath) === $currentHash) { return true; } } } return false; } goto Og30w; Rgq50: function manageGeminiApiKey() { global $m, $h, $p, $k, $bta, $ab; $geminiApiKeyFile = "\x47\x45\x4d\111\116\x49\137\141\x70\x69\56\164\x78\164"; while (true) { system("\143\154\145\141\162"); echo "\xa{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; echo "{$h}\x4d\101\x4e\101\x4a\x45\115\x45\116\40\101\x50\x49\x20\x4b\x45\x59\x20\107\105\115\111\x4e\x49{$p}\12"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; $apiKeyExists = file_exists($geminiApiKeyFile); $apiKey = $apiKeyExists ? trim(file_get_contents($geminiApiKeyFile)) : ''; $apiKeyStatus = $apiKeyExists ? "{$h}\124\x65\162\x73\151\155\x70\x61\156" : "{$m}\x54\x69\144\x61\153\40\x54\x65\x72\163\x69\155\160\x61\x6e"; $apiKeyPreview = $apiKey ? substr($apiKey, 0, 8) . "\56\56\56" . substr($apiKey, -8) : "\x54\x69\x64\141\153\x20\141\144\x61"; echo "\xa{$k}\x53\x74\x61\x74\x75\163\x20\101\120\x49\x20\113\145\171\x3a\x20{$apiKeyStatus}{$p}\xa"; echo "{$k}\120\162\145\166\151\145\167\x20\101\x50\x49\40\x4b\x65\x79\x3a\x20{$p}{$apiKeyPreview}\12"; echo "\12{$k}\x50\151\x6c\151\150\x20\x41\153\163\151\72{$p}\xa"; echo "{$h}\x20\40\x31\56\x20\x53\x69\x6d\x70\x61\156\57\125\x70\144\141\x74\145\x20\101\120\111\40\x4b\x65\171\40\x47\105\x4d\111\116\x49{$p}\xa"; echo "{$h}\x20\40\62\56\40\114\x69\150\x61\x74\40\101\120\x49\x20\x4b\145\171\40\x28\146\165\x6c\x6c\51{$p}\12"; echo "{$h}\40\x20\63\x2e\x20\110\141\160\x75\x73\40\101\x50\111\40\113\145\x79{$p}\xa"; echo "{$h}\40\40\64\56\x20\x54\145\x73\164\40\113\x6f\x6e\145\153\x73\151\40\101\120\x49\40\113\145\171{$p}\12"; echo "{$h}\40\x20\x35\x2e\x20\111\156\146\x6f\x72\x6d\141\163\151\x20\115\145\156\144\141\160\141\x74\153\141\156\x20\101\120\x49\40\x4b\145\171{$p}\xa"; echo "{$m}\40\40\x36\56\x20\113\x65\x6d\142\x61\154\151\40\153\x65\x20\x4d\x65\x6e\x75\40\x55\x74\x61\x6d\x61{$p}\12"; echo "{$k}\120\151\x6c\151\150\141\156\x20\50\x31\55\66\x29\x3a\40{$p}"; $choice = trim(fgets(STDIN)); switch ($choice) { case "\x31": system("\143\x6c\145\x61\x72"); echo "\xa{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; echo "{$h}\123\x49\x4d\120\101\x4e\40\x41\120\x49\40\x4b\105\131\40\107\x45\115\111\116\111{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; if ($apiKeyExists) { echo "{$k}\x41\120\111\x20\x4b\145\x79\40\x73\x61\x61\164\x20\151\x6e\x69\72\x20{$apiKeyPreview}{$p}\xa"; echo "{$k}\111\x6e\x67\x69\x6e\40\x6d\145\155\x70\x65\x72\142\141\162\x75\x69\40\x41\120\111\40\113\145\x79\77\40\x28\171\x2f\156\x29\72\x20{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) !== "\171") { echo "{$m}\104\151\142\x61\x74\x61\x6c\153\x61\x6e\x2e{$p}\12"; break; } } function readPasswordTermux($prompt = '', $showStars = true) { echo $prompt; if (PHP_OS == "\x4c\151\x6e\x75\170" && is_dir("\57\144\141\x74\141\57\x64\x61\164\141\x2f\143\157\155\56\x74\x65\162\155\165\170")) { if ($showStars) { system("\x73\x74\164\171\x20\x2d\x69\143\x61\x6e\x6f\156\40\x6d\151\156\40\x31\40\x74\x69\x6d\145\x20\60\40\55\145\x63\x68\157"); } else { system("\x73\164\x74\x79\40\x2d\145\143\150\157"); } } else { if ($showStars) { system("\x73\164\x74\x79\40\x2d\x69\143\x61\x6e\x6f\156\40\x2d\x65\143\x68\x6f"); } else { system("\x73\x74\164\171\40\x2d\145\x63\150\157"); } } $password = ''; while (true) { $char = fgetc(STDIN); if ($char === "\xa" || $char === "\15") { break; } if (ord($char) == 127 || ord($char) == 8) { if (strlen($password) > 0) { $password = substr($password, 0, -1); if ($showStars) { echo "\x8\x20\10"; } } } else { $password .= $char; if ($showStars) { echo "\x2a"; } } } if (PHP_OS == "\x4c\151\156\165\x78" && is_dir("\57\x64\x61\164\x61\x2f\144\x61\164\141\x2f\x63\x6f\155\56\x74\145\162\x6d\x75\170")) { system("\163\164\x74\171\x20\x69\143\x61\x6e\x6f\156\x20\145\143\150\x6f"); } else { system("\x73\x74\164\171\40\x65\x63\x68\157\40\151\x63\141\156\157\156"); } echo "\12"; return $password; } echo "\xa{$k}\115\141\163\165\153\x6b\x61\x6e\x20\101\120\111\x20\x4b\145\171\x20\107\x45\115\x49\x4e\111\x20\x41\x6e\x64\x61\72{$p}\xa"; echo "{$ab}\x28\x41\120\111\40\113\145\171\40\x61\153\141\156\40\x64\151\163\x65\x6d\x62\165\x6e\171\151\x6b\141\x6e\x20\163\x61\x61\x74\x20\144\151\x6b\145\x74\151\153\51{$p}\xa"; $apiKeyInput = readPasswordTermux("{$k}\101\x50\111\40\113\145\x79\72\x20{$p}", true); if (empty($apiKeyInput)) { echo "{$m}\x41\x50\111\x20\x4b\145\171\x20\x74\x69\x64\141\x6b\40\142\x6f\154\x65\x68\x20\153\x6f\x73\x6f\156\x67\41{$p}\12"; } elseif (strlen($apiKeyInput) < 30) { echo "{$m}\101\120\111\x20\113\x65\171\x20\164\145\x72\154\141\x6c\x75\x20\x70\145\x6e\x64\145\x6b\x2e\x20\120\x61\x73\164\151\x6b\x61\x6e\x20\x41\x6e\144\141\40\155\145\155\x61\163\165\153\x6b\x61\x6e\x20\101\120\x49\40\113\145\171\40\171\x61\x6e\147\40\166\141\x6c\151\x64\56{$p}\12"; } else { file_put_contents($geminiApiKeyFile, trim($apiKeyInput)); echo "{$h}\342\234\223\x20\x41\120\x49\x20\x4b\x65\171\40\x62\145\162\150\x61\163\151\154\x20\x64\151\163\x69\x6d\x70\141\x6e\x20\x64\x69\40\x66\151\x6c\x65\72\x20{$geminiApiKeyFile}{$p}\xa"; echo "{$h}\x50\162\x65\166\x69\x65\167\72\40" . substr($apiKeyInput, 0, 8) . "\56\56\56" . substr($apiKeyInput, -8) . "{$p}\12"; } echo "\xa{$h}\124\x65\x6b\141\156\40\x45\156\x74\145\162\40\165\156\x74\165\x6b\40\155\145\x6c\141\x6e\x6a\165\x74\153\x61\156\56\56\56{$p}"; fgets(STDIN); break; case "\62": system("\x63\x6c\x65\x61\x72"); echo "\xa{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\xa"; echo "{$h}\x4c\x49\x48\x41\x54\x20\x41\x50\x49\40\113\x45\131\40\x47\x45\x4d\x49\116\111\x20\x28\106\x55\x4c\x4c\x29{$p}\xa"; echo "{$bta}" . str_repeat("\342\x95\x90", 60) . "{$p}\12"; if (!$apiKeyExists) { echo "{$m}\x41\120\x49\40\113\x65\171\x20\142\x65\x6c\x75\x6d\40\144\151\163\x69\155\x70\x61\156\x2e{$p}\12"; } else { echo "{$k}\101\120\111\x20\113\145\x79\x20\x41\x6e\x64\141\72{$p}\12"; echo "{$h}{$apiKey}{$p}\12\12"; echo "{$k}\x50\x61\x6e\152\141\x6e\x67\x3a\x20" . strlen($apiKey) . "\x20\x6b\141\x72\141\153\x74\145\x72{$p}\12"; echo "{$k}\x50\162\145\x76\151\x65\167\72\x20" . substr($apiKey, 0, 8) . "\x2e\56\x2e" . substr($apiKey, -8) . "{$p}\12"; echo "\xa{$ab}\xe2\232\xa0\xef\270\217\40\40\x50\x45\x52\111\116\107\101\124\x41\116\72\40\x4a\141\156\147\141\x6e\40\x62\x61\x67\x69\153\141\x6e\x20\101\120\111\40\113\x65\x79\40\101\x6e\144\x61\40\153\145\x70\141\x64\x61\40\163\151\x61\160\x61\160\165\156\x21{$p}\xa"; echo "{$ab}\40\x20\40\x41\120\111\40\x4b\x65\x79\x20\x6d\145\x6d\x62\x65\162\x69\153\141\x6e\x20\x61\153\x73\145\x73\x20\x70\x65\156\x75\x68\40\153\x65\x20\141\x6b\165\x6e\40\x47\105\x4d\111\x4e\111\40\101\x6e\x64\141\x2e{$p}\12"; } echo "\12{$h}\x54\x65\x6b\141\x6e\x20\105\x6e\x74\x65\162\40\165\x6e\x74\165\153\x20\155\x65\154\x61\156\x6a\165\x74\153\x61\x6e\56\56\x2e{$p}"; fgets(STDIN); break; case "\63": system("\x63\x6c\x65\141\162"); echo "\xa{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; echo "{$h}\x48\101\120\x55\x53\x20\101\120\111\x20\x4b\105\x59\40\107\x45\115\111\x4e\111{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\xa"; if (!$apiKeyExists) { echo "{$m}\x54\151\x64\141\153\x20\x61\144\141\x20\x41\x50\x49\x20\x4b\145\171\40\x79\141\x6e\147\40\x74\x65\162\163\151\155\x70\x61\156\56{$p}\xa"; } else { echo "{$k}\101\x50\x49\40\113\x65\171\40\171\141\x6e\147\40\x61\153\x61\156\x20\x64\151\150\141\x70\165\163\72\x20{$apiKeyPreview}{$p}\xa"; echo "{$k}\101\x70\x61\153\141\150\x20\101\156\144\141\40\x79\x61\x6b\151\156\77\40\x28\x79\57\156\x29\72\x20{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) === "\x79") { if (unlink($geminiApiKeyFile)) { echo "{$h}\342\234\223\40\101\120\111\x20\x4b\145\171\40\142\x65\x72\x68\141\163\x69\x6c\x20\144\151\x68\x61\x70\165\x73\56{$p}\12"; } else { echo "{$m}\xe2\x9c\x97\x20\107\x61\147\x61\154\x20\155\x65\x6e\x67\x68\141\x70\x75\x73\x20\101\x50\111\x20\113\x65\171\x2e{$p}\xa"; } } else { echo "{$m}\x44\151\142\141\x74\x61\x6c\153\x61\x6e\56{$p}\12"; } } echo "\12{$h}\124\145\x6b\141\156\x20\x45\156\164\x65\162\x20\165\x6e\x74\x75\x6b\40\155\145\x6c\141\x6e\x6a\165\x74\153\x61\156\x2e\x2e\56{$p}"; fgets(STDIN); break; case "\64": system("\143\154\x65\x61\162"); echo "\12{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\xa"; echo "{$h}\x54\x45\x53\124\40\x4b\117\116\x45\x4b\x53\x49\x20\101\x50\x49\40\113\105\131\40\x47\x45\115\111\x4e\111{$p}\xa"; echo "{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; if (!$apiKeyExists) { echo "{$m}\124\151\x64\141\153\40\141\x64\141\40\x41\x50\111\40\113\x65\x79\40\x79\141\156\147\40\164\x65\162\x73\151\155\160\141\156\x2e{$p}\xa"; } else { echo "{$k}\x4d\145\x6e\x67\x75\x6a\x69\x20\153\157\x6e\145\153\x73\x69\40\x6b\x65\x20\107\105\115\x49\116\x49\x20\101\120\x49\56\56\56{$p}\xa"; $testUrl = "\150\x74\x74\x70\163\72\57\x2f\147\145\x6e\145\162\141\164\x69\166\x65\154\x61\156\147\x75\x61\x67\x65\x2e\x67\157\x6f\147\x6c\x65\x61\x70\151\x73\56\143\x6f\155\x2f\166\x31\142\x65\x74\141\x2f\x6d\x6f\x64\145\154\x73\x2f\147\x65\x6d\x69\x6e\151\55\x32\x2e\65\55\x66\x6c\x61\x73\150\72\x67\x65\156\145\162\x61\164\x65\x43\157\x6e\164\x65\156\x74\x3f\153\145\171\x3d" . $apiKey; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $testUrl); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode(array("\x63\x6f\x6e\164\x65\156\x74\x73" => array(array("\x70\x61\162\164\163" => array(array("\164\145\x78\x74" => "\x48\x65\154\154\x6f"))))))); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\x43\157\156\164\145\156\164\x2d\124\171\x70\145\x3a\x20\141\x70\x70\154\x69\143\141\164\x69\157\x6e\57\152\x73\157\x6e")); curl_setopt($ch, CURLOPT_TIMEOUT, 10); $response = curl_exec($ch); $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); curl_close($ch); if ($httpCode == 200) { echo "{$h}\342\x9c\223\x20\x4b\x6f\156\145\x6b\163\151\40\142\x65\x72\x68\x61\x73\151\x6c\41\40\101\120\x49\40\113\x65\x79\40\166\x61\x6c\x69\x64\x2e{$p}\12"; $responseData = json_decode($response, true); if (isset($responseData["\155\x6f\144\x65\154\x56\x65\x72\163\151\157\x6e"])) { echo "{$k}\x4d\x6f\144\x65\154\72\40" . $responseData["\x6d\157\x64\145\x6c\x56\x65\x72\x73\x69\x6f\156"] . "{$p}\12"; } } elseif ($httpCode == 400) { echo "{$h}\xe2\x9c\x93\x20\101\120\x49\40\x4b\x65\x79\40\166\x61\x6c\151\x64\40\x74\x65\164\141\160\x69\40\x61\144\x61\x20\153\x65\163\141\154\x61\150\141\x6e\x20\x70\x61\144\x61\40\x72\x65\x71\165\145\163\x74\56{$p}\12"; echo "{$k}\111\x6e\x69\40\x6e\157\x72\155\x61\x6c\x20\x75\x6e\164\x75\x6b\40\x74\145\163\164\40\x6b\157\x6e\x65\x6b\x73\x69\x20\x73\x65\144\x65\162\x68\141\x6e\x61\x2e{$p}\12"; } elseif ($httpCode == 403) { echo "{$m}\342\234\x97\40\x41\x50\111\40\113\x65\x79\40\x74\x69\x64\x61\153\40\x76\x61\x6c\151\144\x20\x61\164\x61\165\x20\164\151\144\x61\153\40\x6d\145\x6d\151\x6c\x69\x6b\x69\40\x69\x7a\x69\x6e\56{$p}\xa"; echo "{$k}\x48\x54\x54\120\x20\x43\157\x64\145\72\40{$httpCode}{$p}\12"; } else { echo "{$m}\xe2\234\x97\40\107\x61\147\x61\154\x20\x74\145\x72\150\x75\x62\165\156\x67\56\x20\x48\124\124\120\x20\103\x6f\144\145\x3a\x20{$httpCode}{$p}\12"; if ($response) { $error = json_decode($response, true); if (isset($error["\145\x72\162\157\162"]["\155\x65\x73\x73\x61\x67\145"])) { echo "{$k}\x50\145\x73\141\x6e\40\145\x72\x72\157\162\72\40" . $error["\145\x72\162\157\162"]["\155\145\x73\163\141\147\145"] . "{$p}\xa"; } } } echo "\12{$k}\x53\164\141\164\165\163\72\40{$p}" . ($httpCode == 200 || $httpCode == 400 ? "{$h}\x56\101\x4c\111\104{$p}" : "{$m}\111\116\x56\x41\x4c\x49\x44{$p}") . "\xa"; } echo "\xa{$h}\x54\x65\153\x61\x6e\x20\105\156\164\x65\x72\40\x75\156\x74\x75\x6b\40\155\145\154\141\156\152\165\164\x6b\x61\156\x2e\56\56{$p}"; fgets(STDIN); break; case "\x35": system("\143\x6c\145\x61\162"); echo "\xa{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; echo "{$h}\x49\x4e\x46\x4f\x52\115\x41\x53\111\40\x4d\x45\116\104\101\120\x41\x54\113\101\x4e\x20\101\x50\x49\x20\x4b\105\x59\x20\x47\105\x4d\x49\116\111{$p}\12"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\12"; echo "{$k}\103\141\x72\141\x20\155\x65\x6e\x64\141\x70\141\164\x6b\x61\156\x20\x41\120\x49\x20\x4b\145\171\40\107\x45\x4d\111\116\x49\72{$p}\12\xa"; echo "{$h}\x31\56\40\113\x75\156\152\x75\156\147\151\x3a\40\150\164\x74\160\x73\72\x2f\57\155\141\153\x65\x72\163\165\151\164\x65\56\x67\x6f\157\x67\154\x65\56\x63\157\x6d\57\x61\x70\x70\x2f\x61\x70\x69\153\145\171{$p}\12"; echo "{$ab}\x20\x20\x20\x41\164\141\x75\40\x62\x75\153\x61\x20\101\x49\x20\123\x74\165\x64\x69\x6f\40\144\151\40\150\x74\x74\x70\163\72\x2f\57\141\151\x73\164\x75\144\x69\157\56\147\x6f\157\x67\154\x65\56\143\x6f\x6d\57{$p}\12\xa"; echo "{$h}\62\x2e\40\114\x6f\x67\151\156\40\144\145\x6e\x67\x61\156\40\141\153\x75\x6e\40\x47\x6f\157\x67\x6c\145\x20\x41\x6e\144\141{$p}\12"; echo "{$ab}\40\x20\40\x50\141\163\x74\151\153\141\156\40\x41\x6e\x64\x61\40\163\x75\x64\141\150\40\x6d\x65\155\x69\154\151\x6b\151\40\141\153\165\x6e\x20\x47\157\157\x67\x6c\x65{$p}\12\12"; echo "{$h}\63\x2e\x20\102\x75\x61\x74\x20\101\x50\111\x20\x4b\145\171\x20\142\141\x72\165\x3a{$p}\12"; echo "{$ab}\x20\x20\40\x2d\40\x4b\154\151\x6b\40\47\103\162\x65\141\164\x65\x20\101\x50\111\40\x4b\x65\x79\x27{$p}\12"; echo "{$ab}\x20\40\40\55\40\x50\151\x6c\151\150\40\x27\103\162\145\x61\x74\x65\x20\x41\120\x49\40\x4b\145\171\x20\151\x6e\40\x6e\145\x77\40\x70\162\157\x6a\145\x63\x74\x27{$p}\12"; echo "{$ab}\x20\x20\40\x2d\40\102\145\x72\151\40\156\141\155\141\x20\171\141\x6e\x67\40\155\x75\144\141\x68\x20\144\x69\x69\156\147\x61\164{$p}\xa"; echo "{$ab}\40\40\x20\55\x20\x43\x6f\x70\x79\40\101\120\x49\40\x4b\145\x79\x20\171\x61\x6e\147\40\155\x75\156\x63\x75\x6c{$p}\12\12"; echo "{$h}\64\56\40\x46\151\x74\165\x72\x20\171\141\x6e\147\x20\x64\x69\x64\x75\153\x75\x6e\147\x20\144\x65\x6e\x67\141\156\x20\101\x50\x49\40\x4b\145\171\40\151\x6e\151\x3a{$p}\12"; echo "{$ab}\x20\40\x20\342\234\223\40\115\145\x6e\147\x69\162\x69\x6d\40\160\145\x72\x74\141\156\171\141\x61\156\40\153\145\x20\x47\105\x4d\x49\x4e\x49\x20\101\120\x49{$p}\12"; echo "{$ab}\40\40\40\342\234\223\x20\115\145\x6e\x64\141\x70\x61\x74\153\141\x6e\40\x6a\x61\167\x61\142\141\x6e\40\144\141\x72\x69\x20\x41\x49{$p}\12"; echo "{$ab}\x20\40\x20\xe2\x9c\223\x20\101\x6e\x61\x6c\151\163\151\163\x20\147\141\x6d\142\x61\162\x20\144\x61\x6c\141\x6d\x20\x70\x65\x72\164\x61\x6e\x79\141\x61\x6e{$p}\12"; echo "{$ab}\x20\x20\40\xe2\234\x93\40\x4d\145\x6e\144\141\160\x61\164\153\x61\x6e\40\x6a\x61\x77\x61\142\x61\156\40\x79\x61\x6e\x67\40\x61\153\165\x72\x61\x74{$p}\xa\12"; echo "{$h}\65\56\x20\103\x61\164\141\x74\x61\x6e\40\120\x65\x6e\x74\151\156\x67\x3a{$p}\xa"; echo "{$m}\40\40\x20\xe2\232\240\xef\xb8\217\40\x20\x41\x50\111\x20\x4b\145\x79\40\141\x64\141\x6c\141\x68\x20\x52\x41\110\101\123\x49\101\x2c\40\152\x61\156\x67\141\x6e\40\144\151\142\141\x67\151\153\141\x6e\41{$p}\12"; echo "{$m}\40\40\40\342\x9a\xa0\xef\270\217\40\40\x53\x69\155\160\141\156\x20\x64\151\40\x74\x65\x6d\160\141\x74\40\171\141\x6e\147\40\x61\155\x61\156{$p}\xa"; echo "{$k}\40\x20\x20\xf0\237\x92\xa1\40\101\120\111\x20\113\145\x79\40\147\162\141\164\x69\163\40\155\x65\155\x69\154\151\x6b\x69\x20\x6c\151\155\151\x74\40\160\x65\x6e\x67\x67\x75\x6e\141\141\x6e{$p}\xa"; echo "{$k}\x20\x20\40\360\237\224\x97\x20\x44\x6f\153\x75\155\145\156\x74\x61\x73\x69\x3a\x20\150\x74\x74\x70\x73\x3a\57\x2f\x61\x69\x2e\147\x6f\x6f\147\154\145\x2e\x64\x65\x76\x2f{$p}\xa\12"; echo "{$h}\66\x2e\x20\106\157\162\155\x61\164\40\101\x50\x49\40\x4b\x65\x79\x3a{$p}\xa"; echo "{$ab}\40\40\40\101\111\x7a\141\x53\171\x42\170\170\170\170\x78\170\170\170\170\x78\x78\170\x78\x78\170\170\170\170\170\x78\170\x78\170\x78\170\170\170\x78\x78\x78\x78{$p}\xa"; echo "{$ab}\40\40\40\x28\x42\x69\x61\163\x61\x6e\171\141\x20\x64\151\155\x75\154\141\151\x20\x64\145\156\x67\x61\x6e\40\x27\x41\111\172\141\123\x79\47\x20\144\141\156\x20\160\x61\x6e\x6a\x61\x6e\x67\x6e\171\x61\40\x73\145\153\151\x74\141\162\40\x34\60\x20\x6b\x61\x72\x61\x6b\x74\x65\x72\51{$p}\xa"; echo "\12{$h}\x54\x65\153\x61\156\x20\x45\156\x74\x65\162\40\165\156\x74\x75\x6b\40\155\145\x6c\x61\x6e\x6a\x75\x74\x6b\x61\156\x2e\56\56{$p}"; fgets(STDIN); break; case "\x36": return; default: echo "{$m}\120\151\x6c\x69\150\x61\x6e\40\x74\x69\144\x61\153\x20\x76\x61\x6c\x69\144\x2e\x20\123\151\154\x61\153\x61\x6e\x20\x63\157\x62\x61\40\154\141\147\151\x2e{$p}\12"; echo "\12{$h}\x54\145\153\141\x6e\x20\105\156\164\x65\x72\x20\165\156\164\x75\153\x20\155\145\154\x61\156\x6a\x75\x74\153\141\156\56\x2e\56{$p}"; fgets(STDIN); break; } } } goto kESbD; wFcWo: function detectChoiceType($questionNode, $xpath) { $checkboxes = $xpath->query("\x2e\57\57\x69\156\x70\x75\164\x5b\x40\164\x79\x70\x65\75\x27\x63\150\x65\143\x6b\x62\x6f\170\47\x5d", $questionNode); $radios = $xpath->query("\x2e\x2f\x2f\151\x6e\160\x75\164\x5b\100\x74\x79\x70\x65\75\x27\x72\x61\x64\x69\157\47\135", $questionNode); if ($radios->length > 0) { return "\x73\151\x6e\147\x6c\145"; } if ($checkboxes->length > 1) { foreach ($checkboxes as $checkbox) { $name = $checkbox->getAttribute("\156\x61\155\x65"); if (preg_match("\57\161\x5c\144\53\x3a\x5c\x64\x2b\137\x63\150\x6f\151\x63\145\x5c\x64\53\57", $name)) { return "\x6d\x75\154\x74\151\160\154\x65"; } } $names = array(); foreach ($checkboxes as $checkbox) { $name = $checkbox->getAttribute("\x6e\141\x6d\x65"); $names[$name] = true; } if (count($names) > 1) { return "\x6d\165\x6c\x74\151\160\154\x65"; } } return "\x73\151\x6e\x67\x6c\x65"; } goto fooEl; MCp5N: function mainMenu() { global $m, $h, $p, $k, $bta, $ab, $bg, $u; $downloadDir = "\56\x2f\144\x6f\167\156\x6c\x6f\x61\x64"; $cookieFile = "\103\157\157\153\151\145"; $userAgentFile = "\x75\163\145\x72\55\141\147\145\x6e\164"; $geminiApiKeyFile = "\107\x45\x4d\x49\116\x49\137\141\160\151\x2e\x74\x78\164"; system("\x63\154\145\x61\x72"); echo "\12{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\xa"; echo "{$h}\40\x20\x20\x20\x20\40\40\40\x20\x20\40\40\x20\40\x45\55\x4c\x45\x41\122\x4e\x49\116\x47\40\121\x55\105\123\124\111\117\x4e\40\123\x43\x52\101\x50\x45\x52{$p}\xa"; echo "{$k}\40\40\40\40\x20\x20\105\156\150\x61\156\143\x65\x64\x20\x56\x65\x72\x73\x69\157\156\40\144\x65\156\x67\x61\x6e\x20\105\x6b\163\164\162\x61\153\x73\151\40\101\x6b\x75\x72\x61\x74\x20{$m}\x38\65\45{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\xa\12"; $username = getUsernameFromFile($downloadDir); if ($username == "\107\165\145\163\164" && file_exists($cookieFile) && file_exists($userAgentFile)) { $newUsername = checkAndLoadUsername(true); if ($newUsername) { $username = $newUsername; if (strlen($username) > 30) { $username = substr($username, 0, 27) . "\56\56\x2e"; } } } $cookieSize = file_exists($cookieFile) ? filesize($cookieFile) : 0; $cookieStatus = file_exists($cookieFile) ? "\124\x65\x72\163\145\x64\151\141\40\50{$cookieSize}\x20\x62\x79\164\x65\163\x29" : "\124\x69\144\x61\153\x20\x74\145\x72\163\x65\144\151\141"; $userAgentSize = file_exists($userAgentFile) ? filesize($userAgentFile) : 0; $userAgentStatus = file_exists($userAgentFile) ? "\124\145\162\163\x65\144\151\141\x20\50{$userAgentSize}\40\x62\x79\164\145\x73\x29" : "\124\x69\144\x61\x6b\x20\164\x65\162\163\x65\x64\151\141"; $apiKeyStatus = file_exists($geminiApiKeyFile) ? "\x54\145\x72\x73\145\x64\x69\x61" : "\x54\151\144\x61\x6b\40\x74\x65\162\163\x65\144\x69\141"; $fileCount = 0; if (file_exists($downloadDir)) { $files = scandir($downloadDir); $fileCount = count($files) - 2; $fileCount = max(0, $fileCount); } $downloadStatus = file_exists($downloadDir) ? "\x54\x65\x72\163\x65\144\x69\x61\40\x28{$fileCount}\x20\146\151\x6c\145\x29" : "\x54\151\144\x61\153\x20\x74\145\162\x73\145\144\x69\x61"; $jawabanCount = file_exists($downloadDir) ? count(glob($downloadDir . "\x2f\112\101\127\x41\x42\101\x4e\137\x2a\56\x74\x78\164")) : 0; echo "{$h}\111\x4e\x46\117\122\115\101\x53\111\40\123\x49\x53\124\x45\115\72{$p}\xa"; echo "{$ab}" . str_repeat("\55", 40) . "{$p}\12"; if ($username != "\x47\x75\145\163\x74") { echo "{$k}\xf0\x9f\x91\244\x20\x50\145\x6e\147\147\x75\x6e\x61\40\x20\40\40\x3a\x20{$h}{$username}{$p}\12"; } else { echo "{$k}\xf0\237\x91\244\40\120\145\x6e\x67\x67\x75\156\x61\x20\40\40\x20\x3a\x20{$m}\x42\145\154\x75\155\40\x6c\157\x67\151\156{$p}\xa"; } echo "{$k}\360\x9f\215\xaa\x20\x43\157\157\x6b\x69\x65\40\x20\x20\40\x20\40\x3a\40{$p}" . ($cookieSize > 0 ? "{$h}{$cookieStatus}{$p}" : "{$m}{$cookieStatus}{$p}") . "\xa"; echo "{$k}\xf0\237\x93\261\40\125\163\145\x72\x2d\x41\x67\x65\x6e\164\40\40\x3a\40{$p}" . (file_exists($userAgentFile) ? "{$h}{$userAgentStatus}{$p}" : "{$m}{$userAgentStatus}{$p}") . "\12"; echo "{$k}\xf0\237\x94\221\40\107\105\x4d\111\x4e\111\x20\x41\120\111\x20\72\x20{$p}" . (file_exists($geminiApiKeyFile) ? "{$h}{$apiKeyStatus}{$p}" : "{$m}{$apiKeyStatus}{$p}") . "\12"; echo "{$k}\xf0\x9f\x93\x81\40\106\157\154\x64\x65\162\x20\104\141\164\141\x20\x3a\x20{$p}" . ($fileCount > 0 ? "{$h}{$downloadStatus}{$p}" : "{$m}{$downloadStatus}{$p}") . "\12"; if ($jawabanCount > 0) { echo "{$k}\360\237\x93\x9d\x20\x4a\x61\x77\x61\142\141\156\x20\x20\40\40\x20\72\40{$h}\124\145\x72\163\x65\144\x69\141\x20\x28{$jawabanCount}\40\x66\x69\154\145\51{$p}\xa"; } echo "{$ab}" . str_repeat("\55", 40) . "{$p}\12\12"; while (true) { $menuPadding = str_repeat("\40", 22); echo "{$menuPadding}{$k}\343\200\230\40\115\105\116\125\40\125\124\x41\115\x41\x20\xe3\x80\231{$p}\xa\xa"; echo "{$h}\133\60\x5d{$p}\40\x4c\157\147\x69\x6e\xa"; echo "{$h}\x5b\61\x5d{$p}\x20\115\165\x6c\x61\x69\x20\x53\143\162\141\x70\x69\156\x67\x20\46\x20\x45\x6b\163\x74\162\141\x6b\x73\151\12"; echo "{$h}\133\x32\135{$p}\40\x4b\145\154\157\x6c\141\x20\x41\x50\x49\40\x4b\x65\171\40\x47\x45\x4d\x49\116\111\xa"; echo "{$h}\133\x33\x5d{$p}\x20\x4c\151\150\141\164\x20\112\141\167\141\x62\x61\x6e\40\x47\x45\x4d\111\116\x49\12"; echo "{$h}\x5b\64\135{$p}\40\110\141\x70\x75\163\x20\106\x69\x6c\x65\40\103\x6f\x6f\x6b\x69\x65\xa"; echo "{$h}\133\65\135{$p}\40\110\141\x70\165\163\40\x53\x65\155\165\x61\x20\x44\141\x74\141\xa"; echo "{$h}\133\x36\x5d{$p}\x20\122\x65\x66\162\145\x73\150\40\x4c\157\x67\x69\x6e\40\x53\x74\x61\x74\165\x73\xa\12"; echo "{$k}\133\67\135{$p}\40\110\145\x6c\x70\40\57\40\120\145\x74\x75\156\152\165\153\x20\120\x65\156\147\x67\x75\156\141\141\x6e\12"; echo "{$k}\133\x38\135{$p}\x20\x43\x61\162\141\x20\104\x61\x70\x61\164\153\141\156\x20\101\164\164\145\x6d\160\164\x20\111\104\40\x26\x20\x43\115\x49\104\12\12"; echo "{$m}\x5b\71\x5d{$p}\40\x4b\x65\x6c\x75\141\162\xa\12"; echo "{$k}\120\151\x6c\151\x68\141\156\x3a\40{$p}"; $choice = trim(fgets(STDIN)); switch ($choice) { case "\60": getSimpleCookie(); sleep(1); mainMenu(); break; case "\61": runScrapingProcess(); sleep(1); mainMenu(); break; case "\x32": manageGeminiApiKey(); sleep(1); mainMenu(); break; case "\x33": displayGeminiAnswers($downloadDir); sleep(1); mainMenu(); break; case "\x34": clearCookies(); sleep(1); mainMenu(); break; case "\65": clearDownloadDirectory($downloadDir); sleep(1); mainMenu(); break; case "\x36": initializeProgram(); sleep(1); mainMenu(); break; case "\x37": help(); sleep(1); mainMenu(); break; case "\70": showAttemptGuide(); sleep(1); mainMenu(); break; case "\x39": echo "\12{$h}\124\x65\162\x69\155\141\x20\153\141\x73\151\150\x2c\x20{$username}\41{$p}\xa"; echo "{$h}\123\x61\x6d\160\141\x69\x20\x6a\x75\155\x70\141\41{$p}\xa"; sleep(1); die(0); default: echo "\12{$m}\xe2\234\227\x20\120\151\154\151\x68\x61\x6e\40\x74\x69\144\141\x6b\x20\x76\141\x6c\x69\x64{$p}\xa"; sleep(1); break; } system("\143\x6c\x65\141\162"); echo "\xa{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; echo "{$h}\x20\40\x20\40\x20\40\x20\x20\40\x20\40\x20\x20\40\105\x2d\x4c\x45\x41\x52\x4e\x49\x4e\107\x20\x51\125\x45\x53\124\x49\x4f\116\x20\x53\103\x52\x41\x50\105\x52{$p}\xa"; echo "{$k}\40\x20\40\40\x20\40\x20\40\105\156\150\141\156\x63\x65\144\40\126\145\162\163\x69\157\x6e\x20\144\145\x6e\147\141\156\x20\x45\x6b\163\164\162\141\153\163\x69\40\x41\153\165\162\141\x74{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\12\xa"; $username = getUsernameFromFile($downloadDir); $cookieSize = file_exists($cookieFile) ? filesize($cookieFile) : 0; $cookieStatus = file_exists($cookieFile) ? "\124\145\x72\163\x65\144\151\x61\40\x28{$cookieSize}\40\142\x79\x74\145\x73\51" : "\x54\151\x64\141\x6b\x20\164\145\x72\163\x65\x64\151\x61"; $userAgentSize = file_exists($userAgentFile) ? filesize($userAgentFile) : 0; $userAgentStatus = file_exists($userAgentFile) ? "\124\x65\162\163\145\144\151\x61\40\50{$userAgentSize}\40\x62\171\x74\145\163\x29" : "\x54\x69\144\141\x6b\40\164\145\162\x73\x65\x64\151\x61"; $apiKeyStatus = file_exists($geminiApiKeyFile) ? "\124\145\x72\x73\x65\144\x69\141" : "\x54\151\144\x61\x6b\40\164\x65\162\x73\145\x64\151\x61"; $fileCount = 0; if (file_exists($downloadDir)) { $files = scandir($downloadDir); $fileCount = count($files) - 2; $fileCount = max(0, $fileCount); } $downloadStatus = file_exists($downloadDir) ? "\124\x65\162\x73\145\144\x69\x61\x20\x28{$fileCount}\40\146\x69\154\145\51" : "\x54\151\x64\141\x6b\x20\164\145\x72\163\x65\x64\x69\x61"; echo "{$h}\111\116\x46\117\122\115\101\123\x49\x20\x53\111\123\124\105\115\72{$p}\12"; echo "{$ab}" . str_repeat("\x2d", 40) . "{$p}\12"; if ($username != "\x47\165\145\163\x74") { echo "{$k}\xf0\237\x91\xa4\x20\x50\x65\156\x67\x67\x75\x6e\141\40\x20\40\40\x3a\40{$h}{$username}{$p}\12"; } else { echo "{$k}\xf0\x9f\x91\244\x20\x50\x65\x6e\147\147\x75\156\x61\40\40\x20\x20\x3a\40{$m}\x42\145\154\165\x6d\40\x6c\x6f\147\x69\x6e{$p}\xa"; } echo "{$k}\xf0\237\x8d\252\40\x43\157\x6f\x6b\x69\145\40\40\x20\40\x20\x20\x3a\x20{$p}" . ($cookieSize > 0 ? "{$h}{$cookieStatus}{$p}" : "{$m}{$cookieStatus}{$p}") . "\xa"; echo "{$k}\360\x9f\223\261\40\x55\163\x65\162\x2d\x41\147\145\x6e\x74\x20\40\x3a\40{$p}" . (file_exists($userAgentFile) ? "{$h}{$userAgentStatus}{$p}" : "{$m}{$userAgentStatus}{$p}") . "\xa"; echo "{$k}\xf0\237\x94\x91\40\107\105\115\111\116\x49\x20\x41\x50\111\40\72\40{$p}" . (file_exists($geminiApiKeyFile) ? "{$h}{$apiKeyStatus}{$p}" : "{$m}{$apiKeyStatus}{$p}") . "\xa"; echo "{$k}\xf0\x9f\223\201\40\106\157\154\x64\145\x72\40\104\x61\x74\x61\40\x3a\x20{$p}" . ($fileCount > 0 ? "{$h}{$downloadStatus}{$p}" : "{$m}{$downloadStatus}{$p}") . "\12"; $jawabanCount = file_exists($downloadDir) ? count(glob($downloadDir . "\57\112\x41\x57\x41\102\101\x4e\137\52\x2e\164\x78\x74")) : 0; if ($jawabanCount > 0) { echo "{$k}\xf0\237\223\235\x20\x4a\x61\x77\x61\142\x61\156\x20\x20\x20\x20\x20\72\x20{$h}\x54\x65\162\163\145\x64\x69\141\40\x28{$jawabanCount}\x20\x66\151\x6c\145\51{$p}\xa"; } echo "{$ab}" . str_repeat("\55", 40) . "{$p}\12\xa"; } } goto qy8rd; mb0h5: function sendToGeminiAPIInParts($allQuestions, $imagesDir, $apiKey, $parts = 2) { global $h, $m, $p, $k, $u, $bta; echo "\xa{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; echo "{$h}\115\105\x4e\x47\111\x52\111\x4d\40\113\105\x20\107\x45\x4d\111\x4e\x49\40\x41\x50\x49\40\123\105\x43\101\122\x41\x20\102\x45\x52\124\101\x48\x41\x50\x20\50{$parts}\40\142\141\147\151\x61\156\51{$p}\12"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\12"; $totalQuestions = 0; foreach ($allQuestions as $questions) { $totalQuestions += count($questions); } echo "{$h}\124\x6f\164\141\x6c\40\x70\x65\x72\164\141\x6e\171\x61\141\156\72\x20{$totalQuestions}{$p}\xa"; echo "{$h}\101\x6b\x61\x6e\x20\144\151\142\x61\x67\x69\x20\155\145\156\152\141\x64\151\40{$parts}\40\x62\x61\147\x69\141\x6e{$p}\xa"; $questionsParts = splitQuestionsIntoParts($allQuestions, $parts); $allAnswers = array(); $allResponses = array(); $allImagePaths = array(); if (is_dir($imagesDir)) { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($imagesDir, RecursiveDirectoryIterator::SKIP_DOTS)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower(pathinfo($file->getFilename(), PATHINFO_EXTENSION)); if (in_array($ext, array("\152\160\147", "\152\160\x65\x67", "\160\156\147", "\147\x69\x66", "\x62\x6d\160", "\x77\145\142\160"))) { $allImagePaths[] = $file->getPathname(); } } } } $otherImagesDir = dirname($imagesDir) . "\57\x69\x6d\141\x67\145\x73"; if (is_dir($otherImagesDir) && $otherImagesDir != $imagesDir) { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($otherImagesDir, RecursiveDirectoryIterator::SKIP_DOTS)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower(pathinfo($file->getFilename(), PATHINFO_EXTENSION)); if (in_array($ext, array("\152\160\147", "\152\x70\145\147", "\160\156\147", "\x67\151\x66", "\x62\x6d\x70", "\167\145\142\x70"))) { $allImagePaths[] = $file->getPathname(); } } } } echo "{$h}\xe2\x9c\223\40\115\145\x6e\145\155\x75\x6b\x61\156\40" . count($allImagePaths) . "\40\147\x61\155\142\x61\x72\x20\144\x69\x20\x73\x65\155\165\141\x20\x66\157\154\x64\145\x72{$p}\12"; $downloadDir = dirname($imagesDir); foreach ($questionsParts as $partIndex => $part) { $partNumber = $partIndex + 1; $partQuestions = $part["\x71\165\145\163\x74\x69\157\156\163"]; echo "\xa{$u}" . str_repeat("\x2d", 80) . "{$p}\xa"; echo "{$h}\102\x41\x47\x49\101\116\x20{$partNumber}\x20\x64\x61\x72\151\40{$parts}{$p}\xa"; echo "{$h}\120\x65\x72\x74\x61\156\171\x61\141\x6e\40{$part["\x73\x74\141\162\x74\137\147\154\x6f\x62\141\x6c"]}\x20\163\141\155\x70\141\x69\x20{$part["\145\156\x64\x5f\147\x6c\157\x62\141\x6c"]}{$p}\xa"; echo "{$u}" . str_repeat("\x2d", 80) . "{$p}\xa"; echo "{$k}\x4d\145\156\x63\141\x72\151\x20\147\x61\155\142\141\162\40\171\x61\x6e\147\40\x72\145\154\x65\166\141\156\40\165\156\x74\x75\x6b\x20\x62\x61\x67\151\141\x6e\x20\x69\156\x69\x2e\x2e\56{$p}\12"; $relevantImages = getImagesForQuestions($partQuestions, $allImagePaths, $downloadDir); $questionsWithImagesCount = 0; foreach ($partQuestions as $item) { $question = $item["\161\165\x65\x73\164\x69\x6f\156"]; if (!empty($question["\x69\x6d\141\147\x65\x73"])) { $questionsWithImagesCount++; } } echo "{$k}\120\x65\162\164\x61\x6e\x79\141\x61\x6e\40\144\145\x6e\x67\x61\x6e\40\x67\x61\155\x62\x61\x72\x20\144\x69\x20\x62\141\x67\x69\x61\x6e\x20\x69\x6e\151\72\40{$questionsWithImagesCount}\40\x64\x61\162\x69\40" . count($partQuestions) . "{$p}\12"; if (count($relevantImages) > 0) { echo "\xa{$k}\107\141\x6d\x62\x61\162\x20\171\141\x6e\147\x20\x61\x6b\x61\156\x20\x64\151\153\151\x72\151\155\x20\165\156\164\x75\153\40\x62\141\x67\x69\x61\x6e\40\151\x6e\x69\72{$p}\12"; foreach ($relevantImages as $index => $imagePath) { $questionId = "\x3f"; $questionNum = "\x3f"; $altText = ''; $filename = basename($imagePath); if (preg_match("\x2f\161\50\134\144\x2b\51\137\57", $filename, $matches)) { $questionId = $matches[1]; foreach ($partQuestions as $item) { if ($item["\x71\x75\x65\x73\164\151\x6f\156"]["\151\144"] == $questionId) { $questionNum = $item["\161\165\145\163\x74\x69\x6f\x6e"]["\x6e\x75\155\142\145\162"]; if (!empty($item["\161\x75\x65\x73\164\x69\x6f\156"]["\x69\x6d\x61\147\145\x73"])) { foreach ($item["\161\165\x65\x73\x74\x69\157\x6e"]["\151\x6d\141\x67\x65\163"] as $img) { if (isset($img["\154\157\143\x61\x6c\x5f\x70\141\164\x68"]) && $img["\154\x6f\x63\141\x6c\x5f\x70\x61\164\150"] == $imagePath) { $altText = $img["\x61\154\164"] ?? ''; break; } } } break; } } } $size = file_exists($imagePath) ? round(filesize($imagePath) / 1024, 2) . "\40\x4b\x42" : "\116\x2f\x41"; echo "{$h}\40\40" . ($index + 1) . "\56\40{$p}\x51{$questionNum}\x20\50\x49\x44\72{$questionId}\x29\40\342\x86\x92\x20{$filename}"; if (!empty($altText)) { echo "\40\133{$altText}\135"; } echo "\x20\50{$size}\x29{$p}\xa"; } } else { echo "{$k}\342\204\xb9\xef\xb8\217\x20\40\124\151\144\141\153\x20\x61\144\141\x20\x67\x61\x6d\x62\x61\x72\40\171\x61\x6e\147\x20\162\x65\x6c\145\166\141\156\x20\165\x6e\164\x75\x6b\40\144\151\153\x69\162\x69\x6d{$p}\xa"; } $partText = createTextForGeminiPart($part); $systemPrompt = "\123\141\x79\141\x20\141\153\141\156\x20\x6d\145\155\142\145\x72\x69\153\x61\x6e\40\144\141\146\164\141\x72\x20\x70\145\162\x74\141\x6e\171\x61\141\156\40\165\x6a\x69\141\156\x20\142\x65\163\x65\162\x74\141\x20\x70\x69\154\151\150\x61\x6e\40\x6a\141\x77\141\142\141\156\x6e\x79\x61\56\x20" . "\x42\x65\162\x69\x6b\141\156\x20\x6a\x61\167\x61\x62\141\156\40\x79\x61\x6e\147\x20\x62\x65\156\x61\x72\40\165\x6e\x74\165\x6b\x20\x73\145\x74\151\141\160\40\x70\145\162\x74\x61\156\171\x61\x61\156\40\144\145\x6e\x67\141\156\x20\146\157\162\x6d\141\x74\x20\x62\145\162\x69\x6b\x75\x74\x3a\xa\12" . "\x46\x4f\122\115\x41\124\40\x4a\x41\127\x41\x42\x41\116\x3a\xa" . "\61\56\x20\x55\x6e\164\165\153\x20\123\111\x4e\107\114\x45\40\x43\x48\117\x49\103\x45\x20\x28\150\141\156\x79\141\40\163\x61\x74\165\x20\x6a\141\x77\141\x62\x61\x6e\40\x62\145\x6e\141\162\51\72\12" . "\40\x20\x20\x5b\x6e\157\x6d\x6f\162\135\56\40\x5b\150\x75\x72\165\x66\135\x2e\133\x74\145\153\x73\x20\152\x61\x77\x61\x62\141\x6e\135\12" . "\x20\x20\x20\103\157\x6e\164\x6f\x68\x3a\40\x31\x2e\x20\x41\x2e\x69\153\141\156\12\12" . "\62\56\x20\125\x6e\x74\x75\x6b\40\x4d\x55\114\124\x49\x50\x4c\105\x20\x43\110\x4f\x49\103\x45\40\x28\x62\151\163\x61\40\154\145\x62\x69\x68\40\x64\141\x72\151\40\163\x61\164\165\x20\x6a\x61\167\x61\x62\x61\156\51\x3a\xa" . "\x20\40\40\x5b\156\157\155\157\162\x5d\56\40\133\x68\x75\162\x75\x66\x31\x5d\x2e\x5b\164\145\153\163\x20\x6a\x61\167\x61\142\141\156\x31\135\x2c\40\133\x68\165\x72\165\x66\62\135\56\133\x74\145\153\163\40\x6a\141\167\x61\142\x61\156\x32\135\54\40\56\56\56\xa" . "\x20\x20\40\x43\x6f\x6e\164\x6f\x68\72\40\x32\56\x20\101\x2e\x69\153\141\x6e\54\x20\x42\56\x64\x65\142\165\54\40\103\56\x72\x6f\x64\x61\xa\12" . "\63\56\40\x55\156\x74\x75\153\40\x44\122\117\120\104\x4f\127\x4e\x2f\x4d\101\124\x43\x48\x49\x4e\107\x20\50\x50\105\x4e\124\111\116\x47\x21\x20\x50\145\162\150\141\164\x69\x6b\x61\x6e\40\146\157\162\155\x61\x74\x20\151\156\x69\51\72\xa" . "\x20\x20\x20\x5b\156\157\x6d\x6f\162\x5d\56\40\133\x68\165\162\165\x66\x31\x5d\56\40\133\x70\145\162\164\x61\x6e\171\141\x61\156\61\135\x20\342\x86\222\x20\133\152\141\x77\141\x62\x61\156\x31\x5d\xa" . "\40\40\x20\x20\40\x20\x20\x20\x20\x5b\x68\165\x72\165\x66\x32\x5d\x2e\40\133\x70\x65\162\164\141\156\x79\141\x61\x6e\62\x5d\x20\xe2\206\x92\40\133\x6a\141\167\141\x62\141\x6e\x32\135\xa" . "\40\x20\40\x20\x20\x20\40\40\x20\133\x68\x75\x72\x75\146\x33\x5d\56\x20\133\160\145\x72\x74\141\156\171\x61\141\156\63\135\40\xe2\x86\222\40\x5b\152\141\167\141\x62\x61\156\63\135\xa" . "\x20\40\x20\103\157\x6e\164\x6f\150\72\12" . "\40\x20\40\x34\56\x20\101\56\40\160\x65\x6d\x62\x75\141\164\141\x6e\40\x6d\x69\156\165\155\x61\156\40\164\x65\x68\x20\xe2\206\222\40\106\x69\154\164\x72\x61\163\151\12" . "\40\x20\x20\40\40\40\x42\x2e\x20\164\x69\156\x74\x61\40\142\145\x72\x77\x61\162\x6e\x61\x20\342\206\222\40\113\162\157\155\141\x74\x6f\x67\162\x61\x66\151\12" . "\x20\40\40\40\x20\40\103\56\40\120\145\155\142\x75\141\x74\141\156\x20\x6d\x69\156\171\x61\153\40\x62\165\155\151\x20\xe2\206\222\x20\x44\151\x73\x74\x69\154\x61\163\x69\xa\12" . "\x34\56\x20\x55\x6e\x74\165\x6b\40\105\123\x53\101\x59\x2f\123\110\117\122\x54\x20\x41\116\123\x57\105\122\x3a\12" . "\x20\x20\40\133\156\x6f\155\157\x72\135\x2e\40\x5b\x6a\141\x77\141\142\x61\156\40\x74\x65\153\163\135\12\xa" . "\65\56\x20\112\x69\153\x61\x20\141\x64\141\40\107\x41\x4d\x42\101\122\40\144\x61\x6c\141\x6d\x20\x70\x65\x72\x74\141\x6e\x79\x61\x61\156\72\xa" . "\40\x20\40\x2d\x20\x47\x61\155\x62\141\162\x20\x61\153\141\156\40\144\x69\153\x69\162\151\155\40\142\145\x72\163\141\155\x61\x61\x6e\40\144\x65\x6e\147\x61\x6e\x20\164\145\x6b\163\xa" . "\x20\40\x20\x2d\x20\x47\x61\x6d\142\x61\162\40\142\145\x72\151\163\151\40\151\156\146\x6f\x72\155\x61\x73\x69\40\x76\151\163\x75\x61\x6c\40\171\141\x6e\147\x20\x72\x65\154\x65\166\141\x6e\x20\x64\145\x6e\x67\x61\x6e\x20\160\145\162\164\x61\x6e\x79\x61\141\x6e\12" . "\x20\40\40\x2d\x20\x47\x75\x6e\141\x6b\141\156\40\151\x6e\146\157\162\155\x61\x73\x69\x20\144\x61\162\x69\40\x67\x61\x6d\142\x61\x72\40\165\156\164\165\x6b\40\155\145\156\x6a\x61\x77\x61\x62\40\152\x69\x6b\x61\40\x64\151\x70\x65\162\154\x75\x6b\x61\x6e\12\12" . "\101\x74\165\162\x61\156\x20\x70\145\x6e\x74\151\x6e\x67\72\12" . "\55\x20\110\x61\x6e\x79\x61\40\x62\145\162\x69\x6b\x61\156\x20\x6a\141\x77\141\x62\x61\156\54\x20\x54\101\x4e\x50\x41\40\x70\x65\156\x6a\x65\154\x61\163\x61\x6e\x20\164\x61\155\142\x61\150\141\156\xa" . "\55\x20\107\x75\x6e\x61\153\141\156\40\146\157\162\155\x61\164\40\144\x69\40\141\164\x61\x73\x20\163\x65\x63\x61\162\x61\x20\x6b\157\x6e\163\x69\x73\164\145\156\12" . "\55\40\120\x61\163\164\x69\x6b\x61\156\40\163\145\164\151\141\160\x20\152\x61\167\x61\142\x61\156\40\144\151\x6d\x75\154\141\x69\40\144\x65\x6e\147\141\x6e\40\x6e\157\155\x6f\x72\40\x70\x65\x72\164\x61\156\171\x61\x61\x6e\12" . "\x2d\40\x55\156\164\x75\x6b\x20\155\x61\x74\x63\x68\x69\156\147\x2f\104\122\117\120\104\x4f\x57\116\72\40\x54\x55\x4c\111\123\40\x4e\117\115\117\122\x20\x48\101\116\x59\x41\40\120\x41\x44\101\40\102\101\x52\x49\123\40\x50\105\122\124\101\x4d\x41\xa" . "\55\40\125\x6e\x74\165\x6b\40\x6d\x61\x74\143\x68\151\156\x67\x2f\x44\122\x4f\120\x44\x4f\x57\116\72\40\142\141\162\x69\163\40\x62\145\x72\x69\x6b\165\164\156\x79\x61\x20\x67\x75\x6e\141\153\x61\x6e\40\x73\x70\141\163\x69\x2f\x74\x61\x62\40\x64\x61\x6e\x20\x68\x75\x72\165\146\x20\x73\x61\152\x61\12" . "\x2d\x20\x55\x6e\164\x75\153\40\155\141\x74\143\150\151\x6e\x67\57\104\122\x4f\120\x44\x4f\127\x4e\72\x20\x4a\x41\116\107\x41\x4e\40\165\154\141\156\147\x69\40\x6e\x6f\155\x6f\162\x20\x70\x61\144\x61\40\x73\145\164\151\x61\x70\x20\x62\141\162\x69\x73\xa\12" . "\x41\x6e\x64\141\40\141\x64\x61\x6c\141\150\40\141\x73\151\x73\164\x65\x6e\x20\x79\141\x6e\x67\x20\x61\150\154\x69\40\x64\141\x6c\x61\155\x20\x6d\x65\156\x6a\x61\167\141\x62\40\163\x6f\141\154\40\x75\x6a\x69\x61\156\56\40" . "\x41\x6e\144\141\x20\141\x6b\x61\156\40\155\x65\x6e\x65\x72\x69\x6d\141\x20\142\141\147\151\x61\x6e\40\163\x6f\141\x6c\40\x79\141\x6e\147\x20\155\x65\x72\165\x70\x61\153\x61\x6e\x20\142\x61\147\x69\x61\x6e\x20\x64\141\x72\151\40\153\x65\x73\x65\154\165\162\165\150\141\156\40\x73\x6f\x61\x6c\x2e\x20" . "\112\141\x77\x61\142\154\141\x68\x20\150\141\x6e\171\141\40\x75\x6e\x74\165\153\x20\x62\141\x67\151\141\156\x20\x69\156\x69\x2e"; $userPrompt = "\x42\145\162\x69\x6b\x75\164\x20\141\144\x61\x6c\141\150\40\142\x61\147\x69\141\x6e\x20\153\145\55{$partNumber}\40\x64\141\162\x69\x20\163\x6f\141\154\40\x75\152\x69\x61\x6e\40\50\160\x65\162\x74\x61\156\171\141\x61\156\x20{$part["\x73\164\141\162\x74\137\147\x6c\x6f\x62\141\154"]}\x20\163\x61\x6d\160\141\x69\40{$part["\x65\156\x64\137\147\154\x6f\x62\141\x6c"]}\51\x2e\x20" . "\102\x65\142\x65\162\141\160\x61\40\x70\x65\162\x74\141\156\x79\141\141\156\x20\x6d\145\x6d\x69\x6c\x69\x6b\x69\40\x47\101\115\x42\101\122\x20\162\145\x66\x65\x72\145\156\163\151\40\x79\x61\x6e\x67\40\141\x6b\x61\156\x20\x64\x69\x6b\x69\162\x69\x6d\40\142\x65\x72\163\x61\x6d\141\141\x6e\56\40" . "\x47\x61\x6d\142\141\162\x2d\147\141\x6d\142\x61\162\40\164\x65\x72\x73\x65\x62\x75\164\40\141\x64\141\x6c\141\x68\40\x62\141\x67\151\x61\156\x20\x69\156\164\145\x67\162\x61\154\x20\144\141\x72\151\x20\x70\145\x72\164\x61\x6e\x79\x61\x61\156\x2e\xa\xa" . "\124\x6f\x6c\157\x6e\x67\40\x62\145\x72\151\153\x61\156\x20\152\141\x77\x61\x62\141\156\40\165\156\164\x75\x6b\40\163\145\155\165\x61\x20\x73\x6f\x61\x6c\40\144\x61\x6c\141\x6d\40\x62\x61\147\151\x61\x6e\x20\151\x6e\151\72\xa\12" . substr($partText, 0, 1500000); $geminiUrl = "\x68\x74\164\x70\163\x3a\57\x2f\147\x65\156\x65\162\x61\164\x69\166\x65\154\x61\156\x67\x75\x61\147\x65\x2e\x67\157\x6f\147\x6c\x65\141\x70\151\163\56\143\x6f\x6d\57\x76\61\x62\x65\164\141\x2f\155\x6f\x64\x65\154\163\x2f\x67\145\x6d\151\x6e\x69\x2d\62\56\65\x2d\146\154\141\163\150\x3a\x67\145\156\145\162\141\164\x65\103\157\x6e\164\x65\x6e\164\x3f\153\145\171\75" . $apiKey; $partsArray = array(); $partsArray[] = array("\164\145\x78\x74" => $systemPrompt . "\xa\xa" . $userPrompt); $imageCount = 0; echo "{$k}\115\145\156\x61\155\x62\141\150\153\x61\x6e\40\x67\x61\155\142\x61\x72\x20\153\x65\40\162\x65\161\x75\145\163\x74\x2e\x2e\56{$p}\12"; foreach ($relevantImages as $imagePath) { if ($imageCount >= 15) { echo "{$m}\x20\x20\342\x9a\240\xef\xb8\217\x20\40\102\141\164\x61\x73\x20\x6d\x61\153\x73\151\x6d\x61\154\40\61\65\x20\x67\141\155\x62\x61\162\x20\x74\145\162\x63\141\160\x61\x69{$p}\xa"; break; } if (file_exists($imagePath)) { try { $imageData = file_get_contents($imagePath); if ($imageData === false) { echo "{$m}\x20\40\xe2\x9c\x97\x20\107\141\x67\x61\154\x20\155\145\155\x62\141\143\x61\40\x66\151\154\145\72\x20" . basename($imagePath) . "{$p}\12"; continue; } $imageDataBase64 = base64_encode($imageData); $mimeType = mime_content_type($imagePath); if (!$mimeType) { $ext = strtolower(pathinfo($imagePath, PATHINFO_EXTENSION)); $mimeMap = array("\x6a\160\x67" => "\x69\x6d\x61\147\145\57\x6a\x70\145\x67", "\152\160\x65\x67" => "\151\x6d\x61\147\145\x2f\152\x70\145\147", "\x70\x6e\147" => "\x69\155\141\147\145\x2f\x70\156\147", "\147\151\146" => "\x69\155\141\147\x65\57\x67\151\146", "\x62\x6d\160" => "\151\155\141\147\145\x2f\142\x6d\160", "\167\145\142\160" => "\x69\155\x61\x67\x65\57\x77\x65\142\x70"); $mimeType = $mimeMap[$ext] ?? "\x69\x6d\141\x67\x65\57\152\160\x65\147"; } $partsArray[] = array("\x69\156\154\x69\156\145\137\x64\141\164\141" => array("\155\151\x6d\x65\137\x74\171\x70\145" => $mimeType, "\144\141\164\x61" => $imageDataBase64)); $imageCount++; $fileSize = round(strlen($imageData) / 1024, 2); $filename = basename($imagePath); $questionInfo = ''; if (preg_match("\x2f\161\x28\134\x64\x2b\51\137\x2f", $filename, $matches)) { $qId = $matches[1]; foreach ($partQuestions as $item) { if ($item["\x71\x75\145\x73\x74\x69\x6f\156"]["\151\x64"] == $qId) { $questionInfo = "\40\x28\121" . $item["\161\x75\x65\163\164\151\x6f\x6e"]["\156\165\x6d\142\x65\162"] . "\x29"; break; } } } echo "{$h}\x20\x20\342\x9c\223\40\107\141\x6d\x62\x61\x72\x20{$imageCount}\x3a\40{$filename}{$questionInfo}\x20\50{$fileSize}\40\113\x42\x29{$p}\12"; usleep(100000); } catch (Exception $e) { echo "{$m}\x20\40\342\x9c\x97\x20\x45\162\162\x6f\x72\40\x70\x61\144\141\x20\147\x61\x6d\142\141\162\40" . basename($imagePath) . "\72\40" . $e->getMessage() . "{$p}\xa"; } } else { echo "{$m}\x20\x20\342\234\227\x20\106\151\154\x65\40\x74\151\x64\x61\153\x20\144\x69\x74\x65\x6d\165\153\141\x6e\72\x20" . basename($imagePath) . "{$p}\12"; } } if ($imageCount == 0) { echo "{$k}\x20\x20\xe2\204\xb9\xef\xb8\217\x20\40\124\x69\144\x61\153\40\141\x64\x61\x20\x67\141\x6d\x62\141\162\x20\x79\x61\x6e\x67\x20\144\x69\164\x61\x6d\x62\x61\x68\x6b\141\x6e\40\165\156\164\165\153\x20\x62\141\x67\x69\x61\x6e\x20\151\x6e\x69{$p}\xa"; } else { echo "{$h}\342\x9c\223\40\x54\157\164\141\154\40\147\x61\155\142\141\162\40\144\x69\164\141\155\x62\x61\150\x6b\141\x6e\72\40{$imageCount}{$p}\12"; } echo "{$k}\x4d\145\156\x67\x69\162\x69\x6d\40\x62\141\147\x69\x61\x6e\40{$partNumber}\x20\x6b\145\40\x47\105\115\x49\116\111\x20\101\120\x49\x2e\x2e\56{$p}\xa"; $requestData = array("\x63\x6f\x6e\164\x65\x6e\x74\163" => array(array("\160\x61\x72\164\163" => $partsArray)), "\147\145\156\145\162\x61\164\x69\157\156\103\157\156\146\x69\147" => array("\164\145\155\160\x65\162\x61\164\x75\x72\145" => 0.1, "\x74\x6f\160\120" => 0.8, "\x74\x6f\160\x4b" => 40, "\x6d\141\170\x4f\165\x74\160\x75\x74\124\x6f\153\145\156\x73" => 32768)); $requestSize = strlen(json_encode($requestData)); echo "{$k}\x55\153\165\162\141\x6e\40\162\x65\x71\x75\x65\163\x74\x3a\40" . round($requestSize / 1024, 2) . "\x20\x4b\x42{$p}\xa"; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $geminiUrl); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($requestData)); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\103\x6f\x6e\164\145\156\x74\55\124\x79\x70\x65\x3a\x20\x61\x70\160\x6c\x69\143\141\x74\x69\x6f\x6e\57\152\163\x6f\x6e")); curl_setopt($ch, CURLOPT_TIMEOUT, 120); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30); $response = curl_exec($ch); $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); $curlError = curl_error($ch); curl_close($ch); if ($curlError) { echo "{$m}\xe2\x9c\x97\40\x43\x75\162\x6c\40\x45\x72\162\x6f\x72\x3a\40{$curlError}{$p}\xa"; $allResponses[] = array("\160\141\x72\164" => $partNumber, "\163\164\141\164\165\163" => "\143\165\162\x6c\x5f\145\x72\x72\x6f\162", "\x65\162\x72\157\x72" => $curlError); continue; } if ($httpCode != 200) { echo "{$m}\342\x9c\227\x20\x47\141\x67\141\154\x20\155\145\156\147\x69\162\x69\155\40\142\141\x67\151\141\156\40{$partNumber}\40\x6b\x65\x20\107\105\x4d\x49\x4e\x49\x20\101\120\111\x2e\40\x48\124\124\120\x20\x43\157\x64\145\72\40{$httpCode}{$p}\xa"; if ($response) { $errorData = json_decode($response, true); if (isset($errorData["\x65\162\162\x6f\162"]["\x6d\145\x73\x73\x61\x67\x65"])) { echo "{$m}\x50\x65\163\x61\x6e\40\145\162\162\x6f\x72\72\40" . $errorData["\145\162\162\157\x72"]["\155\145\x73\163\x61\147\145"] . "{$p}\12"; } else { echo "{$m}\x52\145\163\x70\x6f\156\163\x65\x3a\40" . substr($response, 0, 500) . "\x2e\x2e\x2e{$p}\xa"; } } $allResponses[] = array("\160\141\x72\164" => $partNumber, "\x73\x74\x61\164\x75\163" => "\145\162\162\157\162", "\x65\x72\x72\157\x72\x5f\x63\157\x64\x65" => $httpCode, "\145\x72\x72\157\162\x5f\x6d\145\x73\163\141\x67\x65" => $response ? substr($response, 0, 500) : "\116\x6f\x20\x72\145\x73\160\157\x6e\163\145"); echo "\12{$k}\x4c\141\x6e\152\165\x74\x6b\x61\156\40\x6b\145\x20\x62\141\x67\x69\141\156\x20\x62\x65\162\x69\153\x75\164\x6e\171\x61\77\x20\x28\131\57\x6e\x29\x3a\40{$p}"; $continue = trim(fgets(STDIN)); if (strtolower($continue ?: "\171") !== "\x79") { break; } continue; } $responseData = json_decode($response, true); if (isset($responseData["\143\141\x6e\144\x69\144\141\164\145\163"][0]["\x63\x6f\156\164\x65\156\164"]["\160\x61\162\164\x73"][0]["\164\145\170\164"])) { $answers = $responseData["\143\141\156\144\x69\x64\141\x74\145\x73"][0]["\x63\157\x6e\x74\145\156\164"]["\x70\141\x72\x74\163"][0]["\164\145\x78\x74"]; $answers = normalizeAnswerFormat($answers); echo "{$h}\xe2\x9c\x93\40\102\145\162\150\141\163\151\x6c\40\155\145\x6e\144\141\x70\x61\164\153\141\x6e\40\152\141\x77\141\x62\x61\x6e\40\x75\x6e\164\165\153\40\x62\x61\147\x69\x61\x6e\x20{$partNumber}\41{$p}\12"; $allAnswers[$partNumber] = $answers; $allResponses[] = array("\160\141\162\164" => $partNumber, "\x73\x74\x61\x74\165\163" => "\163\165\x63\x63\x65\163\163", "\x61\x6e\163\x77\x65\162\x73\137\x63\157\165\x6e\x74" => count(explode("\12", trim($answers))), "\x69\155\141\x67\x65\163\x5f\163\x65\156\164" => $imageCount); $partAnswersPath = $downloadDir . "\x2f\112\101\127\x41\x42\101\x4e\x5f\x42\101\x47\111\x41\x4e\x5f{$partNumber}\x5f" . date("\x59\155\144\x5f\110\x69\x73") . "\x2e\x74\x78\164"; $partAnswersContent = "\112\x41\x57\x41\102\x41\116\40\x47\x45\115\x49\x4e\x49\40\x41\120\111\x20\55\x20\x42\101\107\111\x41\116\x20{$partNumber}\12"; $partAnswersContent .= "\x3d\x3d\x3d\x3d\75\x3d\x3d\x3d\x3d\75\75\75\75\75\75\x3d\75\75\x3d\x3d\75\x3d\x3d\x3d\75\75\x3d\x3d\75\75\x3d\x3d\x3d\x3d\x3d\75\75\xa\12"; $partAnswersContent .= "\120\145\x72\x74\x61\x6e\171\x61\x61\x6e\72\x20{$part["\x73\x74\x61\162\x74\x5f\147\x6c\x6f\142\141\x6c"]}\40\x73\141\x6d\x70\141\151\x20{$part["\x65\156\x64\x5f\x67\154\x6f\x62\x61\x6c"]}\xa"; $partAnswersContent .= "\124\141\x6e\x67\147\x61\x6c\72\40" . date("\x59\x2d\x6d\x2d\144\40\110\x3a\x69\72\163") . "\12"; $partAnswersContent .= "\x47\141\x6d\x62\x61\x72\40\x64\151\153\x69\x72\151\155\x3a\x20" . $imageCount . "\12"; $partAnswersContent .= "\x47\x61\x6d\142\141\162\x20\x79\141\x6e\147\40\x64\151\x6b\151\x72\x69\155\x3a\xa"; foreach ($relevantImages as $imgPath) { if (file_exists($imgPath)) { $partAnswersContent .= "\x2d\x20" . basename($imgPath) . "\12"; } } $partAnswersContent .= "\12" . str_repeat("\xe2\225\x90", 60) . "\xa\12"; $partAnswersContent .= $answers; file_put_contents($partAnswersPath, $partAnswersContent); echo "{$h}\xe2\234\x93\x20\x4a\x61\167\x61\x62\x61\x6e\40\x62\x61\147\151\x61\156\40{$partNumber}\40\x64\151\163\151\x6d\160\x61\x6e\40\x6b\x65\x3a\x20" . basename($partAnswersPath) . "{$p}\12"; echo "\xa{$bta}\x50\162\145\x76\151\145\167\40\x4a\141\x77\141\142\141\156\40\x42\x61\147\x69\141\156\40{$partNumber}\72{$p}\xa"; echo "{$u}" . str_repeat("\x2d", 60) . "{$p}\xa"; $lines = explode("\12", $answers); $previewCount = 0; foreach ($lines as $line) { if (trim($line) && !preg_match("\x2f\x5e\x5b\x3d\x5f\55\135\x2f", trim($line))) { echo "{$p}" . $line . "{$p}\xa"; $previewCount++; if ($previewCount >= 5) { echo "{$ab}\x2e\56\x2e\x20\50\154\141\x6e\x6a\x75\164\153\141\156\x20\144\151\x20\146\x69\x6c\145\40\154\145\x6e\147\153\x61\160\51{$p}\12"; break; } } } if ($partNumber < count($questionsParts)) { echo "\xa{$k}\x4c\141\x6e\x6a\x75\164\x6b\x61\x6e\x20\x6b\145\40\x62\141\x67\151\141\156\x20\142\145\x72\151\x6b\165\164\156\x79\x61\77\x20\x28\131\57\x6e\x29\x3a\x20{$p}"; $continue = trim(fgets(STDIN)); if (strtolower($continue ?: "\171") !== "\171") { break; } echo "{$k}\x4d\145\x6e\165\x6e\147\147\x75\40\65\x20\x64\145\x74\x69\153\40\x73\x65\142\x65\154\x75\155\x20\x6d\145\x6c\x61\x6e\x6a\x75\164\x6b\x61\x6e\x2e\56\x2e{$p}\12"; sleep(5); } } else { echo "{$m}\xe2\x9c\x97\x20\x54\x69\x64\141\153\x20\155\145\156\144\x61\x70\x61\x74\x6b\x61\x6e\40\152\141\x77\141\142\x61\156\x20\171\141\x6e\x67\x20\x76\x61\154\x69\144\x20\165\156\x74\x75\153\x20\x62\141\x67\151\x61\156\40{$partNumber}{$p}\12"; echo "{$k}\122\x65\163\x70\x6f\156\163\145\40\x73\x74\x72\165\143\x74\165\162\x65\x3a{$p}\xa"; echo json_encode($responseData, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE); $allResponses[] = array("\x70\x61\162\x74" => $partNumber, "\x73\x74\141\x74\x75\163" => "\156\x6f\x5f\x76\141\x6c\151\x64\x5f\x61\x6e\x73\167\145\x72", "\x72\145\x73\160\157\x6e\x73\145" => substr(json_encode($responseData), 0, 500)); if ($partNumber < count($questionsParts)) { echo "\xa{$k}\x4c\141\156\x6a\x75\164\153\141\156\40\x6b\x65\40\x62\141\x67\151\x61\x6e\x20\x62\145\x72\151\153\x75\x74\156\171\141\x3f\x20\x28\x59\57\156\x29\72\40{$p}"; $continue = trim(fgets(STDIN)); if (strtolower($continue ?: "\x79") !== "\171") { break; } } } } if (!empty($allAnswers)) { $combinedAnswers = "\x4a\x41\x57\101\102\x41\116\x20\x47\105\x4d\x49\x4e\x49\x20\101\120\111\x20\55\x20\x53\x45\115\x55\x41\x20\x42\101\x47\111\x41\116\xa"; $combinedAnswers .= "\75\x3d\x3d\x3d\75\75\x3d\75\x3d\75\75\x3d\x3d\75\75\x3d\75\75\75\x3d\x3d\75\75\x3d\75\75\x3d\75\75\75\75\x3d\12\xa"; $combinedAnswers .= "\x54\x6f\164\x61\x6c\x20\x42\x61\x67\x69\x61\156\x3a\x20" . count($allAnswers) . "\12"; $combinedAnswers .= "\124\157\x74\x61\154\40\120\145\x72\x74\141\x6e\x79\x61\x61\x6e\72\40{$totalQuestions}\12"; $combinedAnswers .= "\124\141\x6e\x67\147\x61\154\x3a\40" . date("\131\55\x6d\x2d\144\40\110\x3a\151\x3a\x73") . "\xa\xa"; $combinedAnswers .= "\x53\124\x41\x54\111\123\124\111\x4b\40\x50\x45\116\107\111\x52\111\115\101\x4e\x3a\xa"; $combinedAnswers .= str_repeat("\x2d", 40) . "\12"; foreach ($allResponses as $resp) { $status = $resp["\x73\164\x61\164\165\x73"] == "\x73\x75\143\x63\x65\163\163" ? "\342\234\x93\x20\x42\105\122\x48\x41\x53\111\114" : "\342\234\x97\x20\107\x41\107\101\114"; $images = isset($resp["\151\x6d\141\x67\145\x73\x5f\163\145\156\164"]) ? "\x20\50{$resp["\x69\x6d\x61\147\145\x73\137\x73\145\156\164"]}\x20\x67\x61\x6d\142\x61\x72\x29" : ''; $combinedAnswers .= "\x42\141\147\151\141\156\x20{$resp["\160\141\162\164"]}\x3a\x20{$status}{$images}\12"; } $combinedAnswers .= "\12" . str_repeat("\342\x95\x90", 60) . "\12\12"; ksort($allAnswers); foreach ($allAnswers as $partNumber => $answers) { $combinedAnswers .= "\xa" . str_repeat("\xe2\x95\220", 60) . "\xa"; $combinedAnswers .= "\102\x41\x47\x49\x41\x4e\x20{$partNumber}\xa"; $combinedAnswers .= str_repeat("\xe2\x95\x90", 60) . "\xa\xa"; $combinedAnswers .= $answers . "\12"; } $combinedAnswersPath = $downloadDir . "\x2f\x4a\101\x57\x41\102\101\x4e\137\107\x45\x4d\x49\x4e\111\137\x4c\105\116\x47\113\x41\x50\137" . date("\x59\x6d\144\x5f\x48\151\163") . "\56\x74\170\x74"; file_put_contents($combinedAnswersPath, $combinedAnswers); echo "\12{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\12"; echo "{$h}\x50\105\116\107\x49\122\111\115\x41\116\x20\123\105\x4c\x45\123\101\111\x21{$p}\12"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\12"; echo "{$h}\342\x9c\x93\x20\124\157\x74\x61\x6c\40\x62\141\147\151\141\156\40\x62\x65\162\x68\x61\x73\151\154\x3a\x20" . count($allAnswers) . "\40\144\141\162\x69\x20" . count($questionsParts) . "{$p}\12"; echo "{$h}\xe2\234\x93\40\x4a\x61\x77\141\142\x61\x6e\x20\154\x65\156\x67\x6b\141\160\40\x64\x69\163\151\155\x70\x61\156\x20\x6b\x65\x3a\x20{$combinedAnswersPath}{$p}\12"; echo "\12{$k}\x53\x54\101\124\111\x53\124\x49\x4b\x20\x50\105\116\107\x49\x52\x49\115\101\x4e\72{$p}\12"; $successCount = 0; $totalImages = 0; foreach ($allResponses as $response) { $statusColor = $response["\163\x74\x61\164\165\163"] === "\x73\x75\143\143\145\x73\x73" ? "{$h}" : "{$m}"; echo "{$statusColor}\x42\x61\x67\x69\x61\156\40{$response["\160\141\x72\164"]}\72\40{$response["\x73\164\x61\164\x75\x73"]}{$p}\xa"; if ($response["\163\164\x61\x74\165\x73"] === "\163\x75\143\143\145\x73\163") { $successCount++; $totalImages += $response["\151\155\x61\147\145\x73\137\x73\x65\156\164"] ?? 0; echo "\x20\x20\55\40\112\141\167\141\142\x61\156\72\40{$response["\x61\156\x73\x77\145\162\163\137\143\157\x75\x6e\164"]}\x20\x62\141\162\x69\x73\xa"; echo "\x20\x20\55\40\x47\x61\155\142\x61\162\72\40{$response["\151\155\141\147\145\x73\137\163\x65\156\x74"]}\40\147\141\155\142\x61\162\xa"; } else { echo "\x20\x20\x2d\x20\x45\x72\x72\x6f\x72\72\x20" . ($response["\145\162\x72\x6f\x72\137\155\x65\x73\x73\x61\x67\x65"] ?? "\125\x6e\x6b\x6e\157\x77\x6e\x20\x65\x72\x72\157\x72") . "\xa"; } } echo "\xa{$h}\122\x49\x4e\x47\113\x41\123\x41\x4e\72{$p}\12"; echo "{$k}\102\x61\147\x69\141\x6e\40\142\x65\162\x68\x61\x73\151\154\x3a\40{$successCount}\57{$p}" . count($questionsParts) . "\xa"; echo "{$k}\x54\x6f\x74\141\154\40\x67\x61\x6d\142\141\162\x20\144\x69\x6b\151\162\x69\155\x3a\40{$totalImages}{$p}\12"; return array("\x73\165\x63\x63\145\x73\x73" => true, "\x74\x6f\x74\x61\154\x5f\160\x61\162\164\163" => count($questionsParts), "\x73\165\x63\143\x65\x73\x73\146\x75\x6c\x5f\x70\x61\162\x74\x73" => count($allAnswers), "\x63\157\x6d\142\151\156\145\x64\137\x66\x69\x6c\145" => $combinedAnswersPath, "\x70\x61\x72\164\x5f\146\x69\x6c\x65\x73" => $allAnswers, "\162\x65\163\x70\x6f\x6e\x73\145\163" => $allResponses, "\x74\x6f\x74\x61\x6c\x5f\x69\155\x61\x67\145\163\137\163\145\156\x74" => $totalImages); } else { echo "{$m}\xe2\x9c\x97\40\124\x69\x64\x61\x6b\x20\141\144\141\40\152\141\167\x61\142\x61\x6e\40\171\141\x6e\147\40\x62\x65\162\150\x61\x73\151\x6c\x20\x64\x69\144\141\160\x61\x74\153\141\x6e{$p}\12"; return array("\163\x75\x63\x63\x65\163\x73" => false, "\145\162\162\x6f\162" => "\x4e\x6f\x20\x61\x6e\x73\167\145\162\163\x20\x72\145\x63\145\x69\x76\145\x64", "\162\145\x73\160\157\x6e\x73\x65\x73" => $allResponses); } } goto KSlfI; kESbD: function displayGeminiAnswers($downloadDir) { global $m, $h, $p, $k, $bta, $ab; system("\143\154\x65\x61\162"); echo "\12{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; echo "{$h}\112\x41\127\x41\x42\101\x4e\40\107\x45\x4d\111\x4e\x49\40\101\x50\x49\40\131\101\116\107\40\x54\x45\x52\x53\x49\115\x50\101\x4e{$p}\12"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; $geminiFiles = glob($downloadDir . "\57\x4a\x41\x57\x41\102\x41\116\x5f\x2a\x2e\164\170\164"); $comparisonFiles = glob($downloadDir . "\x2f\120\105\122\102\101\116\x44\111\x4e\x47\x41\116\x5f\52\56\x74\x78\164"); if (empty($geminiFiles) && empty($comparisonFiles)) { echo "{$m}\x54\151\x64\141\153\40\141\144\141\x20\x66\151\154\x65\x20\152\x61\x77\141\142\141\156\x20\x47\x45\x4d\111\x4e\x49\x20\171\x61\x6e\147\40\x64\x69\x74\x65\155\x75\153\x61\x6e\x2e{$p}\12"; echo "{$k}\104\151\162\145\x6b\164\x6f\162\x69\72\x20{$downloadDir}{$p}\xa"; echo "\xa{$h}\x54\x65\x6b\x61\x6e\40\x45\156\164\x65\162\40\x75\x6e\164\165\153\40\153\145\x6d\142\x61\x6c\x69\56\56\56{$p}"; fgets(STDIN); return; } if (!empty($geminiFiles)) { echo "\12{$k}\106\x69\154\145\x20\x4a\141\x77\141\142\141\x6e\x20\x47\x45\115\111\x4e\111\72{$p}\xa"; foreach ($geminiFiles as $index => $file) { $filename = basename($file); $filesize = filesize($file); $sizeFormatted = round($filesize / 1024, 2) . "\x20\x4b\x42"; $fileDate = date("\131\55\155\x2d\144\x20\110\x3a\x69\x3a\163", filemtime($file)); echo "{$h}\x20\40" . ($index + 1) . "\56\40{$p}{$filename}\xa"; echo "{$ab}\x20\40\40\x20\x20\125\153\x75\162\141\x6e\x3a\x20{$sizeFormatted}\x20\174\40\104\151\142\x75\141\x74\x3a\40{$fileDate}{$p}\12"; } } if (!empty($comparisonFiles)) { echo "\12{$k}\106\x69\154\x65\40\x50\x65\x72\142\141\156\x64\151\156\x67\141\x6e\40\112\141\x77\141\142\141\156\72{$p}\12"; foreach ($comparisonFiles as $index => $file) { $filename = basename($file); $filesize = filesize($file); $sizeFormatted = round($filesize / 1024, 2) . "\40\113\x42"; $fileDate = date("\x59\x2d\155\x2d\144\x20\110\x3a\x69\x3a\x73", filemtime($file)); echo "{$h}\40\40" . ($index + 1 + count($geminiFiles)) . "\x2e\40{$p}{$filename}\xa"; echo "{$ab}\x20\x20\x20\x20\x20\x55\153\165\162\141\156\72\40{$sizeFormatted}\40\x7c\40\x44\x69\x62\x75\x61\164\72\x20{$fileDate}{$p}\xa"; } } $allFiles = array_merge($geminiFiles, $comparisonFiles); echo "\xa{$k}\120\x69\154\151\150\x20\146\151\x6c\145\x20\x75\x6e\164\x75\x6b\40\x64\x69\154\151\150\141\164\40\50\60\40\x75\156\x74\x75\x6b\x20\153\145\155\x62\x61\x6c\151\x29\x3a\x20{$p}"; $choice = trim(fgets(STDIN)); if ($choice == "\x30") { return; } $fileIndex = intval($choice) - 1; if ($fileIndex >= 0 && $fileIndex < count($allFiles)) { $selectedFile = $allFiles[$fileIndex]; viewGeminiAnswerFile($selectedFile); } else { echo "{$m}\120\x69\x6c\151\x68\141\156\x20\164\x69\x64\x61\x6b\40\x76\141\154\151\144\56{$p}\xa"; echo "\xa{$h}\124\x65\x6b\x61\156\x20\x45\x6e\x74\x65\162\40\x75\x6e\x74\165\x6b\40\153\145\155\142\x61\154\151\56\56\56{$p}"; fgets(STDIN); } } goto yjeWS; p_2Po: function createImagesReport($allDownloadedImages, $downloadDir) { global $h, $p; $reportDir = $downloadDir . "\x2f\x72\x65\160\157\162\164\x73"; if (!file_exists($reportDir)) { mkdir($reportDir, 511, true); } $reportPath = $reportDir . "\x2f\151\155\141\x67\145\163\x5f\x72\x65\160\157\162\164\137" . date("\131\x6d\144\x5f\110\151\x73") . "\x2e\164\170\164"; $reportContent = "\114\101\120\117\x52\x41\x4e\x20\123\x45\115\125\101\x20\x47\x41\115\x42\101\122\40\x59\101\116\x47\x20\104\x49\55\104\117\x57\x4e\x4c\117\x41\104\12"; $reportContent .= "\75\75\75\x3d\75\75\x3d\x3d\75\75\x3d\x3d\x3d\75\x3d\x3d\x3d\x3d\75\x3d\x3d\75\75\x3d\75\x3d\75\x3d\x3d\x3d\75\x3d\75\x3d\75\x3d\12\xa"; $reportContent .= "\124\141\x6e\147\x67\x61\154\x3a\40" . date("\131\55\155\x2d\x64\x20\110\72\151\72\x73") . "\xa"; $reportContent .= "\124\x6f\x74\141\x6c\40\x67\x61\x6d\142\x61\x72\x3a\x20" . count($allDownloadedImages) . "\xa\xa"; $questionsWithImages = array(); $successCount = 0; $failCount = 0; $totalSize = 0; foreach ($allDownloadedImages as $image) { if (isset($image["\144\157\167\x6e\x6c\157\x61\144\x65\x64"]) && $image["\x64\157\x77\156\x6c\157\x61\144\145\x64"]) { $successCount++; $totalSize += $image["\x73\151\172\145"] ?? 0; $questionNum = $image["\161\x75\145\163\164\x69\x6f\156\x5f\x6e\165\x6d\x62\145\162"] ?? "\x3f"; if (!isset($questionsWithImages[$questionNum])) { $questionsWithImages[$questionNum] = 0; } $questionsWithImages[$questionNum]++; } else { $failCount++; } } $reportContent .= "\123\x54\x41\x54\111\x53\124\111\113\72\12"; $reportContent .= "\x2d\x2d\55\55\55\x2d\x2d\x2d\55\x2d\12"; $reportContent .= "\107\x61\155\142\x61\x72\x20\x62\145\162\150\x61\x73\x69\154\x20\x64\151\144\157\x77\x6e\154\157\141\x64\x3a\x20{$successCount}\12"; $reportContent .= "\107\141\x6d\142\x61\x72\x20\x67\141\147\x61\154\x20\x64\151\x64\x6f\167\156\154\157\141\144\x3a\x20{$failCount}\12"; $reportContent .= "\124\157\164\141\154\x20\x75\x6b\x75\x72\x61\156\72\x20" . round($totalSize / 1024 / 1024, 2) . "\40\115\x42\12"; $reportContent .= "\x50\145\162\x74\x61\156\171\141\141\x6e\x20\144\145\x6e\x67\x61\x6e\x20\147\141\155\142\x61\162\x3a\x20" . count($questionsWithImages) . "\xa\12"; $reportContent .= "\104\x45\x54\x41\111\114\40\120\x45\122\40\x50\x45\x52\x54\101\x4e\x59\101\x41\x4e\72\12"; $reportContent .= "\x2d\x2d\55\x2d\55\x2d\x2d\x2d\x2d\x2d\x2d\x2d\x2d\x2d\x2d\55\55\x2d\x2d\x2d\55\55\12"; foreach ($questionsWithImages as $questionNum => $imageCount) { $reportContent .= "\120\145\162\x74\141\x6e\x79\141\x61\156\x20\x23{$questionNum}\x3a\40{$imageCount}\x20\147\x61\155\142\141\162\xa"; } $reportContent .= "\xa\12\x44\x45\x54\x41\x49\x4c\x20\123\x45\124\x49\x41\120\40\107\101\x4d\x42\x41\x52\72\xa"; $reportContent .= "\x2d\x2d\55\x2d\x2d\55\x2d\x2d\x2d\55\55\55\55\55\x2d\55\x2d\55\55\55\55\12"; foreach ($allDownloadedImages as $index => $image) { $num = $index + 1; $status = isset($image["\144\157\x77\156\154\157\141\x64\145\144"]) && $image["\x64\157\x77\156\154\157\141\x64\145\x64"] ? "\xe2\234\223\x20\102\105\122\x48\x41\x53\111\x4c" : "\342\234\x97\x20\107\x41\x47\101\x4c"; $reportContent .= "\12{$num}\56\40{$image["\146\151\x6c\145\x6e\x61\155\x65"]}\xa"; $reportContent .= "\x20\x20\x20\123\164\x61\164\x75\163\x3a\40{$status}\xa"; $reportContent .= "\40\40\x20\x50\x65\162\164\x61\x6e\171\141\x61\x6e\72\x20\x23" . ($image["\x71\x75\x65\x73\164\x69\157\156\x5f\156\x75\155\142\145\162"] ?? "\x3f") . "\xa"; $reportContent .= "\x20\40\x20\104\145\x73\153\x72\151\160\163\x69\x3a\40" . ($image["\x61\x6c\164"] ?? "\124\x69\x64\x61\x6b\40\141\x64\x61") . "\xa"; if (isset($image["\x64\x6f\x77\156\154\x6f\141\144\145\x64"]) && $image["\144\x6f\167\x6e\x6c\157\141\144\145\x64"]) { $reportContent .= "\40\40\x20\125\153\165\162\x61\156\x3a\40" . round(($image["\163\x69\x7a\x65"] ?? 0) / 1024, 2) . "\x20\113\102\xa"; $reportContent .= "\40\x20\40\x4c\x6f\153\x61\163\151\x3a\40" . ($image["\x6c\x6f\x63\141\154\x5f\160\141\x74\x68"] ?? "\124\x69\x64\141\x6b\x20\144\151\153\x65\x74\141\x68\x75\151") . "\xa"; } } file_put_contents($reportPath, $reportContent); echo "{$h}\342\x9c\x93\x20\114\141\160\157\x72\141\x6e\40\147\x61\155\142\141\x72\40\144\x69\x73\151\155\x70\141\x6e\72\x20{$reportPath}{$p}\xa"; return $reportPath; } goto TB9TS; Z_g31: ?>