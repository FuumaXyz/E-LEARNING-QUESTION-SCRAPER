<?php
 goto qAYdC; JRpJl: function showAttemptGuide() { global $h, $p, $k; system("\143\154\x65\x61\x72"); echo "\xa{$k}\xe2\x95\220\xe2\225\220\342\225\x90\xe2\225\x90\342\x95\x90\342\225\220\xe2\x95\x90\xe2\x95\x90\342\x95\220\xe2\225\x90\342\x95\220\xe2\225\x90\xe2\x95\220\xe2\x95\x90\342\x95\x90\xe2\x95\x90\xe2\225\x90\xe2\225\x90\342\225\x90\342\x95\x90\342\225\220\342\x95\x90\xe2\x95\220\342\x95\x90\342\x95\x90\xe2\x95\x90\xe2\225\x90\xe2\225\220\342\x95\220\xe2\x95\x90\xe2\225\x90\xe2\225\x90\xe2\225\220\342\225\x90\xe2\225\220\xe2\x95\220\342\225\x90\342\x95\x90\342\225\x90\342\225\220\xe2\225\x90\xe2\225\x90\342\x95\x90\xe2\x95\x90\342\x95\220\342\225\220\342\x95\x90\342\225\x90\xe2\225\220\xe2\225\x90\342\225\x90\342\225\220\342\225\220\xe2\225\x90\342\x95\220\342\225\x90\342\225\220\xe2\225\x90\xe2\225\220\xe2\x95\220\xe2\x95\220\342\x95\220\xe2\225\x90{$p}\xa"; echo "{$h}\40\x20\x20\x20\40\x20\40\40\40\x20\40\x20\x43\x41\x52\101\x20\104\105\124\x41\x49\x4c\40\115\105\x4e\104\101\x50\x41\x54\113\x41\x4e\40\101\124\124\x45\115\120\124\40\x49\x44\40\46\x20\103\x4d\111\104\x20\40\40\40\40\x20\40\x20\40\40{$p}\12"; echo "{$k}\342\x95\220\xe2\x95\220\342\x95\220\xe2\x95\220\342\225\x90\xe2\225\x90\342\225\x90\xe2\x95\220\342\x95\220\342\225\x90\xe2\225\220\xe2\225\220\342\225\220\xe2\225\220\342\225\220\342\x95\x90\342\x95\220\xe2\225\220\342\x95\x90\342\225\x90\342\225\x90\342\x95\x90\342\x95\x90\xe2\225\x90\342\x95\x90\342\225\x90\342\x95\x90\xe2\225\220\342\225\220\xe2\x95\220\xe2\225\x90\342\x95\x90\xe2\x95\220\xe2\225\220\342\x95\220\xe2\225\220\xe2\x95\x90\342\x95\220\342\225\x90\xe2\x95\x90\342\225\x90\xe2\225\x90\xe2\x95\x90\342\225\220\xe2\225\x90\xe2\225\x90\342\x95\x90\xe2\225\x90\342\x95\x90\xe2\x95\220\xe2\x95\220\xe2\225\220\342\x95\220\342\x95\x90\xe2\x95\220\342\225\x90\xe2\225\220\342\225\x90\xe2\225\x90\xe2\225\x90\342\x95\220\342\x95\220\342\225\x90{$p}\xa"; echo "\12{$h}\360\x9f\x93\215\40\x4c\101\116\x47\x4b\x41\x48\55\x4c\101\116\x47\x4b\101\110\x3a{$p}\12"; echo "\xa{$k}\133\x31\x5d\x20{$p}\x42\165\153\141\x20\142\162\157\167\163\145\x72\40\x28\x43\x68\x72\x6f\155\145\57\106\151\162\x65\x66\157\x78\x2f\123\x61\146\141\x72\151\x29{$p}\12"; echo "{$k}\133\x32\135\40{$p}\114\x6f\147\151\x6e\x20\153\x65\72\40{$p}\x68\x74\x74\x70\163\x3a\57\x2f\145\154\145\x61\162\x6e\x69\156\x67\x2e\163\155\153\x32\55\171\153\x2e\x73\143\x68\56\151\144\x2f{$p}\12"; echo "{$k}\133\x33\135\x20{$p}\x42\x75\153\x61\40\x71\165\x69\x7a\x20\171\141\156\147\x20\x69\x6e\147\x69\156\40\144\151\55\163\143\162\x61\x70\151\156\147{$p}\12"; echo "{$k}\133\64\135\x20{$p}\113\x6c\151\153\x20\47\101\164\164\x65\x6d\x70\x74\x20\x71\x75\x69\x7a\x20\156\157\167\47\x20\x61\x74\x61\x75\x20\47\103\157\x6e\164\151\156\x75\145\40\141\x74\x74\145\x6d\x70\x74\47{$p}\xa"; echo "\12{$h}\360\x9f\224\x8d\x20\x50\105\122\110\101\x54\111\113\101\116\40\x55\122\x4c\40\104\111\x20\x41\x44\104\x52\105\123\123\x20\102\101\x52\x3a{$p}\xa"; echo "{$p}\x46\x6f\x72\x6d\141\164\x20\x55\x52\114\72{$p}\xa"; echo "{$k}\40\40\150\164\x74\x70\163\x3a\57\57\145\x6c\x65\141\162\x6e\x69\x6e\147\x2e\163\155\153\x32\x2d\x79\x6b\x2e\x73\143\x68\56\x69\144\x2f\x6d\157\x64\x2f\x71\165\151\x7a\57\x61\164\164\145\x6d\160\164\x2e\x70\150\x70{$p}\12"; echo "{$k}\x20\x20\77\x61\164\x74\145\155\x70\164\x3d\61\x32\x33\64\x35\x26\x63\x6d\x69\144\x3d\66\x37\70\71\x30\x26\160\x61\147\x65\x3d\x30{$p}\xa"; echo "\xa{$h}\360\x9f\x93\x8a\x20\x43\x4f\116\x54\x4f\110\40\114\101\111\x4e\40\x55\x52\x4c\x20\131\101\116\x47\x20\115\105\116\x47\x41\116\104\x55\116\107\x20\101\x54\124\x45\115\120\124\x20\x26\40\x43\x4d\111\104\72{$p}\xa"; echo "{$k}\61\x2e\x20{$p}\56\x2e\x2e\57\162\145\x76\151\x65\167\x2e\x70\150\x70\77\141\x74\164\x65\155\160\x74\x3d\61\x31\x32\62\x33\46\x63\155\151\144\x3d\x34\x34\65\x35\66{$p}\12"; echo "{$k}\62\x2e\x20{$p}\x2e\56\56\57\163\165\155\155\141\162\x79\x2e\x70\x68\160\x3f\141\164\x74\x65\x6d\x70\164\x3d\63\63\64\x34\65\x26\x63\x6d\151\x64\75\66\x36\x37\67\x38{$p}\xa"; echo "\12{$h}\360\x9f\222\xa1\40\103\101\124\x41\x54\101\x4e\40\x50\x45\x4e\124\x49\x4e\x47\72{$p}\12"; echo "{$k}\342\234\x93\x20{$p}\101\x74\x74\145\x6d\x70\164\40\x49\x44\40\75\x20\x73\x65\x6c\x61\154\x75\x20\142\145\x72\165\x62\x61\x68\40\164\151\x61\x70\40\141\x74\164\x65\155\160\164\x20\x62\141\162\x75{$p}\12"; echo "{$k}\342\x9c\223\40{$p}\103\115\111\x44\x20\x3d\40\x74\145\164\141\160\40\165\x6e\x74\x75\x6b\x20\161\x75\151\x7a\40\x79\x61\x6e\147\40\163\x61\x6d\141{$p}\12"; echo "{$k}\xe2\x9c\x93\x20{$p}\x50\x61\x73\164\x69\x6b\141\156\x20\141\164\x74\145\155\160\164\x20\x6d\x61\x73\151\150\40\141\153\164\x69\x66\x2f\x62\145\154\x75\155\x20\x65\x78\x70\151\x72\145\144{$p}\xa"; echo "\12{$h}\360\237\223\261\x20\125\x4e\x54\125\113\40\115\117\102\x49\114\105\72{$p}\xa"; echo "{$k}\342\x80\242\40{$p}\102\165\x6b\141\40\161\165\151\x7a\40\144\x69\40\142\x72\157\x77\163\x65\162\40\155\157\x62\151\154\x65{$p}\xa"; echo "{$k}\xe2\200\242\x20{$p}\x54\x61\x70\x20\141\x64\144\162\x65\163\163\x20\x62\x61\x72\40\x75\x6e\x74\x75\153\40\154\x69\150\141\x74\40\125\x52\114\40\154\x65\156\x67\153\141\x70{$p}\12"; echo "{$k}\xe2\200\242\40{$p}\x43\141\x72\x69\x20\x27\x61\164\x74\145\155\x70\164\75\47\x20\144\141\156\40\47\143\x6d\151\144\x3d\x27\x20\x64\x61\x6c\x61\x6d\40\x55\122\114{$p}\xa"; echo "\12{$k}\342\225\x90\xe2\x95\x90\342\225\220\342\x95\x90\342\225\220\342\225\x90\342\x95\x90\xe2\225\x90\xe2\225\220\342\x95\x90\342\225\x90\342\225\220\342\225\220\xe2\225\x90\342\225\x90\342\x95\220\342\x95\x90\xe2\225\x90\xe2\x95\x90\342\x95\x90\342\225\x90\342\225\220\xe2\225\x90\342\225\x90\xe2\225\x90\342\x95\x90\xe2\x95\x90\xe2\225\x90\xe2\225\220\342\x95\x90\342\225\x90\342\x95\220\xe2\x95\x90\xe2\x95\220\342\225\220\342\225\220\342\225\x90\xe2\x95\x90\342\225\x90\xe2\225\x90\xe2\x95\220\342\x95\x90\342\225\x90\xe2\x95\x90\342\x95\220\342\225\x90\xe2\225\220\342\225\220\342\x95\x90\xe2\x95\x90\xe2\225\220\342\225\x90\xe2\x95\220\xe2\225\x90\xe2\x95\x90\342\225\x90\342\225\x90\xe2\x95\220\342\225\x90\xe2\x95\220\342\225\x90\342\225\220\342\x95\220{$p}\xa"; echo "{$p}\103\x6f\156\x74\x6f\x68\72{$p}\12"; echo "{$h}\x55\122\114\72\40{$p}\x2e\56\x2e\x2f\x61\164\x74\145\155\x70\x74\x2e\x70\150\x70\x3f{$h}\x61\x74\x74\x65\155\160\164\x3d\65\x34\63\x32\61{$p}\x26{$h}\x63\x6d\151\x64\75\x39\x38\x37\66\x35{$p}\x26\x70\141\147\145\75\x31{$p}\12"; echo "{$h}\xe2\x86\x92\40\101\164\x74\x65\155\x70\164\x20\111\104\72\40\x35\x34\63\62\61{$p}\12"; echo "{$h}\342\206\x92\x20\x43\x4d\x49\104\72\40\71\x38\x37\66\65{$p}\xa"; echo "{$k}\xe2\225\x90\342\225\220\342\225\x90\xe2\225\220\xe2\x95\x90\xe2\225\220\342\225\x90\xe2\225\220\342\x95\220\342\225\220\xe2\x95\x90\xe2\225\x90\xe2\x95\220\342\x95\220\342\x95\x90\xe2\x95\220\xe2\225\x90\342\x95\220\xe2\x95\220\xe2\x95\x90\xe2\225\x90\342\x95\220\xe2\x95\220\xe2\225\220\342\225\x90\xe2\225\x90\342\225\x90\342\x95\220\xe2\x95\220\342\x95\x90\xe2\225\220\xe2\225\220\342\x95\x90\xe2\x95\220\xe2\225\220\xe2\x95\220\342\x95\220\342\x95\220\342\225\x90\xe2\225\220\xe2\225\x90\342\225\x90\xe2\x95\x90\342\x95\220\342\225\x90\342\x95\x90\xe2\225\220\xe2\225\x90\xe2\x95\220\xe2\x95\x90\342\225\x90\342\225\220\xe2\x95\220\xe2\225\x90\342\x95\x90\342\225\220\xe2\x95\220\xe2\225\x90\xe2\225\220\342\x95\220\xe2\225\220\342\225\x90\xe2\225\x90{$p}\xa\xa\12"; echo "{$m}\x20\xe2\x9a\xa0\357\270\x8f\x4e\157\164\x65\x3a\x20\x55\156\x74\165\153\40\x74\x75\152\165\141\156\x20\x65\x64\x75\x6b\141\x73\151\x20\163\x61\152\141\56{$p}\12"; echo "\12{$h}\124\145\153\x61\156\40\105\156\x74\145\x72\40\165\156\164\x75\153\40\x6b\x65\x6d\142\141\154\x69\x2e\x2e\x2e{$p}"; fgets(STDIN); } goto eaiGm; POssC: function createImagesZip($allDownloadedImages, $downloadDir) { global $h, $m, $p, $k; if (!extension_loaded("\172\151\160")) { echo "{$m}\342\x9a\xa0\x20\105\153\163\x74\x65\x6e\x73\151\x20\132\111\120\x20\x74\151\x64\x61\x6b\40\x74\x65\162\163\145\x64\151\x61\x2e\40\123\153\151\x70\40\x70\x65\155\x62\x75\141\164\141\x6e\x20\x5a\111\120\x2e{$p}\xa"; return null; } echo "{$k}\12\x4d\x65\x6d\x62\165\141\164\x20\x66\x69\154\x65\40\132\111\x50\x20\x64\141\162\x69\x20\163\x65\x6d\x75\x61\x20\x67\141\155\142\x61\162\x2e\56\x2e{$p}\12"; $zip = new ZipArchive(); $zipFilename = $downloadDir . "\x2f\141\154\x6c\x5f\x69\155\x61\x67\x65\x73\x5f" . date("\131\155\x64\137\110\x69\163") . "\x2e\172\151\x70"; if ($zip->open($zipFilename, ZipArchive::CREATE | ZipArchive::OVERWRITE) === TRUE) { $addedFiles = 0; foreach ($allDownloadedImages as $imageInfo) { if (isset($imageInfo["\144\157\x77\156\x6c\157\141\144\x65\x64"]) && $imageInfo["\144\157\167\x6e\x6c\157\x61\x64\145\x64"] && isset($imageInfo["\154\157\143\x61\154\x5f\x70\x61\x74\x68"])) { $localPath = $imageInfo["\x6c\x6f\x63\141\x6c\137\160\x61\x74\150"]; if (file_exists($localPath)) { $zipEntryName = sprintf("\147\141\x6d\142\141\162\x5f\x71\45\x73\x2f\x25\163", $imageInfo["\161\165\145\163\x74\151\x6f\x6e\x5f\x6e\x75\155\142\145\x72"] ?? "\x75\x6e\x6b\x6e\x6f\167\156", basename($imageInfo["\x66\151\154\x65\156\141\x6d\145"])); if ($zip->addFile($localPath, $zipEntryName)) { $addedFiles++; echo "{$h}\40\40\xe2\x9c\223\40\104\x69\164\141\x6d\142\x61\x68\153\141\156\40\153\x65\40\132\x49\x50\72\x20{$zipEntryName}{$p}\xa"; } } } } $zip->close(); $zipSize = filesize($zipFilename); echo "{$h}\xa\342\x9c\x93\40\x46\x69\154\145\40\x5a\111\x50\x20\144\151\x62\x75\x61\x74\72\40{$zipFilename}{$p}\xa"; echo "{$h}\xe2\x9c\223\x20\x54\x6f\x74\x61\x6c\x20\x66\151\154\145\x20\x64\141\x6c\141\155\x20\x5a\111\x50\x3a\x20{$addedFiles}{$p}\12"; echo "{$h}\xe2\x9c\x93\x20\125\x6b\165\x72\x61\x6e\40\x5a\x49\x50\72\x20" . round($zipSize / 1024 / 1024, 2) . "\x20\x4d\x42{$p}\xa"; return array("\172\x69\x70\137\160\x61\x74\150" => $zipFilename, "\x66\x69\x6c\145\x5f\x63\x6f\x75\156\x74" => $addedFiles, "\163\x69\x7a\x65" => $zipSize); } echo "{$m}\xe2\x9c\227\40\107\141\x67\141\x6c\40\155\x65\x6d\x62\x75\141\164\x20\x66\x69\154\145\40\132\x49\x50{$p}\xa"; return null; } goto CSdVx; LGuyu: function formatMatchAnswersForText($question) { $output = "\x49\x54\x45\115\40\x4d\x41\x54\103\x48\x49\116\107\57\104\122\117\120\x44\x4f\x57\x4e\72\xa"; $output .= str_repeat("\55", 40) . "\xa"; foreach ($question["\141\156\163\x77\x65\x72\x73"] as $answer) { $status = $answer["\x69\x73\x5f\141\x6e\x73\x77\145\x72\145\144"] ? "\xe2\234\x93" : "\342\x9c\x97"; $output .= sprintf("\45\163\x20\45\163\56\40\45\163\xa", $status, $answer["\x6c\x65\164\164\145\162"], $answer["\x71\x75\145\163\x74\151\x6f\x6e\x5f\164\x65\170\x74"]); if ($answer["\151\163\x5f\141\156\x73\x77\x65\162\x65\x64"]) { $output .= sprintf("\40\x20\x20\x20\xe2\206\222\x20\x44\151\160\151\x6c\x69\x68\72\40\x25\x73\40\x28\166\141\154\x75\145\x3a\40\45\163\x29\12", $answer["\x73\x65\x6c\145\x63\x74\x65\144\x5f\164\x65\170\x74"], $answer["\x73\145\x6c\x65\143\x74\145\x64\x5f\166\141\x6c\x75\145"]); } else { $output .= "\x20\40\x20\x20\342\206\222\x20\102\x65\154\x75\155\40\x64\151\x6a\x61\x77\141\142\12"; } if ($answer["\154\x65\x74\x74\x65\x72"] == "\x41" && !empty($answer["\141\154\x6c\137\157\160\x74\151\x6f\x6e\x73"])) { $output .= "\40\x20\x20\x20\x4f\160\x73\151\40\164\x65\x72\x73\x65\144\x69\x61\x3a\xa"; foreach ($answer["\x61\154\x6c\x5f\157\x70\164\x69\157\156\163"] as $value => $text) { $output .= sprintf("\40\40\40\x20\x20\x20\x25\55\64\x73\40\75\x20\45\x73\12", $value, $text); } } $output .= "\xa"; } if (!empty($question["\143\157\162\162\145\143\x74\x5f\141\156\163\x77\x65\x72"]) && is_array($question["\x63\157\x72\x72\145\143\x74\137\x61\156\163\x77\145\162"])) { $output .= "\112\101\x57\101\x42\x41\116\40\x59\x41\x4e\107\40\x44\x49\120\x49\114\x49\110\x3a\12"; $output .= str_repeat("\55", 40) . "\12"; foreach ($question["\x63\x6f\x72\162\x65\x63\164\x5f\x61\156\163\x77\145\x72"] as $idx => $correct) { $itemNum = $idx + 1; $output .= sprintf("\x25\62\x64\56\40\45\x73\xa", $itemNum, $correct["\x71\x75\145\x73\x74\x69\157\156"]); $output .= sprintf("\40\x20\x20\40\342\206\222\40\x25\x73\xa", $correct["\x61\x6e\163\167\x65\x72"]); } $output .= "\12"; } return $output; } goto T0igM; O3sV3: function tim($tim) { global $h, $m; for ($i = $tim; $i > 0; $i--) { echo "{$h}\xf0\237\x91\x89\x50\x6c\145\141\x73\145\40\x77\141\x69\x74\40{$m}{$i}\40{$h}\164\x6f\40\x63\x6c\x61\x69\155\360\x9f\221\210{$p}"; sleep(1); echo "\40\x20\x20\40\40\40\x20\x20\x20\x20\40\40\x20\40\40\40\x20\40\x20\40\x20\15"; } return $i; } goto syd2B; onbcy: function normalizeAnswerFormat($answers) { $lines = explode("\12", $answers); $normalizedLines = array(); $currentNumber = null; $isMatchingBlock = false; $matchingLines = array(); foreach ($lines as $line) { $trimmedLine = trim($line); if (empty($trimmedLine)) { if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\40\x20\40" . $matchingLines[$i]; } $matchingLines = array(); $isMatchingBlock = false; } $normalizedLines[] = ''; continue; } if (preg_match("\x2f\136\x28\x5c\144\53\x29\x5c\56\x5c\163\53\50\x5b\101\55\x5a\x5d\51\x5c\x2e\x2f", $trimmedLine, $matches)) { $currentNumber = $matches[1]; if (strpos($trimmedLine, "\xe2\x86\222") !== false) { $isMatchingBlock = true; $matchingLines = array($trimmedLine); } else { if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\x20\x20\x20" . $matchingLines[$i]; } $matchingLines = array(); } $isMatchingBlock = false; $normalizedLines[] = $trimmedLine; } } elseif ($isMatchingBlock && preg_match("\x2f\x5e\x28\x5b\101\55\132\135\x29\x5c\x2e\x5c\x73\53\x2e\53\xe2\x86\222\57", $trimmedLine)) { $matchingLines[] = $trimmedLine; } elseif (preg_match("\x2f\x5e\x28\x5c\144\x2b\51\x5c\56\x5c\x73\53\50\x5b\101\x2d\x5a\135\51\134\56\134\163\x2b\56\x2b\342\206\x92\x2f", $trimmedLine, $matches)) { $lineNumber = $matches[1]; if ($lineNumber == $currentNumber && $isMatchingBlock) { $fixedLine = preg_replace("\x2f\136\x5c\144\53\134\56\x5c\163\53\57", '', $trimmedLine); $matchingLines[] = $fixedLine; } else { $currentNumber = $lineNumber; if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\x20\x20\40" . $matchingLines[$i]; } $matchingLines = array(); } $isMatchingBlock = true; $matchingLines = array($trimmedLine); } } else { if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\40\40\40" . $matchingLines[$i]; } $matchingLines = array(); $isMatchingBlock = false; } $normalizedLines[] = $trimmedLine; } } if ($isMatchingBlock && !empty($matchingLines)) { $normalizedLines[] = $matchingLines[0]; for ($i = 1; $i < count($matchingLines); $i++) { $normalizedLines[] = "\40\x20\x20" . $matchingLines[$i]; } } return implode("\xa", $normalizedLines); } goto FXF8z; tO79x: function collectAllImagesToSingleFolder($allDownloadedImages, $downloadDir) { global $h, $m, $p, $k; $allImagesDir = $downloadDir . "\x2f\141\154\x6c\x5f\x69\155\x61\147\145\163"; if (!file_exists($allImagesDir)) { mkdir($allImagesDir, 511, true); echo "{$h}\342\x9c\223\40\x4d\x65\x6d\142\165\141\164\x20\146\157\154\144\145\x72\40\153\x75\155\x70\x75\154\x61\156\x20\163\x65\155\x75\x61\40\x67\x61\155\142\x61\162\x3a\40{$allImagesDir}{$p}\xa"; } $collectedImages = array(); $successCount = 0; $failCount = 0; echo "{$k}\xa\x4d\x65\156\x67\165\155\160\x75\x6c\153\x61\156\x20\163\145\155\165\x61\x20\x67\x61\x6d\142\141\162\x20\153\145\x20\163\141\x74\x75\40\x66\157\154\x64\x65\162\x2e\x2e\56{$p}\12"; foreach ($allDownloadedImages as $index => $imageInfo) { if (isset($imageInfo["\144\157\x77\x6e\x6c\x6f\x61\x64\x65\x64"]) && $imageInfo["\x64\157\x77\156\154\157\141\144\x65\144"] && isset($imageInfo["\154\157\x63\141\x6c\137\160\x61\x74\x68"])) { $originalPath = $imageInfo["\154\x6f\x63\141\154\137\x70\141\164\150"]; $newFilename = sprintf("\161\45\x73\x5f\160\141\x67\x65\x25\x73\137\45\163", $imageInfo["\x71\165\x65\163\164\151\157\x6e\x5f\156\x75\155\142\145\162"] ?? "\x75\156\153\156\157\167\x6e", isset($imageInfo["\163\x6f\x75\162\x63\145\x5f\146\x69\154\145"]) ? str_replace(array("\x6b\145\162\x6a\x61", "\x2e\x68\x74\x6d\x6c"), '', $imageInfo["\163\x6f\x75\162\143\145\x5f\146\x69\154\145"]) : "\x75\156\153\156\157\x77\156", $imageInfo["\146\x69\154\145\x6e\x61\155\x65"]); $newPath = $allImagesDir . "\57" . $newFilename; if (file_exists($originalPath) && copy($originalPath, $newPath)) { $successCount++; $collectedImages[] = array_merge($imageInfo, array("\143\x6f\x6c\x6c\x65\143\x74\145\144\137\160\x61\x74\x68" => $newPath, "\143\157\x6c\x6c\x65\143\x74\145\144\137\146\151\x6c\145\x6e\141\155\x65" => $newFilename)); echo "{$h}\40\x20\342\234\223\40" . basename($newFilename) . "{$p}\xa"; } else { $failCount++; echo "{$m}\x20\40\342\x9c\x97\40\x47\141\x67\141\154\x20\x6d\x65\156\147\x75\x6d\x70\x75\x6c\153\x61\x6e\x3a\x20" . basename($originalPath) . "{$p}\12"; } } } } goto LOY3B; FXF8z: function getImagesForQuestions($partQuestions, $allImagePaths, $downloadDir) { global $h, $p, $m, $k; $relevantImages = array(); $foundImages = array(); echo "{$h}\x4d\145\x6e\x63\141\162\x69\40\147\x61\155\x62\141\162\40\x75\x6e\164\x75\x6b\40{$p}" . count($partQuestions) . "{$h}\x20\x70\x65\x72\164\141\156\x79\141\141\156\56\56\56{$p}\12"; $questionImageMap = getCachedImageMapping($downloadDir); foreach ($partQuestions as $item) { $question = $item["\x71\x75\145\163\x74\x69\x6f\156"]; $questionId = $question["\151\144"]; $questionNumber = $question["\156\165\x6d\142\x65\162"]; $filename = $item["\x66\151\154\145\156\x61\155\145"]; $sourceFileNoExt = str_replace("\x2e\150\x74\155\154", '', $filename); echo "{$p}\40\40\120\x65\162\164\x61\156\x79\x61\x61\x6e\x20\43{$questionNumber}\40\x28\x49\x44\72\x20{$questionId}\x29\72\40"; $foundForThisQuestion = 0; $maxImagesPerQuestion = 2; $mapKeys = array("\151\144\x5f{$questionId}", "\156\165\155\137{$questionNumber}"); foreach ($mapKeys as $key) { if (isset($questionImageMap[$key])) { foreach ($questionImageMap[$key] as $imageInfo) { if ($foundForThisQuestion >= $maxImagesPerQuestion) { echo "{$k}\40\40\x20\x20\50\142\141\x74\x61\x73\40{$maxImagesPerQuestion}\40\147\141\155\142\141\x72\x20\164\x65\x72\x63\141\160\141\x69\x29{$p}\xa"; break 2; } if (file_exists($imageInfo["\x70\141\x74\x68"]) && !isImageDuplicate($imageInfo["\x70\141\x74\x68"], $relevantImages)) { $relevantImages[] = $imageInfo["\x70\141\x74\150"]; $foundForThisQuestion++; $foundImages[] = array("\160\141\x74\x68" => $imageInfo["\x70\x61\164\x68"], "\161\165\x65\163\x74\151\x6f\x6e\x5f\151\x64" => $questionId, "\x71\x75\145\x73\164\x69\x6f\x6e\137\x6e\x75\x6d\x62\x65\x72" => $questionNumber, "\x73\x6f\x75\162\143\x65" => "\155\x61\160\x70\x69\x6e\147", "\x66\151\x6c\145\x6e\141\155\x65" => basename($imageInfo["\160\141\164\150"]), "\x61\x6c\164" => $imageInfo["\141\154\x74"] ?? ''); } } } } if ($foundForThisQuestion < $maxImagesPerQuestion) { $possibleFolders = array($downloadDir . "\x2f\x69\155\141\x67\145\163\x2f{$sourceFileNoExt}\57\x71{$questionId}", $downloadDir . "\57\151\155\141\x67\145\163\57{$sourceFileNoExt}\x2f\161{$questionNumber}", $downloadDir . "\57\151\155\141\147\145\163\57{$sourceFileNoExt}\x2f\161{$questionId}\x5f\x69\x6d\141\147\145\x73", $downloadDir . "\57\x69\x6d\141\x67\x65\x73\57{$sourceFileNoExt}\x2f\160\x65\x72\x74\141\x6e\x79\141\x61\x6e\137{$questionNumber}"); foreach ($possibleFolders as $folderPath) { if ($foundForThisQuestion >= $maxImagesPerQuestion) { break; } if (file_exists($folderPath) && is_dir($folderPath)) { $images = glob($folderPath . "\57\x2a\x2e\x7b\x6a\x70\147\54\x6a\160\x65\x67\54\160\156\x67\54\x67\151\146\54\142\155\x70\54\167\x65\x62\x70\175", GLOB_BRACE); foreach ($images as $imagePath) { if ($foundForThisQuestion >= $maxImagesPerQuestion) { break; } if (!isImageDuplicate($imagePath, $relevantImages)) { $relevantImages[] = $imagePath; $foundForThisQuestion++; $foundImages[] = array("\x70\x61\x74\x68" => $imagePath, "\161\165\x65\163\164\151\157\x6e\137\151\x64" => $questionId, "\161\x75\145\163\x74\x69\x6f\156\x5f\x6e\165\155\142\x65\162" => $questionNumber, "\163\x6f\165\x72\x63\145" => "\x66\157\154\x64\145\162", "\146\151\154\145\x6e\x61\155\145" => basename($imagePath)); } } } } } if ($foundForThisQuestion < $maxImagesPerQuestion) { $patterns = array("\161{$questionId}\x5f\151\x6d\x67" => 100, "\161{$questionId}\137" => 95, "\137\161{$questionId}\x5f" => 90, "\161{$questionNumber}\137\x69\155\147" => 85, "\161{$questionNumber}\137" => 80, "\x5f\x71{$questionNumber}\x5f" => 75, "\160\x65\x72\x74\141\156\171\141\x61\x6e\137{$questionNumber}" => 70, "\x73\157\x61\x6c\137{$questionNumber}" => 65, "{$sourceFileNoExt}\x5f\x71{$questionId}" => 95, "{$sourceFileNoExt}\137\x71{$questionNumber}" => 85); $bestMatches = array(); foreach ($allImagePaths as $imagePath) { $imageFilename = basename($imagePath); $imageNameWithoutExt = pathinfo($imageFilename, PATHINFO_FILENAME); foreach ($patterns as $pattern => $score) { if (strpos($imageFilename, $pattern) !== false || strpos($imageNameWithoutExt, $pattern) !== false) { if (!isImageDuplicate($imagePath, $relevantImages)) { $bestMatches[] = array("\x70\141\164\x68" => $imagePath, "\x73\x63\x6f\162\145" => $score, "\x70\x61\164\164\x65\x72\156" => $pattern, "\146\151\x6c\145\156\x61\x6d\x65" => $imageFilename); } break; } } } usort($bestMatches, function ($a, $b) { return $b["\163\143\x6f\162\x65"] <=> $a["\163\x63\157\x72\x65"]; }); $remainingSlots = $maxImagesPerQuestion - $foundForThisQuestion; $topMatches = array_slice($bestMatches, 0, $remainingSlots); foreach ($topMatches as $match) { if (!isImageDuplicate($match["\x70\x61\164\x68"], $relevantImages)) { $relevantImages[] = $match["\x70\141\x74\x68"]; $foundForThisQuestion++; $foundImages[] = array("\x70\141\164\150" => $match["\160\x61\x74\150"], "\161\165\145\x73\164\151\x6f\156\137\x69\144" => $questionId, "\x71\165\x65\163\x74\151\157\156\x5f\156\x75\155\142\145\x72" => $questionNumber, "\x73\x6f\165\x72\143\145" => "\160\x61\x74\164\x65\162\156", "\160\141\x74\x74\x65\162\156" => $match["\160\141\164\164\x65\x72\156"], "\x66\x69\x6c\x65\x6e\141\x6d\x65" => $match["\x66\151\x6c\x65\x6e\141\155\x65"]); } } } $statusColor = $foundForThisQuestion > 0 ? $h : $m; $statusText = $foundForThisQuestion > 0 ? "\146\x6f\165\156\144\40{$foundForThisQuestion}" : "\x6e\157\x6e\145"; echo "{$statusColor}{$statusText}{$p}\12"; } $relevantImages = array_values(array_unique($relevantImages, SORT_REGULAR)); $maxImagesPerPart = 15; if (count($relevantImages) > $maxImagesPerPart) { echo "{$k}\xe2\232\xa0\xef\270\217\x20\x20\115\145\x6d\142\x61\x74\141\x73\x69\40\x67\x61\155\x62\141\162\40\x64\x61\162\151\40" . count($relevantImages) . "\40\x6d\145\x6e\x6a\x61\144\x69\40{$maxImagesPerPart}{$p}\xa"; $relevantImages = array_slice($relevantImages, 0, $maxImagesPerPart); } echo "{$h}\xe2\x9c\x93\x20\x54\x6f\164\x61\x6c\x20\147\141\x6d\142\141\x72\x20\x79\x61\x6e\147\40\x72\x65\154\145\x76\x61\156\x20\x64\x69\164\x65\x6d\165\153\141\x6e\x3a\x20" . count($relevantImages) . "{$p}\12"; if (count($foundImages) > 0) { echo "{$p}\104\145\x74\x61\x69\154\40\x6d\x61\x70\x70\x69\156\x67\x20\147\x61\x6d\142\x61\x72\x2d\x70\x65\x72\x74\141\x6e\x79\141\x61\x6e\x3a{$p}\xa"; $shownCount = 0; foreach ($foundImages as $img) { if ($shownCount >= 10) { echo "\x20\x20{$p}\56\56\x2e\x20\144\141\x6e\x20" . (count($foundImages) - 10) . "\40\147\x61\155\142\141\162\40\154\x61\151\156\156\171\141{$p}\xa"; break; } $qNum = $img["\x71\165\145\163\x74\x69\157\x6e\137\x6e\165\155\x62\145\x72"] ?? "\77"; $source = $img["\x73\157\165\x72\x63\145"] ?? "\165\x6e\153\156\x6f\x77\x6e"; $filename = basename($img["\x70\x61\x74\150"]); echo "\x20\40{$p}\121{$qNum}\x20\342\206\222\x20{$filename}\x20\x28{$source}\51{$p}\12"; $shownCount++; } } return $relevantImages; } goto Br4Vb; fO8u0: function scrapeAllPages($baseUrl, $attempt, $cmid, $ua, $maxPages, $downloadDir) { global $h, $m, $p, $k; $savedFiles = array(); echo "{$h}\xa\x4d\x65\156\x67\x61\x6d\142\x69\x6c\x20\150\x61\154\x61\x6d\x61\156\40\x30\56\x2e\x2e{$p}\xa"; $url0 = "{$baseUrl}\x2f\155\157\x64\57\161\165\x69\x7a\57\141\164\x74\145\155\x70\164\56\160\150\160\77\141\x74\x74\145\x6d\160\x74\x3d{$attempt}\x26\x63\x6d\151\144\75{$cmid}"; $content0 = get($url0, $ua); $path0 = saveToDownloadDir("\153\145\162\152\x61\60\x2e\x68\x74\155\x6c", $content0, $downloadDir); $savedFiles[] = array("\153\x65\x72\152\141\x30\x2e\x68\x74\155\x6c", $path0); echo "{$h}\xe2\x9c\223\x20\x44\151\x73\151\155\x70\x61\156\40\163\145\x62\x61\x67\141\151\40{$path0}{$p}\xa"; for ($page = 1; $page <= $maxPages; $page++) { echo "{$k}\115\145\156\x67\x61\155\x62\x69\154\40\150\141\154\x61\x6d\x61\156\40{$page}\x2e\x2e\x2e{$p}\xa"; $url = "{$baseUrl}\57\x6d\157\144\57\161\165\151\172\57\x61\x74\x74\145\155\160\x74\x2e\x70\150\160\77\x61\164\164\x65\155\x70\164\75{$attempt}\x26\x63\155\151\144\75{$cmid}\x26\160\x61\147\145\x3d{$page}"; $content = get($url, $ua); if (strlen($content) < 1000) { echo "{$m}\110\141\154\x61\155\x61\x6e\x20{$page}\x20\x6b\157\163\157\x6e\147\x20\x61\x74\141\165\40\164\151\144\x61\x6b\x20\x61\x64\141\x2c\x20\142\x65\162\x68\145\156\164\151\56\56\x2e{$p}\xa"; break; } $filename = "\153\145\162\152\x61{$page}\x2e\150\x74\x6d\154"; $fullPath = saveToDownloadDir($filename, $content, $downloadDir); $savedFiles[] = array($filename, $fullPath); echo "{$h}\342\x9c\x93\40\x44\x69\x73\x69\x6d\x70\141\x6e\x20\163\145\142\x61\147\x61\151\40{$fullPath}{$p}\xa"; usleep(500000); } return $savedFiles; } goto t0VRb; UkdqI: $bg = "\x1b\133\61\x3b\71\x34\x6d"; goto rb3ey; kC0_j: $m = "\33\x5b\x31\73\71\61\x6d"; goto PWLqL; uLw9J: function sendToGeminiAPIInParts($allQuestions, $imagesDir, $apiKey, $parts = 2) { global $h, $m, $p, $k, $u, $bta; echo "\xa{$bta}" . str_repeat("\342\x95\x90", 60) . "{$p}\xa"; echo "{$h}\115\x45\x4e\x47\111\x52\111\x4d\40\x4b\105\x20\107\x45\115\111\116\x49\40\101\120\x49\x20\123\105\x43\101\x52\101\x20\x42\105\x52\124\101\x48\x41\120\x20\50{$parts}\40\142\141\147\151\141\x6e\x29{$p}\12"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; $totalQuestions = 0; foreach ($allQuestions as $questions) { $totalQuestions += count($questions); } echo "{$h}\124\157\x74\x61\154\x20\160\x65\x72\164\x61\x6e\171\141\x61\x6e\72\40{$totalQuestions}{$p}\xa"; echo "{$h}\x41\153\x61\156\40\x64\x69\142\141\x67\151\x20\155\x65\156\x6a\x61\x64\151\x20{$parts}\x20\142\x61\147\151\x61\x6e{$p}\12"; $questionsParts = splitQuestionsIntoParts($allQuestions, $parts); $allAnswers = array(); $allResponses = array(); $allImagePaths = array(); if (is_dir($imagesDir)) { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($imagesDir, RecursiveDirectoryIterator::SKIP_DOTS)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower(pathinfo($file->getFilename(), PATHINFO_EXTENSION)); if (in_array($ext, array("\x6a\160\x67", "\152\x70\145\147", "\x70\156\147", "\147\x69\146", "\142\155\160", "\x77\x65\142\160"))) { $allImagePaths[] = $file->getPathname(); } } } } $otherImagesDir = dirname($imagesDir) . "\x2f\x69\x6d\141\147\145\163"; if (is_dir($otherImagesDir) && $otherImagesDir != $imagesDir) { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($otherImagesDir, RecursiveDirectoryIterator::SKIP_DOTS)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower(pathinfo($file->getFilename(), PATHINFO_EXTENSION)); if (in_array($ext, array("\x6a\x70\147", "\152\160\145\x67", "\160\x6e\147", "\x67\x69\146", "\142\155\x70", "\x77\x65\142\x70"))) { $allImagePaths[] = $file->getPathname(); } } } } echo "{$h}\342\234\x93\40\x4d\145\156\145\155\165\153\141\x6e\40" . count($allImagePaths) . "\x20\x67\141\x6d\142\141\162\x20\x64\151\40\163\145\x6d\x75\x61\40\x66\157\154\x64\x65\x72{$p}\12"; $downloadDir = dirname($imagesDir); foreach ($questionsParts as $partIndex => $part) { $partNumber = $partIndex + 1; $partQuestions = $part["\x71\165\145\163\x74\151\x6f\x6e\x73"]; echo "\xa{$u}" . str_repeat("\55", 80) . "{$p}\12"; echo "{$h}\x42\101\107\111\x41\x4e\40{$partNumber}\40\x64\x61\x72\x69\40{$parts}{$p}\12"; echo "{$h}\120\x65\x72\x74\141\x6e\171\x61\x61\x6e\40{$part["\x73\x74\141\162\x74\137\147\154\157\142\141\154"]}\40\x73\141\155\160\x61\151\x20{$part["\145\x6e\x64\x5f\x67\154\x6f\142\x61\x6c"]}{$p}\xa"; echo "{$u}" . str_repeat("\x2d", 80) . "{$p}\xa"; echo "{$k}\115\x65\x6e\x63\x61\162\151\x20\147\141\x6d\142\x61\162\x20\171\x61\x6e\x67\x20\x72\145\x6c\145\x76\x61\156\x20\165\x6e\164\165\x6b\x20\x62\x61\147\x69\x61\x6e\x20\151\156\x69\56\x2e\56{$p}\xa"; $relevantImages = getImagesForQuestions($partQuestions, $allImagePaths, $downloadDir); $questionsWithImagesCount = 0; foreach ($partQuestions as $item) { $question = $item["\x71\x75\x65\x73\164\151\157\156"]; if (!empty($question["\151\x6d\141\x67\145\163"])) { $questionsWithImagesCount++; } } echo "{$k}\x50\x65\162\x74\141\x6e\x79\141\141\156\40\x64\145\156\147\x61\156\40\x67\141\155\142\x61\162\x20\x64\151\x20\x62\x61\147\x69\141\x6e\40\x69\x6e\151\x3a\x20{$questionsWithImagesCount}\x20\144\141\162\151\x20" . count($partQuestions) . "{$p}\12"; if (count($relevantImages) > 0) { echo "\12{$k}\x47\x61\x6d\x62\141\162\40\171\141\156\x67\40\141\153\141\x6e\x20\144\151\153\151\162\x69\x6d\x20\165\x6e\x74\x75\153\40\142\x61\147\151\x61\156\40\x69\x6e\151\x3a{$p}\12"; foreach ($relevantImages as $index => $imagePath) { $questionId = "\x3f"; $questionNum = "\x3f"; $altText = ''; $filename = basename($imagePath); if (preg_match("\57\x71\x28\x5c\x64\53\x29\137\57", $filename, $matches)) { $questionId = $matches[1]; foreach ($partQuestions as $item) { if ($item["\161\165\x65\163\164\151\157\156"]["\x69\144"] == $questionId) { $questionNum = $item["\x71\x75\145\163\x74\151\157\156"]["\x6e\x75\x6d\x62\145\162"]; if (!empty($item["\161\x75\145\x73\164\151\157\x6e"]["\151\155\141\147\x65\x73"])) { foreach ($item["\x71\165\145\x73\164\151\x6f\156"]["\x69\155\141\x67\145\x73"] as $img) { if (isset($img["\154\157\143\x61\154\137\160\x61\164\150"]) && $img["\154\157\x63\141\154\137\x70\141\x74\x68"] == $imagePath) { $altText = $img["\141\x6c\164"] ?? ''; break; } } } break; } } } $size = file_exists($imagePath) ? round(filesize($imagePath) / 1024, 2) . "\x20\x4b\x42" : "\x4e\57\x41"; echo "{$h}\40\40" . ($index + 1) . "\56\x20{$p}\121{$questionNum}\40\x28\x49\104\72{$questionId}\51\40\xe2\206\x92\x20{$filename}"; if (!empty($altText)) { echo "\x20\x5b{$altText}\135"; } echo "\40\50{$size}\x29{$p}\12"; } } else { echo "{$k}\342\x84\xb9\xef\xb8\x8f\40\40\124\151\x64\141\153\x20\141\x64\x61\40\147\x61\155\142\141\162\40\171\141\x6e\x67\x20\162\x65\154\x65\166\x61\x6e\x20\x75\x6e\164\x75\153\x20\x64\151\x6b\x69\x72\x69\x6d{$p}\xa"; } $partText = createTextForGeminiPart($part); $systemPrompt = "\x53\x61\x79\141\40\x61\153\x61\x6e\40\155\145\x6d\x62\145\162\x69\x6b\x61\x6e\x20\144\x61\146\x74\141\x72\40\x70\x65\x72\x74\x61\x6e\x79\141\x61\156\40\165\152\x69\x61\x6e\x20\x62\145\x73\145\162\164\x61\40\160\x69\154\151\x68\141\x6e\40\152\141\x77\x61\142\x61\156\x6e\x79\141\56\40" . "\102\x65\162\151\x6b\141\x6e\x20\152\x61\167\x61\x62\141\x6e\x20\171\x61\x6e\x67\40\142\145\x6e\141\162\x20\165\x6e\164\x75\153\40\163\145\x74\151\141\160\40\160\x65\162\x74\x61\x6e\171\x61\x61\156\40\x64\145\156\x67\x61\156\40\x66\157\162\155\141\164\40\142\x65\x72\151\x6b\165\x74\x3a\xa\12" . "\106\x4f\122\115\x41\x54\40\112\x41\127\x41\102\x41\x4e\x3a\12" . "\61\56\40\x55\x6e\x74\x75\153\40\x53\x49\x4e\107\x4c\x45\x20\x43\110\117\x49\103\x45\40\x28\x68\141\x6e\171\x61\40\x73\141\164\165\40\152\x61\167\x61\x62\141\x6e\x20\x62\x65\156\141\162\51\72\12" . "\x20\40\40\133\x6e\157\x6d\x6f\x72\x5d\56\40\133\150\x75\162\x75\x66\135\56\x5b\x74\145\x6b\x73\40\x6a\141\167\x61\x62\141\x6e\135\12" . "\40\40\40\x43\x6f\156\164\x6f\150\72\40\x31\x2e\40\101\x2e\151\x6b\x61\156\xa\12" . "\62\56\x20\x55\x6e\164\165\153\40\115\125\114\124\111\120\x4c\x45\x20\x43\x48\x4f\111\x43\x45\x20\50\x62\x69\163\141\x20\x6c\x65\x62\151\150\x20\x64\x61\162\151\x20\163\x61\x74\x75\x20\152\141\167\141\142\141\156\x29\x3a\xa" . "\40\x20\40\133\156\x6f\155\x6f\x72\x5d\56\40\x5b\x68\x75\162\165\146\61\135\56\x5b\x74\x65\x6b\x73\40\x6a\x61\x77\x61\142\x61\x6e\x31\135\54\40\x5b\x68\x75\162\x75\x66\x32\135\x2e\x5b\x74\145\x6b\x73\x20\x6a\x61\x77\x61\x62\x61\x6e\x32\135\54\40\x2e\56\56\xa" . "\40\40\40\103\x6f\156\164\157\x68\72\40\62\56\x20\x41\56\x69\153\141\156\x2c\40\x42\56\144\145\x62\165\x2c\40\x43\x2e\162\157\x64\141\xa\xa" . "\x33\x2e\x20\125\156\164\165\153\40\104\x52\x4f\x50\x44\x4f\x57\116\x2f\x4d\x41\x54\103\110\x49\116\107\40\50\120\x45\116\124\x49\116\107\x21\x20\120\x65\x72\x68\x61\164\151\153\141\x6e\x20\x66\x6f\162\155\141\x74\x20\x69\x6e\x69\x29\x3a\12" . "\x20\x20\x20\133\x6e\x6f\x6d\157\x72\135\56\x20\133\150\165\162\x75\146\x31\135\56\40\x5b\x70\x65\x72\x74\x61\x6e\171\141\141\x6e\61\135\40\342\206\222\x20\133\x6a\x61\x77\x61\x62\141\156\x31\135\12" . "\40\40\x20\x20\40\40\x20\40\x20\x5b\x68\165\x72\165\x66\62\x5d\56\x20\x5b\160\145\x72\164\x61\x6e\x79\x61\x61\156\62\x5d\x20\xe2\206\x92\x20\133\152\x61\167\x61\x62\141\156\x32\x5d\xa" . "\40\40\40\x20\x20\x20\x20\40\x20\x5b\x68\x75\162\165\x66\x33\135\x2e\40\x5b\x70\145\162\164\x61\156\x79\x61\x61\156\x33\x5d\x20\xe2\x86\x92\x20\133\152\x61\x77\141\x62\141\x6e\63\135\12" . "\40\40\x20\103\157\156\164\157\x68\72\xa" . "\x20\40\40\x34\56\40\x41\56\40\160\145\155\142\x75\141\164\141\156\x20\x6d\151\x6e\165\x6d\x61\156\x20\164\x65\150\40\342\206\222\40\106\x69\154\164\162\141\x73\x69\12" . "\x20\x20\40\x20\x20\40\x42\56\x20\x74\x69\x6e\164\141\40\x62\145\x72\167\141\x72\x6e\141\x20\342\206\222\x20\113\x72\157\x6d\141\x74\157\x67\162\141\x66\151\12" . "\40\40\40\40\x20\x20\103\56\40\x50\145\x6d\142\165\x61\x74\x61\156\40\155\151\x6e\x79\x61\x6b\x20\x62\165\155\151\40\xe2\x86\222\40\104\x69\163\164\x69\154\x61\163\x69\12\12" . "\64\56\40\125\156\164\165\x6b\x20\x45\x53\x53\x41\x59\57\x53\x48\x4f\122\x54\x20\x41\116\123\x57\105\122\72\12" . "\x20\40\40\x5b\156\x6f\155\157\162\135\56\40\x5b\152\x61\167\141\x62\x61\x6e\40\164\x65\x6b\163\x5d\xa\12" . "\65\56\x20\x4a\151\x6b\141\x20\x61\144\141\x20\x47\101\115\102\x41\122\40\x64\141\154\141\155\40\160\145\162\164\141\156\x79\141\x61\x6e\x3a\xa" . "\x20\40\40\x2d\40\x47\x61\155\x62\x61\162\x20\x61\x6b\x61\156\40\144\x69\x6b\x69\162\x69\155\x20\142\145\x72\x73\141\155\x61\x61\x6e\40\144\145\156\x67\x61\156\40\164\x65\x6b\163\xa" . "\x20\x20\40\55\40\107\x61\155\142\x61\x72\40\x62\x65\x72\x69\163\151\40\151\x6e\x66\157\x72\155\x61\163\x69\40\x76\x69\163\165\141\154\40\171\x61\156\x67\x20\162\x65\x6c\x65\x76\141\156\40\144\x65\x6e\x67\x61\x6e\x20\160\x65\162\x74\x61\x6e\171\x61\x61\x6e\12" . "\x20\x20\40\x2d\40\x47\x75\x6e\141\153\x61\156\40\x69\156\x66\x6f\162\155\141\163\151\x20\144\141\x72\x69\40\x67\141\155\x62\141\x72\40\165\156\x74\165\153\40\155\145\x6e\152\141\167\141\x62\x20\x6a\151\x6b\141\40\144\151\x70\145\162\x6c\x75\153\x61\x6e\xa\xa" . "\x41\164\165\162\141\x6e\x20\x70\145\156\164\151\x6e\147\x3a\12" . "\x2d\x20\x48\141\156\171\x61\40\142\145\x72\151\153\141\156\x20\152\x61\x77\x61\142\141\156\54\x20\x54\x41\x4e\x50\x41\40\160\145\x6e\x6a\x65\x6c\x61\x73\141\156\x20\164\141\x6d\142\141\150\141\x6e\12" . "\x2d\x20\x47\165\x6e\x61\x6b\141\156\x20\x66\x6f\162\x6d\x61\164\x20\144\151\x20\x61\x74\141\x73\x20\163\x65\x63\141\x72\x61\x20\x6b\157\156\x73\x69\163\x74\x65\156\12" . "\x2d\40\x50\141\163\x74\151\153\x61\x6e\x20\x73\145\164\151\x61\160\40\x6a\141\x77\141\x62\x61\x6e\40\144\x69\x6d\165\154\x61\x69\40\x64\145\156\147\x61\156\x20\156\157\x6d\157\162\40\x70\145\x72\x74\x61\x6e\171\141\141\156\12" . "\x2d\x20\125\156\x74\x75\153\x20\x6d\x61\x74\x63\150\x69\x6e\147\x2f\x44\122\x4f\x50\x44\x4f\x57\116\72\x20\x54\125\114\x49\123\40\x4e\117\115\117\x52\40\110\x41\116\x59\x41\x20\120\101\104\101\40\x42\101\122\111\x53\40\120\x45\x52\x54\x41\x4d\x41\12" . "\55\x20\125\156\164\165\153\x20\155\141\x74\143\150\151\156\x67\x2f\x44\122\117\120\104\x4f\x57\116\72\x20\142\x61\162\151\163\x20\142\145\x72\151\153\165\164\x6e\x79\x61\40\x67\x75\x6e\x61\x6b\x61\156\x20\163\160\141\x73\x69\x2f\164\x61\x62\x20\x64\141\x6e\x20\x68\x75\162\165\x66\x20\x73\x61\x6a\x61\12" . "\55\x20\x55\156\164\165\153\x20\155\141\x74\143\150\x69\x6e\147\x2f\104\122\117\x50\104\117\127\116\72\40\112\x41\116\107\101\116\40\x75\154\141\156\x67\x69\40\x6e\x6f\155\x6f\162\40\160\141\144\x61\40\x73\145\164\151\141\x70\40\x62\141\x72\151\163\xa\12" . "\101\x6e\144\141\40\141\x64\x61\154\141\150\40\x61\x73\151\x73\x74\x65\x6e\x20\171\141\156\147\x20\141\150\154\151\x20\144\141\154\x61\x6d\x20\155\x65\x6e\x6a\x61\167\x61\x62\x20\163\157\141\154\x20\165\152\151\x61\x6e\56\40" . "\x41\x6e\144\141\x20\141\153\141\156\40\155\x65\x6e\x65\x72\151\x6d\x61\40\142\x61\147\151\141\156\40\163\x6f\141\x6c\40\x79\x61\156\147\40\x6d\x65\x72\165\x70\x61\153\141\156\40\x62\x61\x67\151\x61\x6e\40\144\141\x72\x69\x20\x6b\x65\163\x65\x6c\165\162\165\x68\x61\x6e\40\163\157\x61\154\x2e\40" . "\x4a\x61\x77\x61\x62\154\141\x68\40\x68\141\x6e\171\141\x20\165\156\164\x75\x6b\40\142\x61\147\151\x61\156\40\151\156\151\x2e"; $userPrompt = "\102\x65\162\x69\153\x75\164\40\x61\x64\x61\x6c\141\150\40\142\x61\x67\151\141\x6e\x20\x6b\145\55{$partNumber}\40\144\141\x72\151\40\x73\x6f\141\x6c\40\165\x6a\151\141\156\40\x28\x70\x65\162\x74\x61\x6e\171\141\x61\x6e\40{$part["\163\x74\x61\162\x74\137\147\154\x6f\142\141\x6c"]}\40\163\x61\155\160\141\x69\40{$part["\x65\156\x64\x5f\147\x6c\157\142\x61\x6c"]}\x29\x2e\40" . "\x42\x65\142\145\x72\141\160\x61\40\160\x65\x72\x74\141\156\171\x61\x61\156\x20\x6d\x65\155\x69\154\x69\153\151\x20\107\x41\x4d\102\x41\x52\40\x72\x65\x66\x65\x72\145\156\163\151\40\x79\141\x6e\147\40\141\x6b\141\156\40\x64\x69\x6b\151\x72\151\x6d\40\x62\145\x72\163\x61\x6d\141\x61\156\x2e\40" . "\107\x61\x6d\142\x61\162\55\147\x61\155\x62\141\162\x20\x74\145\x72\163\x65\142\165\x74\x20\x61\144\x61\154\141\x68\x20\142\x61\x67\x69\x61\156\40\x69\x6e\164\145\x67\162\141\154\x20\144\141\x72\x69\40\x70\x65\x72\164\x61\x6e\x79\141\x61\x6e\x2e\xa\xa" . "\x54\x6f\154\x6f\156\x67\40\142\145\162\151\153\141\x6e\40\152\x61\167\141\142\141\x6e\x20\165\x6e\x74\165\153\x20\163\x65\x6d\x75\x61\40\163\x6f\x61\154\x20\x64\x61\154\x61\x6d\x20\142\x61\x67\151\141\x6e\40\x69\x6e\x69\72\xa\xa" . substr($partText, 0, 1500000); $geminiUrl = "\x68\x74\164\x70\163\72\57\57\147\x65\156\x65\162\x61\164\151\166\x65\x6c\x61\156\x67\165\x61\147\x65\56\x67\x6f\x6f\147\x6c\145\x61\160\x69\163\56\143\157\155\57\x76\61\x62\145\x74\x61\x2f\155\x6f\144\x65\x6c\163\x2f\147\x65\155\x69\156\x69\x2d\62\x2e\65\55\x66\x6c\141\163\150\72\147\145\x6e\x65\x72\141\164\145\x43\x6f\x6e\x74\145\156\x74\77\153\x65\x79\75" . $apiKey; $partsArray = array(); $partsArray[] = array("\164\145\170\164" => $systemPrompt . "\12\12" . $userPrompt); $imageCount = 0; echo "{$k}\x4d\x65\x6e\x61\x6d\142\x61\x68\x6b\x61\x6e\x20\147\x61\x6d\142\141\162\40\x6b\x65\x20\x72\x65\x71\165\x65\x73\x74\56\x2e\x2e{$p}\12"; foreach ($relevantImages as $imagePath) { if ($imageCount >= 15) { echo "{$m}\40\x20\xe2\x9a\240\357\270\x8f\x20\40\102\x61\164\141\163\40\155\x61\x6b\x73\x69\x6d\141\154\x20\61\65\x20\147\x61\155\x62\141\x72\x20\x74\x65\x72\143\x61\160\141\151{$p}\xa"; break; } if (file_exists($imagePath)) { try { $imageData = file_get_contents($imagePath); if ($imageData === false) { echo "{$m}\x20\40\342\x9c\227\x20\x47\141\147\x61\154\40\x6d\x65\x6d\x62\141\x63\141\40\x66\151\154\145\x3a\40" . basename($imagePath) . "{$p}\xa"; continue; } $imageDataBase64 = base64_encode($imageData); $mimeType = mime_content_type($imagePath); if (!$mimeType) { $ext = strtolower(pathinfo($imagePath, PATHINFO_EXTENSION)); $mimeMap = array("\152\x70\147" => "\151\155\141\x67\145\x2f\152\160\145\x67", "\x6a\160\x65\147" => "\151\155\141\147\145\x2f\152\x70\145\x67", "\160\x6e\147" => "\x69\x6d\141\x67\x65\57\x70\x6e\x67", "\x67\x69\146" => "\151\x6d\141\x67\145\x2f\147\151\x66", "\x62\155\160" => "\151\155\141\x67\x65\x2f\x62\155\160", "\167\x65\x62\x70" => "\x69\x6d\141\x67\x65\57\167\x65\142\160"); $mimeType = $mimeMap[$ext] ?? "\x69\155\141\147\145\57\x6a\x70\x65\147"; } $partsArray[] = array("\x69\156\x6c\151\x6e\x65\x5f\x64\141\164\x61" => array("\155\151\x6d\145\x5f\x74\171\160\145" => $mimeType, "\144\x61\164\141" => $imageDataBase64)); $imageCount++; $fileSize = round(strlen($imageData) / 1024, 2); $filename = basename($imagePath); $questionInfo = ''; if (preg_match("\x2f\161\50\134\x64\53\51\x5f\x2f", $filename, $matches)) { $qId = $matches[1]; foreach ($partQuestions as $item) { if ($item["\x71\165\x65\163\x74\x69\157\156"]["\151\x64"] == $qId) { $questionInfo = "\40\50\121" . $item["\161\x75\x65\x73\x74\151\x6f\156"]["\x6e\x75\x6d\x62\x65\x72"] . "\51"; break; } } } echo "{$h}\40\40\xe2\x9c\x93\40\x47\141\155\142\141\162\40{$imageCount}\x3a\40{$filename}{$questionInfo}\40\x28{$fileSize}\40\113\x42\x29{$p}\12"; usleep(100000); } catch (Exception $e) { echo "{$m}\40\40\342\x9c\227\x20\x45\x72\162\x6f\x72\40\160\141\144\141\40\147\x61\155\142\141\162\40" . basename($imagePath) . "\72\x20" . $e->getMessage() . "{$p}\12"; } } else { echo "{$m}\x20\40\342\234\227\40\x46\x69\x6c\145\x20\x74\x69\144\x61\153\40\144\x69\164\145\x6d\165\x6b\x61\156\x3a\40" . basename($imagePath) . "{$p}\xa"; } } if ($imageCount == 0) { echo "{$k}\x20\40\xe2\x84\271\357\270\217\x20\40\x54\x69\x64\141\x6b\x20\141\x64\141\40\x67\x61\x6d\142\141\162\40\171\141\x6e\x67\40\144\x69\x74\x61\155\x62\141\150\153\141\x6e\40\x75\x6e\164\x75\x6b\40\142\141\147\x69\141\x6e\40\x69\156\151{$p}\xa"; } else { echo "{$h}\342\234\223\40\x54\x6f\164\141\x6c\x20\x67\141\x6d\x62\x61\x72\40\x64\151\x74\141\155\x62\141\x68\x6b\141\x6e\x3a\x20{$imageCount}{$p}\xa"; } echo "{$k}\115\145\156\147\x69\x72\151\155\x20\x62\141\x67\x69\x61\x6e\x20{$partNumber}\x20\x6b\x65\x20\x47\x45\x4d\111\x4e\x49\x20\x41\120\111\x2e\56\x2e{$p}\12"; $requestData = array("\143\157\x6e\164\x65\156\x74\163" => array(array("\160\x61\x72\x74\x73" => $partsArray)), "\147\x65\x6e\145\x72\141\164\151\x6f\x6e\x43\x6f\156\x66\x69\x67" => array("\x74\x65\155\160\x65\x72\x61\164\165\162\x65" => 0.1, "\164\x6f\x70\120" => 0.8, "\x74\157\x70\113" => 40, "\x6d\141\x78\x4f\x75\164\160\165\164\124\157\x6b\145\x6e\163" => 32768)); $requestSize = strlen(json_encode($requestData)); echo "{$k}\125\153\x75\x72\x61\x6e\40\162\145\161\x75\145\163\x74\x3a\40" . round($requestSize / 1024, 2) . "\40\x4b\x42{$p}\xa"; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $geminiUrl); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($requestData)); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\x43\157\156\164\x65\x6e\164\55\124\x79\x70\x65\72\x20\x61\160\160\154\151\143\141\x74\151\157\x6e\x2f\x6a\163\157\x6e")); curl_setopt($ch, CURLOPT_TIMEOUT, 120); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30); $response = curl_exec($ch); $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); $curlError = curl_error($ch); curl_close($ch); if ($curlError) { echo "{$m}\xe2\x9c\227\40\x43\x75\x72\154\40\x45\162\162\x6f\162\72\x20{$curlError}{$p}\xa"; $allResponses[] = array("\x70\141\162\164" => $partNumber, "\x73\x74\141\164\x75\163" => "\143\x75\162\154\x5f\145\162\162\x6f\162", "\x65\x72\162\157\162" => $curlError); continue; } if ($httpCode != 200) { echo "{$m}\xe2\234\227\40\107\x61\x67\x61\x6c\x20\x6d\145\x6e\147\151\162\x69\155\40\142\141\x67\x69\141\156\40{$partNumber}\x20\153\145\40\107\105\115\x49\116\x49\40\x41\120\111\x2e\x20\110\x54\124\x50\40\103\x6f\144\145\x3a\40{$httpCode}{$p}\12"; if ($response) { $errorData = json_decode($response, true); if (isset($errorData["\145\162\162\x6f\162"]["\155\145\x73\163\x61\147\x65"])) { echo "{$m}\120\x65\163\141\x6e\40\145\162\x72\x6f\x72\72\40" . $errorData["\145\162\x72\x6f\x72"]["\155\145\x73\x73\x61\147\145"] . "{$p}\12"; } else { echo "{$m}\122\145\163\160\157\156\163\x65\72\40" . substr($response, 0, 500) . "\56\x2e\x2e{$p}\12"; } } $allResponses[] = array("\160\x61\x72\x74" => $partNumber, "\163\x74\x61\164\165\x73" => "\x65\x72\x72\157\x72", "\x65\x72\x72\157\162\x5f\143\157\144\x65" => $httpCode, "\x65\x72\162\157\x72\137\155\x65\x73\163\141\x67\x65" => $response ? substr($response, 0, 500) : "\x4e\157\x20\162\x65\x73\160\157\156\x73\x65"); echo "\12{$k}\x4c\x61\x6e\152\x75\164\153\141\156\40\x6b\x65\x20\x62\141\147\x69\141\x6e\40\x62\x65\162\x69\x6b\x75\x74\156\x79\141\77\x20\50\x59\57\x6e\51\72\x20{$p}"; $continue = trim(fgets(STDIN)); if (strtolower($continue ?: "\171") !== "\x79") { break; } continue; } $responseData = json_decode($response, true); if (isset($responseData["\x63\x61\156\144\151\144\141\x74\145\163"][0]["\x63\x6f\x6e\164\145\x6e\164"]["\160\141\x72\164\x73"][0]["\x74\x65\x78\164"])) { $answers = $responseData["\x63\141\156\x64\x69\x64\141\164\x65\163"][0]["\143\157\x6e\164\145\156\x74"]["\x70\141\162\164\x73"][0]["\164\x65\170\x74"]; $answers = normalizeAnswerFormat($answers); echo "{$h}\xe2\234\x93\x20\x42\145\x72\x68\141\163\151\x6c\x20\155\145\156\x64\141\x70\141\164\x6b\141\156\40\152\x61\x77\x61\x62\x61\x6e\x20\x75\156\164\165\x6b\x20\142\141\x67\x69\141\156\40{$partNumber}\41{$p}\12"; $allAnswers[$partNumber] = $answers; $allResponses[] = array("\160\x61\x72\164" => $partNumber, "\163\164\x61\x74\165\163" => "\163\x75\x63\x63\145\163\x73", "\x61\156\x73\x77\145\x72\163\x5f\143\x6f\165\156\x74" => count(explode("\12", trim($answers))), "\x69\155\141\147\145\163\x5f\163\145\156\x74" => $imageCount); $partAnswersPath = $downloadDir . "\x2f\112\x41\127\x41\x42\101\116\x5f\102\101\x47\x49\101\x4e\137{$partNumber}\x5f" . date("\x59\155\144\137\110\x69\x73") . "\56\x74\x78\x74"; $partAnswersContent = "\112\101\127\101\102\101\x4e\x20\x47\x45\115\111\x4e\x49\40\x41\120\111\40\x2d\40\x42\x41\x47\111\101\x4e\x20{$partNumber}\xa"; $partAnswersContent .= "\75\x3d\x3d\75\x3d\x3d\75\75\x3d\x3d\75\75\x3d\x3d\75\x3d\x3d\x3d\75\75\x3d\x3d\x3d\x3d\x3d\x3d\x3d\75\x3d\x3d\75\x3d\75\x3d\75\75\x3d\12\xa"; $partAnswersContent .= "\x50\145\x72\164\x61\156\171\141\141\x6e\x3a\x20{$part["\163\x74\x61\162\164\x5f\147\154\157\x62\x61\x6c"]}\x20\x73\141\155\x70\x61\x69\x20{$part["\x65\156\144\x5f\x67\x6c\157\142\141\154"]}\xa"; $partAnswersContent .= "\x54\141\x6e\x67\147\x61\x6c\x3a\40" . date("\131\55\155\x2d\x64\40\110\72\151\72\163") . "\12"; $partAnswersContent .= "\107\x61\155\142\141\x72\40\144\151\153\x69\162\x69\x6d\72\40" . $imageCount . "\12"; $partAnswersContent .= "\107\141\x6d\142\141\162\x20\171\141\156\147\x20\x64\151\x6b\x69\162\x69\x6d\x3a\12"; foreach ($relevantImages as $imgPath) { if (file_exists($imgPath)) { $partAnswersContent .= "\55\x20" . basename($imgPath) . "\xa"; } } $partAnswersContent .= "\xa" . str_repeat("\342\x95\220", 60) . "\xa\xa"; $partAnswersContent .= $answers; file_put_contents($partAnswersPath, $partAnswersContent); echo "{$h}\342\234\223\40\112\x61\x77\x61\x62\x61\x6e\40\x62\141\147\151\141\156\x20{$partNumber}\40\x64\151\163\151\155\160\141\x6e\40\x6b\x65\72\40" . basename($partAnswersPath) . "{$p}\12"; echo "\xa{$bta}\x50\162\x65\x76\x69\x65\167\x20\x4a\x61\x77\141\x62\141\156\40\x42\141\147\151\x61\156\40{$partNumber}\x3a{$p}\xa"; echo "{$u}" . str_repeat("\x2d", 60) . "{$p}\xa"; $lines = explode("\12", $answers); $previewCount = 0; foreach ($lines as $line) { if (trim($line) && !preg_match("\57\136\x5b\x3d\x5f\55\x5d\x2f", trim($line))) { echo "{$p}" . $line . "{$p}\12"; $previewCount++; if ($previewCount >= 5) { echo "{$ab}\56\56\56\x20\x28\154\x61\x6e\152\x75\164\x6b\x61\156\40\144\151\40\x66\151\x6c\145\x20\154\x65\x6e\147\x6b\x61\x70\51{$p}\12"; break; } } } if ($partNumber < count($questionsParts)) { echo "\xa{$k}\x4c\141\156\x6a\165\x74\x6b\x61\x6e\x20\153\145\40\x62\141\147\x69\141\x6e\x20\x62\145\x72\151\153\x75\x74\x6e\171\141\x3f\x20\x28\131\x2f\x6e\51\72\40{$p}"; $continue = trim(fgets(STDIN)); if (strtolower($continue ?: "\x79") !== "\x79") { break; } echo "{$k}\115\145\x6e\165\156\x67\147\165\40\x35\x20\x64\145\x74\151\x6b\40\163\145\142\145\x6c\165\x6d\x20\x6d\145\x6c\141\x6e\x6a\x75\x74\x6b\x61\x6e\56\x2e\x2e{$p}\12"; sleep(5); } } else { echo "{$m}\342\x9c\227\40\x54\151\x64\141\153\x20\155\145\x6e\144\141\x70\141\164\x6b\x61\x6e\40\x6a\x61\x77\141\142\141\x6e\x20\171\141\x6e\147\x20\166\x61\154\x69\144\x20\165\156\164\x75\x6b\40\x62\x61\x67\151\141\156\x20{$partNumber}{$p}\12"; echo "{$k}\x52\145\x73\160\x6f\x6e\163\145\x20\163\x74\x72\165\143\164\165\x72\x65\x3a{$p}\12"; echo json_encode($responseData, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE); $allResponses[] = array("\160\x61\x72\164" => $partNumber, "\163\164\x61\164\165\163" => "\x6e\157\137\166\x61\x6c\x69\x64\x5f\x61\x6e\163\x77\145\162", "\162\145\163\160\157\x6e\163\x65" => substr(json_encode($responseData), 0, 500)); if ($partNumber < count($questionsParts)) { echo "\xa{$k}\114\141\156\x6a\x75\x74\153\141\x6e\x20\153\145\x20\142\141\x67\151\141\156\40\142\145\162\151\153\165\164\x6e\171\141\x3f\40\x28\x59\57\x6e\x29\x3a\x20{$p}"; $continue = trim(fgets(STDIN)); if (strtolower($continue ?: "\x79") !== "\171") { break; } } } } if (!empty($allAnswers)) { $combinedAnswers = "\112\x41\127\x41\102\101\116\40\107\x45\115\x49\116\111\40\101\x50\x49\40\55\40\123\x45\x4d\x55\x41\40\102\x41\107\x49\101\x4e\12"; $combinedAnswers .= "\75\75\75\x3d\x3d\x3d\x3d\75\x3d\75\x3d\75\75\75\75\75\75\x3d\75\75\x3d\75\x3d\x3d\75\x3d\x3d\x3d\75\75\x3d\75\xa\xa"; $combinedAnswers .= "\x54\157\x74\141\x6c\x20\102\x61\147\x69\x61\x6e\x3a\40" . count($allAnswers) . "\12"; $combinedAnswers .= "\124\157\x74\x61\x6c\40\120\145\162\x74\141\x6e\171\x61\x61\x6e\72\40{$totalQuestions}\12"; $combinedAnswers .= "\x54\141\x6e\x67\x67\141\154\x3a\40" . date("\x59\55\155\55\x64\x20\x48\x3a\151\x3a\163") . "\12\xa"; $combinedAnswers .= "\123\x54\101\124\111\123\x54\x49\113\x20\x50\x45\116\107\111\x52\111\115\101\x4e\72\12"; $combinedAnswers .= str_repeat("\x2d", 40) . "\xa"; foreach ($allResponses as $resp) { $status = $resp["\163\x74\141\164\165\x73"] == "\163\x75\143\143\145\x73\x73" ? "\xe2\234\223\40\102\105\x52\110\x41\x53\111\x4c" : "\342\x9c\227\x20\x47\x41\107\101\x4c"; $images = isset($resp["\x69\x6d\x61\x67\x65\x73\x5f\x73\145\156\164"]) ? "\x20\x28{$resp["\151\x6d\141\x67\x65\x73\x5f\163\145\x6e\164"]}\40\x67\x61\155\x62\x61\162\51" : ''; $combinedAnswers .= "\102\141\147\151\141\x6e\40{$resp["\160\x61\162\x74"]}\72\40{$status}{$images}\xa"; } $combinedAnswers .= "\12" . str_repeat("\342\225\220", 60) . "\xa\xa"; ksort($allAnswers); foreach ($allAnswers as $partNumber => $answers) { $combinedAnswers .= "\xa" . str_repeat("\xe2\x95\x90", 60) . "\12"; $combinedAnswers .= "\x42\101\x47\111\x41\x4e\x20{$partNumber}\xa"; $combinedAnswers .= str_repeat("\xe2\x95\220", 60) . "\12\xa"; $combinedAnswers .= $answers . "\12"; } $combinedAnswersPath = $downloadDir . "\x2f\112\x41\127\101\x42\x41\116\137\107\105\x4d\x49\116\x49\137\x4c\x45\x4e\107\x4b\101\x50\137" . date("\x59\x6d\144\x5f\110\151\163") . "\56\164\x78\x74"; file_put_contents($combinedAnswersPath, $combinedAnswers); echo "\12{$bta}" . str_repeat("\342\x95\x90", 60) . "{$p}\xa"; echo "{$h}\x50\x45\x4e\x47\x49\x52\111\115\x41\116\40\123\105\114\x45\x53\x41\x49\41{$p}\12"; echo "{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; echo "{$h}\342\234\223\40\x54\157\164\141\154\40\142\141\x67\151\x61\156\x20\142\x65\162\150\x61\x73\151\x6c\x3a\x20" . count($allAnswers) . "\x20\x64\141\x72\x69\40" . count($questionsParts) . "{$p}\xa"; echo "{$h}\xe2\234\x93\x20\x4a\x61\x77\x61\x62\141\x6e\40\154\145\156\147\153\141\160\x20\x64\x69\x73\151\x6d\x70\x61\x6e\x20\153\x65\72\40{$combinedAnswersPath}{$p}\12"; echo "\12{$k}\x53\124\101\x54\111\x53\x54\x49\x4b\40\x50\105\x4e\x47\111\x52\111\115\101\x4e\72{$p}\xa"; $successCount = 0; $totalImages = 0; foreach ($allResponses as $response) { $statusColor = $response["\163\164\x61\164\x75\163"] === "\x73\165\x63\143\145\x73\x73" ? "{$h}" : "{$m}"; echo "{$statusColor}\x42\141\147\151\x61\x6e\x20{$response["\160\x61\162\164"]}\x3a\x20{$response["\163\164\x61\x74\x75\163"]}{$p}\12"; if ($response["\163\x74\141\x74\165\163"] === "\x73\x75\143\x63\145\x73\x73") { $successCount++; $totalImages += $response["\151\x6d\141\147\x65\163\137\x73\145\x6e\x74"] ?? 0; echo "\x20\x20\x2d\x20\112\141\167\141\x62\x61\156\72\40{$response["\141\x6e\x73\167\145\x72\x73\x5f\143\157\x75\156\164"]}\40\142\x61\162\151\163\12"; echo "\x20\40\x2d\x20\107\x61\x6d\142\141\162\x3a\40{$response["\x69\x6d\141\x67\145\x73\137\163\x65\x6e\164"]}\x20\x67\141\155\142\x61\162\12"; } else { echo "\x20\x20\x2d\40\x45\162\162\x6f\x72\72\x20" . ($response["\x65\x72\162\157\x72\137\155\145\163\163\x61\147\145"] ?? "\x55\x6e\x6b\x6e\x6f\167\156\40\145\162\162\157\x72") . "\12"; } } echo "\xa{$h}\122\x49\116\107\113\101\123\101\116\x3a{$p}\12"; echo "{$k}\102\x61\x67\x69\141\156\40\142\x65\162\x68\x61\163\x69\x6c\x3a\x20{$successCount}\57{$p}" . count($questionsParts) . "\12"; echo "{$k}\x54\x6f\164\x61\154\x20\147\141\155\142\141\x72\x20\144\151\153\151\x72\x69\155\x3a\40{$totalImages}{$p}\12"; return array("\x73\165\x63\x63\x65\x73\x73" => true, "\x74\x6f\164\x61\154\137\x70\x61\x72\164\163" => count($questionsParts), "\x73\165\143\143\145\163\163\146\165\x6c\137\160\141\x72\x74\163" => count($allAnswers), "\x63\x6f\155\x62\x69\x6e\145\144\137\x66\x69\154\145" => $combinedAnswersPath, "\160\x61\x72\164\137\146\x69\154\145\x73" => $allAnswers, "\x72\x65\x73\x70\x6f\x6e\163\x65\x73" => $allResponses, "\x74\157\x74\141\x6c\x5f\x69\x6d\x61\x67\145\163\x5f\163\x65\156\164" => $totalImages); } else { echo "{$m}\342\x9c\x97\x20\x54\x69\144\x61\153\40\x61\x64\x61\40\x6a\x61\x77\x61\142\141\x6e\40\171\x61\x6e\x67\40\x62\x65\x72\x68\x61\x73\x69\154\40\144\x69\x64\x61\x70\x61\164\x6b\141\x6e{$p}\xa"; return array("\x73\x75\x63\143\x65\163\163" => false, "\x65\162\162\157\x72" => "\116\x6f\40\141\156\x73\167\x65\162\x73\40\162\x65\143\x65\151\x76\x65\144", "\x72\x65\163\160\157\156\x73\145\163" => $allResponses); } } goto h4KOi; bQxti: function displayMatchQuestions($questions, $filename) { global $h, $m, $p, $k, $u, $bta; $questionCount = count($questions); echo "\12{$u}" . str_repeat("\xe2\225\x90", 60) . "{$p}\xa"; echo "{$k}\x46\111\114\105\72\x20{$filename}\40{$ab}\x28{$questionCount}\x20\x70\x65\162\164\141\x6e\x79\141\141\x6e\40\144\162\x6f\x70\x64\x6f\x77\156\51{$p}\12"; echo "{$u}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; foreach ($questions as $index => $question) { $questionNum = $index + 1; echo "\12{$bg}" . str_repeat("\x2d", 60) . "{$p}\xa"; echo "{$bta}\120\105\x52\124\x41\x4e\131\101\101\116\40\104\122\x4f\120\x44\x4f\127\116\40\43{$question["\156\165\155\x62\x65\162"]}{$p}\xa"; echo "{$k}\123\164\x61\x74\165\163\72\40{$question["\163\164\x61\164\145"]}\x20\174\40\116\151\x6c\x61\151\x3a\x20{$question["\147\x72\141\x64\x65"]}{$p}\12"; echo "{$bg}" . str_repeat("\x2d", 40) . "{$p}\12"; if (!empty($question["\164\145\x78\164"])) { $textLines = explode("\xa", wordwrap(strip_tags($question["\164\x65\x78\164"]), 75, "\xa")); echo "{$p}"; foreach ($textLines as $line) { echo $line . "\12"; } echo "{$p}"; } if (!empty($question["\141\156\163\x77\x65\x72\163"])) { echo "\12{$h}\133\x49\124\x45\x4d\x2d\111\x54\x45\115\40\x50\x45\x52\124\x41\116\131\101\101\x4e\x5d\72{$p}\12"; foreach ($question["\x61\156\x73\167\x65\x72\x73"] as $answer) { $statusIndicator = $answer["\151\163\137\x61\156\163\167\145\162\x65\144"] ? "{$h}\342\234\223{$p}" : "{$m}\xe2\234\x97{$p}"; echo "\xa{$statusIndicator}\40{$p}{$answer["\x6c\145\164\x74\x65\162"]}\x2e\40{$answer["\x71\x75\x65\163\164\x69\157\156\137\164\x65\x78\x74"]}{$p}\xa"; if ($answer["\x69\163\137\x61\156\163\x77\145\x72\145\x64"]) { echo "\x20\40\40{$h}\xe2\206\x92\40\104\x69\160\151\x6c\151\150\72\x20{$answer["\163\145\154\x65\143\164\x65\144\137\x74\x65\170\x74"]}\x20\x28\x76\141\154\x75\x65\72\40{$answer["\x73\145\x6c\x65\x63\164\145\144\x5f\x76\141\154\x75\145"]}\x29{$p}\xa"; } else { echo "\x20\40\x20{$m}\xe2\x86\222\40\x42\x65\154\165\x6d\x20\x64\x69\152\141\167\141\x62\x20\50\x43\x68\x6f\157\163\145\x2e\x2e\x2e\x29{$p}\12"; } if ($answer["\x6c\145\x74\x74\x65\162"] == "\x41" && !empty($answer["\x61\x6c\x6c\x5f\x6f\160\x74\x69\x6f\x6e\163"])) { echo "\x20\40\x20{$ab}\40\x20\x20\117\160\163\x69\40\164\145\x72\163\x65\x64\151\x61\72{$p}\xa"; foreach ($answer["\x61\154\x6c\137\157\x70\164\151\x6f\156\x73"] as $value => $text) { echo "\x20\x20\x20{$ab}\40\x20\x20\40\x20{$value}\56\x20{$text}{$p}\xa"; } } } } if (!empty($question["\x63\x6f\x72\x72\145\x63\164\137\x61\156\x73\x77\145\162"]) && is_array($question["\143\x6f\x72\162\x65\143\x74\137\x61\156\163\167\145\x72"])) { echo "\xa{$h}\x5b\112\x41\127\101\x42\101\116\x20\131\101\x4e\x47\x20\x44\111\120\x49\114\111\x48\135\x3a{$p}\xa"; foreach ($question["\x63\157\162\162\145\x63\164\137\141\x6e\163\x77\145\162"] as $index => $correct) { $itemNum = $index + 1; echo "{$p}\40\40{$itemNum}\x2e\40{$correct["\x71\x75\x65\163\164\x69\157\x6e"]}{$p}\12"; echo "{$h}\x20\x20\x20\40\x20\xe2\x86\222\x20{$correct["\141\156\163\167\145\x72"]}\x20\x28\x76\x61\x6c\x75\145\x3a\40{$correct["\166\x61\154\165\145"]}\51{$p}\xa"; } } echo "\xa{$bg}" . str_repeat("\x2d", 60) . "{$p}\xa"; } } goto DVvxf; h4KOi: function createEnhancedQuestionTextWithImageRef($questionsPart) { $output = str_repeat("\342\x95\x90", 60) . "\12"; $output .= "\102\x41\x47\x49\x41\x4e\x20{$questionsPart["\x70\141\x72\164\x5f\156\x75\155\x62\x65\162"]}\x20\55\40\x50\105\122\x54\x41\116\x59\x41\101\x4e\40{$questionsPart["\163\x74\x61\x72\164\x5f\x67\x6c\x6f\x62\141\154"]}\x20\x73\141\x6d\160\141\151\x20{$questionsPart["\145\x6e\144\x5f\147\x6c\x6f\x62\141\154"]}\xa"; $output .= str_repeat("\xe2\225\x90", 60) . "\12\xa"; $output .= "\111\116\x53\x54\122\125\113\123\x49\x20\113\x48\x55\x53\x55\x53\72\xa"; $output .= "\61\56\x20\102\x65\x62\145\x72\141\160\x61\x20\160\145\162\164\x61\156\x79\141\141\156\40\x6d\145\155\x69\154\151\x6b\151\40\107\x41\115\102\101\122\x20\x72\x65\146\x65\162\x65\156\163\151\12"; $output .= "\62\x2e\40\x47\x61\155\142\x61\x72\40\141\153\x61\x6e\x20\144\x69\153\151\x72\151\155\x20\x73\145\x62\141\x67\141\151\x20\146\151\154\145\40\x74\145\x72\x70\151\163\x61\x68\x20\142\x65\x72\163\141\x6d\141\141\x6e\40\x64\145\x6e\147\x61\x6e\40\x74\x65\x6b\x73\40\151\x6e\151\12"; $output .= "\63\56\x20\x4e\x61\155\141\40\146\151\154\145\x20\147\x61\155\142\141\x72\40\x6d\145\x6e\147\151\x6b\165\x74\x69\x20\x70\x6f\154\141\72\40\161\133\161\165\145\x73\x74\151\x6f\156\x5f\x69\x64\x5d\x5f\x69\x6d\x67\x5b\156\x75\155\x62\145\162\135\x2e\x65\x78\164\12"; $output .= "\64\x2e\x20\103\x6f\x6e\x74\157\150\x3a\40\161\61\x32\x33\137\151\155\147\61\56\x6a\x70\x67\x20\x61\144\x61\x6c\x61\x68\x20\x67\141\x6d\142\x61\162\40\x75\x6e\x74\x75\x6b\40\x70\145\162\164\x61\156\x79\x61\141\156\x20\144\145\156\x67\x61\x6e\40\111\x44\40\61\x32\63\xa"; $output .= "\x35\x2e\40\x47\x75\156\141\x6b\141\156\40\151\156\146\157\162\155\141\x73\151\x20\x64\x61\162\x69\x20\x67\141\155\142\x61\162\40\165\156\164\165\153\40\155\145\156\152\141\x77\x61\142\x20\160\145\x72\164\x61\156\171\141\141\156\x20\152\x69\x6b\x61\40\144\x69\x70\x65\162\x6c\165\153\x61\156\12\xa"; $output .= str_repeat("\55", 80) . "\12\xa"; foreach ($questionsPart["\161\x75\x65\163\x74\x69\157\x6e\x73"] as $item) { $question = $item["\x71\165\x65\x73\164\x69\157\x6e"]; $globalNumber = $item["\x67\x6c\157\x62\x61\154\137\156\165\155\x62\x65\x72"]; $output .= str_repeat("\xe2\225\220", 60) . "\xa"; $output .= sprintf("\120\105\122\x54\101\116\131\101\x41\116\40\x23\45\60\x33\144\40\x28\111\x44\x3a\40\x25\x73\x20\174\x20\101\163\x6c\151\x3a\x20\43\x25\x73\x29\xa", $globalNumber, $question["\x69\144"], $question["\156\165\155\x62\145\x72"]); $choiceTypeLabel = ''; if ($question["\164\171\x70\x65"] === "\155\165\154\x74\x69\x63\x68\x6f\x69\x63\145") { $choiceTypeLabel = isset($question["\x69\x73\137\155\165\x6c\164\x69\x70\154\145\137\x61\x6e\x73\167\x65\x72"]) && $question["\151\163\x5f\x6d\165\154\164\x69\x70\x6c\x65\x5f\x61\x6e\x73\167\145\x72"] ? "\x4d\x75\154\x74\x69\x70\154\145\x20\x43\150\157\x69\143\145" : "\x53\x69\x6e\147\x6c\x65\x20\103\x68\157\151\143\x65"; } $output .= sprintf("\x4a\145\x6e\151\x73\x3a\x20\45\55\x31\65\163\x20\174\40\x54\151\x70\x65\72\x20\x25\x2d\61\x35\163\12", $question["\164\171\x70\x65"], $choiceTypeLabel); $output .= str_repeat("\55", 80) . "\12\12"; $cleanText = strip_tags($question["\164\145\170\164"]); $cleanText = html_entity_decode($cleanText, ENT_QUOTES | ENT_HTML5, "\x55\124\106\55\70"); $output .= "\124\x45\113\x53\40\120\105\x52\124\x41\116\x59\x41\x41\x4e\x3a\12"; $output .= wordwrap($cleanText, 78, "\xa") . "\xa\xa"; if (!empty($question["\151\155\x61\147\145\163"])) { $output .= "\122\x45\x46\105\122\105\116\123\111\x20\x47\x41\x4d\102\101\x52\x3a\xa"; $output .= "\x28\107\141\x6d\142\x61\x72\40\141\153\141\x6e\x20\x64\151\x6b\x69\x72\151\155\40\x73\x65\142\x61\147\141\x69\40\146\151\x6c\145\40\x74\x65\162\x70\x69\163\x61\150\51\12"; $output .= str_repeat("\x2d", 40) . "\xa"; foreach ($question["\x69\x6d\141\x67\x65\163"] as $idx => $image) { $imgNum = $idx + 1; $expectedFilename = sprintf("\x71\x25\163\x5f\x69\155\147\45\x64\x5f\x25\163\x2e\x25\163", $question["\x69\144"], $imgNum, substr(md5($image["\x73\162\x63"] ?? ''), 0, 8), pathinfo($image["\146\x69\x6c\x65\x6e\x61\155\145"] ?? "\x69\155\141\x67\x65\56\x6a\x70\x67", PATHINFO_EXTENSION)); $output .= sprintf("\107\x61\155\142\x61\x72\x20\45\x64\72\x20\45\163\xa", $imgNum, $image["\x61\x6c\164"] ?? "\x67\x61\155\142\x61\162\40\162\x65\x66\x65\162\x65\156\x73\151"); $output .= sprintf("\x20\40\x46\x69\x6c\145\72\x20\45\163\xa", $expectedFilename); $output .= sprintf("\x20\x20\113\145\164\145\162\x61\156\147\141\x6e\72\x20\45\163\12", $image["\141\x6c\x74"] ?? "\107\141\x6d\142\141\x72\40\165\x6e\164\165\x6b\40\160\x65\x72\x74\141\x6e\171\141\141\x6e\40\151\156\151"); $output .= "\12"; } } if (!empty($question["\x61\x6e\163\x77\145\x72\x73"])) { switch ($question["\164\x79\x70\x65"]) { case "\155\x61\x74\143\150": case "\x64\162\x6f\160\144\x6f\167\156": $output .= formatMatchAnswersForText($question); break; case "\155\165\154\164\151\143\x68\157\x69\x63\145": case "\x74\x72\x75\x65\146\x61\x6c\x73\145": $output .= formatChoiceAnswersForText($question); break; case "\x65\163\x73\x61\171": case "\163\150\157\x72\x74\x61\156\x73\167\x65\162": $output .= formatTextAnswersForText($question); break; default: $output .= formatGenericAnswersForText($question); } } if ($question["\x61\156\x73\167\x65\162\x5f\163\141\x76\145\144"]) { $output .= "\xe2\x9c\223\x20\x4a\x61\167\141\x62\x61\x6e\x20\x74\145\154\141\150\x20\144\151\x73\x69\x6d\160\141\x6e\40\144\x69\x20\163\x69\163\164\x65\x6d\xa"; } $output .= "\xa" . str_repeat("\55", 80) . "\xa\12"; $output .= "\342\xac\x87\342\254\x87\342\xac\207\x20\x50\x45\x52\x54\101\116\x59\x41\x41\116\x20\123\x45\114\x41\116\x4a\x55\x54\116\x59\101\x20\xe2\254\207\342\254\x87\342\xac\x87\12\xa"; } return $output; } goto KS4Ar; xeByg: function help() { global $h, $p, $k, $m; system("\143\x6c\145\141\162"); echo "\xa{$k}\342\225\x94\342\225\x90\xe2\x95\x90\xe2\x95\x90\xe2\225\220\xe2\x95\x90\xe2\x95\x90\xe2\225\x90\342\225\x90\xe2\225\220\342\225\x90\xe2\225\220\342\x95\220\xe2\x95\220\xe2\225\x90\342\225\x90\342\x95\x90\xe2\x95\x90\342\225\x90\xe2\225\x90\342\225\220\xe2\x95\x90\342\225\x90\342\225\220\xe2\225\220\342\x95\220\xe2\x95\x90\xe2\x95\x90\342\225\220\xe2\225\220\xe2\x95\x90\342\225\220\xe2\x95\x90\xe2\225\220\342\225\x90\342\225\x90\342\225\220\342\225\220\342\x95\x90\xe2\225\220\xe2\225\x90\xe2\x95\x90\xe2\225\220\342\225\x90\342\x95\220\xe2\x95\x90\342\x95\220\xe2\x95\220\342\x95\x90\342\225\x90\342\225\x90\xe2\x95\x90\342\225\220\xe2\x95\220\342\225\x90\xe2\x95\x90\342\x95\x90\342\x95\220\xe2\x95\x97{$p}\xa"; echo "{$k}\342\225\x91\x20\40\40\x20\x20\x20\x20\x20\40\x20\40\40\x20\x20\40\40\x20\x48\x45\114\120\x20\55\40\103\101\122\x41\x20\x50\x45\x4e\x47\107\x55\116\101\x41\x4e\x20\x20\x20\40\x20\x20\x20\x20\40\x20\40\40\40\x20\40\x20\40\x20\342\225\x91{$p}\12"; echo "{$k}\xe2\x95\x9a\xe2\x95\220\xe2\x95\220\xe2\225\x90\xe2\x95\220\342\x95\220\xe2\x95\x90\342\x95\x90\342\x95\220\xe2\225\x90\xe2\x95\220\xe2\225\220\xe2\225\220\342\x95\220\342\x95\x90\342\x95\220\342\225\x90\xe2\225\x90\xe2\225\x90\342\225\x90\342\225\x90\342\x95\x90\xe2\x95\220\342\225\220\xe2\225\220\xe2\x95\x90\xe2\x95\x90\xe2\x95\220\xe2\225\220\xe2\225\220\342\x95\x90\xe2\225\x90\342\x95\220\xe2\225\x90\342\225\220\xe2\225\220\342\x95\x90\342\x95\220\xe2\225\220\342\x95\x90\xe2\225\x90\342\225\x90\342\x95\x90\xe2\x95\x90\342\225\220\342\x95\x90\xe2\x95\220\xe2\x95\220\xe2\225\220\xe2\x95\x90\342\x95\x90\342\225\x90\xe2\225\x90\342\225\x90\xe2\225\x90\xe2\225\x90\xe2\x95\220\342\x95\220\342\225\x9d{$p}\xa"; echo "\xa{$h}\xf0\237\223\x8c\40\x4c\x41\116\x47\113\x41\110\x20\x44\x41\x53\101\x52\x3a{$p}\xa"; echo "{$k}\x31\x2e\40{$p}\x4c\x6f\147\151\156\40\166\x69\x61\x20\x6d\145\x6e\165\40\x27\x4c\x6f\147\x69\x6e\x20\153\x65\x20\x45\55\114\145\141\x72\156\151\156\147\x27{$p}\xa"; echo "{$k}\62\56\40{$p}\104\141\x70\x61\x74\153\x61\x6e\x20\x41\164\164\145\155\x70\x74\x20\111\x44\40\46\40\103\x4d\111\x44\x20\50\154\x69\x68\x61\x74\x20\143\x61\162\x61\40\144\x69\40\142\141\x77\141\150\x29{$p}\12"; echo "{$k}\63\56\40{$p}\120\x69\154\151\150\40\47\123\143\162\x61\x70\x69\x6e\x67\x20\x26\x20\x45\x6b\163\164\x72\x61\153\163\151\x20\x53\x6f\141\154\47\40\x64\x69\x20\x6d\145\x6e\165\x20\165\164\x61\x6d\141{$p}\12"; echo "{$k}\64\x2e\40{$p}\115\x61\x73\x75\153\x6b\141\156\40\x41\164\164\145\155\x70\x74\x20\x49\x44\x20\x64\x61\x6e\40\x43\x4d\111\x44{$p}\12"; echo "{$k}\x35\56\40{$p}\120\x69\x6c\x69\150\40\x6f\x70\163\x69\x20\171\x61\x6e\x67\40\x64\x69\x69\x6e\x67\x69\x6e\153\x61\x6e{$p}\12"; echo "{$k}\66\x2e\40{$p}\124\165\156\x67\147\x75\x20\x70\x72\157\163\x65\163\40\163\x65\154\145\163\141\x69\x2c\40\150\x61\163\151\x6c\40\x61\x64\141\40\x64\151\40\x66\x6f\x6c\144\145\162\40\x27\144\x6f\167\x6e\154\157\141\144\57\47{$p}\xa"; echo "\xa{$h}\360\x9f\216\xaf\40\103\101\122\101\x20\x44\x41\120\101\x54\113\x41\x4e\40\x41\x54\x54\x45\115\x50\x54\40\111\x44\40\x26\40\103\x4d\111\x44\72{$p}\12"; echo "{$k}\xe2\200\xa2\40{$p}\x42\x75\x6b\141\40\161\x75\151\172\40\x64\151\40\142\x72\x6f\x77\x73\145\162{$p}\12"; echo "{$k}\xe2\x80\242\40{$p}\x50\x65\x72\x68\141\x74\151\153\141\x6e\40\125\122\x4c\40\163\145\x74\x65\154\141\x68\x20\153\x6c\x69\153\40\47\x41\x74\164\145\155\160\x74\40\161\165\151\x7a\x27{$p}\xa"; echo "{$k}\xe2\200\242\x20{$p}\x43\x6f\x6e\x74\x6f\150\x20\125\x52\x4c\x3a\x20{$p}\56\56\56\x2f\141\x74\164\x65\x6d\160\164\x2e\160\150\x70\77{$k}\x61\164\164\145\x6d\160\164\75\61\62\63\x34\x35{$p}\46{$k}\x63\155\x69\144\x3d\66\67\x38\71\x30{$p}\x26\160\141\147\x65\x3d\x30{$p}\xa"; echo "{$k}\342\200\xa2\x20{$p}\x44\141\162\x69\40\125\x52\x4c\40\164\145\162\x73\x65\x62\165\164\72{$p}\12"; echo "\x20\40\40\40{$h}\x41\x74\164\x65\x6d\160\x74\x20\x49\x44\x20\75\x20\x31\62\x33\64\x35{$p}\xa"; echo "\40\40\40\40{$h}\x43\x4d\111\x44\x20\x3d\x20\x36\x37\70\x39\x30{$p}\xa"; echo "\12{$h}\xf0\x9f\x93\x81\x20\x48\101\123\111\x4c\x20\101\x4b\101\116\40\104\x49\x53\111\x4d\120\x41\x4e\x20\x44\x49\72{$p}\xa"; echo "{$k}\342\200\242\40{$p}\144\x6f\167\156\x6c\x6f\x61\144\x2f\144\x61\x73\x68\x62\x6f\x61\x72\144\x2e\150\x74\155\x6c\x20\x20\40\40\x20\40\55\x20\104\x61\163\150\x62\157\141\162\x64\x20\x65\x2d\154\x65\x61\x72\x6e\x69\156\x67{$p}\xa"; echo "{$k}\342\200\242\40{$p}\x64\157\167\x6e\x6c\157\x61\144\57\x6b\145\162\152\141\x30\56\150\x74\x6d\154\x20\40\x20\40\x20\40\40\x20\x20\55\x20\x48\141\x6c\141\x6d\x61\x6e\x20\x73\157\141\x6c{$p}\12"; echo "{$k}\xe2\x80\xa2\x20{$p}\x64\157\x77\x6e\x6c\157\x61\144\57\123\x45\115\125\101\137\120\x45\x52\124\x41\x4e\131\101\x41\x4e\x2e\x74\170\164\40\x2d\x20\107\x61\x62\165\x6e\x67\141\x6e\40\x73\x65\x6d\x75\141\40\163\157\x61\154{$p}\12"; echo "{$k}\342\x80\242\40{$p}\x64\x6f\167\x6e\154\x6f\141\x64\57\x69\x6d\141\147\x65\x73\x2f\40\40\40\x20\x20\x20\x20\40\40\x20\x20\x20\x20\55\x20\x46\157\154\144\x65\x72\40\x67\x61\155\x62\x61\x72\40\x73\x6f\x61\154{$p}\xa"; echo "\12{$h}\360\237\xa4\x96\40\107\105\x4d\111\x4e\x49\40\101\x50\111\40\50\x4f\120\123\x49\117\x4e\x41\114\51\72{$p}\xa"; echo "{$k}\342\x80\xa2\40{$p}\x44\x61\160\x61\x74\x6b\x61\x6e\x20\x41\120\111\40\x64\x61\x72\151\x3a\40\150\164\164\160\163\x3a\57\57\155\141\153\145\x72\x73\x75\x69\x74\145\x2e\x67\157\x6f\x67\154\x65\56\143\157\155\57\x61\x70\x70\x2f\x61\x70\151\153\x65\x79{$p}\12"; echo "{$k}\xe2\x80\xa2\40{$p}\x53\x69\155\x70\141\x6e\x20\101\120\111\40\113\145\x79\x20\166\x69\141\40\x6d\x65\156\x75\40\x27\x4d\141\156\141\x67\145\x20\107\x45\x4d\x49\x4e\x49\40\x41\120\111\40\x4b\x65\x79\x27{$p}\xa"; echo "{$k}\xe2\x80\242\x20{$p}\x4f\x74\157\155\x61\x74\151\x73\x20\144\x61\160\x61\x74\40\152\x61\167\141\x62\141\x6e\40\101\111\40\163\145\x74\x65\x6c\x61\x68\40\x73\143\x72\x61\x70\151\156\x67\40\x73\x65\x6c\145\163\x61\x69{$p}\xa"; echo "\xa{$h}\342\232\xa1\x20\124\x49\120\123\40\x43\105\x50\x41\x54\72{$p}\xa"; echo "{$k}\342\200\xa2\40{$p}\101\164\164\145\155\160\x74\40\111\x44\40\142\x65\162\x75\142\x61\150\x20\164\151\x61\x70\x20\155\x75\154\141\151\40\141\164\x74\x65\x6d\x70\164\x20\x62\141\162\x75{$p}\12"; echo "{$k}\xe2\x80\xa2\x20{$p}\103\115\x49\104\x20\164\145\x74\x61\160\x20\x75\156\164\x75\x6b\40\x71\165\x69\172\x20\171\141\x6e\x67\40\163\141\155\x61{$p}\xa"; echo "{$k}\342\200\xa2\x20{$p}\x55\x6e\164\x75\x6b\x20\x73\157\141\x6c\40\x62\x61\x6e\171\141\153\40\x28\76\63\x30\x29\54\x20\x62\x61\147\151\40\x6a\x61\144\151\40\62\55\x33\x20\142\141\x67\x69\141\x6e{$p}\12"; echo "{$k}\342\x80\242\x20{$p}\x43\157\x6f\x6b\151\145\x20\x62\145\162\x6c\x61\153\x75\40\142\145\x62\x65\162\x61\x70\x61\40\152\141\x6d\54\x20\154\157\x67\151\x6e\40\165\x6c\141\x6e\x67\40\x6a\x69\153\141\x20\145\170\160\x69\x72\x65\x64{$p}\12"; echo "\12{$h}\xe2\235\x93\x20\x4d\x41\123\101\114\101\x48\x20\125\x4d\125\115\72{$p}\12"; echo "{$m}\xe2\200\xa2\40\x4c\x6f\147\151\x6e\x20\x67\141\147\141\x6c\x3f\x20{$p}\103\157\142\x61\40\154\x6f\x67\x69\156\x20\165\x6c\141\x6e\x67{$p}\xa"; echo "{$m}\342\200\xa2\x20\x49\x6e\166\141\x6c\151\144\40\141\x74\164\145\155\x70\164\77\40{$p}\104\x61\160\x61\x74\x6b\x61\x6e\x20\141\164\164\145\x6d\160\x74\40\111\x44\40\171\141\156\x67\x20\x62\141\162\x75{$p}\12"; echo "{$m}\342\x80\242\40\x53\x6f\141\x6c\x20\x73\145\x64\151\153\x69\164\x3f\x20{$p}\124\x61\x6d\x62\141\150\40\x6a\165\155\x6c\x61\150\x20\163\157\141\x6c\40\144\x69\40\151\156\160\x75\x74{$p}\xa"; echo "{$m}\342\200\xa2\x20\101\x50\x49\40\113\145\x79\40\145\162\x72\157\x72\x3f\40{$p}\103\x65\x6b\40\166\x69\141\x20\x6d\145\x6e\x75\40\x4d\x61\156\141\x67\145\40\x41\120\111\x20\x4b\145\171{$p}\12"; echo "\12{$k}\xe2\x95\224\342\x95\x90\xe2\225\x90\xe2\225\x90\xe2\x95\220\342\225\220\342\x95\x90\342\x95\220\xe2\x95\220\xe2\225\220\xe2\x95\220\xe2\225\220\xe2\225\220\xe2\x95\x90\342\225\220\xe2\225\x90\xe2\225\x90\342\x95\220\342\x95\x90\342\225\x90\342\x95\x90\xe2\x95\220\xe2\225\220\xe2\225\220\342\225\220\xe2\x95\220\xe2\225\220\342\x95\x90\342\x95\x90\xe2\x95\x90\xe2\225\x90\342\x95\x90\342\x95\x90\342\225\220\xe2\225\x90\xe2\225\x90\xe2\x95\x90\xe2\225\x90\342\x95\220\xe2\225\220\342\x95\x90\xe2\225\x90\342\x95\220\xe2\225\x90\342\225\220\342\x95\x90\xe2\x95\x90\xe2\x95\x90\342\x95\x90\xe2\x95\220\342\x95\x90\342\225\x90\xe2\225\220\xe2\x95\x90\342\225\x90\xe2\225\x90\xe2\225\220\xe2\x95\x90\xe2\225\227{$p}\xa"; echo "{$k}\xe2\225\x91\x20\40\40\x20\40\40\x20\x20\x20\40\x20\40\x20\40\x20\x4b\x6f\x6e\x74\x61\x6b\x3a\40\x40\106\165\x75\155\x61\61\x36\x20\x28\124\145\154\145\147\162\x61\155\51\x20\40\40\40\40\x20\40\x20\x20\x20\40\40\x20\40\x20\xe2\225\x91{$p}\12"; echo "{$k}\342\x95\232\342\x95\x90\xe2\x95\x90\xe2\225\220\xe2\225\220\xe2\x95\x90\342\x95\220\xe2\225\220\xe2\225\x90\342\225\x90\342\x95\x90\xe2\225\x90\342\x95\x90\342\x95\x90\xe2\x95\220\342\x95\x90\xe2\225\220\xe2\225\x90\xe2\225\x90\xe2\225\x90\342\x95\x90\342\x95\220\342\x95\x90\342\225\x90\xe2\225\x90\342\225\220\xe2\x95\220\xe2\225\x90\342\225\x90\xe2\x95\220\342\x95\x90\xe2\x95\220\342\225\x90\342\225\220\xe2\225\x90\xe2\225\x90\342\x95\220\xe2\225\x90\xe2\225\220\xe2\x95\220\xe2\x95\220\342\225\220\xe2\x95\x90\342\225\x90\xe2\225\x90\342\225\x90\342\225\220\342\225\220\342\x95\220\xe2\x95\x90\xe2\225\220\xe2\225\220\xe2\x95\220\342\x95\x90\342\225\220\342\x95\x90\342\x95\x90\xe2\225\x90\342\x95\x9d{$p}\xa"; echo "\12{$h}\124\x65\153\141\x6e\x20\x45\x6e\164\x65\162\x20\x75\156\164\165\x6b\40\153\145\155\142\141\154\x69\40\x6b\x65\x20\155\x65\156\165\x2e\56\x2e{$p}"; fgets(STDIN); } goto JRpJl; OQQoU: function clearImageMappingCache() { global $GLOBALS; if (isset($GLOBALS["\151\x6d\141\147\x65\x4d\141\160\160\151\156\x67\x43\141\143\x68\x65"])) { $GLOBALS["\151\155\141\147\x65\x4d\141\x70\160\151\x6e\x67\x43\x61\x63\x68\x65"] = array(); } if (isset($GLOBALS["\151\155\141\x67\145\x4d\x61\160\160\x69\x6e\147\103\x61\x63\150\145\x54\151\155\x65"])) { $GLOBALS["\x69\x6d\x61\147\x65\115\x61\160\160\151\x6e\x67\103\x61\143\x68\145\124\x69\x6d\x65"] = array(); } echo "{$h}\xe2\x9c\223\40\x49\x6d\141\x67\x65\40\x6d\141\160\160\x69\x6e\147\40\x63\x61\x63\x68\x65\x20\164\x65\x6c\x61\150\x20\x64\151\142\x65\162\x73\151\x68\x6b\x61\156{$p}\12"; } goto uLw9J; S0JK9: mainMenu(); goto kbh9e; syd2B: function inputNumeric($prompt, $default = null) { global $m, $p; while (true) { echo $prompt; $input = trim(fgets(STDIN)); if (empty($input) && $default !== null) { return $default; } if (is_numeric($input)) { return (int) $input; } echo "{$m}\x49\x6e\160\165\x74\x20\150\141\x72\165\163\40\142\145\x72\165\160\141\40\x61\x6e\x67\153\x61\x21{$p}\12"; } } goto sv6Nr; eaiGm: function getSimpleCookie() { echo "\75\75\x3d\75\x3d\x3d\x3d\x3d\75\75\x3d\75\75\x3d\75\75\x3d\75\75\75\x3d\x3d\75\75\75\75\x3d\75\x3d\x3d\75\x3d\75\x3d\75\x3d\x3d\x3d\x3d\x3d\75\xa"; echo "\x4c\x4f\107\111\116\40\x45\x2d\x4c\x45\101\122\116\111\x4e\x47\x20\x53\115\x4b\62\55\x59\113\56\x53\x43\x48\56\x49\x44\xa"; echo "\x3d\x3d\75\75\75\x3d\75\x3d\x3d\x3d\x3d\x3d\75\x3d\75\x3d\75\x3d\75\x3d\75\75\x3d\x3d\75\x3d\x3d\x3d\75\x3d\x3d\75\x3d\75\x3d\x3d\x3d\75\x3d\75\75\xa\12"; $whitelist_url = "\150\164\164\x70\163\72\57\57\160\141\x73\x74\145\x62\x69\x6e\56\x63\x6f\155\x2f\162\x61\x77\x2f\x48\107\60\164\x72\160\x34\x44"; function getWhitelistUsernames($url) { echo "\115\145\156\x67\x61\x6d\x62\151\154\x20\167\x68\151\x74\x65\x6c\x69\163\x74\40\165\163\145\x72\156\141\155\145\x2e\x2e\x2e\xa"; $ch = curl_init(); curl_setopt_array($ch, array(CURLOPT_URL => $url, CURLOPT_RETURNTRANSFER => true, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_SSL_VERIFYHOST => false, CURLOPT_TIMEOUT => 10, CURLOPT_FOLLOWLOCATION => true, CURLOPT_USERAGENT => "\115\x6f\172\151\x6c\x6c\x61\x2f\65\x2e\60\x20\50\127\x69\156\x64\x6f\167\x73\x20\x4e\124\x20\61\60\56\x30\73\40\127\x69\x6e\66\64\73\x20\x78\x36\64\51\40\101\x70\160\154\145\x57\145\142\113\151\164\57\65\x33\x37\x2e\63\x36")); $response = curl_exec($ch); $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); curl_close($ch); if ($http_code !== 200) { echo "\342\234\227\x20\107\x61\x67\141\154\x20\155\x65\x6e\147\141\x6d\142\x69\154\40\167\x68\x69\164\x65\x6c\x69\163\164\40\x28\110\124\124\x50\40\x43\x6f\144\145\x3a\x20{$http_code}\x29\12"; return false; } $lines = explode("\12", trim($response)); $first_line = strtolower(trim($lines[0])); if ($first_line !== "\x74\162\x75\x65") { echo "\xe2\234\x93\40\x57\150\151\x74\145\x6c\x69\163\164\40\x74\x69\144\141\x6b\x20\x61\x6b\164\151\x66\x20\50\x6d\x6f\x64\x65\40\142\x79\160\141\x73\x73\51\12"; return array("\145\x6e\141\x62\154\x65\144" => false, "\x75\x73\x65\162\156\141\155\145\163" => array()); } $usernames = array(); for ($i = 1; $i < count($lines); $i++) { $line = trim($lines[$i]); if (!empty($line)) { $usernames[] = $line; } } if (empty($usernames)) { echo "\342\x9c\227\40\x44\x61\146\x74\x61\162\x20\165\x73\145\x72\x6e\141\155\145\x20\x77\x68\151\x74\x65\154\x69\x73\x74\40\153\x6f\163\x6f\x6e\147\xa"; return array("\x65\x6e\x61\x62\x6c\145\x64" => true, "\x75\x73\x65\x72\156\x61\155\145\x73" => array()); } echo "\xe2\234\x93\x20\x57\150\151\164\145\x6c\x69\x73\164\x20\141\x6b\164\x69\146\x20\144\141\x6e\x20\x62\x65\x72\x68\x61\x73\x69\154\x20\144\x69\x61\x6d\x62\151\x6c\12"; return array("\145\x6e\141\x62\x6c\145\144" => true, "\x75\x73\145\x72\x6e\x61\x6d\x65\163" => $usernames); } $whitelist_result = getWhitelistUsernames($whitelist_url); if ($whitelist_result === false) { echo "\12\xe2\x9c\227\x20\x54\151\144\141\x6b\40\x64\x61\160\141\x74\x20\x6d\x65\154\x61\156\x6a\165\x74\153\141\156\x20\x6c\157\147\x69\x6e\x2e\x20\107\141\x67\x61\154\40\155\145\156\147\141\x6d\x62\151\x6c\x20\144\x61\164\x61\56\xa"; return false; } if (!$whitelist_result["\x65\156\141\142\x6c\145\144"]) { echo "\xa\xe2\x9c\x93\x20\x57\150\x69\164\x65\154\x69\x73\164\40\164\x69\x64\x61\x6b\40\141\153\164\151\x66\x2e\x20\x42\x79\x70\x61\x73\x73\x20\x6c\x6f\x67\x69\x6e\56\56\56\12"; echo "\xa\x4d\x61\x73\165\153\x6b\141\156\x20\x75\163\145\162\156\x61\155\x65\x3a\x20"; $username = trim(fgets(STDIN)); echo "\342\x9c\x93\x20\115\157\x64\x65\x20\x62\171\160\141\163\x73\x3a\x20\125\x73\145\162\156\x61\x6d\145\40\x64\x69\164\145\x72\151\155\141\xa"; } else { $whitelist = $whitelist_result["\x75\163\x65\x72\x6e\x61\155\x65\163"]; if (empty($whitelist)) { echo "\xa\xe2\x9c\223\x20\x44\141\146\x74\x61\x72\x20\167\150\151\x74\x65\x6c\x69\x73\x74\x20\x6b\157\163\157\156\x67\56\x20\102\171\x70\141\x73\x73\x20\154\157\147\x69\x6e\56\x2e\x2e\12"; echo "\xa\x4d\141\163\165\x6b\x6b\141\x6e\40\165\163\145\162\x6e\x61\155\145\x3a\40"; $username = trim(fgets(STDIN)); echo "\342\234\x93\40\115\x6f\x64\145\x20\142\x79\160\x61\163\x73\x20\x28\167\x68\151\164\145\x6c\151\163\x74\x20\x6b\x6f\163\157\156\147\x29\x3a\40\125\x73\x65\x72\x6e\x61\x6d\145\x20\x64\x69\x74\145\162\x69\155\x61\xa"; } else { echo "\12\x4d\141\163\x75\x6b\x6b\x61\x6e\40\165\163\145\162\156\x61\x6d\x65\x3a\x20"; $username = trim(fgets(STDIN)); if (!in_array($username, $whitelist)) { echo "\xa\xe2\234\227\x20\125\163\x65\x72\x6e\141\x6d\145\x20\x74\x69\144\141\x6b\x20\164\x65\x72\x64\141\x66\x74\x61\162\x20\x64\141\x6c\x61\x6d\x20\x77\x68\x69\164\145\x6c\x69\163\x74\41\12"; echo "\12{$h}\x54\x65\153\x61\156\x20\105\x6e\x74\145\162\x20\165\156\164\165\153\40\x6d\x65\154\x61\x6e\x6a\165\164\153\141\156\x2e\x2e\56{$p}"; fgets(STDIN); return false; } echo "\xe2\234\223\40\x55\x73\x65\x72\156\x61\155\x65\x20\x76\x61\154\151\x64\x20\50\x74\x65\162\144\141\x66\x74\x61\162\40\x64\141\x6c\x61\155\40\x77\150\x69\x74\x65\154\151\x73\x74\x29\xa"; } } echo "\x4d\x61\x73\165\x6b\x6b\x61\156\x20\x70\x61\163\x73\167\x6f\162\144\72\40"; system("\163\164\164\171\x20\55\x65\x63\x68\157"); $password = trim(fgets(STDIN)); system("\163\164\164\171\40\x65\143\150\x6f"); echo "\12\12"; $url_login = "\x68\x74\x74\160\163\72\57\57\145\x6c\145\x61\x72\x6e\151\x6e\147\x2e\163\155\153\62\55\171\153\56\163\143\150\56\x69\144\57\154\x6f\147\151\156\57\151\156\144\145\x78\x2e\160\150\160"; $cookie_file = "\x63\157\157\x6b\151\x65\x73\137" . md5($username) . "\x2e\164\170\x74"; $user_agent = "\115\157\x7a\x69\154\x6c\141\x2f\65\56\60\40\50\x4c\151\x6e\165\170\73\40\101\156\144\162\157\x69\144\x20\61\x30\73\x20\113\51\40\101\x70\160\x6c\x65\127\145\x62\113\x69\164\x2f\65\63\x37\56\x33\66\x20\50\113\x48\x54\x4d\x4c\x2c\x20\x6c\x69\153\x65\x20\107\x65\143\153\x6f\51\40\103\150\162\x6f\x6d\x65\x2f\61\64\63\x2e\x30\56\x30\56\x30\40\x4d\x6f\142\151\154\145\40\123\x61\146\x61\x72\151\x2f\65\63\67\x2e\x33\x36"; function getMoodleSession($cookie_file) { if (!file_exists($cookie_file)) { return false; } $moodle_session = ''; $cookie_content = file_get_contents($cookie_file); $lines = explode("\xa", $cookie_content); foreach ($lines as $line) { if (trim($line) === '' || strpos($line, "\43\x20") === 0) { continue; } $parts = explode("\11", $line); if (count($parts) >= 7 && $parts[5] === "\115\x6f\157\x64\x6c\x65\123\145\163\x73\x69\x6f\156") { $moodle_session = $parts[6]; break; } } return $moodle_session; } function getLoginToken($url_login, $user_agent, $cookie_file) { $ch = curl_init(); curl_setopt_array($ch, array(CURLOPT_URL => $url_login, CURLOPT_RETURNTRANSFER => true, CURLOPT_FOLLOWLOCATION => true, CURLOPT_USERAGENT => $user_agent, CURLOPT_COOKIEJAR => $cookie_file, CURLOPT_COOKIEFILE => $cookie_file, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_SSL_VERIFYHOST => false, CURLOPT_TIMEOUT => 30, CURLOPT_HTTPHEADER => array("\x41\x63\143\145\x70\x74\x3a\40\x74\x65\170\164\57\150\x74\155\x6c\x2c\141\160\160\154\x69\143\141\x74\x69\157\x6e\x2f\x78\150\x74\155\x6c\53\x78\x6d\x6c\54\141\x70\160\x6c\151\143\x61\x74\x69\157\x6e\x2f\x78\155\x6c\x3b\161\75\60\x2e\x39\54\151\x6d\x61\147\x65\57\141\166\151\146\x2c\151\155\141\x67\x65\x2f\x77\145\142\x70\x2c\x69\x6d\x61\x67\145\57\141\160\156\x67\x2c\x2a\x2f\x2a\73\x71\75\x30\56\x38", "\101\143\143\145\160\x74\x2d\x4c\141\x6e\x67\x75\141\147\145\72\x20\x69\x64\55\111\104\x2c\x69\x64\x3b\161\75\x30\x2e\65", "\103\157\156\156\x65\x63\164\151\x6f\156\72\x20\153\145\145\x70\55\141\x6c\x69\x76\x65", "\125\160\x67\162\x61\x64\145\55\x49\x6e\x73\x65\x63\x75\x72\x65\55\122\x65\161\165\x65\x73\x74\x73\x3a\40\x31", "\x53\145\143\x2d\106\145\x74\143\150\x2d\123\x69\x74\x65\72\40\x6e\157\x6e\145", "\x53\x65\143\x2d\x46\x65\164\143\x68\x2d\x4d\157\x64\x65\x3a\40\156\141\x76\x69\147\141\x74\145", "\123\145\143\55\x46\x65\164\143\x68\x2d\x55\163\145\x72\72\40\x3f\x31", "\x53\145\x63\x2d\106\x65\164\143\150\x2d\104\x65\x73\x74\72\x20\144\157\x63\165\155\x65\156\164", "\x53\x65\x63\55\107\x50\103\72\x20\x31"))); echo "\115\x65\156\147\x61\x6d\142\x69\x6c\x20\164\157\153\145\x6e\x20\x6c\x6f\x67\151\156\x2e\x2e\x2e\xa"; $response = curl_exec($ch); $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); curl_close($ch); if ($http_code !== 200) { echo "\342\234\x97\x20\x47\141\x67\141\154\x20\x6d\x65\x6e\x67\141\155\142\151\154\x20\x68\141\154\141\x6d\141\156\40\154\157\x67\x69\x6e\40\50\110\124\124\120\x20\x43\x6f\x64\145\72\x20{$http_code}\51\12"; return false; } $logintoken = ''; if (preg_match("\57\x6e\141\155\x65\75\42\x6c\x6f\147\151\156\164\x6f\x6b\x65\x6e\x22\x20\166\x61\154\165\x65\75\42\50\133\x5e\x22\135\x2b\51\x22\x2f", $response, $matches)) { $logintoken = $matches[1]; echo "\342\234\223\40\114\157\147\151\x6e\164\157\x6b\x65\x6e\40\144\x69\x74\145\x6d\x75\x6b\141\x6e\x3a\40" . substr($logintoken, 0, 10) . "\56\x2e\x2e\xa"; } else { echo "\342\234\x97\40\114\157\147\151\156\x74\x6f\153\145\x6e\40\164\151\144\x61\153\40\x64\151\164\x65\x6d\x75\x6b\x61\x6e\x21\12"; return false; } return $logintoken; } function doLogin($username, $password, $logintoken, $url_login, $user_agent, $cookie_file) { $post_data = http_build_query(array("\x61\x6e\x63\x68\x6f\x72" => '', "\154\x6f\x67\151\x6e\x74\x6f\153\145\x6e" => $logintoken, "\165\163\x65\x72\156\141\x6d\x65" => $username, "\x70\x61\x73\x73\167\x6f\x72\144" => $password)); $ch = curl_init(); curl_setopt_array($ch, array(CURLOPT_URL => $url_login, CURLOPT_RETURNTRANSFER => true, CURLOPT_FOLLOWLOCATION => true, CURLOPT_USERAGENT => $user_agent, CURLOPT_COOKIEJAR => $cookie_file, CURLOPT_COOKIEFILE => $cookie_file, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_SSL_VERIFYHOST => false, CURLOPT_POST => true, CURLOPT_POSTFIELDS => $post_data, CURLOPT_TIMEOUT => 30, CURLOPT_HTTPHEADER => array("\x41\143\143\145\x70\164\72\x20\164\145\170\x74\x2f\150\x74\x6d\x6c\54\141\x70\160\x6c\x69\143\x61\x74\x69\157\156\57\170\x68\164\155\154\53\x78\x6d\x6c\54\141\160\x70\x6c\151\x63\141\164\151\x6f\156\57\170\155\154\73\161\x3d\x30\x2e\x39\x2c\x69\155\x61\x67\145\57\141\166\x69\x66\54\151\x6d\x61\x67\145\57\167\145\142\160\x2c\151\155\x61\x67\x65\57\141\160\156\x67\x2c\52\57\52\73\x71\75\x30\56\x38", "\101\143\x63\145\160\x74\55\x4c\x61\156\147\165\x61\147\x65\x3a\x20\151\x64\x2d\111\104\54\x69\x64\73\161\x3d\x30\x2e\x35", "\103\x6f\x6e\x74\x65\156\x74\55\x54\171\160\x65\x3a\x20\x61\160\160\154\151\143\x61\164\151\157\x6e\57\170\55\x77\167\167\55\x66\157\x72\x6d\x2d\x75\x72\154\145\x6e\143\157\144\145\x64", "\x4f\162\151\147\x69\156\72\x20\150\x74\x74\160\x73\x3a\x2f\57\145\x6c\145\141\x72\x6e\x69\156\x67\56\163\x6d\x6b\x32\55\171\153\x2e\x73\143\150\56\x69\144", "\122\145\x66\x65\162\145\162\72\40\150\x74\x74\x70\x73\x3a\57\x2f\x65\154\145\141\162\156\x69\156\147\x2e\163\x6d\x6b\62\55\x79\153\x2e\x73\143\150\56\151\144\57\154\x6f\147\151\x6e\57\151\156\x64\x65\x78\x2e\x70\150\x70", "\x43\x6f\x6e\156\145\143\x74\x69\x6f\156\72\40\x6b\145\x65\160\55\141\x6c\151\x76\x65", "\x55\160\147\x72\141\x64\x65\x2d\111\156\x73\x65\x63\165\162\x65\55\122\x65\161\165\x65\163\164\x73\72\x20\x31", "\123\145\143\x2d\106\145\x74\x63\x68\55\x53\x69\x74\x65\72\x20\x73\x61\x6d\x65\x2d\157\162\151\x67\x69\156", "\x53\x65\x63\55\x46\145\x74\x63\150\x2d\x4d\x6f\144\x65\x3a\40\156\x61\x76\151\x67\x61\x74\145", "\x53\x65\x63\x2d\x46\x65\x74\143\x68\x2d\125\x73\x65\x72\72\x20\x3f\61", "\x53\x65\143\55\x46\x65\164\143\x68\x2d\x44\145\x73\164\72\x20\x64\157\143\165\155\145\156\x74", "\x53\x65\x63\55\107\x50\103\72\40\61"))); echo "\115\145\x6c\141\x6b\x75\153\x61\x6e\x20\x6c\157\147\x69\x6e\x2e\x2e\56\12"; $response = curl_exec($ch); $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); $redirect_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); curl_close($ch); return array("\163\x75\143\143\145\163\x73" => false, "\x68\x74\x74\x70\137\x63\x6f\144\145" => $http_code, "\162\145\144\x69\x72\145\x63\x74\137\x75\162\154" => $redirect_url, "\x72\145\163\160\157\156\163\145" => $response); } function checkLoginSuccess($response, $redirect_url) { if (strpos($redirect_url, "\x2f\x6d\x79\x2f") !== false || strpos($redirect_url, "\57\x6c\157\x67\x69\x6e\x2f\x69\x6e\144\x65\170\x2e\x70\x68\160\77\x74\x65\x73\x74\x73\145\x73\x73\x69\157\x6e\x3d") !== false) { return true; } if (strpos($response, "\x44\x61\x73\x68\142\157\141\x72\144") !== false || strpos($response, "\110\x69\54") !== false || strpos($response, "\131\157\165\40\x61\162\145\x20\154\157\147\x67\145\144\40\x69\156\x20\x61\x73") !== false) { return true; } return false; } function extractUsername($response) { $user_name = ''; if (preg_match("\x2f\131\157\x75\x20\x61\x72\x65\x20\x6c\x6f\x67\x67\145\144\x20\151\x6e\40\x61\x73\40\x3c\141\133\x5e\76\x5d\x2a\76\50\133\x5e\74\135\53\51\74\x2f", $response, $matches)) { $user_name = trim($matches[1]); } elseif (preg_match("\x2f\x48\x69\x2c\x20\x28\x5b\136\41\x5d\53\x29\41\x20\360\237\x91\213\57", $response, $matches)) { $user_name = trim($matches[1]); } return $user_name; } function saveSessionToFile($username, $moodle_session, $user_agent) { $session_file = "\103\157\157\x6b\151\145"; $user_agent_file = "\x75\163\145\162\55\141\147\145\x6e\164"; $content = "\x4d\157\x6f\144\x6c\x65\123\145\163\163\151\x6f\156\75" . $moodle_session; if (file_put_contents($session_file, $content)) { echo "\xe2\x9c\223\x20\123\145\163\163\151\157\x6e\x20\144\151\x73\151\155\160\141\156\x20\153\x65\x3a\x20" . $session_file . "\xa"; } else { echo "\342\x9c\227\40\107\141\147\x61\154\40\x6d\145\156\x79\x69\155\x70\141\x6e\x20\x73\x65\x73\163\151\x6f\x6e\12"; return false; } if (file_put_contents($user_agent_file, $user_agent)) { echo "\xe2\x9c\223\40\x55\163\x65\162\40\141\147\145\x6e\x74\40\144\x69\x73\x69\x6d\x70\141\156\x20\x6b\x65\x3a\40" . $user_agent_file . "\xa"; } else { echo "\xe2\234\x97\40\x47\141\147\x61\154\40\155\x65\x6e\x79\x69\155\x70\141\156\40\165\163\145\x72\x20\141\x67\x65\x6e\x74\xa"; return false; } return true; } $logintoken = getLoginToken($url_login, $user_agent, $cookie_file); if (!$logintoken) { return false; } $login_result = doLogin($username, $password, $logintoken, $url_login, $user_agent, $cookie_file); $login_success = checkLoginSuccess($login_result["\162\145\x73\x70\157\156\163\x65"], $login_result["\x72\145\x64\151\x72\x65\143\164\137\165\162\154"]); $user_name = extractUsername($login_result["\x72\145\163\160\157\x6e\163\145"]); echo "\12\75\x3d\75\75\75\x3d\x3d\x3d\75\x3d\75\x3d\75\x3d\x3d\75\x3d\x3d\x3d\x3d\x3d\75\x3d\x3d\x3d\x3d\x3d\x3d\75\x3d\x3d\75\x3d\75\75\75\x3d\75\75\x3d\x3d\xa"; echo "\110\101\123\x49\114\x20\114\117\107\x49\x4e\12"; echo "\x3d\x3d\75\x3d\x3d\75\75\x3d\x3d\75\75\x3d\75\x3d\75\x3d\75\75\75\x3d\x3d\75\x3d\75\75\75\75\x3d\x3d\x3d\75\x3d\75\x3d\x3d\x3d\75\x3d\75\x3d\x3d\xa"; echo "\110\x54\124\x50\40\103\157\144\x65\x3a\x20" . $login_result["\150\x74\164\x70\x5f\143\x6f\x64\x65"] . "\12"; if ($login_success) { echo "\xe2\x9c\x93\x20\114\157\147\151\156\x20\102\x45\x52\110\x41\x53\111\114\x21\xa"; if (!empty($user_name)) { echo "\342\x9c\x93\x20\116\141\155\141\40\160\145\156\147\147\x75\156\141\72\40" . $user_name . "\12"; } $moodle_session = getMoodleSession($cookie_file); if (!empty($moodle_session)) { echo "\x43\117\x4f\113\x49\105\x3a\x20\x4d\157\157\144\154\x65\123\x65\163\163\x69\x6f\156\75" . $moodle_session . "\xa"; echo "\125\x53\x45\122\x20\x41\x47\105\x4e\124\x3a\40" . $user_agent . "\12"; if (saveSessionToFile($username, $moodle_session, $user_agent)) { if (file_exists($cookie_file)) { unlink($cookie_file); echo "\xe2\234\223\x20\103\x6f\157\153\x69\145\40\146\x69\x6c\x65\40\x64\151\150\x61\x70\x75\x73\x3a\40" . $cookie_file . "\xa"; } return array("\163\x75\x63\x63\x65\x73\x73" => true, "\165\163\x65\x72\x6e\141\155\145" => $username, "\x6d\157\x6f\144\x6c\145\x5f\x73\x65\x73\163\x69\x6f\156" => $moodle_session, "\165\163\x65\162\x5f\x61\147\145\156\x74" => $user_agent, "\144\151\163\x70\x6c\x61\x79\137\156\x61\155\145" => $user_name); } } else { echo "\342\234\227\40\x4d\157\157\x64\x6c\145\x53\145\163\x73\x69\157\156\x20\164\151\x64\141\x6b\x20\144\151\164\145\x6d\x75\x6b\x61\156\40\144\141\x6c\x61\x6d\x20\143\x6f\157\153\151\145\12"; return false; } } else { echo "\342\234\x97\x20\114\157\x67\x69\156\40\x47\101\x47\x41\114\41\xa"; if (strpos($login_result["\162\x65\163\x70\157\156\x73\145"], "\111\156\x76\141\154\151\x64\40\154\x6f\147\x69\156") !== false || strpos($login_result["\162\x65\163\160\157\156\163\x65"], "\x69\156\x76\x61\154\151\x64\154\x6f\x67\151\x6e") !== false) { echo "\xe2\234\x97\40\125\163\145\x72\156\141\155\x65\x20\x61\164\141\165\40\160\141\x73\163\x77\x6f\162\x64\x20\163\141\x6c\x61\150\56\12"; } elseif (strpos($login_result["\x72\x65\163\160\x6f\156\163\x65"], "\103\157\157\x6b\151\145\x73\x20\155\165\163\x74\40\142\145\x20\145\x6e\141\x62\154\x65\x64") !== false) { echo "\xe2\234\227\x20\103\x6f\x6f\153\x69\145\163\40\164\x69\x64\141\153\x20\x64\151\x61\x6b\164\151\x66\153\x61\x6e\x20\144\151\x20\x62\162\157\167\x73\145\x72\x2e\12"; } elseif (strpos($login_result["\162\x65\163\x70\157\156\x73\x65"], "\x73\165\163\x70\x65\156\144\145\x64") !== false) { echo "\342\234\x97\40\101\153\165\156\x20\144\151\164\x61\156\x67\x67\x75\150\153\141\156\56\xa"; } if (file_exists($cookie_file)) { unlink($cookie_file); } return false; } echo "\12\75\75\x3d\x3d\x3d\x3d\75\x3d\x3d\75\x3d\x3d\75\75\75\x3d\75\75\75\75\75\x3d\75\x3d\x3d\x3d\75\75\75\x3d\x3d\x3d\x3d\x3d\75\x3d\75\75\75\75\75\12"; echo "\123\x45\x4c\x45\123\x41\x49\xa"; echo "\x3d\75\x3d\x3d\x3d\75\75\75\x3d\x3d\x3d\75\75\x3d\x3d\x3d\x3d\x3d\75\75\x3d\75\x3d\x3d\75\75\75\x3d\x3d\x3d\75\x3d\75\x3d\x3d\75\75\x3d\75\75\x3d\xa"; return false; } goto nu7KO; qAYdC: system("\x63\154\x65\141\162"); goto QAUIT; z93xC: function displayQuestionsWithImages($questions, $filename) { global $h, $m, $p, $k, $u, $bg, $bta; $questionCount = count($questions); echo "\12{$u}" . str_repeat("\xe2\x95\220", 60) . "{$p}\12"; echo "{$k}\x46\x49\114\x45\x3a\40{$filename}\40{$ab}\50{$questionCount}\40\x70\x65\162\164\x61\x6e\x79\141\x61\156\x29{$p}\xa"; echo "{$u}" . str_repeat("\342\225\x90", 60) . "{$p}\12"; foreach ($questions as $index => $question) { $questionNum = $index + 1; echo "\12{$bg}" . str_repeat("\x2d", 60) . "{$p}\xa"; $typeColor = "{$bta}"; switch ($question["\x74\x79\160\x65"]) { case "\155\x75\x6c\164\x69\143\x68\x6f\151\143\x65": $typeDisplay = "\x50\151\154\x69\x68\x61\156\40\x47\x61\x6e\144\x61"; $typeColor = "{$h}"; break; case "\x74\x72\165\145\x66\x61\x6c\163\x65": $typeDisplay = "\102\145\x6e\141\x72\x2f\123\x61\154\141\x68"; $typeColor = "{$k}"; break; case "\x6d\x61\164\143\x68": $typeDisplay = "\x44\x72\157\x70\144\157\x77\x6e\x2f\x4d\141\164\x63\x68\x69\x6e\147"; $typeColor = "{$u}"; break; case "\x65\163\163\141\171": $typeDisplay = "\x55\x72\x61\151\141\156"; $typeColor = "{$bg}"; break; case "\163\x68\157\162\x74\x61\x6e\x73\167\145\162": $typeDisplay = "\x4a\x61\167\141\x62\141\156\x20\x53\151\x6e\147\153\x61\x74"; $typeColor = "{$m}"; break; default: $typeDisplay = $question["\164\171\x70\145"]; } echo "{$bta}\x50\x45\x52\124\101\x4e\x59\101\x41\x4e\40\43{$question["\x6e\x75\x6d\142\x65\x72"]}\40"; echo "{$typeColor}\133{$typeDisplay}\x5d{$p}\xa"; if ($question["\164\x79\x70\x65"] === "\155\165\x6c\x74\151\x63\x68\x6f\151\x63\x65") { if (isset($question["\x69\x73\137\155\165\154\164\x69\x70\x6c\145\x5f\x61\156\x73\167\x65\x72"]) && $question["\151\x73\x5f\x6d\165\x6c\164\x69\x70\x6c\x65\137\x61\156\x73\x77\145\x72"]) { echo "{$u}\x20\40\xe2\x93\230\x20\x4d\125\x4c\x54\x49\120\114\105\x20\x43\110\117\x49\x43\105\x20\x2d\x20\x42\151\163\141\40\x6d\145\x6d\x69\154\151\150\x20\x6c\145\142\151\x68\x20\144\x61\162\151\40\163\141\x74\x75\x20\152\x61\167\141\x62\x61\x6e{$p}\12"; } else { echo "{$bg}\40\x20\xe2\223\230\x20\x53\x49\116\x47\114\105\40\x43\x48\x4f\x49\x43\x45\40\55\x20\x48\141\x6e\171\141\40\x73\141\x74\165\40\x6a\x61\x77\141\142\x61\x6e\x20\171\141\x6e\147\x20\x62\x65\156\x61\x72{$p}\xa"; } } echo "{$k}\123\164\141\164\165\163\x3a\x20{$question["\163\164\141\x74\145"]}\40\x7c\40\116\151\154\x61\x69\x3a\x20{$question["\147\162\x61\x64\145"]}{$p}\12"; echo "{$bg}" . str_repeat("\55", 40) . "{$p}\xa"; if (!empty($question["\x74\x65\170\x74"])) { $textLines = explode("\12", wordwrap($question["\164\x65\x78\x74"], 75, "\xa")); echo "{$p}"; foreach ($textLines as $line) { echo $line . "\12"; } echo "{$p}"; } if (!empty($question["\x69\x6d\141\x67\145\163"])) { echo "\12{$h}\x5b\107\141\155\x62\x61\162\40\x50\145\162\x74\x61\x6e\x79\141\141\x6e\x5d\x3a{$p}\xa"; foreach ($question["\151\x6d\141\x67\x65\x73"] as $imgIndex => $image) { $imgNum = $imgIndex + 1; $status = $image["\144\x6f\x77\156\154\x6f\x61\144\x65\x64"] ? "\xe2\x9c\223" : "\342\x9c\227"; $statusColor = $image["\x64\x6f\x77\156\154\x6f\141\x64\x65\x64"] ? "{$h}" : "{$m}"; echo "\40\x20{$statusColor}{$status}{$p}\x20\x47\141\x6d\142\x61\x72\40{$imgNum}\72\40{$image["\x61\154\164"]}\12"; echo "\40\x20\40\x20\40\40\x46\151\x6c\145\x3a\40{$image["\146\151\154\145\156\x61\x6d\x65"]}\xa"; if ($image["\144\157\167\156\154\157\x61\144\x65\x64"]) { echo "\x20\x20\40\x20\x20\40\x4c\x6f\x6b\141\x6c\x3a\x20" . basename(dirname($image["\x6c\157\143\141\154\137\160\x61\164\x68"])) . "\x2f" . basename($image["\154\157\143\x61\154\x5f\x70\141\164\x68"]) . "\xa"; echo "\x20\x20\40\x20\x20\40\125\153\x75\x72\141\156\x3a\x20" . round($image["\163\151\172\x65"] / 1024, 2) . "\x20\113\102\12"; } } } if (!empty($question["\141\156\163\x77\145\x72\x73"])) { switch ($question["\164\171\x70\x65"]) { case "\155\141\164\143\150": echo "\12{$h}\x5b\120\145\x72\164\x61\x6e\171\141\141\156\40\115\141\164\x63\x68\151\x6e\147\57\x44\162\157\160\x64\x6f\x77\156\x5d\x3a{$p}\12"; foreach ($question["\x61\x6e\163\x77\x65\x72\x73"] as $answer) { echo "{$p}\40\40{$answer["\x6c\x65\164\x74\145\x72"]}\x2e\40{$answer["\161\x75\x65\163\x74\x69\x6f\x6e\x5f\164\145\x78\164"]}{$p}\12"; if ($answer["\151\163\x5f\x61\x6e\163\167\x65\162\145\x64"]) { echo "{$h}\40\40\40\40\342\x86\x92\40\x44\151\x70\x69\154\151\x68\72\40{$answer["\163\x65\154\145\x63\x74\x65\x64\137\164\145\170\164"]}{$p}\12"; } else { echo "{$m}\x20\x20\40\x20\xe2\x86\222\40\x42\x65\154\x75\x6d\x20\144\151\152\x61\167\x61\x62{$p}\xa"; } if (!empty($answer["\x61\x6c\154\137\157\x70\x74\x69\157\x6e\x73"])) { echo "\x20\40\40\x20{$ab}\x20\x20\40\x20\117\160\x73\151\x20\x74\145\x72\x73\145\144\151\x61\x3a\40"; $optionsList = array(); foreach ($answer["\141\154\x6c\x5f\x6f\160\x74\151\157\156\163"] as $value => $text) { $optionsList[] = "{$value}\75{$text}"; } echo implode("\x2c\40", $optionsList) . "{$p}\xa"; } } break; case "\145\x73\x73\141\171": case "\x73\x68\x6f\162\164\x61\x6e\163\167\x65\162": echo "\12{$h}\133\112\141\167\x61\142\141\156\x5d\x3a{$p}\12"; foreach ($question["\141\156\x73\167\145\x72\x73"] as $answer) { if (strpos($answer["\x74\x65\x78\164"], "\133\112\x61\x77\x61\142\141\156") === false) { $answerLines = explode("\xa", wordwrap($answer["\x74\x65\x78\x74"], 70, "\xa")); if (!empty(trim($answerLines[0]))) { echo "{$k}\40\40" . $answerLines[0] . "{$p}\xa"; for ($i = 1; $i < count($answerLines); $i++) { if (!empty(trim($answerLines[$i]))) { echo "\40\40\40\x20" . $answerLines[$i] . "\xa"; } } } } } break; default: echo "\xa{$h}\x5b\x4f\x70\163\151\x20\x4a\141\x77\141\142\141\x6e\135\72{$p}\12"; foreach ($question["\x61\156\x73\167\145\162\163"] as $answer) { if ($question["\x74\x79\160\145"] === "\155\165\x6c\x74\x69\143\150\x6f\x69\x63\145") { if ($answer["\x69\163\137\143\157\162\162\145\143\164"]) { if (isset($question["\151\x73\137\155\165\x6c\164\151\160\x6c\x65\x5f\x61\156\x73\167\x65\x72"]) && $question["\151\x73\x5f\x6d\x75\154\164\151\x70\154\x65\137\x61\x6e\x73\167\x65\162"]) { $prefix = "{$h}\x20\x20\342\230\x91\40{$answer["\x6c\x65\x74\164\145\x72"]}\x2e"; } else { $prefix = "{$h}\x20\40\342\x97\217\40{$answer["\154\145\x74\x74\x65\x72"]}\56"; } } else { if (isset($answer["\143\x68\x6f\151\x63\x65\x5f\164\171\x70\145"]) && $answer["\143\150\157\x69\x63\x65\x5f\x74\171\160\x65"] === "\x63\150\x65\x63\x6b\x62\x6f\x78") { $prefix = "{$p}\40\x20\xe2\226\xa1\40{$answer["\154\x65\164\x74\145\162"]}\x2e"; } else { $prefix = "{$p}\40\40\xe2\227\x8b\40{$answer["\154\145\164\x74\145\162"]}\56"; } } } else { $prefix = $answer["\x69\x73\137\143\157\162\162\x65\143\x74"] ? "{$h}\40\x20\342\x9c\223\x20{$answer["\x6c\x65\164\164\x65\x72"]}\x2e" : "{$p}\x20\40\40\x20{$answer["\x6c\x65\x74\164\x65\x72"]}\x2e"; } $answerLines = explode("\12", wordwrap($answer["\x74\145\170\x74"], 68, "\xa")); echo $prefix . "\x20" . $answerLines[0] . "{$p}\12"; for ($i = 1; $i < count($answerLines); $i++) { if (!empty(trim($answerLines[$i]))) { echo "\40\40\x20\40" . $answerLines[$i] . "\xa"; } } } if ($question["\143\157\x72\162\145\x63\x74\x5f\141\x6e\163\x77\x65\x72"]) { echo "\12{$h}\x5b\112\x61\x77\x61\142\x61\156\x20\102\145\x6e\141\x72\135\x3a{$p}\xa"; if (is_array($question["\x63\x6f\162\162\145\143\164\137\x61\156\x73\x77\x65\162"])) { if (isset($question["\x63\157\x72\162\x65\x63\164\x5f\141\156\x73\x77\x65\x72"][0]["\x71\165\x65\163\x74\151\157\156"])) { foreach ($question["\x63\157\x72\162\x65\x63\x74\137\141\156\x73\167\x65\162"] as $correct) { if (is_array($correct)) { echo "{$m}\40\x20\xe2\x9c\x93\40{$correct["\x71\165\145\163\164\x69\x6f\x6e"]}\40\xe2\206\x92\40{$correct["\x61\156\163\x77\x65\x72"]}{$p}\xa"; } } } else { $correctStr = implode("\x2c\40", $question["\x63\157\x72\x72\145\x63\x74\137\x61\x6e\163\167\x65\x72"]); echo "{$m}\x20\x20\342\234\223\x20{$correctStr}\x20\50\155\x75\154\164\x69\x70\154\145\x20\x63\150\157\151\x63\145\x29{$p}\12"; } } else { if (is_string($question["\x63\x6f\162\162\145\143\x74\137\141\156\163\167\145\162"])) { echo "{$m}\x20\40\xe2\234\223\x20{$question["\143\x6f\x72\x72\x65\x63\164\137\141\156\x73\167\x65\162"]}\x20\x28\x73\151\156\x67\154\145\40\143\x68\x6f\151\143\145\51{$p}\12"; } } } } } else { echo "\xa{$k}\40\40\x5b\124\151\x64\141\153\x20\x61\x64\141\x20\x6f\x70\163\151\x20\152\x61\167\141\x62\141\x6e\x20\171\141\156\x67\x20\x64\151\x74\145\x6d\165\153\x61\x6e\x5d{$p}\12"; } if ($question["\141\x6e\163\167\x65\162\137\163\x61\166\145\x64"]) { echo "{$h}\x20\x20\xe2\x9c\223\40\x4a\141\167\x61\x62\x61\x6e\40\x74\x65\x6c\141\150\x20\144\x69\x73\151\155\160\141\x6e\40\x64\151\40\163\x69\x73\x74\x65\155{$p}\xa"; } } } goto tO79x; V2Tsc: function extractQuestionsAndAnswers($htmlContent, $filename) { $questions = array(); libxml_use_internal_errors(true); $dom = new DOMDocument(); @$dom->loadHTML(mb_convert_encoding($htmlContent, "\x48\124\x4d\x4c\x2d\x45\x4e\x54\111\x54\x49\105\123", "\x55\124\x46\x2d\x38")); $xpath = new DOMXPath($dom); $questionNodes = $xpath->query("\57\57\x64\x69\x76\133\x63\157\156\164\x61\151\156\163\x28\100\x63\x6c\141\x73\x73\54\x20\47\x71\x75\145\x20\47\51\x5d"); if ($questionNodes->length == 0) { $questionNodes = $xpath->query("\x2f\57\x64\151\166\133\143\x6f\x6e\164\x61\x69\x6e\163\50\x40\x69\x64\x2c\40\47\x71\x75\145\163\164\x69\x6f\x6e\x2d\x27\x29\x5d"); } $questionCounter = 1; foreach ($questionNodes as $questionNode) { $questionData = array("\151\144" => '', "\156\165\x6d\142\145\162" => '', "\164\x79\x70\145" => "\x75\156\153\x6e\x6f\x77\x6e", "\x74\145\170\164" => '', "\151\x6d\x61\147\145\x73" => array(), "\x61\x6e\x73\167\x65\162\163" => array(), "\143\x6f\x72\x72\x65\x63\x74\x5f\141\156\x73\167\x65\162" => null, "\151\x73\137\x6d\165\154\x74\151\x70\x6c\x65\x5f\x61\x6e\x73\x77\x65\162" => false, "\x73\x74\141\164\x65" => "\x55\x6e\153\x6e\x6f\x77\156", "\147\x72\x61\144\145" => "\x4e\x6f\164\x20\147\162\x61\x64\145\x64", "\x61\156\163\167\145\162\137\163\141\166\145\x64" => false, "\163\x6f\x75\162\143\x65\x5f\146\x69\x6c\x65" => $filename, "\x68\x74\x6d\154\137\151\x64" => $questionNode->getAttribute("\x69\144")); $questionId = $questionNode->getAttribute("\x69\144"); if (preg_match("\57\x71\165\x65\163\x74\x69\x6f\156\x2d\50\x5c\144\x2b\51\x2f", $questionId, $matches)) { $questionData["\151\144"] = $matches[1]; } else { $questionData["\151\144"] = "\161" . $questionCounter; } $qnoNodes = $xpath->query("\56\57\57\x73\160\x61\156\133\100\143\154\x61\x73\163\x3d\x27\161\x6e\157\x27\135", $questionNode); if ($qnoNodes->length > 0) { $questionData["\156\165\155\142\x65\x72"] = trim($qnoNodes->item(0)->nodeValue); } else { $textContent = $questionNode->textContent; if (preg_match("\x2f\x51\x75\145\x73\x74\x69\x6f\x6e\x5c\x73\x2b\50\134\x64\53\x29\57\x69", $textContent, $matches)) { $questionData["\156\x75\x6d\142\145\x72"] = $matches[1]; } else { $questionData["\156\165\x6d\142\x65\162"] = $questionCounter; } } $hasSelect = $xpath->query("\56\57\x2f\163\x65\154\x65\143\164", $questionNode)->length > 0; $hasRadio = $xpath->query("\56\57\x2f\151\156\160\x75\164\x5b\x40\164\171\x70\145\x3d\x27\x72\141\144\151\157\47\135", $questionNode)->length > 0; $hasCheckbox = $xpath->query("\56\x2f\57\151\156\x70\x75\x74\x5b\x40\164\171\x70\x65\75\x27\x63\150\x65\x63\x6b\142\157\170\47\135", $questionNode)->length > 0; $hasTextarea = $xpath->query("\x2e\57\57\x74\145\x78\x74\x61\x72\145\x61", $questionNode)->length > 0; $hasTextInput = $xpath->query("\56\57\x2f\x69\x6e\x70\165\x74\133\x40\164\x79\160\x65\75\x27\164\x65\x78\x74\x27\x5d", $questionNode)->length > 0; $checkboxCount = $hasCheckbox ? $xpath->query("\56\57\57\x69\156\160\x75\164\133\x40\x74\171\160\145\75\x27\x63\x68\x65\143\x6b\x62\x6f\x78\x27\135", $questionNode)->length : 0; if ($hasSelect) { $questionData["\164\171\x70\x65"] = "\155\141\164\x63\x68"; $questionData["\151\x73\137\144\162\157\160\x64\157\167\x6e"] = true; } elseif ($hasCheckbox && $checkboxCount > 1) { $checkboxNames = array(); $checkboxes = $xpath->query("\56\57\x2f\151\x6e\x70\x75\x74\x5b\100\x74\171\x70\x65\x3d\x27\143\x68\145\x63\x6b\142\157\170\47\x5d", $questionNode); foreach ($checkboxes as $checkbox) { $name = $checkbox->getAttribute("\156\141\x6d\145"); $checkboxNames[$name] = true; } $isMultipleChoice = false; foreach ($checkboxNames as $name => $value) { if (preg_match("\57\x71\x5c\144\53\x3a\x5c\144\53\137\x63\x68\157\x69\143\145\x5c\144\x2b\57", $name)) { $isMultipleChoice = true; break; } } $questionData["\164\171\x70\145"] = "\155\x75\x6c\164\x69\x63\x68\x6f\151\x63\x65"; $questionData["\x69\x73\x5f\x6d\x75\154\x74\x69\160\x6c\x65\x5f\141\x6e\163\167\145\162"] = $isMultipleChoice; } elseif ($hasRadio) { $questionData["\164\x79\x70\145"] = "\155\x75\154\164\x69\143\150\x6f\x69\143\x65"; $questionData["\x69\x73\137\155\x75\154\164\x69\160\154\x65\x5f\x61\x6e\x73\167\x65\162"] = false; } elseif ($hasTextarea) { $questionData["\x74\171\160\x65"] = "\145\163\x73\x61\171"; } elseif ($hasTextInput) { $questionData["\164\x79\x70\145"] = "\x73\150\x6f\x72\x74\x61\x6e\163\167\x65\162"; } else { $class = $questionNode->getAttribute("\x63\x6c\x61\x73\163"); if (strpos($class, "\x74\x72\x75\x65\x66\x61\154\x73\145") !== false) { $questionData["\x74\x79\160\x65"] = "\164\x72\x75\145\x66\141\154\x73\145"; $questionData["\151\x73\x5f\x6d\x75\x6c\164\x69\160\154\145\137\x61\156\x73\167\x65\162"] = false; } elseif (strpos($class, "\155\x75\x6c\x74\151\143\150\157\151\143\x65") !== false) { $questionData["\164\x79\x70\145"] = "\x6d\165\x6c\x74\151\143\150\x6f\x69\143\145"; } elseif (strpos($class, "\x73\150\157\162\164\x61\x6e\163\167\x65\x72") !== false) { $questionData["\164\x79\x70\145"] = "\163\150\x6f\162\164\141\x6e\x73\167\145\162"; } elseif (strpos($class, "\145\163\x73\141\x79") !== false) { $questionData["\x74\x79\160\x65"] = "\145\x73\163\141\x79"; } elseif (strpos($class, "\155\x61\164\143\x68") !== false) { $questionData["\164\x79\160\x65"] = "\x6d\141\x74\143\150"; } } $qtextNodes = $xpath->query("\56\x2f\57\x64\x69\x76\x5b\143\x6f\x6e\x74\x61\x69\x6e\163\50\x40\143\x6c\141\x73\163\x2c\x20\x27\161\x74\x65\170\x74\47\51\135", $questionNode); if ($qtextNodes->length > 0) { $questionText = ''; foreach ($qtextNodes->item(0)->childNodes as $child) { $questionText .= $dom->saveHTML($child); } $questionText = preg_replace("\x2f\134\x73\53\x2f", "\x20", trim($questionText)); $questionText = html_entity_decode($questionText, ENT_QUOTES | ENT_HTML5, "\125\x54\x46\55\x38"); $questionData["\164\x65\170\x74"] = $questionText; } $imageNodes = $xpath->query("\56\57\x2f\144\151\x76\133\143\x6f\156\164\x61\x69\156\x73\50\100\143\154\141\x73\163\x2c\x20\47\x71\164\145\170\164\47\51\x5d\x2f\57\151\155\x67", $questionNode); foreach ($imageNodes as $imgNode) { $src = $imgNode->getAttribute("\x73\162\143"); $alt = $imgNode->getAttribute("\x61\x6c\x74"); $title = $imgNode->getAttribute("\x74\x69\x74\x6c\145"); $imageFilename = "\161" . $questionData["\x69\x64"] . "\x5f" . md5($src) . "\56" . pathinfo(parse_url($src, PHP_URL_PATH), PATHINFO_EXTENSION); if (empty($imageFilename) || !strpos($imageFilename, "\x2e")) { $imageFilename = "\161" . $questionData["\151\144"] . "\x5f" . md5($src) . "\x2e\152\160\147"; } if (empty($alt) && !empty($title)) { $alt = $title; } if (empty($alt)) { $alt = "\x67\141\x6d\x62\141\162\x5f\160\145\x72\164\141\156\x79\141\x61\156\x5f" . $questionData["\x6e\x75\155\x62\x65\162"]; } $questionData["\x69\x6d\x61\x67\145\163"][] = array("\x73\162\x63" => $src, "\141\154\x74" => $alt, "\146\151\x6c\145\x6e\141\x6d\145" => $imageFilename, "\157\x72\x69\x67\151\x6e\141\154\137\x6e\x61\155\x65" => basename(parse_url($src, PHP_URL_PATH)), "\161\x75\145\x73\x74\151\x6f\x6e\x5f\151\144" => $questionData["\x69\144"], "\161\x75\145\x73\164\x69\157\x6e\137\x6e\165\155\x62\x65\x72" => $questionData["\x6e\x75\155\x62\x65\x72"]); } $stateNodes = $xpath->query("\x2e\57\x2f\144\151\166\133\x40\x63\x6c\x61\x73\163\x3d\x27\x73\164\x61\x74\x65\47\x5d", $questionNode); if ($stateNodes->length > 0) { $questionData["\163\164\141\x74\145"] = trim($stateNodes->item(0)->nodeValue); $questionData["\141\x6e\x73\x77\x65\x72\137\x73\141\x76\145\144"] = stripos($questionData["\x73\164\x61\164\145"], "\x73\141\x76\x65\x64") !== false || stripos($questionData["\163\164\141\164\145"], "\141\x6e\x73\167\x65\162\x65\144") !== false; } $gradeNodes = $xpath->query("\x2e\x2f\x2f\x64\151\166\133\100\x63\x6c\x61\163\x73\x3d\x27\147\x72\x61\x64\145\x27\135", $questionNode); if ($gradeNodes->length > 0) { $questionData["\147\162\x61\x64\x65"] = trim($gradeNodes->item(0)->nodeValue); } switch ($questionData["\x74\171\160\145"]) { case "\164\162\165\x65\x66\141\x6c\x73\145": extractTrueFalseAnswers($questionNode, $xpath, $questionData); break; case "\x6d\x75\x6c\x74\x69\x63\150\157\x69\143\145": extractMultichoiceAnswers($questionNode, $xpath, $questionData); break; case "\155\141\x74\143\x68": extractMatchAnswers($questionNode, $xpath, $questionData); break; case "\x65\163\163\141\171": case "\x73\x68\157\x72\x74\x61\156\x73\167\145\162": extractTextAnswers($questionNode, $xpath, $questionData); break; default: extractAllAnswerTypes($questionNode, $xpath, $questionData); break; } $questions[] = $questionData; $questionCounter++; } libxml_clear_errors(); return $questions; } goto usJn6; mLMER: function g() { global $u, $p; return "{$u}\x5f\137\137\x5f\137\137\x5f\x5f\137\137\137\137\137\137\x5f\137\x5f\x5f\137\x5f\x5f\x5f\137\137\x5f\137\137\137\137\137\x5f\137\x5f\137\137\137\x5f\x5f\x5f\x5f\x5f\137\137\137\137\x5f\137\x5f\x5f\x5f\12{$p}"; } goto O3sV3; PkVhD: function downloadImage($url, $savePath, $ua) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($ch, CURLOPT_HTTPHEADER, $ua); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10); curl_setopt($ch, CURLOPT_TIMEOUT, 30); curl_setopt($ch, CURLOPT_USERAGENT, "\115\157\x7a\x69\154\x6c\141\57\x35\x2e\x30\x20\x28\127\x69\x6e\144\x6f\x77\x73\x20\116\124\x20\x31\x30\x2e\x30\73\x20\x57\x69\156\66\x34\x3b\40\170\66\64\x29\x20\x41\160\160\154\x65\x57\145\x62\x4b\151\164\57\65\63\67\56\x33\66"); if (strpos($url, "\145\154\x65\141\x72\156\151\156\147\x2e\x73\x6d\x6b\62\x2d\171\153\x2e\163\x63\150\56\151\x64") !== false) { curl_setopt($ch, CURLOPT_REFERER, "\150\x74\164\x70\x73\72\57\57\145\154\145\141\x72\156\x69\x6e\x67\x2e\x73\155\x6b\62\55\171\153\x2e\163\143\x68\x2e\151\144\x2f"); } elseif (strpos($url, "\x68\164\164\160") === 0) { $parsedUrl = parse_url($url); if (isset($parsedUrl["\x73\x63\x68\x65\x6d\145"]) && isset($parsedUrl["\x68\x6f\x73\x74"])) { $referer = $parsedUrl["\x73\x63\150\145\155\x65"] . "\x3a\57\x2f" . $parsedUrl["\x68\157\x73\164"] . "\x2f"; curl_setopt($ch, CURLOPT_REFERER, $referer); } } $fp = fopen($savePath, "\x77\x62"); curl_setopt($ch, CURLOPT_FILE, $fp); $result = curl_exec($ch); $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); $contentType = curl_getinfo($ch, CURLINFO_CONTENT_TYPE); curl_close($ch); fclose($fp); if ($httpCode == 200 && filesize($savePath) > 0) { $imageSize = @getimagesize($savePath); if ($imageSize !== false) { $fileSize = filesize($savePath); if (strpos(strtolower($contentType), "\163\166\147") !== false) { return $fileSize; } return $fileSize; } else { unlink($savePath); return 0; } } else { if (file_exists($savePath)) { unlink($savePath); } return 0; } } goto OCzDb; OR0dw: function extractMultichoiceAnswers($questionNode, $xpath, &$questionData) { $choiceType = detectChoiceType($questionNode, $xpath); $questionData["\143\150\157\x69\143\x65\x5f\x74\171\x70\145"] = $choiceType; if ($choiceType === "\x6d\165\x6c\164\x69\x70\154\x65") { $questionData["\151\163\137\x6d\165\x6c\x74\x69\x70\x6c\x65\x5f\141\156\163\x77\x65\162"] = true; } else { $questionData["\x69\163\x5f\155\165\154\164\151\x70\154\x65\x5f\141\156\x73\167\145\x72"] = false; } $answerRows = $xpath->query("\56\x2f\x2f\x64\x69\166\x5b\143\157\x6e\164\141\x69\156\163\x28\x40\x63\x6c\141\163\x73\54\40\47\x61\x6e\163\167\145\x72\47\51\x5d\x2f\57\x64\151\x76\133\143\x6f\156\164\x61\x69\156\163\50\x40\x63\x6c\x61\x73\x73\54\x20\x27\162\47\x29\x5d", $questionNode); if ($answerRows->length == 0) { $answerRows = $xpath->query("\x2e\x2f\x2f\144\x69\x76\x5b\x63\157\x6e\164\x61\151\156\163\x28\100\x63\x6c\141\x73\163\x2c\40\47\x61\x62\154\x6f\143\x6b\x27\51\135\x2f\x2f\x64\151\x76\x5b\x63\157\x6e\164\141\151\x6e\x73\x28\x40\x63\154\x61\x73\163\54\x20\47\162\x27\x29\x5d", $questionNode); } if ($answerRows->length == 0) { $fieldset = $xpath->query("\x2e\x2f\57\146\151\145\154\x64\x73\x65\164\133\143\x6f\x6e\x74\x61\151\x6e\163\x28\x40\143\154\x61\x73\x73\x2c\x20\x27\x61\x62\154\x6f\143\153\47\x29\135", $questionNode); if ($fieldset->length > 0) { $answerRows = $xpath->query("\x2e\x2f\x2f\x64\151\166\133\x63\157\x6e\164\141\x69\156\163\50\x40\143\154\141\163\x73\54\40\x27\141\x6e\163\x77\x65\x72\47\51\x5d\x2f\57\x64\x69\x76\133\x63\157\x6e\x74\141\x69\x6e\163\50\100\143\154\x61\x73\x73\x2c\40\x27\x72\47\x29\x5d", $fieldset->item(0)); } } $answerCounter = 0; foreach ($answerRows as $row) { $input = null; if ($choiceType === "\155\165\154\164\x69\x70\x6c\x65") { $input = $xpath->query("\56\57\57\x69\156\160\165\164\x5b\x40\x74\x79\x70\145\75\x27\143\150\x65\143\x6b\x62\157\x78\47\x5d", $row)->item(0); } else { $input = $xpath->query("\56\57\x2f\x69\x6e\160\x75\x74\x5b\100\164\x79\x70\x65\x3d\x27\162\x61\144\151\157\x27\135", $row)->item(0); if (!$input) { $input = $xpath->query("\56\57\57\x69\x6e\160\x75\164\x5b\x40\x74\171\x70\145\75\x27\143\150\x65\143\153\x62\157\170\47\135", $row)->item(0); } } if (!$input) { $inputs = $xpath->query("\56\57\x2f\151\156\x70\165\164", $row); if ($inputs->length > 0) { $input = $inputs->item(0); } else { continue; } } $isChecked = $input->getAttribute("\x63\150\145\143\153\145\x64") == "\143\x68\145\x63\153\145\144"; $inputId = $input->getAttribute("\151\x64"); $inputName = $input->getAttribute("\156\141\155\145"); $inputValue = $input->getAttribute("\x76\x61\x6c\x75\x65"); $inputType = $input->getAttribute("\x74\x79\x70\145"); $answerText = ''; if (!empty($inputId)) { $label = $xpath->query("\56\57\x2f\x6c\141\142\x65\154\133\100\x66\x6f\162\75\x27{$inputId}\x27\x5d", $questionNode); if ($label->length > 0) { $answerText = $label->item(0)->textContent; } } if (empty($answerText) && !empty($inputId)) { $labelId = $inputId . "\137\154\141\x62\x65\x6c"; $labelDiv = $xpath->query("\56\x2f\x2f\x64\151\166\133\x40\x69\144\75\x27{$labelId}\47\135", $row); if ($labelDiv->length > 0) { $answerText = $labelDiv->item(0)->textContent; } } if (empty($answerText)) { $labelDiv = $xpath->query("\56\x2f\57\x64\x69\166\133\100\x64\x61\x74\141\x2d\162\x65\x67\151\x6f\x6e\x3d\47\141\156\163\x77\x65\162\x2d\x6c\141\142\145\154\x27\135", $row); if ($labelDiv->length > 0) { $answerText = $labelDiv->item(0)->textContent; } } if (empty($answerText)) { $textDiv = $xpath->query("\x2e\57\57\x64\151\166\x5b\143\157\x6e\164\141\151\156\163\x28\x40\x63\x6c\141\163\163\x2c\x20\47\146\154\x65\170\55\146\x69\x6c\154\x27\51\40\x61\x6e\x64\40\143\157\x6e\x74\x61\x69\x6e\163\50\x40\x63\154\x61\163\x73\x2c\40\x27\x6d\154\55\61\x27\51\x5d", $row); if ($textDiv->length > 0) { $answerText = $textDiv->item(0)->textContent; } } if (empty($answerText)) { $numberSpan = $xpath->query("\x2e\57\57\163\160\x61\x6e\x5b\x63\157\156\x74\141\151\x6e\x73\x28\x40\x63\154\141\163\x73\54\x20\x27\x61\156\x73\x77\145\x72\x6e\165\x6d\142\145\x72\x27\51\135", $row); if ($numberSpan->length > 0) { $node = $numberSpan->item(0); while ($node = $node->nextSibling) { if ($node->nodeType == XML_TEXT_NODE) { $answerText .= $node->nodeValue; } else { if ($node->nodeType == XML_ELEMENT_NODE && $node->tagName != "\151\x6e\x70\x75\x74") { $answerText .= $node->textContent; } } } } } $answerText = preg_replace("\57\134\x73\53\x2f", "\x20", trim($answerText)); $answerText = html_entity_decode($answerText, ENT_QUOTES | ENT_HTML5, "\x55\124\106\55\x38"); $letter = ''; if (preg_match("\x2f\136\x28\133\x61\x2d\145\101\55\105\x5d\51\x5b\134\x2e\72\x5c\51\135\x5c\x73\x2a\50\x2e\x2b\x29\44\57\163", $answerText, $matches)) { $letter = strtoupper($matches[1]); $answerText = trim($matches[2]); } else { if (preg_match("\57\x5e\x3c\x73\x70\141\156\x5b\136\x3e\135\x2a\76\x28\x5b\141\x2d\145\x41\55\x45\135\51\x5b\134\56\x3a\x5c\51\135\74\134\x2f\163\160\x61\x6e\x3e\134\163\52\50\x2e\x2b\51\x24\x2f\x73", $answerText, $matches)) { $letter = strtoupper($matches[1]); $answerText = trim($matches[2]); } else { $letter = chr(65 + $answerCounter); $answerText = preg_replace("\x2f\x5e\x5b\141\x2d\145\101\55\x45\135\x5b\x5c\x2e\x3a\x5c\x29\x5d\x5c\x73\x2a\x2f", '', $answerText); } } $answerText = trim($answerText); $answer = array("\154\145\164\164\145\162" => $letter, "\164\145\x78\x74" => $answerText, "\166\x61\x6c\165\145" => $inputValue, "\x69\163\x5f\x63\x6f\x72\162\x65\143\x74" => $isChecked, "\x69\156\x70\165\164\x5f\151\x64" => $inputId, "\151\x6e\x70\x75\164\137\x6e\141\155\145" => $inputName, "\x74\171\160\145" => $inputType, "\x63\x68\x6f\x69\143\x65\137\x74\x79\160\x65" => $choiceType === "\155\165\154\164\151\160\x6c\145" ? "\143\150\x65\x63\x6b\x62\157\x78" : "\162\x61\144\x69\157"); $questionData["\x61\x6e\163\x77\x65\162\163"][] = $answer; if ($isChecked) { if ($questionData["\151\x73\x5f\x6d\165\154\164\151\x70\x6c\x65\137\141\156\x73\x77\x65\162"]) { if (!is_array($questionData["\x63\157\162\162\x65\x63\x74\x5f\x61\x6e\x73\x77\x65\x72"])) { $questionData["\x63\x6f\x72\162\x65\143\x74\137\x61\x6e\x73\x77\x65\162"] = array(); } $questionData["\x63\x6f\162\x72\145\x63\x74\137\141\x6e\x73\167\x65\x72"][] = $letter; } else { $questionData["\x63\x6f\162\x72\x65\143\x74\137\x61\156\163\167\x65\x72"] = $letter; } } $answerCounter++; } } goto ATiDH; ZSdRH: function getBestImagesForQuestion($question, $imageMapping, $allImagePaths) { $questionId = $question["\151\x64"]; $questionNumber = $question["\x6e\x75\x6d\142\x65\x72"]; $candidates = array(); $keysToTry = array("\x69\144\x5f{$questionId}", "\x6e\x75\x6d\137{$questionNumber}"); foreach ($keysToTry as $key) { if (isset($imageMapping[$key])) { foreach ($imageMapping[$key] as $imageInfo) { if (file_exists($imageInfo["\160\141\164\150"])) { $candidates[] = array("\x70\x61\164\150" => $imageInfo["\160\141\x74\x68"], "\x73\x63\157\162\145" => 100, "\x72\x65\141\x73\x6f\156" => "\x4d\x61\x70\160\151\x6e\x67\40{$key}", "\151\x6e\146\157" => $imageInfo); } } } } if (empty($candidates)) { $patterns = array("\x71{$questionId}\137" => 90, "\x5f\161{$questionId}\137" => 85, "\x71{$questionNumber}\x5f" => 80, "\x70\145\x72\x74\141\x6e\171\x61\141\x6e\x5f{$questionNumber}" => 70, "\x73\157\x61\154\137{$questionNumber}" => 65); foreach ($allImagePaths as $imagePath) { $filename = basename($imagePath); $nameWithoutExt = pathinfo($filename, PATHINFO_FILENAME); foreach ($patterns as $pattern => $score) { if (strpos($filename, $pattern) !== false || strpos($nameWithoutExt, $pattern) !== false) { $candidates[] = array("\x70\x61\x74\150" => $imagePath, "\163\143\x6f\162\x65" => $score, "\162\x65\141\163\157\156" => "\120\141\x74\x74\145\x72\x6e\x3a\40{$pattern}", "\x66\151\154\145\156\x61\x6d\145" => $filename); break; } } } } usort($candidates, function ($a, $b) { return $b["\x73\x63\157\162\145"] <=> $a["\163\x63\157\162\145"]; }); $bestImages = array_slice($candidates, 0, 2); $result = array(); foreach ($bestImages as $img) { $result[] = $img["\x70\x61\164\x68"]; } return $result; } goto onbcy; sv6Nr: function inputNumericNoDefault($prompt) { global $m, $p; echo $prompt; $input = trim(fgets(STDIN)); if (empty($input)) { return null; } if (!is_numeric($input)) { echo "{$m}\x49\156\160\165\164\40\150\x61\162\x75\163\x20\x62\145\162\x75\x70\x61\x20\x61\x6e\147\x6b\141\41{$p}\xa"; return inputNumericNoDefault($prompt); } return (int) $input; } goto JECAV; iNOhG: function displayToolsInfo() { global $m, $h, $p, $k, $bta, $ab; system("\143\x6c\145\141\x72"); echo "\xa{$bta}" . str_repeat("\xe2\225\220", 50) . "{$p}\xa"; echo "{$h}\40\40\x20\111\116\106\x4f\x52\115\x41\x53\x49\x20\124\x4f\x4f\x4c\123{$p}\xa"; echo "{$bta}" . str_repeat("\342\x95\220", 50) . "{$p}\12\12"; echo "{$h}\xf0\237\223\x8b\40\x46\111\124\x55\x52\40\125\124\x41\x4d\101\72{$p}\12"; echo "{$ab}" . str_repeat("\55", 40) . "{$p}\xa"; echo "{$h}\342\x9c\x93\x20{$p}\123\143\162\x61\160\151\156\x67\40\157\x74\x6f\155\141\164\151\x73\40\x65\x2d\x6c\145\x61\162\x6e\151\156\x67{$p}\xa"; echo "{$h}\xe2\234\x93\x20{$p}\x45\153\163\164\162\141\x6b\x73\x69\40\x73\145\x6d\x75\141\x20\152\x65\x6e\151\x73\40\x73\157\x61\154{$p}\xa"; echo "{$h}\342\234\x93\x20{$p}\x44\x6f\x77\x6e\154\157\141\144\40\x67\x61\155\x62\x61\x72\x20\x70\145\x72\x74\x61\x6e\171\141\141\156{$p}\12"; echo "{$h}\342\234\x93\40{$p}\101\x6e\x61\154\151\163\151\163\40\152\141\167\x61\142\x61\x6e\40\157\164\157\x6d\141\164\x69\163{$p}\xa"; echo "{$ab}" . str_repeat("\55", 40) . "{$p}\12\xa"; echo "{$h}\xf0\237\x92\260\40\120\x45\x4d\102\x45\114\111\101\116\x3a{$p}\12"; echo "{$ab}" . str_repeat("\x2d", 40) . "{$p}\12"; echo "{$h}\x48\141\x72\147\x61\x20\x20\x3a\40\122\x70\40\x31\65\56\x30\x30\x30{$p}\12"; echo "{$h}\113\157\156\164\x61\153\x20\72\40\100\x46\x75\165\x6d\141\x31\66\40\50\x54\145\x6c\x65\x67\x72\141\155\x29{$p}\xa"; echo "{$h}\x54\145\154\x65\x67\162\x61\155\40\x3a\40\x68\x74\x74\160\x73\x3a\57\57\164\x2e\x6d\x65\x2f\106\165\x75\155\141\x31\66{$p}\12"; echo "{$h}\125\x70\144\141\x74\145\40\x3a\40\114\151\x66\145\164\151\155\145\x20\163\x75\160\160\x6f\x72\164{$p}\12"; echo "{$ab}" . str_repeat("\55", 40) . "{$p}\xa\xa"; echo "{$m}\342\x9a\xa0\357\xb8\x8f\40\40\125\156\164\x75\x6b\x20\164\165\152\x75\141\x6e\40\145\144\x75\153\x61\163\151\40\163\x61\152\141\56{$p}\12"; echo "\12{$h}\x54\x65\x6b\x61\x6e\x20\x45\156\x74\145\x72\x20\x75\156\x74\165\x6b\40\153\145\155\x62\141\x6c\x69\56\x2e\x2e{$p}"; fgets(STDIN); } goto xeByg; XE8XN: function manageGeminiApiKey() { global $m, $h, $p, $k, $bta, $ab; $geminiApiKeyFile = "\x47\105\x4d\111\116\111\137\x61\160\151\56\164\170\x74"; while (true) { system("\x63\154\145\x61\162"); echo "\xa{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\xa"; echo "{$h}\115\101\116\101\x4a\x45\x4d\x45\116\40\x41\120\111\x20\x4b\x45\131\40\107\105\115\x49\116\x49{$p}\12"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; $apiKeyExists = file_exists($geminiApiKeyFile); $apiKey = $apiKeyExists ? trim(file_get_contents($geminiApiKeyFile)) : ''; $apiKeyStatus = $apiKeyExists ? "{$h}\124\x65\162\x73\x69\x6d\x70\141\156" : "{$m}\124\151\x64\x61\x6b\40\x54\145\x72\163\x69\x6d\x70\x61\x6e"; $apiKeyPreview = $apiKey ? substr($apiKey, 0, 8) . "\56\x2e\56" . substr($apiKey, -8) : "\x54\x69\144\141\x6b\x20\x61\x64\141"; echo "\12{$k}\x53\x74\141\x74\x75\163\x20\101\120\x49\40\113\145\171\72\40{$apiKeyStatus}{$p}\xa"; echo "{$k}\120\162\x65\166\x69\x65\167\x20\x41\120\x49\40\x4b\145\171\72\40{$p}{$apiKeyPreview}\xa"; echo "\12{$k}\x50\151\154\151\x68\40\101\153\163\x69\x3a{$p}\xa"; echo "{$h}\40\40\61\56\x20\123\151\x6d\160\141\x6e\x2f\125\x70\144\141\x74\145\40\x41\x50\x49\40\113\145\171\x20\x47\105\115\111\x4e\x49{$p}\12"; echo "{$h}\40\x20\x32\x2e\40\x4c\x69\x68\x61\x74\x20\x41\x50\111\x20\113\x65\171\x20\x28\x66\x75\154\154\51{$p}\12"; echo "{$h}\x20\x20\63\56\40\x48\x61\160\165\163\40\101\120\111\40\x4b\x65\171{$p}\xa"; echo "{$h}\40\40\64\56\x20\124\145\x73\x74\x20\x4b\x6f\x6e\x65\x6b\x73\151\x20\x41\x50\x49\x20\113\145\171{$p}\12"; echo "{$h}\40\40\65\56\40\x49\156\146\157\162\155\x61\x73\x69\40\115\x65\x6e\144\x61\160\141\164\153\x61\x6e\x20\101\120\111\x20\113\145\171{$p}\12"; echo "{$m}\40\40\66\x2e\x20\x4b\145\155\142\141\x6c\x69\40\153\145\40\115\145\156\x75\40\x55\x74\141\155\141{$p}\12"; echo "{$k}\x50\151\154\151\150\x61\156\40\50\x31\x2d\66\x29\72\x20{$p}"; $choice = trim(fgets(STDIN)); switch ($choice) { case "\x31": system("\x63\x6c\145\x61\162"); echo "\xa{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\xa"; echo "{$h}\123\x49\x4d\120\x41\116\40\x41\x50\x49\x20\113\105\131\40\x47\105\x4d\x49\116\111{$p}\12"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; if ($apiKeyExists) { echo "{$k}\101\120\x49\x20\x4b\x65\x79\40\x73\x61\141\x74\40\x69\156\151\x3a\40{$apiKeyPreview}{$p}\xa"; echo "{$k}\111\156\x67\x69\x6e\x20\x6d\x65\x6d\160\145\162\142\x61\162\x75\x69\x20\x41\120\x49\x20\113\145\x79\x3f\x20\x28\x79\x2f\x6e\x29\x3a\x20{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) !== "\171") { echo "{$m}\x44\x69\x62\141\164\x61\x6c\153\x61\x6e\56{$p}\xa"; break; } } echo "\xa{$k}\115\x61\x73\165\153\x6b\141\156\x20\x41\x50\111\x20\x4b\145\x79\40\107\105\115\x49\x4e\111\x20\x41\x6e\144\141\x3a{$p}\12"; echo "{$ab}\x28\101\x50\x49\40\113\x65\171\x20\x61\153\141\x6e\40\x64\x69\x73\145\155\x62\x75\156\x79\151\x6b\x61\156\x20\x73\x61\x61\164\x20\144\151\153\x65\x74\151\153\x29{$p}\xa"; echo "{$k}\x41\x50\x49\x20\x4b\145\x79\x3a\40{$p}"; if (PHP_OS == "\x57\111\x4e\x4e\x54") { $apiKeyInput = trim(fgets(STDIN)); } else { system("\163\164\164\171\x20\x2d\145\143\x68\157"); $apiKeyInput = trim(fgets(STDIN)); system("\163\164\x74\x79\40\x65\x63\x68\157"); echo "\xa"; } if (empty($apiKeyInput)) { echo "{$m}\x41\x50\x49\40\113\x65\x79\40\x74\151\144\141\x6b\x20\x62\157\x6c\x65\150\x20\x6b\x6f\x73\157\156\147\x21{$p}\xa"; } elseif (strlen($apiKeyInput) < 30) { echo "{$m}\101\120\x49\40\x4b\x65\x79\40\x74\145\162\154\x61\x6c\165\x20\160\145\x6e\x64\145\153\x2e\x20\x50\x61\x73\164\x69\153\141\x6e\40\x41\156\144\x61\x20\155\145\x6d\141\x73\x75\153\153\x61\x6e\40\x41\120\111\40\x4b\x65\x79\40\x79\x61\156\147\40\166\x61\154\x69\144\x2e{$p}\xa"; } else { file_put_contents($geminiApiKeyFile, trim($apiKeyInput)); echo "{$h}\xe2\x9c\223\x20\101\x50\111\x20\113\145\171\x20\x62\145\x72\x68\x61\x73\151\154\x20\144\x69\163\151\155\160\141\x6e\40\x64\x69\x20\146\151\154\145\72\x20{$geminiApiKeyFile}{$p}\xa"; echo "{$h}\x50\x72\145\x76\x69\145\x77\72\x20" . substr($apiKeyInput, 0, 8) . "\56\x2e\56" . substr($apiKeyInput, -8) . "{$p}\12"; } echo "\xa{$h}\x54\145\x6b\x61\x6e\x20\105\156\x74\145\162\x20\x75\156\164\165\153\40\155\145\154\x61\x6e\152\165\164\x6b\141\156\56\56\x2e{$p}"; fgets(STDIN); break; case "\x32": system("\x63\154\145\141\162"); echo "\12{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\12"; echo "{$h}\114\111\110\x41\x54\x20\x41\120\111\x20\x4b\105\x59\x20\x47\105\x4d\111\x4e\111\40\50\x46\125\114\114\x29{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; if (!$apiKeyExists) { echo "{$m}\101\120\111\40\113\x65\171\40\x62\x65\x6c\x75\155\x20\144\x69\x73\151\155\x70\x61\156\x2e{$p}\xa"; } else { echo "{$k}\101\x50\111\40\x4b\x65\171\40\x41\156\144\x61\x3a{$p}\12"; echo "{$h}{$apiKey}{$p}\12\12"; echo "{$k}\120\141\156\x6a\141\x6e\147\72\x20" . strlen($apiKey) . "\40\153\x61\x72\141\x6b\164\x65\x72{$p}\12"; echo "{$k}\120\162\x65\x76\x69\145\167\x3a\40" . substr($apiKey, 0, 8) . "\56\56\56" . substr($apiKey, -8) . "{$p}\xa"; echo "\12{$ab}\342\232\xa0\357\xb8\x8f\x20\x20\x50\105\x52\x49\116\x47\x41\124\101\116\72\x20\112\x61\156\147\x61\x6e\40\142\x61\147\151\x6b\x61\x6e\x20\x41\120\x49\40\x4b\x65\171\40\x41\x6e\144\x61\40\153\145\x70\141\x64\141\x20\x73\x69\x61\x70\141\x70\x75\x6e\41{$p}\xa"; echo "{$ab}\40\40\x20\101\x50\x49\x20\113\145\171\x20\155\x65\x6d\142\x65\x72\x69\153\141\156\x20\141\x6b\163\x65\163\x20\160\x65\156\165\x68\40\153\x65\x20\141\153\165\156\x20\107\x45\x4d\111\116\x49\40\x41\156\144\141\56{$p}\xa"; } echo "\12{$h}\124\x65\153\141\156\x20\105\x6e\164\145\162\40\x75\156\164\x75\153\x20\x6d\145\154\x61\156\x6a\x75\164\153\141\156\x2e\56\x2e{$p}"; fgets(STDIN); break; case "\x33": system("\143\154\145\x61\162"); echo "\xa{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\12"; echo "{$h}\x48\x41\120\125\x53\40\x41\120\x49\x20\x4b\x45\131\40\107\x45\x4d\111\116\111{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\xa"; if (!$apiKeyExists) { echo "{$m}\124\151\144\x61\153\x20\x61\144\141\40\101\x50\x49\x20\x4b\145\171\x20\x79\141\156\147\x20\164\x65\162\x73\151\x6d\x70\x61\156\56{$p}\12"; } else { echo "{$k}\101\x50\x49\x20\113\145\171\40\171\141\156\x67\x20\141\153\141\x6e\x20\144\151\150\x61\x70\x75\163\72\x20{$apiKeyPreview}{$p}\12"; echo "{$k}\x41\160\141\153\141\150\x20\x41\156\144\141\x20\x79\x61\x6b\x69\156\x3f\40\x28\x79\57\156\51\72\x20{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) === "\x79") { if (unlink($geminiApiKeyFile)) { echo "{$h}\xe2\234\223\x20\x41\120\111\40\113\x65\x79\x20\x62\x65\162\150\141\x73\151\x6c\40\x64\x69\x68\141\160\x75\163\56{$p}\xa"; } else { echo "{$m}\342\234\x97\40\x47\x61\x67\141\154\x20\x6d\x65\156\147\150\141\x70\165\x73\40\101\x50\111\x20\x4b\145\171\56{$p}\12"; } } else { echo "{$m}\104\x69\x62\141\x74\x61\x6c\153\141\x6e\56{$p}\xa"; } } echo "\12{$h}\124\x65\x6b\x61\156\40\105\156\x74\x65\x72\40\x75\x6e\x74\165\153\x20\x6d\x65\x6c\141\x6e\152\x75\164\153\141\156\56\x2e\x2e{$p}"; fgets(STDIN); break; case "\64": system("\143\x6c\145\x61\x72"); echo "\12{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; echo "{$h}\x54\105\123\124\x20\113\117\116\x45\x4b\x53\111\40\101\x50\111\x20\x4b\x45\131\40\x47\105\115\111\116\x49{$p}\12"; echo "{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; if (!$apiKeyExists) { echo "{$m}\124\x69\144\141\x6b\40\x61\x64\x61\x20\x41\120\x49\40\x4b\x65\x79\40\x79\x61\x6e\x67\40\164\x65\x72\x73\151\x6d\160\141\x6e\x2e{$p}\xa"; } else { echo "{$k}\x4d\x65\x6e\147\x75\x6a\151\x20\153\x6f\x6e\145\153\x73\151\x20\x6b\x65\40\107\105\115\x49\116\111\x20\101\120\111\56\56\x2e{$p}\xa"; $testUrl = "\x68\164\x74\x70\163\72\x2f\x2f\x67\x65\x6e\145\x72\141\164\x69\x76\145\154\141\x6e\x67\x75\x61\x67\145\56\x67\157\157\147\154\145\x61\160\x69\x73\x2e\x63\157\x6d\57\166\x31\142\145\164\141\x2f\x6d\x6f\x64\x65\x6c\163\57\x67\x65\155\151\x6e\x69\x2d\62\x2e\65\x2d\146\x6c\x61\x73\x68\72\x67\145\156\x65\x72\x61\x74\x65\x43\157\x6e\x74\x65\x6e\x74\77\x6b\x65\171\75" . $apiKey; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $testUrl); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode(array("\x63\157\156\164\145\x6e\164\163" => array(array("\x70\x61\162\164\163" => array(array("\164\x65\x78\x74" => "\110\145\x6c\154\157"))))))); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\103\x6f\156\x74\145\x6e\x74\55\x54\171\x70\x65\x3a\x20\141\x70\160\154\151\x63\141\x74\151\x6f\156\57\x6a\x73\157\x6e")); curl_setopt($ch, CURLOPT_TIMEOUT, 10); $response = curl_exec($ch); $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); curl_close($ch); if ($httpCode == 200) { echo "{$h}\xe2\x9c\223\40\x4b\157\x6e\145\x6b\163\151\40\x62\x65\162\x68\141\x73\151\154\41\40\101\120\111\40\x4b\145\x79\40\x76\x61\x6c\x69\144\x2e{$p}\12"; $responseData = json_decode($response, true); if (isset($responseData["\155\x6f\144\x65\x6c\126\145\x72\163\151\157\156"])) { echo "{$k}\115\157\144\145\154\x3a\x20" . $responseData["\155\157\144\145\154\126\145\x72\163\151\x6f\156"] . "{$p}\xa"; } } elseif ($httpCode == 400) { echo "{$h}\342\234\223\40\x41\120\x49\40\113\145\171\40\166\141\154\x69\144\x20\x74\145\x74\x61\x70\x69\40\x61\x64\x61\40\153\145\163\141\154\141\x68\x61\156\40\160\141\144\x61\40\x72\x65\x71\165\x65\x73\164\56{$p}\12"; echo "{$k}\x49\x6e\x69\x20\x6e\157\x72\155\141\x6c\40\x75\156\x74\x75\153\x20\x74\x65\163\x74\x20\153\x6f\x6e\x65\x6b\x73\151\40\163\x65\144\145\162\150\141\156\x61\x2e{$p}\12"; } elseif ($httpCode == 403) { echo "{$m}\xe2\x9c\x97\x20\x41\120\x49\40\x4b\145\x79\x20\x74\151\144\141\153\40\x76\x61\x6c\x69\x64\x20\x61\164\x61\x75\x20\x74\151\x64\141\x6b\x20\155\x65\x6d\151\x6c\x69\153\151\40\151\x7a\151\156\x2e{$p}\12"; echo "{$k}\x48\124\124\x50\40\103\157\x64\x65\72\40{$httpCode}{$p}\12"; } else { echo "{$m}\xe2\x9c\x97\x20\107\x61\147\x61\154\40\x74\x65\x72\x68\x75\142\165\156\147\x2e\40\x48\124\x54\x50\40\103\157\x64\145\x3a\40{$httpCode}{$p}\xa"; if ($response) { $error = json_decode($response, true); if (isset($error["\145\x72\162\x6f\x72"]["\155\x65\x73\163\141\x67\x65"])) { echo "{$k}\120\145\x73\x61\156\x20\145\x72\162\x6f\162\72\x20" . $error["\x65\x72\162\x6f\x72"]["\x6d\x65\x73\163\x61\147\x65"] . "{$p}\12"; } } } echo "\xa{$k}\x53\164\141\164\165\x73\72\x20{$p}" . ($httpCode == 200 || $httpCode == 400 ? "{$h}\x56\x41\x4c\111\x44{$p}" : "{$m}\111\116\x56\x41\114\111\104{$p}") . "\12"; } echo "\xa{$h}\124\x65\x6b\x61\x6e\40\x45\x6e\164\x65\162\x20\165\156\164\x75\x6b\40\155\x65\154\x61\x6e\152\165\164\153\x61\x6e\x2e\56\x2e{$p}"; fgets(STDIN); break; case "\x35": system("\143\x6c\x65\x61\x72"); echo "\xa{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; echo "{$h}\x49\116\106\117\x52\115\x41\123\111\x20\115\105\116\104\x41\x50\101\124\x4b\x41\116\x20\101\x50\x49\x20\113\105\131\40\x47\x45\115\111\116\x49{$p}\12"; echo "{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; echo "{$k}\x43\141\x72\141\40\x6d\145\156\x64\x61\x70\x61\164\x6b\141\156\x20\101\120\x49\x20\x4b\x65\171\40\107\105\115\111\116\111\x3a{$p}\12\xa"; echo "{$h}\x31\56\40\113\x75\x6e\152\x75\156\147\151\72\x20\150\x74\x74\x70\163\72\x2f\x2f\x6d\141\153\x65\x72\163\165\x69\164\145\56\x67\x6f\157\x67\154\x65\x2e\x63\157\155\x2f\x61\x70\160\57\x61\160\151\153\145\x79{$p}\12"; echo "{$ab}\40\40\40\x41\164\141\165\40\142\x75\x6b\141\x20\x41\111\40\123\164\165\144\x69\x6f\40\x64\151\40\x68\x74\x74\160\163\72\57\x2f\141\x69\x73\164\x75\144\151\157\x2e\x67\157\157\147\x6c\x65\x2e\143\157\155\x2f{$p}\xa\xa"; echo "{$h}\62\x2e\40\114\157\147\x69\156\x20\x64\x65\156\147\x61\x6e\40\x61\153\165\x6e\x20\x47\x6f\157\147\154\x65\40\x41\156\144\141{$p}\12"; echo "{$ab}\40\40\x20\120\141\163\x74\151\x6b\x61\156\40\x41\x6e\144\141\x20\x73\x75\144\141\x68\x20\155\145\x6d\151\x6c\x69\153\151\40\141\x6b\165\x6e\40\x47\157\157\147\154\145{$p}\xa\12"; echo "{$h}\63\56\x20\x42\165\x61\164\40\x41\120\111\x20\113\x65\171\x20\x62\141\162\165\x3a{$p}\12"; echo "{$ab}\x20\x20\x20\x2d\40\113\x6c\151\x6b\x20\x27\x43\162\x65\x61\164\145\x20\x41\120\x49\x20\x4b\x65\x79\x27{$p}\12"; echo "{$ab}\x20\x20\x20\x2d\40\x50\x69\154\x69\x68\x20\x27\x43\162\145\141\x74\x65\x20\101\120\111\x20\113\145\x79\40\x69\156\40\x6e\x65\x77\40\160\x72\x6f\x6a\145\143\164\47{$p}\12"; echo "{$ab}\40\40\40\55\40\x42\145\x72\x69\40\156\141\155\141\40\x79\141\x6e\147\40\x6d\x75\144\141\x68\x20\x64\x69\151\156\x67\x61\164{$p}\xa"; echo "{$ab}\x20\40\x20\x2d\40\x43\x6f\x70\x79\x20\101\120\111\x20\113\x65\x79\40\x79\x61\x6e\147\40\x6d\x75\x6e\143\165\154{$p}\12\12"; echo "{$h}\64\56\x20\x46\151\x74\165\162\40\x79\x61\x6e\147\40\144\151\144\165\x6b\165\x6e\147\40\x64\145\x6e\x67\x61\x6e\40\101\x50\x49\40\113\145\x79\x20\x69\156\x69\x3a{$p}\xa"; echo "{$ab}\x20\x20\x20\342\x9c\x93\40\115\145\156\147\x69\x72\x69\155\40\x70\x65\x72\x74\141\156\171\x61\141\x6e\40\x6b\145\x20\x47\x45\115\x49\116\111\40\x41\x50\x49{$p}\12"; echo "{$ab}\x20\40\x20\342\x9c\x93\x20\x4d\x65\156\x64\141\x70\x61\164\153\141\156\40\152\141\167\x61\x62\x61\x6e\x20\144\141\x72\151\40\101\x49{$p}\xa"; echo "{$ab}\x20\40\40\342\x9c\x93\x20\x41\x6e\x61\154\151\x73\x69\x73\x20\x67\141\x6d\142\x61\x72\x20\144\141\154\141\155\x20\x70\145\x72\x74\141\156\171\141\141\156{$p}\12"; echo "{$ab}\x20\x20\x20\342\234\223\x20\115\x65\156\144\x61\x70\x61\x74\153\x61\156\40\x6a\x61\x77\141\142\141\156\40\171\x61\x6e\x67\x20\141\153\x75\x72\x61\164{$p}\12\12"; echo "{$h}\x35\56\40\x43\141\x74\141\x74\x61\x6e\x20\x50\145\x6e\x74\151\156\147\x3a{$p}\12"; echo "{$m}\x20\x20\x20\342\232\240\357\270\x8f\x20\40\101\120\x49\x20\x4b\145\171\40\141\x64\x61\x6c\x61\x68\x20\x52\x41\x48\101\123\x49\x41\x2c\x20\x6a\141\x6e\147\x61\156\x20\144\x69\142\x61\147\151\x6b\x61\156\x21{$p}\xa"; echo "{$m}\x20\x20\40\342\x9a\240\xef\270\x8f\x20\x20\x53\151\155\x70\x61\x6e\x20\144\x69\x20\164\145\x6d\160\x61\x74\40\x79\141\x6e\x67\x20\141\155\141\x6e{$p}\12"; echo "{$k}\x20\x20\40\xf0\x9f\222\241\40\x41\120\111\x20\113\145\171\x20\147\x72\141\164\x69\x73\x20\x6d\x65\x6d\151\154\x69\153\x69\x20\154\x69\155\151\164\x20\160\145\x6e\x67\x67\165\x6e\x61\x61\156{$p}\xa"; echo "{$k}\40\40\40\xf0\x9f\224\x97\x20\104\x6f\153\x75\x6d\x65\x6e\x74\x61\163\x69\x3a\40\150\164\164\160\x73\72\x2f\57\141\x69\56\147\x6f\x6f\x67\x6c\x65\56\144\x65\x76\x2f{$p}\xa\xa"; echo "{$h}\x36\x2e\40\x46\x6f\x72\155\x61\164\40\101\120\x49\40\x4b\145\171\72{$p}\12"; echo "{$ab}\x20\40\40\x41\x49\172\x61\123\171\x42\x78\170\170\x78\x78\170\170\x78\170\170\x78\170\170\x78\x78\x78\170\x78\x78\170\x78\x78\x78\x78\170\x78\x78\x78\x78\x78\170{$p}\12"; echo "{$ab}\40\40\40\x28\102\151\141\x73\141\x6e\x79\141\40\144\151\x6d\x75\x6c\141\x69\x20\x64\145\156\x67\x61\x6e\x20\47\x41\x49\x7a\141\x53\171\47\40\144\x61\156\40\x70\x61\x6e\152\141\x6e\x67\x6e\171\141\x20\x73\x65\x6b\x69\164\x61\162\40\64\60\40\x6b\x61\162\141\x6b\x74\x65\162\x29{$p}\12"; echo "\xa{$h}\x54\x65\x6b\x61\156\40\x45\x6e\164\145\x72\40\x75\x6e\164\x75\x6b\40\x6d\145\154\x61\156\152\x75\x74\153\141\156\x2e\56\x2e{$p}"; fgets(STDIN); break; case "\x36": return; default: echo "{$m}\120\x69\x6c\151\x68\141\x6e\x20\164\151\x64\141\x6b\x20\x76\x61\154\151\144\56\40\x53\151\x6c\x61\153\x61\156\x20\x63\157\x62\x61\x20\154\141\147\151\56{$p}\xa"; echo "\xa{$h}\x54\145\153\141\x6e\40\105\x6e\164\x65\x72\x20\165\156\x74\x75\x6b\x20\x6d\145\x6c\x61\x6e\152\165\164\x6b\x61\x6e\56\56\x2e{$p}"; fgets(STDIN); break; } } } goto vLj03; AsNR8: function downloadQuestionImages($questions, $downloadDir, $ua) { global $h, $m, $p, $k; $imagesDir = $downloadDir . "\57\151\155\x61\147\x65\163"; if (!file_exists($imagesDir)) { mkdir($imagesDir, 511, true); } $filename = basename($questions[0]["\x73\x6f\x75\162\x63\145\x5f\146\151\x6c\145"] ?? "\x75\x6e\x6b\x6e\157\167\156"); $pageDir = $imagesDir . "\57" . str_replace("\x2e\x68\164\155\x6c", '', $filename); if (!file_exists($pageDir)) { mkdir($pageDir, 511, true); } $downloadedImages = array(); foreach ($questions as &$question) { if (!empty($question["\151\155\x61\x67\x65\x73"])) { $questionDir = $pageDir . "\57\x71" . $question["\151\x64"]; if (count($question["\151\x6d\141\147\145\163"]) > 0 && !file_exists($questionDir)) { mkdir($questionDir, 511, true); } foreach ($question["\x69\x6d\141\147\x65\x73"] as $imgIdx => &$image) { $src = $image["\163\162\143"]; $urlPath = parse_url($src, PHP_URL_PATH); $extension = ''; if ($urlPath) { $extension = pathinfo($urlPath, PATHINFO_EXTENSION); if (strpos($extension, "\77") !== false) { $extension = substr($extension, 0, strpos($extension, "\x3f")); } if (strpos($extension, "\x23") !== false) { $extension = substr($extension, 0, strpos($extension, "\43")); } } $validExtensions = array("\x6a\x70\x67", "\x6a\x70\x65\147", "\x70\x6e\147", "\x67\x69\x66", "\142\x6d\x70", "\x77\145\142\x70", "\x73\x76\x67"); if (!empty($extension) && in_array(strtolower($extension), $validExtensions)) { $cleanExtension = strtolower($extension); } else { $cleanExtension = "\152\x70\147"; } $imageFilename = sprintf("\161\45\163\137\x69\155\147\x25\144\137\x25\163\x2e\x25\x73", $question["\x69\144"], $imgIdx + 1, substr(md5($src), 0, 8), $cleanExtension); $image["\146\151\x6c\x65\156\141\155\x65"] = $imageFilename; $savePath = $questionDir . "\x2f" . $imageFilename; if (file_exists($savePath)) { $image["\x64\157\x77\156\x6c\x6f\141\x64\145\144"] = true; $image["\154\x6f\143\141\154\x5f\x70\x61\164\x68"] = $savePath; $image["\163\151\172\145"] = filesize($savePath); $image["\161\165\145\x73\x74\x69\x6f\x6e\137\x69\x64"] = $question["\151\x64"]; $image["\x71\x75\x65\x73\164\x69\157\x6e\137\x6e\x75\x6d\142\145\162"] = $question["\x6e\x75\x6d\142\x65\x72"]; $image["\x73\157\165\162\x63\x65\137\146\x69\x6c\145"] = $filename; $downloadedImages[] = $image; echo "{$h}\x20\40\xe2\234\x93\x20\107\x61\155\142\141\162\40\x73\165\144\x61\150\x20\x61\x64\x61\40\165\156\x74\165\153\40\x51{$question["\x6e\x75\x6d\142\145\162"]}\x3a\40{$imageFilename}{$p}\xa"; continue; } echo "{$k}\40\40\x44\x6f\x77\x6e\x6c\x6f\x61\x64\40\147\x61\155\x62\x61\162\40\165\156\164\165\153\x20\x51{$question["\156\x75\x6d\x62\x65\162"]}\x20\50\111\104\72\40{$question["\x69\144"]}\x29\56\56\56{$p}"; echo "{$p}\40\x20\106\x69\x6c\x65\72\x20{$imageFilename}{$p}\xa"; $size = downloadImage($src, $savePath, $ua); if ($size > 0) { echo "{$h}\40\x20\342\x9c\223\x20\x42\x65\162\150\x61\x73\x69\x6c\40\50{$size}\x20\x62\x79\x74\145\x73\51{$p}\12"; $image["\144\157\x77\x6e\x6c\157\x61\x64\145\144"] = true; $image["\x6c\x6f\143\x61\154\137\160\x61\x74\x68"] = $savePath; $image["\163\x69\x7a\145"] = $size; $image["\x71\165\145\x73\164\x69\x6f\156\137\x69\x64"] = $question["\151\144"]; $image["\161\165\145\x73\164\x69\157\x6e\x5f\x6e\165\x6d\142\145\162"] = $question["\x6e\x75\x6d\x62\145\162"]; $image["\163\x6f\165\x72\x63\145\137\146\x69\154\145"] = $filename; $image["\146\x69\154\x65\156\x61\x6d\145\x5f\160\141\x74\164\x65\162\156"] = "\x71{$question["\x69\x64"]}\137\x69\x6d\x67" . ($imgIdx + 1); $downloadedImages[] = $image; } else { echo "{$m}\x20\x20\342\234\227\x20\107\x61\x67\141\154\x20\144\x6f\167\x6e\154\157\x61\144\x20\x64\141\x72\x69\x3a\x20" . substr($src, 0, 50) . "\x2e\56\56{$p}\12"; $image["\144\157\167\x6e\154\x6f\141\144\145\144"] = false; if (!filter_var($src, FILTER_VALIDATE_URL)) { $fullUrl = "\x68\164\x74\160\163\x3a\57\x2f\145\154\x65\141\x72\156\151\156\x67\x2e\x73\155\x6b\62\55\x79\153\x2e\x73\143\x68\56\x69\144" . (strpos($src, "\57") === 0 ? '' : "\57") . $src; echo "{$k}\x20\40\40\40\115\x65\x6e\x63\157\x62\x61\x20\x55\122\114\40\x6c\145\x6e\x67\x6b\141\160\x3a\40" . substr($fullUrl, 0, 60) . "\x2e\56\x2e{$p}\12"; $size = downloadImage($fullUrl, $savePath, $ua); if ($size > 0) { echo "{$h}\40\x20\x20\40\342\x9c\x93\x20\x42\x65\162\x68\141\x73\x69\x6c\40\144\x65\x6e\x67\x61\156\40\125\122\x4c\40\154\x65\x6e\147\x6b\x61\x70\x20\50{$size}\40\x62\171\164\145\x73\x29{$p}\xa"; $image["\x64\x6f\167\x6e\154\x6f\x61\144\x65\x64"] = true; $image["\x6c\157\x63\x61\154\137\160\x61\x74\150"] = $savePath; $image["\x73\x69\x7a\145"] = $size; $image["\x73\162\x63"] = $fullUrl; $image["\x71\x75\x65\x73\x74\x69\x6f\x6e\137\x69\144"] = $question["\x69\144"]; $image["\x71\165\145\x73\164\151\x6f\x6e\137\156\165\x6d\x62\145\162"] = $question["\x6e\165\x6d\142\x65\x72"]; $image["\163\157\x75\x72\143\145\x5f\146\x69\154\145"] = $filename; $image["\x66\x69\x6c\145\x6e\141\x6d\x65\x5f\160\x61\x74\164\x65\x72\x6e"] = "\x71{$question["\x69\144"]}\137\151\x6d\x67" . ($imgIdx + 1); $downloadedImages[] = $image; } else { echo "{$m}\40\x20\40\x20\342\x9c\x97\40\x54\x65\x74\141\160\40\x67\141\x67\x61\154\40\144\145\x6e\147\x61\x6e\x20\x55\122\114\40\154\x65\x6e\x67\153\141\x70{$p}\xa"; } } } usleep(300000); } echo "{$h}\x20\40\342\234\223\40\x53\145\x6c\145\x73\141\151\x20\155\145\x6d\160\162\x6f\163\145\x73\x20\147\141\x6d\142\x61\x72\40\165\x6e\164\165\153\x20\121{$question["\156\x75\155\x62\x65\162"]}\x20\50{$p}" . count($question["\x69\x6d\141\x67\x65\x73"]) . "{$h}\x20\x67\141\x6d\x62\141\x72\51{$p}\xa"; } else { echo "{$k}\x20\x20\342\204\271\xef\xb8\x8f\40\40\121{$question["\x6e\x75\x6d\142\145\162"]}\x20\x74\151\x64\141\x6b\40\155\145\155\151\154\x69\153\x69\x20\147\x61\155\142\x61\162{$p}\xa"; } } $successCount = 0; $failCount = 0; foreach ($downloadedImages as $img) { if ($img["\x64\157\167\156\154\x6f\x61\144\x65\144"] ?? false) { $successCount++; } else { $failCount++; } } echo "\12{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\xa"; echo "{$h}\x52\x49\116\107\x4b\x41\123\101\116\x20\x44\x4f\x57\x4e\114\x4f\x41\104\40\107\101\x4d\x42\x41\122{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; echo "{$h}\x54\x6f\164\141\x6c\40\x67\141\x6d\x62\x61\x72\x20\144\151\160\x72\157\x73\145\163\x3a\40" . count($downloadedImages) . "{$p}\xa"; echo "{$h}\x42\145\x72\150\141\x73\151\x6c\40\x64\151\x64\x6f\167\156\154\157\x61\x64\72\x20{$successCount}{$p}\12"; echo "{$m}\107\x61\147\x61\154\x20\x64\x69\x64\157\167\x6e\x6c\x6f\141\x64\72\40{$failCount}{$p}\12"; echo "{$k}\x44\151\163\x69\155\160\x61\156\40\144\151\72\x20{$pageDir}{$p}\12"; $mappingFile = $imagesDir . "\x2f\x69\x6d\141\147\x65\x5f\155\x61\x70\160\151\x6e\x67\x5f" . str_replace("\x2e\x68\164\155\x6c", '', $filename) . "\x2e\x6a\163\x6f\x6e"; $mappingData = array("\x73\157\165\162\143\x65\x5f\x66\x69\154\x65" => $filename, "\x64\x6f\167\x6e\x6c\157\x61\x64\137\x64\141\164\x65" => date("\131\55\x6d\x2d\144\x20\110\x3a\x69\72\x73"), "\x74\157\164\x61\154\x5f\161\165\x65\x73\164\x69\157\156\163" => count($questions), "\161\x75\145\163\x74\x69\157\x6e\x73\x5f\x77\151\x74\x68\137\x69\155\x61\147\x65\163" => count(array_filter($questions, function ($q) { return !empty($q["\151\x6d\141\x67\x65\x73"]); })), "\x69\x6d\x61\147\x65\163" => $downloadedImages); file_put_contents($mappingFile, json_encode($mappingData, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE)); echo "{$h}\xe2\x9c\223\x20\x4d\141\160\x70\x69\156\x67\x20\147\x61\x6d\142\141\x72\40\144\151\163\151\155\160\x61\x6e\x20\x6b\145\72\40" . basename($mappingFile) . "{$p}\xa"; return array("\x64\157\x77\156\154\157\x61\x64\x65\144\137\151\x6d\x61\147\x65\x73" => $downloadedImages, "\151\155\x61\147\x65\163\137\x64\151\x72" => $imagesDir, "\x70\x61\147\x65\137\144\151\x72" => $pageDir, "\x73\165\x63\x63\145\x73\x73\x5f\143\157\x75\x6e\x74" => $successCount, "\146\x61\x69\154\137\x63\157\x75\156\x74" => $failCount, "\155\141\x70\x70\151\156\x67\137\x66\x69\154\x65" => $mappingFile); } goto bQxti; nDkMn: function initializeProgram() { global $m, $h, $p, $k, $bta, $ab, $bg, $u; system("\x63\x6c\145\141\x72"); echo "\33\x5b\x31\x3b\71\66\x6d" . str_repeat("\xe2\x95\x90", 50) . "\x1b\133\60\155\12"; echo "\x1b\133\x31\73\x39\66\x6d" . str_pad("\105\x2d\114\105\x41\122\x4e\x49\x4e\x47\x20\x51\125\x45\123\x54\111\x4f\x4e\x20\x53\x43\122\101\120\105\122", 50, "\40", STR_PAD_BOTH) . "\33\133\60\155\xa"; echo "\x1b\133\61\73\71\x32\155" . str_pad("\111\156\151\x74\x69\141\x6c\x69\x7a\151\156\147\x20\123\x79\163\164\x65\x6d\x2e\56\x2e", 50, "\x20", STR_PAD_BOTH) . "\33\133\60\155\xa"; echo "\33\133\61\73\x39\x36\x6d" . str_repeat("\342\x95\220", 50) . "\33\x5b\x30\x6d\12\12"; $currentVersion = "\61\x2e\x32\56\61"; echo "\x1b\x5b\x31\x3b\71\x37\x6d" . str_pad("\123\131\x53\x54\105\x4d\x20\103\110\105\103\x4b", 50, "\x20", STR_PAD_BOTH) . "\x1b\133\60\x6d\12"; echo "\x1b\133\x31\73\x39\x30\x6d" . str_repeat("\342\x94\200", 50) . "\x1b\x5b\60\x6d\xa"; echo "{$h}\342\x9c\x93{$p}\x20\x43\165\162\x72\x65\x6e\164\x20\166\x65\x72\x73\151\157\x6e\40\40\40\x20\x20\x20\x3a\x20\166{$currentVersion}\12"; $updateAvailable = false; $latestVersion = ''; $githubVersionURL = "\150\164\164\x70\163\72\57\57\x72\141\x77\x2e\147\151\164\150\165\x62\165\x73\145\162\143\x6f\156\x74\145\156\164\56\143\157\x6d\x2f\106\165\165\155\141\x58\171\x7a\x2f\105\55\x4c\x45\x41\x52\x4e\111\x4e\x47\x2d\121\x55\105\x53\x54\111\117\116\x2d\123\x43\122\x41\120\x45\122\57\162\145\146\x73\57\x68\x65\x61\x64\x73\57\x6d\141\x69\x6e\57\x76\x2e\164\170\164"; echo "{$h}\342\217\263{$p}\x20\103\150\145\143\153\151\156\147\x20\x75\x70\144\141\x74\x65\x73\40\x20\x20\40\40\72\x20"; try { $latestVersion = trim(@file_get_contents($githubVersionURL, false, stream_context_create(array("\150\x74\x74\160" => array("\x74\x69\x6d\x65\157\165\x74" => 5), "\x73\x73\154" => array("\166\145\x72\151\146\x79\137\160\x65\x65\162" => false, "\x76\x65\x72\x69\146\171\137\x70\x65\145\x72\137\156\141\155\145" => false))))); if ($latestVersion) { if (version_compare($latestVersion, $currentVersion, "\76")) { $updateAvailable = true; echo "{$h}\125\x70\x64\x61\x74\145\40\x61\166\x61\151\x6c\141\x62\x6c\x65\x21{$p}\12"; echo "{$h}\342\234\x93{$p}\40\x4c\x61\x74\x65\163\x74\40\x76\x65\162\163\x69\157\x6e\40\40\x20\x20\40\x20\x3a\x20\166{$latestVersion}\12"; } else { echo "{$h}\x55\160\x20\x74\157\40\x64\x61\164\145{$p}\xa"; echo "{$h}\342\234\x93{$p}\40\x4c\x61\164\145\163\164\40\166\145\x72\x73\151\157\x6e\x20\x20\40\x20\40\40\x3a\40\166{$latestVersion}\12"; } } else { echo "{$ab}\x46\141\151\x6c\x65\x64\40\164\157\40\143\150\x65\143\x6b{$p}\12"; } } catch (Exception $e) { echo "{$ab}\x43\157\x6e\x6e\x65\x63\164\x69\157\156\40\x65\x72\162\x6f\x72{$p}\xa"; } $downloadDir = "\56\57\x64\x6f\x77\156\x6c\x6f\x61\x64"; if (!file_exists($downloadDir)) { mkdir($downloadDir, 511, true); echo "{$h}\342\234\223{$p}\x20\x44\157\x77\x6e\x6c\157\141\x64\x20\x64\151\162\145\x63\164\x6f\162\171\40\x20\x3a\40\103\162\x65\141\164\x65\144\12"; } else { echo "{$h}\342\234\223{$p}\x20\104\157\x77\156\154\x6f\x61\144\x20\x64\x69\x72\145\143\x74\157\x72\171\x20\40\x3a\40\122\x65\141\x64\171\xa"; } $cookieFile = "\103\157\157\153\151\x65"; $userAgentFile = "\x75\163\x65\x72\55\x61\147\145\x6e\164"; $hasConfig = file_exists($cookieFile) && file_exists($userAgentFile); echo "{$h}\342\234\x93{$p}\x20\x43\157\156\x66\x69\x67\x75\x72\x61\x74\x69\157\156\x20\146\151\x6c\145\163\x20\x20\x3a\40" . ($hasConfig ? "\x46\x6f\x75\156\144" : "\116\x6f\x74\x20\x66\x6f\165\156\144") . "\12"; if ($hasConfig) { echo "\x1b\133\x31\x3b\71\x37\x6d" . str_pad("\101\x55\x54\x48\x45\116\124\x49\x43\x41\124\111\x4f\116\40\x53\124\101\124\125\x53", 50, "\x20", STR_PAD_BOTH) . "\x1b\x5b\60\155\xa"; echo "\33\133\61\73\x39\60\155" . str_repeat("\342\224\x80", 50) . "\33\133\60\x6d\12"; $username = checkAndLoadUsername(); if ($username && $username != "\x55\x6e\x6b\156\157\167\156\x20\x55\163\x65\162") { $displayUsername = $username; if (strlen($username) > 20) { $displayUsername = substr($username, 0, 17) . "\x2e\56\56"; } echo "{$h}\342\x9c\223{$p}\40\x4c\x6f\x67\151\156\x20\144\x65\164\145\x63\164\x65\144\40\x20\x20\40\40\40\x3a\40{$bg}{$displayUsername}{$p}\12"; echo "{$h}\xe2\234\x93{$p}\x20\123\145\163\163\x69\x6f\x6e\40\163\x74\x61\x74\165\163\40\40\40\40\40\x20\x3a\40{$h}\x41\143\x74\151\166\145{$p}\xa"; if (strlen($username) > 20) { echo "{$h}\xe2\223\x98{$p}\x20\x46\x75\154\x6c\40\x75\163\x65\162\x6e\x61\x6d\145\x20\40\x20\40\x20\40\40\72\40{$k}{$username}{$p}\xa"; } } else { echo "{$m}\xe2\234\227{$p}\40\x4c\x6f\x67\x69\156\x20\144\x65\164\145\x63\164\145\x64\x20\x20\40\40\40\40\x3a\40{$ab}\x45\170\160\151\x72\145\x64\x2f\111\x6e\166\141\x6c\151\x64{$p}\12"; echo "{$ab}\xe2\x9a\240\357\xb8\217\40\40\120\x6c\x65\141\x73\x65\40\x75\160\x64\141\x74\145\x20\171\157\x75\162\x20\x63\157\157\x6b\x69\145{$p}\12"; } } echo "\33\133\61\73\71\x37\155" . str_pad("\125\120\104\101\124\105\40\x53\x54\101\x54\125\123", 50, "\x20", STR_PAD_BOTH) . "\x1b\x5b\x30\155\12"; echo "\33\x5b\61\x3b\71\60\x6d" . str_repeat("\xe2\224\x80", 50) . "\33\x5b\60\155\xa"; if ($updateAvailable) { echo "\12{$h}\xf0\x9f\x9a\x80\40\125\120\x44\101\x54\x45\x20\101\x56\x41\x49\x4c\x41\102\x4c\105\41{$p}\xa"; echo "{$h}\342\x8f\263{$p}\x20\104\x6f\x77\156\154\x6f\x61\144\151\x6e\x67\x20\x75\160\x64\x61\x74\145\x20\x76{$latestVersion}\56\x2e\x2e\12"; $githubMainURL = "\150\164\x74\x70\x73\72\57\x2f\x72\141\x77\56\147\151\164\150\x75\x62\x75\163\145\162\143\157\x6e\x74\x65\x6e\x74\x2e\143\157\x6d\57\106\x75\x75\x6d\141\130\171\172\x2f\x45\55\114\x45\101\122\116\x49\x4e\x47\55\121\125\x45\123\x54\111\117\x4e\x2d\x53\x43\x52\x41\x50\105\x52\57\x72\x65\146\163\57\150\145\141\144\163\57\x6d\141\x69\x6e\57\145\x6c\x65\141\162\156\151\156\x67\x2e\x70\x68\160"; try { echo "{$h}\xe2\x8f\xb3{$p}\x20\104\x6f\x77\156\154\157\x61\x64\x69\156\147\40\x6d\x61\151\x6e\40\163\x63\x72\x69\160\164\56\x2e\56\40"; $mainScript = @file_get_contents($githubMainURL, false, stream_context_create(array("\x68\x74\164\160" => array("\x74\151\155\x65\x6f\x75\164" => 10), "\163\163\x6c" => array("\166\145\162\x69\x66\171\137\x70\145\x65\x72" => false, "\x76\x65\162\151\146\x79\137\x70\x65\x65\x72\137\156\141\155\145" => false)))); if ($mainScript) { if (file_put_contents(__FILE__, $mainScript)) { echo "{$h}\xe2\234\223{$p}\12"; echo "{$h}\xe2\x8f\xb3{$p}\40\x44\157\x77\x6e\154\x6f\x61\144\151\156\147\x20\x76\x65\x72\163\x69\x6f\x6e\40\146\x69\154\145\56\56\x2e\x20"; if (file_put_contents("\x76\x2e\164\x78\164", $latestVersion)) { echo "{$h}\xe2\234\223{$p}\12"; echo "\12{$h}\360\x9f\x8e\x89\x20\x55\x50\x44\x41\x54\x45\x20\123\x55\x43\x43\105\123\x53\106\x55\x4c\x21{$p}\12"; echo "{$h}\360\237\x94\204{$p}\40\122\145\x73\164\141\162\164\151\x6e\x67\40\160\x72\157\x67\x72\141\155\40\151\156\x20\x33\40\163\x65\143\x6f\156\x64\163\x2e\x2e\x2e\12\xa"; for ($i = 3; $i > 0; $i--) { echo "\15{$k}\342\217\xb3\x20\x52\x65\163\164\x61\162\164\x69\x6e\147\40\x69\x6e\x20{$i}\40\x73\145\143\x6f\x6e\144" . ($i > 1 ? "\x73" : '') . "\x2e\x2e\x2e" . str_repeat("\40", 10) . "{$p}"; sleep(1); } echo "\15{$h}\360\x9f\x9a\x80\x20\122\x65\163\x74\141\x72\164\151\156\x67\56\56\56" . str_repeat("\x20", 20) . "{$p}\12\12"; system("\x70\150\x70\40" . __FILE__); die; } else { echo "{$m}\xe2\x9c\227{$p}\xa"; echo "{$ab}\342\x9a\240\357\270\x8f\x20\x20\106\x61\x69\154\x65\x64\x20\x74\x6f\x20\163\141\166\145\x20\166\x65\x72\x73\151\x6f\156\x20\146\151\x6c\x65{$p}\12"; } } else { echo "{$m}\xe2\x9c\227{$p}\xa"; echo "{$ab}\xe2\232\240\xef\270\217\x20\40\x46\x61\x69\154\x65\x64\40\x74\x6f\40\163\141\166\145\x20\155\141\x69\156\x20\x73\143\162\x69\x70\164{$p}\12"; } } else { echo "{$m}\xe2\234\x97{$p}\12"; echo "{$ab}\xe2\232\xa0\xef\270\217\40\x20\106\x61\x69\154\145\144\40\164\x6f\40\144\157\167\156\x6c\x6f\x61\x64\40\x75\x70\x64\x61\164\145{$p}\12"; } } catch (Exception $e) { echo "{$m}\342\x9c\x97{$p}\12"; echo "{$ab}\342\x9a\240\xef\xb8\217\40\40\x55\x70\144\x61\164\x65\40\x65\x72\x72\157\x72\72\x20" . $e->getMessage() . "{$p}\xa"; } echo "\xa{$ab}\xe2\232\xa0\357\270\x8f\40\40\103\157\156\164\x69\156\165\x69\156\147\40\167\x69\x74\150\x20\143\x75\x72\162\x65\156\164\40\166\x65\x72\163\x69\157\x6e\40\x76{$currentVersion}{$p}\xa"; } else { echo "{$h}\342\234\223{$p}\40\125\x70\x64\141\164\x65\x20\163\164\141\x74\x75\163\40\40\x20\x20\40\x20\x20\x3a\40{$h}\123\171\163\164\x65\x6d\x20\151\x73\40\165\x70\x20\x74\157\40\144\141\x74\x65{$p}\xa"; } echo "\12" . str_repeat("\342\224\x80", 50) . "\xa"; echo "\x1b\133\61\73\x39\67\155" . str_pad("\123\x54\101\x52\x54\111\x4e\x47\40\x49\x4e\40\62\40\123\x45\103\x4f\116\x44\x53", 50, "\x20", STR_PAD_BOTH) . "\33\133\x30\155\12"; for ($i = 2; $i > 0; $i--) { echo "\15{$k}\342\x8f\xb3\x20\123\x74\141\162\164\151\x6e\x67\40\151\156\x20{$i}\40\x73\145\143\157\x6e\x64" . ($i > 1 ? "\163" : '') . "\x2e\x2e\56" . str_repeat("\x20", 10) . "{$p}"; sleep(1); } echo "\xd{$h}\xf0\237\232\x80\40\114\141\165\x6e\x63\150\151\156\x67\x20\x70\x72\x6f\x67\x72\x61\x6d\56\56\x2e" . str_repeat("\x20", 20) . "{$p}\xa\12"; } goto kt8Pd; KLi_u: function splitQuestionsIntoParts($allQuestions, $parts = 2) { $questionsArray = array(); $questionCounter = 1; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { $questionsArray[] = array("\x67\154\157\x62\141\x6c\137\156\x75\x6d\142\x65\x72" => $questionCounter, "\161\x75\145\163\x74\x69\157\x6e" => $question, "\146\151\x6c\x65\156\x61\x6d\145" => $filename); $questionCounter++; } } $totalQuestions = count($questionsArray); $questionsPerPart = ceil($totalQuestions / $parts); $partsArray = array(); for ($i = 0; $i < $parts; $i++) { $start = $i * $questionsPerPart; $end = min(($i + 1) * $questionsPerPart, $totalQuestions); $partQuestions = array_slice($questionsArray, $start, $questionsPerPart); if (!empty($partQuestions)) { $partsArray[] = array("\x70\141\162\x74\137\x6e\x75\155\142\145\x72" => $i + 1, "\161\x75\145\163\x74\151\x6f\x6e\163" => $partQuestions, "\x73\x74\141\x72\x74\x5f\147\154\157\142\x61\154" => $partQuestions[0]["\147\x6c\157\142\141\154\x5f\156\165\x6d\x62\145\x72"], "\145\156\x64\x5f\x67\x6c\157\142\x61\x6c" => $partQuestions[count($partQuestions) - 1]["\147\154\x6f\142\141\x6c\137\156\x75\155\x62\145\x72"]); } } return $partsArray; } goto DnAev; ZklDN: function post($link, $data, $ua) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $link); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_HTTPHEADER, $ua); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_POSTFIELDS, $data); return curl_exec($ch); } goto fbtpu; dmeHP: function processJsonDataForMapping($data, &$mapping) { if (isset($data["\x69\155\x61\147\145\x73"])) { foreach ($data["\x69\x6d\x61\147\x65\163"] as $image) { if (isset($image["\x71\165\145\163\x74\x69\157\156\x5f\x69\x64"]) && isset($image["\154\x6f\x63\x61\154\x5f\x70\141\164\x68"])) { $questionId = $image["\x71\165\145\163\164\x69\x6f\x6e\137\x69\144"]; $path = $image["\x6c\157\143\x61\154\137\x70\141\x74\150"]; if (file_exists($path)) { $key = "\151\144\x5f{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $exists = false; foreach ($mapping[$key] as $existing) { if (isset($existing["\x70\x61\x74\x68"]) && $existing["\x70\141\164\x68"] == $path) { $exists = true; break; } } if (!$exists) { $mapping[$key][] = array("\160\x61\x74\150" => $path, "\x66\x69\x6c\x65\156\x61\155\x65" => basename($path), "\161\x75\145\x73\x74\151\x6f\x6e\x5f\151\144" => $questionId, "\x71\x75\145\163\x74\151\157\x6e\137\x6e\x75\155\x62\145\162" => $image["\x71\x75\145\163\x74\x69\157\x6e\137\x6e\x75\x6d\142\145\162"] ?? null, "\x73\x6f\x75\x72\x63\x65" => "\152\163\x6f\x6e\x5f\144\x6f\167\156\x6c\x6f\x61\x64\x65\144", "\141\x6c\164" => $image["\141\154\x74"] ?? '', "\x71\x75\x65\163\164\151\x6f\x6e\137\x69\156\x66\x6f" => "\121" . ($image["\161\x75\145\x73\x74\x69\157\156\x5f\x6e\165\x6d\x62\145\162"] ?? "\x3f") . "\x20\55\40" . ($image["\x61\154\x74"] ?? ''), "\144\x6f\167\x6e\154\157\x61\x64\145\144" => $image["\x64\x6f\167\156\x6c\157\141\x64\145\x64"] ?? false, "\x73\151\x7a\145" => $image["\163\151\172\x65"] ?? 0); } } } } } elseif (is_array($data) && isset($data[0]) && isset($data[0]["\x71\x75\x65\x73\x74\x69\157\156"])) { foreach ($data as $questionData) { if (isset($questionData["\x69\144"]) && isset($questionData["\x69\155\141\x67\145\163"])) { $questionId = $questionData["\x69\144"]; $questionNumber = $questionData["\x6e\x75\x6d\x62\145\x72"] ?? null; foreach ($questionData["\x69\155\x61\147\145\163"] as $image) { if (isset($image["\154\x6f\x63\x61\x6c\137\x70\141\x74\x68"]) && file_exists($image["\x6c\x6f\x63\x61\154\x5f\x70\141\164\150"])) { $key = "\151\x64\x5f{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\160\x61\164\x68" => $image["\154\x6f\x63\141\154\x5f\x70\x61\x74\150"], "\146\x69\x6c\x65\156\141\155\145" => basename($image["\154\x6f\x63\141\x6c\x5f\160\141\x74\x68"]), "\x71\165\x65\163\x74\x69\x6f\x6e\x5f\x69\x64" => $questionId, "\x71\165\x65\163\x74\151\157\156\137\x6e\165\155\142\x65\162" => $questionNumber, "\163\157\165\162\x63\145" => "\152\163\157\156\137\161\x75\x65\x73\x74\x69\x6f\156", "\141\x6c\164" => $image["\x61\154\164"] ?? '', "\x66\x69\154\145\156\x61\x6d\x65\137\160\141\x74\x74\145\162\x6e" => $image["\146\151\x6c\x65\156\x61\x6d\145\137\160\141\x74\164\145\162\x6e"] ?? '', "\163\162\x63" => $image["\163\162\x63"] ?? ''); } } } } } elseif (is_array($data) && !isset($data[0])) { foreach ($data as $filename => $questions) { if (is_array($questions)) { foreach ($questions as $questionData) { if (isset($questionData["\x69\x64"]) && isset($questionData["\x69\x6d\x61\147\145\163"])) { $questionId = $questionData["\151\144"]; $questionNumber = $questionData["\156\165\155\x62\145\x72"] ?? null; foreach ($questionData["\x69\155\141\x67\x65\163"] as $image) { if (isset($image["\x6c\x6f\x63\x61\x6c\137\160\141\x74\x68"]) && file_exists($image["\154\157\x63\x61\154\137\160\x61\x74\x68"])) { $key = "\x69\144\137{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\160\x61\164\150" => $image["\154\x6f\143\x61\154\137\x70\141\x74\150"], "\146\x69\154\x65\156\141\x6d\145" => basename($image["\x6c\157\x63\x61\x6c\x5f\x70\x61\x74\x68"]), "\161\165\x65\x73\164\151\x6f\156\137\x69\x64" => $questionId, "\x71\x75\x65\x73\x74\x69\157\156\137\156\x75\155\x62\145\162" => $questionNumber, "\x73\x6f\165\162\x63\145" => "\152\163\157\156\x5f\145\170\164\x72\141\x63\164\x65\144", "\x61\x6c\x74" => $image["\x61\154\x74"] ?? '', "\163\x72\x63\x5f\x66\x69\154\145" => $filename, "\x73\x72\143" => $image["\163\x72\x63"] ?? ''); } } } } } } } } goto uo7SY; Ky0Kr: function formatGenericAnswersForText($question) { $output = "\111\x4e\x46\x4f\x52\x4d\x41\123\111\x20\x4a\101\x57\101\x42\x41\x4e\72\12"; $output .= str_repeat("\55", 40) . "\xa"; if (!empty($question["\141\156\x73\x77\145\x72\163"])) { foreach ($question["\141\156\163\167\145\x72\163"] as $answer) { $marker = isset($answer["\151\163\137\143\x6f\162\162\x65\x63\164"]) && $answer["\151\163\x5f\143\x6f\x72\162\145\143\164"] ? "\342\x9c\x93" : "\40"; $output .= sprintf("\45\163\40\45\x73\56\x20", $marker, $answer["\154\145\x74\x74\145\x72"]); if (isset($answer["\164\x65\x78\164"])) { $text = strip_tags($answer["\x74\x65\x78\x74"]); $output .= $text . "\xa"; } elseif (isset($answer["\x71\165\x65\x73\164\151\157\156\137\x74\145\x78\164"])) { $output .= $answer["\x71\165\145\163\x74\x69\157\156\137\x74\145\170\x74"] . "\xa"; } } } else { $output .= "\124\151\x64\x61\153\40\x61\144\141\x20\x64\141\x74\x61\40\x6a\x61\167\141\142\141\156\12"; } $output .= "\12"; return $output; } goto V2Tsc; etUo0: function extractAllAnswerTypes($questionNode, $xpath, &$questionData) { $methods = array("\x65\170\x74\162\141\143\164\x4d\x61\x74\x63\x68\x41\x6e\x73\x77\x65\162\x73", "\145\170\164\x72\x61\143\164\x4d\165\154\x74\151\143\x68\x6f\151\143\x65\x41\156\x73\x77\145\162\x73", "\x65\170\164\162\x61\x63\x74\124\162\x75\145\106\x61\154\163\x65\101\x6e\x73\167\x65\x72\x73", "\x65\x78\164\162\x61\143\164\x54\145\170\164\101\156\163\x77\145\x72\163"); foreach ($methods as $method) { $originalAnswerCount = count($questionData["\x61\x6e\163\167\x65\162\163"]); $method($questionNode, $xpath, $questionData); if (count($questionData["\141\x6e\x73\167\145\162\x73"]) > $originalAnswerCount) { break; } } } goto AsNR8; QAUIT: error_reporting(0); goto Uut2u; hCJ7N: $ab = "\x1b\x5b\x31\x3b\x39\x30\155"; goto kC0_j; SWAVg: function formatTextAnswersForText($question) { $output = "\112\x41\x57\x41\x42\101\116\72\xa"; $output .= str_repeat("\55", 40) . "\12"; foreach ($question["\x61\x6e\x73\167\145\162\163"] as $answer) { $answerText = strip_tags($answer["\164\x65\x78\164"]); $answerText = html_entity_decode($answerText, ENT_QUOTES | ENT_HTML5, "\125\124\106\x2d\x38"); if (strpos($answerText, "\x5b\112\141\167\141\142\x61\x6e") === false && !empty(trim($answerText))) { $output .= wordwrap($answerText, 76, "\12") . "\12"; } else { $output .= "\x5b\x42\x65\x6c\165\x6d\x20\x64\151\x6a\x61\x77\141\142\135\xa"; } } $output .= "\12"; return $output; } goto Ky0Kr; t0VRb: function detectChoiceType($questionNode, $xpath) { $checkboxes = $xpath->query("\56\x2f\x2f\x69\156\x70\165\164\x5b\x40\x74\x79\160\145\75\x27\x63\150\145\143\x6b\142\x6f\x78\47\135", $questionNode); $radios = $xpath->query("\56\57\x2f\151\156\x70\165\164\133\x40\164\171\160\145\75\x27\162\141\144\x69\157\x27\135", $questionNode); if ($radios->length > 0) { return "\163\x69\x6e\x67\x6c\145"; } if ($checkboxes->length > 1) { foreach ($checkboxes as $checkbox) { $name = $checkbox->getAttribute("\x6e\141\x6d\x65"); if (preg_match("\x2f\161\x5c\x64\53\x3a\134\x64\53\137\143\x68\x6f\x69\143\x65\x5c\x64\x2b\57", $name)) { return "\x6d\x75\154\x74\151\160\x6c\x65"; } } $names = array(); foreach ($checkboxes as $checkbox) { $name = $checkbox->getAttribute("\x6e\x61\x6d\145"); $names[$name] = true; } if (count($names) > 1) { return "\x6d\165\154\164\x69\x70\154\x65"; } } return "\x73\151\x6e\x67\154\145"; } goto PkVhD; ATiDH: function extractMatchAnswers($questionNode, $xpath, &$questionData) { $questionData["\141\x6e\163\167\145\162\163"] = array(); $answerTable = $xpath->query("\56\x2f\x2f\x74\x61\x62\154\145\133\x63\x6f\156\164\141\151\156\x73\x28\100\x63\x6c\x61\x73\x73\54\x20\x27\x61\156\x73\167\145\x72\x27\51\135", $questionNode); if ($answerTable->length == 0) { $answerTable = $xpath->query("\56\x2f\x2f\x64\x69\166\x5b\143\157\x6e\164\x61\x69\x6e\x73\x28\100\x63\154\x61\x73\x73\54\x20\47\x61\142\x6c\157\143\x6b\x27\51\135\57\x2f\164\x61\142\154\x65", $questionNode); } if ($answerTable->length > 0) { $table = $answerTable->item(0); $rows = $xpath->query("\56\x2f\57\164\142\157\x64\171\57\164\x72", $table); if ($rows->length == 0) { $rows = $xpath->query("\56\57\57\164\162", $table); } $answerCounter = 0; $firstSelect = $xpath->query("\56\57\x2f\163\x65\x6c\145\143\x74", $questionNode); $answerOptions = array(); if ($firstSelect->length > 0) { $selectElement = $firstSelect->item(0); $options = $xpath->query("\56\57\x2f\157\160\x74\151\x6f\156", $selectElement); foreach ($options as $option) { $value = $option->getAttribute("\166\x61\x6c\165\145"); $text = trim($option->textContent); if (!empty($value) && $text != "\103\x68\157\x6f\163\x65\x2e\56\56") { $answerOptions[$value] = $text; } } } foreach ($rows as $rowIndex => $row) { $textCell = $xpath->query("\56\57\x2f\164\x64\x5b\x63\x6f\156\x74\141\x69\x6e\x73\x28\x40\143\154\x61\163\x73\54\x20\47\164\x65\170\164\x27\x29\x5d", $row); $select = $xpath->query("\56\x2f\x2f\163\x65\x6c\145\143\x74", $row); if ($textCell->length > 0 && $select->length > 0) { $questionText = trim($textCell->item(0)->textContent); $questionText = html_entity_decode($questionText, ENT_QUOTES | ENT_HTML5, "\x55\124\x46\x2d\70"); $questionText = preg_replace("\x2f\x5c\163\53\x2f", "\40", $questionText); $selectElement = $select->item(0); $selectId = $selectElement->getAttribute("\151\144"); $selectName = $selectElement->getAttribute("\x6e\x61\x6d\x65"); $selectedOption = $xpath->query("\56\x2f\57\157\x70\x74\x69\157\156\133\x40\163\x65\x6c\x65\x63\x74\145\144\75\47\163\145\x6c\x65\143\x74\x65\144\47\x5d", $selectElement); $selectedValue = ''; $selectedText = ''; if ($selectedOption->length > 0) { $selectedValue = $selectedOption->item(0)->getAttribute("\x76\141\x6c\x75\x65"); $selectedText = trim($selectedOption->item(0)->textContent); } if (empty($selectedValue) || $selectedValue == "\60") { $selectedValue = "\x30"; $selectedText = "\103\150\x6f\x6f\163\145\x2e\56\56"; } $letter = chr(65 + $answerCounter); $answer = array("\154\x65\x74\x74\x65\x72" => $letter, "\x71\x75\145\x73\x74\151\157\156\137\x74\x65\170\164" => $questionText, "\x73\x65\154\x65\x63\164\x5f\151\x64" => $selectId, "\163\145\x6c\x65\x63\164\x5f\156\x61\155\x65" => $selectName, "\x73\145\x6c\x65\143\164\x65\144\x5f\x76\x61\x6c\x75\145" => $selectedValue, "\x73\145\154\x65\143\x74\x65\x64\x5f\x74\x65\x78\x74" => $selectedText, "\x69\x73\137\x61\x6e\x73\167\x65\162\145\144" => $selectedValue != "\x30" && !empty($selectedValue), "\x69\x73\137\143\157\x72\x72\145\x63\164" => false, "\141\x6c\154\137\157\160\x74\x69\x6f\156\x73" => $answerOptions, "\164\171\160\145" => "\x64\162\x6f\x70\x64\x6f\167\156"); $questionData["\141\156\x73\x77\x65\x72\x73"][] = $answer; if ($selectedValue != "\x30" && !empty($selectedValue)) { if (!isset($questionData["\x63\x6f\x72\x72\x65\143\x74\137\141\x6e\163\x77\x65\x72"]) || !is_array($questionData["\x63\157\x72\x72\x65\143\164\x5f\x61\156\163\167\x65\162"])) { $questionData["\143\157\162\162\x65\143\x74\x5f\141\156\x73\167\145\162"] = array(); } $questionData["\143\157\x72\x72\145\x63\x74\137\141\x6e\x73\x77\x65\x72"][] = array("\161\165\145\x73\x74\151\157\156" => $questionText, "\x61\x6e\x73\x77\x65\162" => $selectedText, "\x76\141\154\165\145" => $selectedValue); } $answerCounter++; } } } else { $selects = $xpath->query("\56\57\57\x73\x65\x6c\x65\x63\x74", $questionNode); if ($selects->length > 0) { $answerCounter = 0; $firstSelect = $selects->item(0); $answerOptions = array(); $options = $xpath->query("\56\x2f\57\x6f\x70\164\151\x6f\156", $firstSelect); foreach ($options as $option) { $value = $option->getAttribute("\166\x61\x6c\x75\145"); $text = trim($option->textContent); if (!empty($value) && $text != "\103\x68\157\157\163\x65\x2e\56\x2e") { $answerOptions[$value] = $text; } } foreach ($selects as $selectIndex => $selectElement) { $questionText = ''; $prevElement = $selectElement->previousSibling; while ($prevElement) { if ($prevElement->nodeType == XML_TEXT_NODE) { $text = trim($prevElement->nodeValue); if (!empty($text)) { $questionText = $text . "\x20" . $questionText; } } else { if ($prevElement->nodeType == XML_ELEMENT_NODE) { if ($prevElement->tagName == "\x6c\141\x62\145\x6c") { $questionText = trim($prevElement->textContent) . "\40" . $questionText; } else { if ($prevElement->tagName == "\x74\144" && strpos($prevElement->getAttribute("\143\154\x61\x73\x73"), "\164\x65\x78\x74") !== false) { $questionText = trim($prevElement->textContent) . "\x20" . $questionText; } } } } $prevElement = $prevElement->previousSibling; } $questionText = trim($questionText); if (empty($questionText)) { $questionText = "\111\x74\x65\x6d\40" . ($selectIndex + 1); } $questionText = html_entity_decode($questionText, ENT_QUOTES | ENT_HTML5, "\125\x54\106\x2d\70"); $questionText = preg_replace("\57\x5c\x73\x2b\57", "\40", $questionText); $selectId = $selectElement->getAttribute("\151\x64"); $selectName = $selectElement->getAttribute("\x6e\141\x6d\x65"); $selectedOption = $xpath->query("\x2e\x2f\57\x6f\160\164\151\157\156\x5b\100\163\x65\154\x65\x63\x74\145\144\75\x27\x73\x65\x6c\145\143\x74\145\x64\47\135", $selectElement); $selectedValue = ''; $selectedText = ''; if ($selectedOption->length > 0) { $selectedValue = $selectedOption->item(0)->getAttribute("\166\x61\154\165\145"); $selectedText = trim($selectedOption->item(0)->textContent); } if (empty($selectedValue) || $selectedValue == "\x30") { $selectedValue = "\x30"; $selectedText = "\x43\x68\x6f\157\x73\x65\x2e\x2e\x2e"; } $letter = chr(65 + $answerCounter); $answer = array("\x6c\145\164\164\145\162" => $letter, "\x71\165\x65\163\x74\x69\x6f\156\137\164\145\170\x74" => $questionText, "\x73\145\x6c\x65\143\x74\137\x69\x64" => $selectId, "\x73\145\x6c\x65\143\164\x5f\x6e\x61\155\x65" => $selectName, "\163\145\154\145\x63\164\145\x64\137\166\141\x6c\x75\x65" => $selectedValue, "\163\145\154\x65\143\164\x65\144\x5f\x74\x65\x78\x74" => $selectedText, "\x69\x73\x5f\141\x6e\163\167\x65\162\145\144" => $selectedValue != "\x30" && !empty($selectedValue), "\151\x73\137\143\157\162\162\145\x63\x74" => false, "\141\x6c\154\137\x6f\x70\164\x69\157\x6e\x73" => $answerOptions, "\164\x79\x70\x65" => "\144\162\x6f\160\x64\x6f\x77\x6e"); $questionData["\141\156\163\167\145\x72\163"][] = $answer; if ($selectedValue != "\60" && !empty($selectedValue)) { if (!isset($questionData["\x63\157\162\x72\145\x63\x74\x5f\x61\x6e\x73\x77\145\x72"]) || !is_array($questionData["\143\x6f\x72\x72\145\143\164\137\141\x6e\x73\167\145\162"])) { $questionData["\x63\x6f\x72\x72\145\143\164\137\x61\156\x73\167\x65\x72"] = array(); } $questionData["\x63\157\x72\x72\145\143\164\137\x61\x6e\163\x77\145\x72"][] = array("\x71\165\145\x73\164\x69\x6f\156" => $questionText, "\x61\x6e\x73\x77\x65\162" => $selectedText, "\x76\141\x6c\165\x65" => $selectedValue); } $answerCounter++; } } } } goto SKmb4; CSdVx: function createImagesReport($allDownloadedImages, $downloadDir) { global $h, $p; $reportDir = $downloadDir . "\x2f\x72\x65\160\x6f\162\164\163"; if (!file_exists($reportDir)) { mkdir($reportDir, 511, true); } $reportPath = $reportDir . "\57\151\x6d\x61\147\x65\163\x5f\x72\x65\160\x6f\x72\164\137" . date("\131\x6d\x64\x5f\x48\151\x73") . "\56\x74\170\164"; $reportContent = "\x4c\x41\120\117\x52\x41\x4e\x20\123\105\115\125\101\40\107\101\x4d\x42\101\122\x20\x59\101\x4e\107\x20\x44\111\55\104\117\x57\116\114\x4f\101\x44\12"; $reportContent .= "\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\75\75\75\x3d\x3d\75\75\x3d\75\x3d\x3d\75\x3d\x3d\x3d\x3d\x3d\75\75\75\x3d\x3d\75\75\75\75\x3d\x3d\xa\xa"; $reportContent .= "\x54\x61\156\x67\x67\x61\154\72\40" . date("\x59\55\x6d\x2d\144\x20\110\x3a\151\x3a\163") . "\xa"; $reportContent .= "\124\x6f\x74\141\x6c\x20\147\x61\155\142\141\162\72\40" . count($allDownloadedImages) . "\xa\xa"; $questionsWithImages = array(); $successCount = 0; $failCount = 0; $totalSize = 0; foreach ($allDownloadedImages as $image) { if (isset($image["\x64\157\167\156\x6c\157\x61\x64\x65\144"]) && $image["\144\x6f\x77\x6e\154\157\141\144\x65\x64"]) { $successCount++; $totalSize += $image["\x73\151\x7a\x65"] ?? 0; $questionNum = $image["\x71\165\x65\x73\x74\151\157\156\x5f\156\x75\x6d\142\145\x72"] ?? "\77"; if (!isset($questionsWithImages[$questionNum])) { $questionsWithImages[$questionNum] = 0; } $questionsWithImages[$questionNum]++; } else { $failCount++; } } $reportContent .= "\x53\124\101\x54\x49\x53\124\x49\113\72\xa"; $reportContent .= "\x2d\55\x2d\55\x2d\x2d\x2d\x2d\x2d\55\xa"; $reportContent .= "\107\141\x6d\x62\x61\162\40\142\x65\x72\x68\x61\x73\x69\x6c\40\x64\151\144\x6f\x77\156\154\157\141\x64\72\x20{$successCount}\12"; $reportContent .= "\107\141\155\x62\x61\x72\x20\147\x61\147\x61\x6c\40\144\151\x64\157\x77\x6e\x6c\157\141\x64\x3a\x20{$failCount}\12"; $reportContent .= "\124\x6f\x74\141\154\x20\x75\153\x75\162\141\x6e\x3a\x20" . round($totalSize / 1024 / 1024, 2) . "\x20\115\102\12"; $reportContent .= "\120\x65\162\164\x61\156\x79\x61\x61\156\40\x64\145\x6e\x67\141\156\x20\x67\x61\155\142\141\162\72\x20" . count($questionsWithImages) . "\12\12"; $reportContent .= "\x44\105\124\101\111\x4c\40\120\105\x52\x20\120\x45\122\124\101\116\x59\x41\101\x4e\x3a\12"; $reportContent .= "\x2d\55\55\55\x2d\x2d\55\55\x2d\55\x2d\x2d\x2d\x2d\55\55\x2d\55\x2d\x2d\55\x2d\xa"; foreach ($questionsWithImages as $questionNum => $imageCount) { $reportContent .= "\x50\x65\x72\x74\141\x6e\171\x61\x61\156\x20\x23{$questionNum}\72\x20{$imageCount}\40\147\141\155\142\141\x72\xa"; } $reportContent .= "\12\xa\x44\105\124\101\x49\x4c\40\123\105\x54\x49\101\120\40\x47\x41\x4d\x42\101\x52\x3a\xa"; $reportContent .= "\x2d\x2d\55\55\x2d\55\55\55\x2d\55\x2d\55\55\55\x2d\x2d\x2d\x2d\55\x2d\55\12"; foreach ($allDownloadedImages as $index => $image) { $num = $index + 1; $status = isset($image["\144\157\167\156\x6c\x6f\x61\x64\145\x64"]) && $image["\x64\x6f\167\x6e\154\x6f\x61\x64\x65\x64"] ? "\342\234\223\40\102\x45\122\x48\101\123\x49\114" : "\xe2\x9c\x97\x20\107\101\107\101\114"; $reportContent .= "\xa{$num}\x2e\x20{$image["\x66\151\154\x65\156\141\155\145"]}\12"; $reportContent .= "\x20\40\x20\x53\164\x61\164\x75\163\72\x20{$status}\12"; $reportContent .= "\x20\40\x20\x50\145\162\164\x61\156\x79\x61\x61\156\x3a\x20\43" . ($image["\161\165\x65\163\x74\151\157\156\137\156\165\155\x62\145\162"] ?? "\77") . "\xa"; $reportContent .= "\x20\40\x20\x44\x65\163\x6b\162\x69\160\x73\151\72\x20" . ($image["\141\154\x74"] ?? "\124\151\144\x61\153\40\141\x64\x61") . "\xa"; if (isset($image["\144\x6f\x77\x6e\154\157\x61\144\145\x64"]) && $image["\x64\157\x77\156\154\157\141\144\x65\144"]) { $reportContent .= "\x20\x20\40\x55\153\165\162\x61\156\x3a\x20" . round(($image["\163\151\x7a\x65"] ?? 0) / 1024, 2) . "\x20\113\102\xa"; $reportContent .= "\40\x20\x20\114\x6f\153\141\x73\x69\72\x20" . ($image["\x6c\157\143\x61\154\137\160\x61\164\150"] ?? "\124\x69\x64\x61\x6b\40\x64\151\153\x65\164\x61\150\165\151") . "\12"; } } file_put_contents($reportPath, $reportContent); echo "{$h}\xe2\234\223\40\x4c\x61\160\157\162\141\156\x20\x67\141\155\x62\x61\162\x20\x64\151\x73\x69\x6d\160\x61\156\x3a\x20{$reportPath}{$p}\12"; return $reportPath; } goto BZeQt; BZeQt: function extractAndDownloadAllQuestions($downloadDir, $allFiles, $ua) { global $h, $m, $p, $k, $u, $bta; clearImageMappingCache(); $allQuestions = array(); $totalQuestions = 0; $allDownloadedImages = array(); echo "\xa{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa"; echo "{$h}\105\x4b\x53\x54\x52\101\x4b\x53\111\40\120\105\x52\x54\101\x4e\x59\x41\101\116\40\104\101\116\x20\x44\x4f\127\116\114\x4f\101\104\40\107\x41\x4d\x42\x41\x52{$p}\xa"; echo "{$h}\104\x65\156\x67\x61\x6e\40\157\x72\x67\141\156\x69\163\141\x73\x69\40\x66\x6f\154\x64\145\162\x20\x62\145\162\144\141\163\141\x72\x6b\141\156\x20\x70\145\x72\x74\x61\156\171\141\x61\156{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; $attemptFiles = array(); foreach ($allFiles as $filename => $path) { if (preg_match("\x2f\136\153\145\x72\x6a\141\134\144\53\x5c\x2e\x68\x74\x6d\x6c\x24\x2f", $filename)) { $attemptFiles[$filename] = $path; } } if (empty($attemptFiles)) { echo "{$m}\x54\x69\144\141\153\x20\x64\x69\x74\x65\155\x75\153\x61\156\x20\146\151\154\145\40\141\164\164\145\155\160\x74\x20\x48\124\115\114\40\x75\156\x74\x75\153\x20\x64\151\145\x6b\x73\164\x72\141\153\x21{$p}\xa"; return array("\161\165\x65\x73\x74\x69\x6f\156\x73" => array(), "\151\155\x61\147\145\163" => array(), "\151\155\x61\147\145\x73\137\144\x69\x72" => ''); } echo "{$k}\104\x69\x74\x65\155\165\153\x61\156\40" . count($attemptFiles) . "\x20\146\151\x6c\145\x20\x61\164\x74\145\x6d\160\164\40\110\x54\115\x4c\56{$p}\12"; foreach ($attemptFiles as $filename => $filepath) { echo "\xa{$u}" . str_repeat("\55", 60) . "{$p}\xa"; echo "{$h}\115\145\155\160\x72\157\x73\x65\x73\x20\x66\x69\x6c\x65\x3a\x20{$filename}{$p}\xa"; echo "{$u}" . str_repeat("\55", 60) . "{$p}\xa"; $htmlContent = file_get_contents($filepath); $questions = extractQuestionsAndAnswers($htmlContent, $filename); echo "{$h}\342\x9c\223\40\104\x69\164\145\155\165\153\141\x6e\x20" . count($questions) . "\x20\x70\x65\162\164\141\x6e\x79\141\x61\156{$p}\12"; $downloadResult = downloadQuestionImages($questions, $downloadDir, $ua); $allDownloadedImages = array_merge($allDownloadedImages, $downloadResult["\x64\157\167\156\154\x6f\141\144\145\144\x5f\151\x6d\x61\147\x65\163"]); $allQuestions[$filename] = $questions; $totalQuestions += count($questions); } $jsonPath = $downloadDir . "\x2f\x71\165\x65\x73\x74\x69\x6f\x6e\x73\137\x65\x78\x74\162\141\143\164\x65\x64\56\152\163\157\156"; file_put_contents($jsonPath, json_encode($allQuestions, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES)); $imagesJsonPath = $downloadDir . "\x2f\x64\157\167\x6e\x6c\157\141\x64\145\144\137\151\155\141\147\x65\163\x2e\x6a\163\x6f\x6e"; file_put_contents($imagesJsonPath, json_encode($allDownloadedImages, JSON_PRETTY_PRINT)); echo "\12{$bta}" . str_repeat("\342\x95\x90", 60) . "{$p}\12"; echo "{$h}\105\113\x53\124\x52\x41\113\123\111\40\104\101\x4e\40\104\117\127\x4e\114\x4f\101\x44\x20\123\105\114\x45\x53\101\111\41{$p}\xa"; echo "{$h}\124\x6f\x74\141\x6c\40\x70\x65\162\164\141\x6e\x79\141\x61\x6e\40\x64\x61\x72\x69\40\x73\x65\x6d\x75\141\x20\x66\151\154\145\x3a\x20{$totalQuestions}{$p}\12"; echo "{$h}\x54\x6f\x74\x61\x6c\x20\x67\x61\x6d\x62\141\162\40\144\x69\144\157\167\156\x6c\157\x61\144\72\x20" . count($allDownloadedImages) . "{$p}\xa"; echo "{$h}\110\141\x73\x69\154\40\112\x53\117\116\x20\144\151\x73\x69\x6d\x70\141\x6e\x20\x6b\x65\x3a\x20{$jsonPath}{$p}\xa"; echo "{$h}\x49\x6e\x66\157\x20\x67\141\155\142\x61\x72\x20\x64\x69\163\x69\155\160\x61\x6e\x20\153\x65\x3a\40{$imagesJsonPath}{$p}\xa"; echo "{$h}\107\141\x6d\x62\141\x72\x20\144\x69\x73\151\155\160\x61\156\40\x64\x69\72\x20{$downloadDir}\57\151\x6d\x61\x67\145\163\57{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12"; if (count($allDownloadedImages) > 0) { echo "{$k}\12\x53\164\162\x75\x6b\x74\165\x72\40\x66\157\154\x64\145\x72\x20\147\141\155\142\141\162\x3a{$p}\xa"; echo "{$ab}\x64\x6f\x77\156\154\x6f\x61\144\57\x69\155\141\147\x65\163\57{$p}\12"; echo "{$ab}\342\x94\x9c\342\224\200\342\224\x80\40\133\156\x61\x6d\141\137\x66\x69\x6c\x65\137\x74\x61\156\160\x61\137\145\153\163\164\145\156\x73\x69\135\57{$p}\12"; echo "{$ab}\xe2\224\202\40\x20\40\xe2\x94\x9c\xe2\x94\x80\342\224\x80\x20\161\133\x71\x75\x65\163\x74\x69\157\156\x5f\x69\x64\135\57{$p}\12"; echo "{$ab}\xe2\224\x82\x20\x20\x20\342\224\x82\x20\40\40\342\x94\224\342\224\200\342\x94\x80\x20\x5b\156\141\x6d\x61\x5f\146\151\154\145\x5f\147\141\x6d\x62\x61\162\135{$p}\12"; echo "{$ab}\xe2\x94\202\x20\x20\40\xe2\224\x94\xe2\x94\200\xe2\x94\200\x20\x71\x5b\x71\x75\145\x73\164\x69\157\x6e\x5f\x69\144\x5d\x2f{$p}\xa"; echo "{$ab}\342\224\202\40\40\x20\x20\40\40\40\342\x94\224\xe2\224\x80\xe2\224\x80\40\133\x6e\x61\x6d\x61\x5f\146\151\x6c\145\137\x67\x61\x6d\142\x61\162\135{$p}\xa"; echo "{$ab}\342\x94\224\342\224\200\342\224\200\x20\x2e\x2e\x2e{$p}\12"; } if (count($allDownloadedImages) > 0) { echo "\12{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; echo "{$h}\x50\x45\x4e\107\x55\115\x50\x55\114\101\x4e\40\x53\x45\115\125\x41\40\x47\101\115\102\x41\122{$p}\12"; echo "{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; $collectionResult = collectAllImagesToSingleFolder($allDownloadedImages, $downloadDir); echo "\xa{$k}\x49\156\x67\x69\x6e\x20\x6d\x65\155\x62\165\141\164\x20\x66\151\154\145\40\132\x49\120\40\144\x61\162\151\x20\x73\x65\x6d\x75\141\40\147\141\155\142\141\x72\77\40\50\x79\57\156\54\40\x64\145\146\141\165\x6c\x74\x3a\40\171\x29\x3a\x20{$p}"; $createZip = trim(fgets(STDIN)); $createZip = strtolower($createZip) === "\x6e" ? false : true; $zipResult = null; if ($createZip) { $zipResult = createImagesZip($allDownloadedImages, $downloadDir); } echo "\12{$k}\115\x65\x6d\x62\165\x61\164\x20\x6c\x61\x70\157\x72\x61\156\40\147\141\155\142\141\x72\56\x2e\56{$p}\xa"; $reportPath = createImagesReport($allDownloadedImages, $downloadDir); echo "\xa{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\12"; echo "{$h}\122\x49\x4e\x47\113\101\123\101\x4e\40\120\x45\x4e\107\x55\x4d\120\x55\x4c\x41\x4e\x20\x47\101\115\102\101\122{$p}\12"; echo "{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\xa"; echo "{$h}\xe2\234\x93\40\123\x65\x6d\x75\141\x20\x67\141\x6d\142\x61\162\x20\164\145\154\x61\x68\40\x64\151\153\165\155\160\x75\x6c\153\141\156\x20\x64\151\72\40{$collectionResult["\141\154\154\x5f\151\155\141\x67\145\163\x5f\144\151\162"]}{$p}\xa"; echo "{$h}\xe2\x9c\223\x20\107\141\154\x6c\x65\x72\x79\40\110\x54\115\114\72\x20{$collectionResult["\141\x6c\x6c\x5f\x69\155\141\x67\145\x73\x5f\144\151\x72"]}\57\151\x6e\x64\145\x78\56\150\164\x6d\x6c{$p}\12"; if ($zipResult) { echo "{$h}\342\234\x93\x20\106\151\x6c\x65\40\132\x49\x50\72\x20{$zipResult["\x7a\151\160\x5f\x70\141\164\x68"]}\40\50{$zipResult["\146\x69\x6c\145\x5f\x63\x6f\x75\156\x74"]}\x20\146\x69\x6c\x65\163\51{$p}\xa"; } echo "{$h}\xe2\234\223\40\114\x61\160\157\x72\141\x6e\72\40{$reportPath}{$p}\xa"; echo "{$h}\342\x9c\x93\40\x42\x65\162\x68\141\163\151\154\x20\155\x65\x6e\147\x75\x6d\160\165\154\153\141\x6e\x3a\x20{$collectionResult["\163\x75\x63\143\145\163\x73\x5f\143\x6f\165\156\164"]}\40\x67\x61\x6d\142\141\162{$p}\xa"; echo "{$h}\xe2\234\x93\x20\107\141\x67\x61\x6c\x20\x6d\145\156\147\x75\x6d\x70\165\154\x6b\x61\x6e\x3a\40{$collectionResult["\146\141\x69\x6c\x5f\143\x6f\165\156\x74"]}\40\147\141\155\x62\141\x72{$p}\12"; } return array("\161\165\145\x73\x74\x69\x6f\x6e\x73" => $allQuestions, "\151\155\141\147\x65\163" => $allDownloadedImages, "\151\155\141\147\145\163\x5f\x64\x69\162" => $downloadDir . "\x2f\x69\155\x61\x67\x65\x73", "\141\154\154\x5f\x69\155\x61\x67\x65\163\x5f\x64\x69\x72" => isset($collectionResult) ? $collectionResult["\x61\154\154\137\151\155\x61\147\x65\x73\137\x64\151\162"] : null); } goto KLi_u; cY2G3: function mainMenu() { global $m, $h, $p, $k, $bta, $ab, $bg, $u; $downloadDir = "\x2e\57\x64\157\x77\156\x6c\157\x61\x64"; $cookieFile = "\103\157\x6f\153\x69\145"; $userAgentFile = "\165\163\145\x72\x2d\x61\x67\x65\x6e\x74"; $geminiApiKeyFile = "\x47\x45\115\111\116\111\137\x61\160\x69\x2e\x74\170\x74"; system("\143\154\145\x61\x72"); echo "\xa{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; echo "{$h}\x20\40\x20\x20\40\x20\40\40\x20\x20\40\x20\x20\40\105\55\x4c\105\x41\x52\116\x49\x4e\x47\40\x51\x55\x45\x53\124\x49\117\x4e\40\x53\103\x52\x41\x50\105\x52{$p}\12"; echo "{$k}\40\40\x20\x20\40\x20\105\156\x68\x61\x6e\143\145\144\40\x56\145\x72\x73\x69\157\156\x20\144\145\156\147\x61\x6e\x20\x45\x6b\x73\x74\162\x61\153\163\151\40\101\153\x75\x72\141\164\x20{$m}\x38\x35\45{$p}\12"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\12\xa"; $username = getUsernameFromFile($downloadDir); if ($username == "\107\x75\x65\x73\164" && file_exists($cookieFile) && file_exists($userAgentFile)) { $newUsername = checkAndLoadUsername(true); if ($newUsername) { $username = $newUsername; if (strlen($username) > 30) { $username = substr($username, 0, 27) . "\x2e\56\x2e"; } } } $cookieSize = file_exists($cookieFile) ? filesize($cookieFile) : 0; $cookieStatus = file_exists($cookieFile) ? "\x54\x65\x72\163\x65\144\151\141\40\x28{$cookieSize}\40\142\x79\x74\x65\163\51" : "\x54\x69\x64\141\153\x20\164\x65\162\163\x65\x64\151\141"; $userAgentSize = file_exists($userAgentFile) ? filesize($userAgentFile) : 0; $userAgentStatus = file_exists($userAgentFile) ? "\124\145\x72\x73\x65\x64\151\x61\40\50{$userAgentSize}\x20\x62\x79\x74\145\x73\51" : "\x54\151\144\141\153\40\x74\x65\x72\163\145\144\151\x61"; $apiKeyStatus = file_exists($geminiApiKeyFile) ? "\124\145\162\x73\145\144\151\141" : "\124\x69\144\141\153\40\164\145\162\163\145\x64\151\141"; $fileCount = 0; if (file_exists($downloadDir)) { $files = scandir($downloadDir); $fileCount = count($files) - 2; $fileCount = max(0, $fileCount); } $downloadStatus = file_exists($downloadDir) ? "\124\x65\x72\x73\x65\144\x69\141\x20\50{$fileCount}\x20\x66\151\154\145\51" : "\124\x69\144\141\x6b\40\x74\x65\x72\163\x65\144\x69\141"; $jawabanCount = file_exists($downloadDir) ? count(glob($downloadDir . "\57\x4a\x41\127\x41\102\101\x4e\137\52\x2e\x74\x78\x74")) : 0; echo "{$h}\111\116\106\117\x52\115\101\x53\x49\40\123\111\123\124\x45\x4d\72{$p}\12"; echo "{$ab}" . str_repeat("\x2d", 40) . "{$p}\xa"; if ($username != "\x47\x75\145\163\164") { echo "{$k}\xf0\237\221\xa4\40\x50\x65\156\147\x67\165\156\141\x20\x20\40\40\72\x20{$h}{$username}{$p}\xa"; } else { echo "{$k}\xf0\237\x91\xa4\40\120\x65\x6e\147\x67\165\x6e\141\40\x20\40\x20\x3a\40{$m}\x42\145\154\x75\155\x20\x6c\x6f\147\151\x6e{$p}\xa"; } echo "{$k}\360\237\215\xaa\x20\103\x6f\x6f\x6b\x69\x65\40\40\40\40\x20\40\x3a\40{$p}" . ($cookieSize > 0 ? "{$h}{$cookieStatus}{$p}" : "{$m}{$cookieStatus}{$p}") . "\12"; echo "{$k}\360\x9f\x93\xb1\40\x55\x73\x65\x72\55\101\x67\x65\156\164\x20\x20\x3a\40{$p}" . (file_exists($userAgentFile) ? "{$h}{$userAgentStatus}{$p}" : "{$m}{$userAgentStatus}{$p}") . "\xa"; echo "{$k}\360\x9f\224\x91\x20\x47\105\115\x49\116\x49\40\x41\x50\x49\40\x3a\x20{$p}" . (file_exists($geminiApiKeyFile) ? "{$h}{$apiKeyStatus}{$p}" : "{$m}{$apiKeyStatus}{$p}") . "\12"; echo "{$k}\xf0\237\x93\x81\x20\106\157\x6c\x64\145\x72\40\104\141\164\x61\40\x3a\x20{$p}" . ($fileCount > 0 ? "{$h}{$downloadStatus}{$p}" : "{$m}{$downloadStatus}{$p}") . "\12"; if ($jawabanCount > 0) { echo "{$k}\360\237\223\x9d\x20\112\141\167\141\142\x61\156\x20\40\x20\40\x20\x3a\40{$h}\x54\145\x72\163\x65\x64\151\141\x20\x28{$jawabanCount}\x20\x66\x69\154\145\51{$p}\12"; } echo "{$ab}" . str_repeat("\55", 40) . "{$p}\12\12"; while (true) { $menuPadding = str_repeat("\40", 22); echo "{$menuPadding}{$k}\xe3\200\230\40\x4d\105\116\x55\40\125\x54\101\115\x41\x20\343\x80\231{$p}\12\12"; echo "{$h}\133\60\135{$p}\40\114\157\147\151\x6e\xa"; echo "{$h}\x5b\61\135{$p}\40\115\x75\x6c\141\151\40\123\143\162\141\x70\x69\x6e\147\x20\46\40\x45\x6b\163\164\x72\141\x6b\163\x69\12"; echo "{$h}\133\62\135{$p}\x20\113\x65\154\157\154\141\40\x41\x50\111\x20\113\145\x79\40\107\105\x4d\x49\116\x49\xa"; echo "{$h}\133\x33\x5d{$p}\40\114\x69\150\141\x74\40\x4a\141\x77\x61\x62\x61\x6e\40\x47\x45\115\111\x4e\111\12"; echo "{$h}\133\x34\135{$p}\x20\110\x61\x70\x75\x73\40\x46\151\x6c\145\x20\x43\157\157\x6b\x69\145\12"; echo "{$h}\x5b\x35\x5d{$p}\x20\x48\x61\x70\x75\163\40\123\145\155\x75\x61\40\x44\x61\x74\x61\xa"; echo "{$h}\133\x36\135{$p}\40\122\145\x66\x72\x65\x73\150\x20\114\x6f\147\151\156\40\x53\x74\141\x74\x75\x73\12\12"; echo "{$k}\x5b\67\135{$p}\x20\x48\x65\x6c\x70\40\57\x20\120\145\x74\165\156\152\x75\153\40\x50\145\x6e\x67\147\165\x6e\x61\141\x6e\12"; echo "{$k}\133\x38\x5d{$p}\40\103\141\162\x61\40\104\x61\x70\x61\x74\x6b\x61\x6e\x20\x41\164\x74\145\x6d\160\x74\40\111\104\40\x26\40\103\115\111\x44\12\xa"; echo "{$m}\133\x39\135{$p}\x20\x4b\145\x6c\x75\x61\x72\xa\12"; echo "{$k}\120\151\x6c\x69\x68\141\156\72\x20{$p}"; $choice = trim(fgets(STDIN)); switch ($choice) { case "\60": getSimpleCookie(); sleep(1); mainMenu(); break; case "\x31": runScrapingProcess(); sleep(1); mainMenu(); break; case "\x32": manageGeminiApiKey(); sleep(1); mainMenu(); break; case "\x33": displayGeminiAnswers($downloadDir); sleep(1); mainMenu(); break; case "\64": clearCookies(); sleep(1); mainMenu(); break; case "\65": clearDownloadDirectory($downloadDir); sleep(1); mainMenu(); break; case "\66": initializeProgram(); sleep(1); mainMenu(); break; case "\67": help(); sleep(1); mainMenu(); break; case "\x38": showAttemptGuide(); sleep(1); mainMenu(); break; case "\71": echo "\xa{$h}\x54\x65\x72\151\x6d\x61\40\x6b\x61\163\151\150\x2c\x20{$username}\x21{$p}\xa"; echo "{$h}\123\x61\155\160\x61\151\40\152\165\155\160\141\41{$p}\xa"; sleep(1); die(0); default: echo "\12{$m}\342\x9c\227\40\120\x69\x6c\x69\x68\141\x6e\x20\164\x69\x64\x61\x6b\40\x76\x61\x6c\151\144{$p}\xa"; sleep(1); break; } system("\143\154\145\141\162"); echo "\xa{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\xa"; echo "{$h}\x20\x20\x20\x20\40\40\x20\x20\x20\x20\40\40\x20\x20\x45\55\x4c\105\x41\x52\116\x49\116\x47\x20\x51\x55\x45\x53\x54\x49\x4f\116\40\123\103\122\101\120\x45\x52{$p}\12"; echo "{$k}\x20\40\x20\x20\40\x20\40\x20\105\156\150\141\x6e\143\145\x64\x20\126\x65\162\x73\151\157\x6e\40\x64\145\156\x67\141\156\40\x45\x6b\163\x74\x72\x61\x6b\x73\151\x20\x41\153\165\162\x61\x74{$p}\12"; echo "{$bta}" . str_repeat("\342\225\x90", 60) . "{$p}\xa\12"; $username = getUsernameFromFile($downloadDir); $cookieSize = file_exists($cookieFile) ? filesize($cookieFile) : 0; $cookieStatus = file_exists($cookieFile) ? "\124\145\162\x73\145\x64\151\141\x20\50{$cookieSize}\x20\142\x79\x74\x65\163\x29" : "\x54\151\x64\141\153\x20\x74\x65\x72\163\145\x64\151\x61"; $userAgentSize = file_exists($userAgentFile) ? filesize($userAgentFile) : 0; $userAgentStatus = file_exists($userAgentFile) ? "\x54\x65\162\x73\145\144\151\x61\x20\x28{$userAgentSize}\40\x62\x79\164\145\x73\51" : "\124\151\144\141\153\40\164\145\x72\163\145\144\x69\141"; $apiKeyStatus = file_exists($geminiApiKeyFile) ? "\x54\145\162\x73\145\x64\x69\x61" : "\x54\151\x64\141\x6b\40\164\x65\162\163\x65\144\x69\141"; $fileCount = 0; if (file_exists($downloadDir)) { $files = scandir($downloadDir); $fileCount = count($files) - 2; $fileCount = max(0, $fileCount); } $downloadStatus = file_exists($downloadDir) ? "\124\x65\x72\163\x65\x64\x69\141\x20\50{$fileCount}\40\x66\x69\x6c\145\51" : "\x54\x69\144\x61\153\40\164\145\x72\163\x65\x64\x69\141"; echo "{$h}\x49\116\106\x4f\x52\115\101\123\x49\40\x53\111\123\124\105\115\x3a{$p}\12"; echo "{$ab}" . str_repeat("\55", 40) . "{$p}\xa"; if ($username != "\x47\x75\x65\x73\164") { echo "{$k}\360\237\221\xa4\x20\120\x65\156\x67\x67\165\156\141\x20\x20\40\40\72\40{$h}{$username}{$p}\12"; } else { echo "{$k}\360\237\221\xa4\40\120\145\156\x67\x67\x75\156\x61\x20\40\40\x20\x3a\40{$m}\x42\x65\154\165\155\40\x6c\x6f\x67\151\x6e{$p}\xa"; } echo "{$k}\xf0\x9f\x8d\252\x20\103\x6f\x6f\x6b\151\x65\x20\40\40\40\x20\x20\72\x20{$p}" . ($cookieSize > 0 ? "{$h}{$cookieStatus}{$p}" : "{$m}{$cookieStatus}{$p}") . "\12"; echo "{$k}\xf0\237\223\261\40\x55\x73\x65\162\x2d\101\147\x65\x6e\x74\x20\x20\x3a\x20{$p}" . (file_exists($userAgentFile) ? "{$h}{$userAgentStatus}{$p}" : "{$m}{$userAgentStatus}{$p}") . "\xa"; echo "{$k}\360\237\224\221\40\107\105\x4d\x49\116\111\40\x41\x50\111\40\72\x20{$p}" . (file_exists($geminiApiKeyFile) ? "{$h}{$apiKeyStatus}{$p}" : "{$m}{$apiKeyStatus}{$p}") . "\xa"; echo "{$k}\360\237\x93\201\x20\x46\x6f\154\x64\x65\x72\40\104\141\x74\141\40\x3a\x20{$p}" . ($fileCount > 0 ? "{$h}{$downloadStatus}{$p}" : "{$m}{$downloadStatus}{$p}") . "\12"; $jawabanCount = file_exists($downloadDir) ? count(glob($downloadDir . "\x2f\x4a\x41\127\x41\x42\x41\x4e\x5f\x2a\x2e\x74\x78\164")) : 0; if ($jawabanCount > 0) { echo "{$k}\360\237\x93\235\x20\112\x61\x77\141\x62\x61\156\40\40\40\40\40\x3a\x20{$h}\124\145\162\x73\145\x64\151\x61\40\50{$jawabanCount}\40\x66\151\154\145\x29{$p}\xa"; } echo "{$ab}" . str_repeat("\x2d", 40) . "{$p}\12\12"; } } goto nDkMn; tafHN: $p = "\x1b\x5b\x31\73\x39\67\155"; goto ZklDN; Uut2u: date_default_timezone_set("\101\x73\151\141\x2f\112\x61\x6b\x61\x72\x74\141"); goto hCJ7N; SEhKU: function checkAndLoadUsername($silent = false) { global $h, $m, $p, $k, $bta, $downloadDir; $cookieFile = "\103\157\x6f\x6b\x69\x65"; $userAgentFile = "\165\163\145\x72\x2d\141\147\x65\156\x74"; $usernameFile = $downloadDir . "\x2f\165\163\x65\162\x6e\141\155\x65\x2e\164\x78\x74"; if (file_exists($cookieFile) && file_exists($userAgentFile)) { if (!$silent) { echo "{$h}\xe2\x9c\x93\40\106\151\x6c\x65\x20\143\157\x6f\153\151\x65\x20\144\x61\x6e\x20\165\163\x65\x72\x2d\x61\x67\145\x6e\x74\x20\144\151\x74\x65\155\x75\153\x61\156{$p}\xa"; } $user = trim(file_get_contents($userAgentFile)); $cook = trim(file_get_contents($cookieFile)); $ua = array("\110\x6f\x73\164\x3a\40\x65\x6c\145\x61\x72\x6e\151\x6e\147\x2e\163\x6d\x6b\x32\55\171\153\56\x73\143\150\56\151\x64", "\130\x2d\x52\145\x71\165\x65\163\164\145\x64\x2d\x57\x69\164\150\x3a\40\x58\115\x4c\110\x74\164\x70\x52\145\x71\x75\x65\x73\164", "\165\163\x65\162\55\x61\147\145\156\x74\72\40{$user}", "\x63\157\x6f\153\151\145\72\40{$cook}"); if (!$silent) { echo "{$k}\115\x65\156\147\x61\155\142\151\154\x20\x64\x61\x74\x61\x20\x64\141\x73\150\x62\x6f\141\162\x64\56\x2e\56{$p}\xa"; } $baseUrl = "\x68\x74\164\160\163\72\x2f\57\145\154\145\x61\162\156\x69\156\147\x2e\163\155\x6b\x32\x2d\171\153\x2e\163\x63\150\x2e\151\x64"; $dashboardUrl = "{$baseUrl}\57\155\x79\x2f"; $dashboard = get($dashboardUrl, $ua); if (!empty($dashboard)) { $username = extractUsernameFromDashboard($dashboard); if ($username != "\125\x6e\x6b\x6e\157\x77\156\x20\x55\163\145\x72") { if (!file_exists($downloadDir)) { mkdir($downloadDir, 511, true); } file_put_contents($usernameFile, $username); if (!$silent) { echo "{$h}\xe2\234\x93\40\125\163\x65\x72\156\141\155\145\x20\x62\145\x72\150\x61\163\151\154\40\144\151\x61\155\142\151\154\12"; } $dashboardPath = saveToDownloadDir("\144\141\x73\150\142\157\x61\162\144\x5f\141\165\x74\157\x2e\x68\164\x6d\154", $dashboard, $downloadDir); return $username; } else { if (!$silent) { echo "{$m}\342\234\x97\x20\124\x69\x64\x61\153\x20\142\151\x73\141\40\x6d\x65\156\147\145\153\x73\164\x72\141\153\40\165\163\x65\162\x6e\x61\x6d\x65\x20\x64\141\162\151\x20\x64\141\x73\150\142\157\141\162\144{$p}\xa"; } } } else { if (!$silent) { echo "{$m}\xe2\234\x97\40\107\141\x67\x61\x6c\x20\155\145\x6e\x67\x61\155\x62\151\x6c\x20\x64\x61\163\150\x62\157\x61\162\x64\x2e\40\x43\157\157\153\x69\x65\40\x6d\x75\156\x67\153\x69\x6e\x20\145\170\160\x69\162\145\144\x2e{$p}\12"; } } } else { if (!$silent) { echo "{$k}\xe2\x84\xb9\xef\xb8\217\40\x46\x69\x6c\x65\x20\143\x6f\157\x6b\x69\x65\x20\141\x74\x61\x75\x20\x75\163\145\162\x2d\x61\x67\x65\x6e\x74\40\142\x65\154\x75\x6d\x20\164\x65\162\163\145\144\x69\x61{$p}\xa"; } } return null; } goto u4g9z; yhjET: $bta = "\x1b\133\x31\x3b\x39\66\155"; goto tafHN; usJn6: function extractTrueFalseAnswers($questionNode, $xpath, &$questionData) { $inputs = $xpath->query("\56\x2f\57\151\156\160\165\x74\x5b\x40\164\171\x70\x65\75\47\x72\141\144\x69\157\x27\x5d", $questionNode); foreach ($inputs as $input) { $id = $input->getAttribute("\151\x64"); $value = $input->getAttribute("\166\x61\x6c\165\x65"); $checked = $input->getAttribute("\x63\x68\145\143\x6b\145\x64") == "\143\x68\x65\x63\x6b\145\x64"; $label = $xpath->query("\x2f\x2f\154\141\142\x65\154\133\x40\146\157\162\75\47{$id}\x27\x5d", $questionNode); $text = ''; if ($label->length > 0) { $text = trim($label->item(0)->nodeValue); } if (empty($text)) { $text = $value == "\x31" ? "\124\162\x75\x65" : "\x46\x61\154\x73\145"; } $letter = $value == "\61" ? "\x41" : "\x42"; $answer = array("\154\145\x74\x74\x65\162" => $letter, "\164\145\x78\164" => $text, "\166\141\154\x75\145" => $value, "\x69\x73\137\x63\157\x72\162\x65\x63\x74" => $checked, "\x69\156\x70\165\164\137\151\x64" => $id, "\x74\x79\160\x65" => "\164\162\x75\x65\146\x61\154\x73\145"); $questionData["\141\156\x73\x77\145\162\163"][] = $answer; if ($checked) { $questionData["\x63\157\x72\162\x65\143\164\137\141\x6e\163\x77\145\162"] = $letter; } } } goto OR0dw; vLj03: function displayGeminiAnswers($downloadDir) { global $m, $h, $p, $k, $bta, $ab; system("\143\x6c\145\x61\162"); echo "\xa{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; echo "{$h}\112\x41\127\101\x42\101\116\40\x47\105\x4d\111\116\x49\40\101\120\111\40\131\101\116\107\40\124\x45\122\x53\111\115\x50\x41\x4e{$p}\xa"; echo "{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; $geminiFiles = glob($downloadDir . "\57\112\x41\127\101\x42\101\116\137\52\56\x74\x78\164"); $comparisonFiles = glob($downloadDir . "\x2f\120\105\122\102\x41\x4e\x44\x49\x4e\x47\x41\116\x5f\52\56\164\170\164"); if (empty($geminiFiles) && empty($comparisonFiles)) { echo "{$m}\x54\151\144\x61\153\40\141\144\141\x20\x66\x69\154\x65\40\152\141\167\141\142\141\x6e\x20\107\x45\x4d\111\x4e\111\40\171\141\x6e\x67\40\144\x69\x74\145\x6d\165\x6b\x61\156\56{$p}\12"; echo "{$k}\104\x69\x72\145\153\164\157\x72\151\72\40{$downloadDir}{$p}\12"; echo "\xa{$h}\124\x65\x6b\141\x6e\x20\x45\156\x74\145\x72\x20\165\156\x74\x75\153\x20\153\x65\x6d\x62\x61\154\151\x2e\x2e\56{$p}"; fgets(STDIN); return; } if (!empty($geminiFiles)) { echo "\xa{$k}\106\151\x6c\145\40\x4a\x61\167\141\142\x61\x6e\x20\x47\105\115\x49\x4e\111\x3a{$p}\xa"; foreach ($geminiFiles as $index => $file) { $filename = basename($file); $filesize = filesize($file); $sizeFormatted = round($filesize / 1024, 2) . "\x20\113\102"; $fileDate = date("\x59\55\155\55\144\40\x48\72\x69\x3a\x73", filemtime($file)); echo "{$h}\x20\x20" . ($index + 1) . "\56\x20{$p}{$filename}\xa"; echo "{$ab}\x20\40\40\x20\x20\125\153\165\162\x61\x6e\x3a\40{$sizeFormatted}\40\x7c\x20\x44\151\x62\165\x61\x74\x3a\40{$fileDate}{$p}\xa"; } } if (!empty($comparisonFiles)) { echo "\xa{$k}\106\x69\154\145\40\x50\x65\x72\142\x61\156\144\151\x6e\x67\x61\x6e\40\x4a\x61\167\x61\x62\141\156\72{$p}\12"; foreach ($comparisonFiles as $index => $file) { $filename = basename($file); $filesize = filesize($file); $sizeFormatted = round($filesize / 1024, 2) . "\x20\113\102"; $fileDate = date("\131\x2d\x6d\x2d\144\x20\x48\x3a\x69\72\163", filemtime($file)); echo "{$h}\40\40" . ($index + 1 + count($geminiFiles)) . "\x2e\40{$p}{$filename}\xa"; echo "{$ab}\x20\40\40\40\x20\x55\153\x75\162\x61\x6e\x3a\40{$sizeFormatted}\x20\174\x20\x44\151\142\x75\x61\164\x3a\x20{$fileDate}{$p}\xa"; } } $allFiles = array_merge($geminiFiles, $comparisonFiles); echo "\xa{$k}\x50\151\154\x69\150\x20\146\x69\154\x65\x20\165\156\164\165\x6b\40\x64\151\x6c\x69\x68\x61\x74\x20\x28\x30\40\165\156\164\x75\x6b\40\x6b\x65\155\x62\141\x6c\151\51\x3a\40{$p}"; $choice = trim(fgets(STDIN)); if ($choice == "\x30") { return; } $fileIndex = intval($choice) - 1; if ($fileIndex >= 0 && $fileIndex < count($allFiles)) { $selectedFile = $allFiles[$fileIndex]; viewGeminiAnswerFile($selectedFile); } else { echo "{$m}\x50\x69\x6c\151\x68\141\156\x20\164\151\x64\x61\153\40\x76\x61\x6c\151\144\x2e{$p}\xa"; echo "\12{$h}\x54\145\x6b\141\156\40\105\x6e\x74\x65\x72\x20\165\156\164\165\x6b\x20\153\145\x6d\x62\x61\154\151\56\56\56{$p}"; fgets(STDIN); } } goto mwQGO; JECAV: function ensureDownloadDirectory($directory = "\x2e\x2f\144\x6f\167\x6e\154\157\x61\x64") { global $h, $p; if (!file_exists($directory)) { mkdir($directory, 511, true); echo "{$h}\xe2\234\x93\x20\x44\x69\162\145\153\164\x6f\x72\151\40\x27{$directory}\47\40\144\x69\142\x75\141\164{$p}\xa"; } return $directory; } goto yTpxR; anwCX: function getCachedImageMapping($downloadDir) { global $GLOBALS; $cacheKey = md5($downloadDir); if (isset($GLOBALS["\x69\x6d\x61\147\145\115\141\160\x70\x69\x6e\x67\x43\x61\143\150\x65"][$cacheKey]) && isset($GLOBALS["\x69\x6d\x61\x67\x65\x4d\141\160\160\151\156\x67\x43\141\x63\x68\x65\x54\151\155\x65"][$cacheKey])) { $cacheAge = time() - $GLOBALS["\151\155\141\147\x65\115\x61\x70\x70\151\x6e\147\x43\141\x63\150\145\x54\x69\x6d\x65"][$cacheKey]; if ($cacheAge < 300) { echo "{$k}\xe2\x9c\223\x20\115\145\x6e\x67\x67\x75\156\141\153\x61\x6e\x20\143\x61\x63\150\145\144\40\x69\x6d\141\147\x65\40\155\141\160\x70\151\156\x67\x20\50\165\163\151\141\x3a\x20{$cacheAge}\x73\x29{$p}\12"; return $GLOBALS["\151\x6d\x61\147\x65\x4d\141\x70\x70\151\x6e\147\x43\x61\x63\x68\145"][$cacheKey]; } } echo "{$k}\x4d\x65\155\x62\x61\156\147\165\156\x20\x69\155\x61\x67\x65\40\x6d\141\x70\x70\151\156\147\x20\142\141\162\x75\56\56\56{$p}\xa"; $mapping = buildQuestionImageMapping($downloadDir); $GLOBALS["\x69\155\x61\x67\145\115\141\160\160\151\156\147\x43\x61\143\150\x65"][$cacheKey] = $mapping; $GLOBALS["\151\x6d\141\x67\x65\115\141\x70\x70\151\x6e\x67\x43\x61\x63\x68\145\x54\151\155\145"][$cacheKey] = time(); return $mapping; } goto RvbR2; RvbR2: function isImageDuplicate($imagePath, $relevantImages) { if (in_array($imagePath, $relevantImages)) { return true; } $filename = basename($imagePath); foreach ($relevantImages as $existingPath) { if (basename($existingPath) === $filename) { return true; } } if (file_exists($imagePath) && filesize($imagePath) < 10485760) { $currentHash = md5_file($imagePath); foreach ($relevantImages as $existingPath) { if (file_exists($existingPath) && md5_file($existingPath) === $currentHash) { return true; } } } return false; } goto ZSdRH; rb3ey: $u = "\33\133\x31\73\71\x35\155"; goto yhjET; fbtpu: function get($link, $ua) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $link); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_HTTPHEADER, $ua); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_HEADER, 0); return curl_exec($ch); } goto fFba2; IjrMb: $k = "\33\133\x31\x3b\71\x33\x6d"; goto UkdqI; yTpxR: function saveToDownloadDir($filename, $content, $directory = "\x2e\x2f\144\157\x77\156\154\x6f\141\x64") { $fullPath = $directory . "\57" . $filename; file_put_contents($fullPath, $content); return $fullPath; } goto fO8u0; PVOok: function clearDownloadDirectory($downloadDir = "\56\x2f\x64\x6f\x77\156\x6c\x6f\141\144") { global $m, $h, $p, $k; echo "\xa{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\xa"; echo "{$h}\115\x45\116\107\110\101\120\x55\123\40\123\x45\115\x55\101\x20\104\x41\x54\101\x20\104\117\127\x4e\114\117\x41\104{$p}\12"; echo "{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; if (!file_exists($downloadDir)) { echo "{$m}\104\151\162\x65\x6b\x74\157\162\151\x20\47{$downloadDir}\47\40\x74\151\x64\x61\153\x20\x64\151\164\145\x6d\x75\x6b\141\156\56{$p}\12"; echo "\12{$h}\x54\x65\153\141\156\x20\105\156\164\145\x72\x20\165\156\164\165\x6b\40\155\x65\x6c\x61\156\x6a\x75\x74\153\x61\156\x2e\x2e\56{$p}"; fgets(STDIN); return false; } $totalFiles = 0; $totalSize = 0; $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($downloadDir, RecursiveDirectoryIterator::SKIP_DOTS), RecursiveIteratorIterator::CHILD_FIRST); foreach ($iterator as $file) { if ($file->isFile()) { $totalFiles++; $totalSize += $file->getSize(); } } $totalFiles += 1; echo "{$k}\x4c\x6f\153\x61\163\151\x3a\x20" . realpath($downloadDir) . "{$p}\12"; echo "{$k}\x54\157\x74\141\x6c\40\146\151\154\145\x2f\x66\x6f\x6c\144\145\x72\40\171\x61\x6e\x67\40\141\153\141\156\40\x64\151\x68\141\160\165\163\x3a\x20" . number_format($totalFiles) . "{$p}\12"; echo "{$k}\x54\157\x74\141\x6c\40\x75\153\165\162\x61\156\x3a\x20" . round($totalSize / 1024 / 1024, 2) . "\40\115\102{$p}\12"; echo "\xa{$m}\342\232\240\xef\xb8\x8f\x20\x20\x50\x45\122\111\116\x47\101\x54\x41\x4e\72\40\x53\145\x6d\165\x61\x20\x64\x61\164\x61\40\x61\x6b\x61\x6e\40\144\x69\150\141\x70\x75\163\40\x73\x65\x63\x61\162\x61\40\x70\145\162\155\x61\156\145\x6e\41{$p}\12"; echo "{$m}\x20\x20\x20\111\156\x69\x20\164\145\162\155\141\163\165\153\x3a{$p}\12"; echo "{$ab}\40\x20\40\55\40\106\x69\x6c\x65\x20\110\x54\115\114\x20\150\x61\163\151\154\40\x73\143\x72\x61\160\x69\156\147{$p}\xa"; echo "{$ab}\40\40\x20\x2d\40\107\141\155\x62\x61\x72\x20\171\141\x6e\147\40\144\x69\x64\157\x77\x6e\154\157\141\x64{$p}\xa"; echo "{$ab}\x20\40\40\55\40\x46\x69\154\145\x20\x4a\123\117\116\x20\x64\x61\156\40\154\141\160\x6f\162\141\156{$p}\xa"; echo "{$ab}\x20\x20\x20\x2d\40\112\141\x77\x61\x62\141\156\40\144\141\x72\x69\40\x47\x45\x4d\x49\x4e\111\40\x41\x50\111{$p}\12"; echo "{$ab}\x20\40\40\55\40\x53\145\155\x75\x61\40\x73\x75\x62\x66\157\x6c\144\x65\x72\x20\x64\x61\x6e\x20\153\x6f\x6e\164\x65\x6e\156\x79\x61{$p}\xa"; echo "\xa{$k}\x41\x70\x61\153\x61\150\x20\x41\x6e\144\141\40\171\141\x6b\151\156\40\151\156\147\151\x6e\x20\x6d\145\x6e\147\150\141\160\x75\x73\40\x53\105\x4d\125\x41\40\144\x61\x74\x61\77\x20\x28\x79\x2f\x6e\51\x3a\40{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) !== "\171") { echo "{$m}\342\x9c\227\x20\x50\x65\156\147\150\x61\x70\x75\x73\141\x6e\x20\144\x69\142\141\x74\x61\x6c\153\x61\x6e\x2e{$p}\xa"; echo "\12{$h}\x54\145\x6b\141\156\x20\x45\156\164\x65\162\40\165\156\164\165\153\x20\x6d\145\x6c\141\x6e\152\x75\x74\x6b\x61\156\x2e\x2e\x2e{$p}"; fgets(STDIN); return false; } echo "\12{$k}\x4d\145\156\x67\x68\x61\160\165\163\40\144\141\x74\141\56\56\x2e{$p}\12"; $deletedCount = 0; $deletedSize = 0; $errors = array(); try { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($downloadDir, RecursiveDirectoryIterator::SKIP_DOTS), RecursiveIteratorIterator::CHILD_FIRST); foreach ($iterator as $file) { $filePath = $file->getPathname(); try { if ($file->isDir()) { if (rmdir($filePath)) { $deletedCount++; echo "{$h}\x20\40\342\x9c\223\40\x4d\145\156\x67\x68\141\160\165\x73\40\146\157\x6c\x64\145\162\x3a\x20" . basename($filePath) . "{$p}\xa"; } else { $errors[] = "\107\x61\x67\x61\x6c\40\x6d\x65\x6e\x67\150\141\x70\165\163\40\x66\157\154\144\x65\x72\72\x20" . $filePath; } } else { $fileSize = $file->getSize(); if (unlink($filePath)) { $deletedCount++; $deletedSize += $fileSize; echo "{$h}\40\x20\xe2\x9c\x93\x20\x4d\145\x6e\x67\150\x61\x70\x75\163\40\x66\151\154\x65\x3a\40" . basename($filePath) . "\40\x28" . round($fileSize / 1024, 2) . "\40\113\x42\51{$p}\12"; } else { $errors[] = "\107\141\147\x61\154\40\155\x65\x6e\x67\x68\141\x70\165\x73\x20\x66\x69\x6c\x65\72\x20" . $filePath; } } } catch (Exception $e) { $errors[] = "\105\162\x72\157\x72\40\x70\141\144\x61\x20" . $filePath . "\x3a\x20" . $e->getMessage(); } } if (rmdir($downloadDir)) { $deletedCount++; echo "{$h}\x20\40\342\234\223\40\x4d\145\156\147\150\141\x70\165\x73\x20\x66\x6f\154\144\145\x72\x20\165\x74\141\155\141\x3a\40" . basename($downloadDir) . "{$p}\12"; } else { $errors[] = "\107\x61\x67\141\x6c\40\155\145\156\147\150\x61\x70\x75\163\x20\146\x6f\x6c\x64\145\162\40\165\164\x61\155\141\72\40" . $downloadDir; } } catch (Exception $e) { $errors[] = "\x45\x72\x72\157\162\40\x73\x61\x61\x74\x20\155\x65\x6e\147\150\141\x70\x75\x73\72\x20" . $e->getMessage(); } echo "\xa{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; echo "{$h}\110\101\123\x49\x4c\x20\120\105\116\x47\110\x41\120\x55\123\101\116{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\12"; if (empty($errors)) { echo "{$h}\342\234\223\40\x50\145\156\x67\150\x61\x70\x75\x73\141\x6e\x20\x62\x65\162\150\x61\x73\x69\154\41{$p}\xa"; echo "{$k}\124\x6f\x74\x61\154\x20\171\x61\x6e\x67\40\x64\151\x68\x61\160\165\163\72\x20" . number_format($deletedCount) . "\x20\146\x69\x6c\145\57\x66\157\x6c\144\145\x72{$p}\xa"; echo "{$k}\x54\x6f\164\x61\154\40\x75\x6b\165\x72\x61\156\40\171\x61\x6e\147\x20\144\x69\x62\x65\x62\x61\x73\153\141\156\x3a\40" . round($deletedSize / 1024 / 1024, 2) . "\x20\x4d\102{$p}\xa"; echo "{$h}\104\x69\x72\145\153\x74\x6f\162\151\x20\x27{$downloadDir}\x27\x20\164\145\x6c\141\x68\x20\x64\151\x68\x61\x70\165\x73\40\x73\x65\x70\145\156\x75\x68\156\x79\x61\56{$p}\xa"; } else { echo "{$m}\342\232\xa0\xef\270\217\40\40\x50\x65\x6e\x67\150\141\x70\x75\163\x61\x6e\x20\x64\145\156\x67\141\x6e\x20\142\x65\142\x65\162\141\160\x61\x20\145\162\162\157\x72\72{$p}\xa"; echo "{$k}\x42\145\162\150\x61\x73\x69\154\x20\155\x65\156\147\x68\x61\160\165\x73\x3a\40" . number_format($deletedCount) . "\40\x66\151\x6c\145\57\x66\157\x6c\144\x65\x72{$p}\xa"; echo "{$k}\125\x6b\165\x72\141\x6e\40\x64\x69\142\x65\142\141\x73\153\141\x6e\x3a\40" . round($deletedSize / 1024 / 1024, 2) . "\x20\x4d\x42{$p}\12"; echo "\12{$m}\x45\162\162\x6f\162\x20\171\x61\156\x67\x20\164\x65\x72\152\x61\x64\x69\72{$p}\12"; foreach ($errors as $error) { echo "{$m}\x20\40\342\234\227\40{$error}{$p}\12"; } echo "\xa{$k}\123\141\x72\141\x6e\72{$p}\12"; echo "{$ab}\40\40\55\x20\x54\x75\x74\165\x70\40\x73\x65\x6d\x75\141\40\x70\x72\x6f\147\162\141\x6d\40\171\141\x6e\x67\40\x6d\165\156\147\153\x69\156\40\155\145\156\147\147\x75\x6e\141\x6b\x61\156\x20\146\151\154\x65\x20\164\x65\x72\x73\x65\142\165\x74{$p}\12"; echo "{$ab}\40\40\x2d\x20\x43\157\x62\x61\x20\150\x61\160\x75\163\x20\x73\x65\143\141\162\141\40\155\x61\156\x75\x61\154\x20\x64\141\162\151\40\x66\151\154\x65\40\155\141\156\x61\147\145\x72{$p}\xa"; echo "{$ab}\40\40\55\40\122\145\163\164\x61\x72\x74\x20\153\157\155\x70\165\164\145\x72\40\152\x69\153\141\x20\x70\x65\162\154\165{$p}\xa"; } echo "\xa{$h}\x54\145\153\141\x6e\40\x45\x6e\164\x65\162\40\x75\156\x74\165\x6b\40\x6d\145\x6c\141\156\x6a\x75\164\153\x61\x6e\x2e\x2e\x2e{$p}"; fgets(STDIN); return empty($errors); } goto TrbLM; kt8Pd: initializeProgram(); goto S0JK9; PWLqL: $h = "\33\x5b\x31\x3b\71\62\x6d"; goto IjrMb; DVvxf: function displayMatchQuestionsSummary($questions, $filename) { global $h, $m, $p, $k, $u, $ab, $bg, $bta; $answeredCount = 0; $totalItems = 0; echo "\12{$u}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; echo "{$k}\x52\111\x4e\107\113\x41\123\101\x4e\x20\120\x45\122\x54\101\x4e\x59\101\x41\116\x20\x44\122\117\x50\x44\117\127\x4e\72\40{$filename}{$p}\xa"; echo "{$u}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; foreach ($questions as $index => $question) { $questionNum = $index + 1; echo "\xa{$bta}\x50\x65\162\x74\x61\156\x79\141\x61\156\40\x23{$question["\156\x75\155\142\145\x72"]}{$p}\xa"; if (!empty($question["\164\145\x78\164"])) { $shortText = substr(strip_tags($question["\x74\x65\170\x74"]), 0, 100) . (strlen($question["\164\145\x78\x74"]) > 100 ? "\56\56\56" : ''); echo "{$ab}\x20\x20" . $shortText . "{$p}\12"; } if (!empty($question["\141\x6e\x73\x77\x65\162\x73"])) { $questionAnswered = 0; $questionTotal = count($question["\x61\x6e\163\167\x65\162\163"]); $totalItems += $questionTotal; echo "{$k}\x20\40\x49\x74\145\155\x20\155\141\x74\x63\150\x69\156\147\x3a\40{$questionTotal}\x20\151\x74\145\x6d{$p}\12"; foreach ($question["\141\x6e\x73\x77\145\x72\x73"] as $answer) { if ($answer["\151\163\137\141\156\x73\x77\145\162\145\x64"]) { $questionAnswered++; $answeredCount++; echo "{$h}\x20\x20\x20\40\342\x9c\223\x20{$answer["\x6c\x65\164\x74\145\162"]}\56\40{$answer["\x71\x75\145\x73\x74\151\157\156\x5f\x74\x65\x78\x74"]}\xa"; echo "\40\x20\x20\x20\x20\40\40\x20\xe2\206\x92\40{$answer["\x73\145\154\145\143\164\x65\144\x5f\x74\145\170\164"]}{$p}\12"; } else { echo "{$m}\x20\40\x20\x20\342\x9c\227\x20{$answer["\x6c\x65\164\164\145\x72"]}\56\40{$answer["\x71\165\x65\163\164\151\157\x6e\x5f\164\x65\170\164"]}\12"; echo "\x20\40\40\40\x20\40\x20\40\xe2\x86\222\40\102\145\x6c\165\155\x20\x64\151\x6a\141\167\141\x62{$p}\12"; } } $percentage = $questionTotal > 0 ? round($questionAnswered / $questionTotal * 100, 1) : 0; echo "{$bg}\x20\x20\104\x69\x6a\141\x77\141\x62\72\40{$questionAnswered}\57{$questionTotal}\x20\50{$percentage}\45\51{$p}\12"; } echo "{$ab}" . str_repeat("\x2d", 60) . "{$p}\xa"; } $totalAnsweredPercentage = $totalItems > 0 ? round($answeredCount / $totalItems * 100, 1) : 0; echo "\12{$h}\124\117\x54\101\114\72\40{$answeredCount}\x20\144\x61\162\x69\x20{$totalItems}\40\151\x74\145\155\x20\x74\x65\x72\152\x61\167\141\x62\x20\50{$totalAnsweredPercentage}\45\51{$p}\xa"; } goto z93xC; uo7SY: $GLOBALS["\151\x6d\141\x67\x65\x4d\x61\x70\160\x69\156\147\103\141\143\x68\145"] = array(); goto g3cno; GF0s5: function clearCookies($cookieFile = "\x43\157\x6f\x6b\x69\x65") { global $m, $h, $p, $k; echo "\12{$bta}" . str_repeat("\342\x95\x90", 60) . "{$p}\xa"; echo "{$h}\115\x45\116\107\x48\101\120\x55\x53\x20\x46\111\x4c\x45\40\103\x4f\x4f\x4b\111\105{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\x95\220", 60) . "{$p}\xa"; if (!file_exists($cookieFile)) { echo "{$m}\x46\151\x6c\145\x20\x27{$cookieFile}\x27\40\164\x69\144\x61\x6b\x20\x64\151\164\x65\x6d\x75\x6b\x61\156\56{$p}\xa"; } else { $fileSize = filesize($cookieFile); echo "{$k}\x46\151\x6c\x65\72\40" . realpath($cookieFile) . "{$p}\xa"; echo "{$k}\125\153\165\162\141\156\72\x20" . round($fileSize / 1024, 2) . "\x20\113\x42{$p}\xa"; echo "\xa{$k}\101\x70\x61\153\141\x68\40\x41\x6e\x64\141\40\171\141\x6b\151\156\40\x69\156\x67\151\x6e\x20\x6d\145\x6e\x67\x68\x61\x70\x75\163\40\146\x69\x6c\145\40\143\x6f\x6f\153\x69\x65\x3f\40\x28\171\57\156\x29\72\x20{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm) === "\x79") { if (unlink($cookieFile)) { echo "{$h}\342\234\x93\40\106\151\x6c\145\40\143\x6f\x6f\x6b\151\x65\40\142\x65\x72\150\x61\163\151\154\40\x64\151\x68\x61\160\x75\x73\x2e{$p}\12"; } else { echo "{$m}\xe2\234\227\40\x47\x61\147\141\154\40\x6d\145\x6e\147\150\x61\x70\x75\x73\x20\146\x69\x6c\x65\40\143\x6f\157\x6b\x69\x65\56{$p}\12"; } } else { echo "{$m}\342\x9c\x97\40\120\145\x6e\x67\150\x61\160\x75\x73\x61\156\x20\x64\151\x62\x61\x74\141\154\x6b\x61\x6e\x2e{$p}\xa"; } } echo "\xa{$h}\x54\x65\153\141\156\x20\105\156\164\x65\162\x20\x75\x6e\164\x75\x6b\40\x6d\145\154\x61\156\x6a\165\164\153\141\156\56\56\56{$p}"; fgets(STDIN); } goto iNOhG; mwQGO: function viewGeminiAnswerFile($filePath) { global $m, $h, $p, $k, $bta, $ab; while (true) { system("\143\x6c\145\x61\x72"); echo "\12{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; echo "{$h}\x49\x53\111\40\x46\x49\114\x45\x3a\40" . basename($filePath) . "{$p}\xa"; echo "{$bta}" . str_repeat("\342\225\220", 60) . "{$p}\xa"; if (!file_exists($filePath)) { echo "{$m}\x46\151\x6c\x65\x20\x74\x69\144\x61\153\x20\x64\151\x74\145\x6d\165\x6b\x61\x6e\56{$p}\12"; echo "\xa{$h}\x54\145\x6b\x61\156\40\x45\x6e\x74\x65\162\40\x75\x6e\164\x75\153\40\153\x65\x6d\x62\x61\x6c\151\56\56\x2e{$p}"; fgets(STDIN); return; } $fileSize = filesize($filePath); $fileDate = date("\x59\x2d\155\55\144\40\110\x3a\151\x3a\x73", filemtime($filePath)); $content = file_get_contents($filePath); $lines = explode("\xa", $content); $totalLines = count($lines); echo "{$k}\111\156\x66\157\162\x6d\141\x73\x69\40\106\x69\154\x65\x3a{$p}\12"; echo "{$ab}\125\153\165\x72\x61\x6e\72\x20" . round($fileSize / 1024, 2) . "\40\113\x42{$p}\12"; echo "{$ab}\112\x75\x6d\x6c\x61\x68\40\102\x61\x72\x69\163\72\x20{$totalLines}{$p}\12"; echo "{$ab}\x44\x69\x62\x75\x61\x74\72\x20{$fileDate}{$p}\xa"; echo "{$ab}\120\141\x74\150\x3a\x20{$filePath}{$p}\xa"; echo "\xa{$k}\x50\151\154\x69\150\40\155\x6f\x64\x65\x20\164\x61\x6d\160\x69\154\x61\x6e\x3a{$p}\12"; echo "{$h}\x20\40\x31\56\40\120\x72\145\166\x69\x65\x77\x20\50\x35\x30\40\142\141\162\x69\163\x20\x70\x65\162\x74\x61\155\141\x29{$p}\12"; echo "{$h}\40\x20\x32\56\x20\x43\x61\x72\x69\40\153\x61\164\x61\x20\x6b\165\156\x63\151{$p}\12"; echo "{$h}\x20\40\x33\x2e\40\114\x69\x68\141\x74\x20\x62\x61\147\151\141\x6e\x20\x74\145\162\164\x65\x6e\x74\165{$p}\xa"; echo "{$h}\40\40\64\x2e\x20\105\170\160\157\162\x74\x20\153\145\40\146\x69\154\x65\40\154\x61\151\156{$p}\xa"; echo "{$m}\40\40\x35\56\40\x4b\145\155\x62\141\154\151\40\153\x65\x20\144\x61\x66\x74\141\162\x20\146\x69\x6c\145{$p}\12"; echo "{$k}\x50\151\x6c\x69\150\x61\156\x20\x28\61\x2d\x35\x29\72\x20{$p}"; $choice = trim(fgets(STDIN)); switch ($choice) { case "\x31": echo "\xa{$bta}\x4d\x45\x4e\x41\115\x50\x49\x4c\113\x41\x4e\40\123\x45\114\125\122\125\x48\40\x42\x41\x52\111\x53\40\50{$totalLines}\40\x62\141\162\x69\x73\51\72{$p}\12"; echo "{$u}" . str_repeat("\x2d", 80) . "{$p}\xa"; for ($i = 0; $i < $totalLines; $i++) { $lineNum = $i + 1; $line = $lines[$i]; if (preg_match("\x2f\136\134\144\53\x5c\x2e\57", $line)) { echo "{$h}{$line}{$p}\xa"; } elseif (preg_match("\x2f\136\133\x3d\x2a\55\135\53\x24\x2f", $line)) { echo "{$ab}{$line}{$p}\12"; } elseif (strpos(strtolower($line), "\152\141\167\x61\142\x61\156") !== false) { echo "{$k}{$line}{$p}\xa"; } else { echo "{$p}{$line}{$p}\xa"; } if (($i + 1) % 50 === 0 && $i + 1 < $totalLines) { echo "\12{$ab}\55\x2d\55\x20\102\141\162\x69\163\40{$lineNum}\40\144\x61\x72\x69\40{$totalLines}\x20\x2d\x2d\x2d{$p}\xa"; echo "{$h}\x54\145\153\x61\x6e\40\105\x6e\x74\x65\x72\40\x75\x6e\x74\165\153\x20\x6d\x65\154\141\156\152\x75\x74\153\x61\156\56\x2e\56{$p}"; fgets(STDIN); echo "{$u}" . str_repeat("\55", 80) . "{$p}\12"; } } echo "\xa{$h}\124\x6f\x74\x61\x6c\72\x20{$totalLines}\40\x62\x61\162\151\163{$p}\12"; echo "\xa{$h}\x54\x65\x6b\x61\156\x20\x45\156\164\x65\162\x20\x75\x6e\x74\165\x6b\x20\153\145\155\142\x61\x6c\151\40\x6b\x65\x20\x6d\145\x6e\165\x2e\56\56{$p}"; fgets(STDIN); break; case "\62": echo "\xa{$k}\x4d\141\x73\x75\153\x6b\x61\156\40\153\x61\164\x61\40\153\x75\x6e\x63\x69\x20\x79\141\x6e\147\40\144\151\x63\141\x72\151\72\x20{$p}"; $keyword = trim(fgets(STDIN)); if (empty($keyword)) { echo "{$m}\113\x61\164\x61\40\153\165\x6e\x63\x69\x20\164\x69\144\141\x6b\40\142\x6f\154\145\150\40\x6b\157\x73\x6f\x6e\147\x2e{$p}\12"; echo "\xa{$h}\x54\x65\153\x61\x6e\x20\x45\x6e\x74\x65\x72\40\x75\156\164\165\153\40\x6d\x65\x6c\141\x6e\x6a\x75\x74\153\x61\156\x2e\56\x2e{$p}"; fgets(STDIN); break; } $foundLines = array(); $keywordLower = strtolower($keyword); foreach ($lines as $lineNum => $line) { if (stripos($line, $keyword) !== false) { $foundLines[] = array("\154\151\156\x65\x5f\x6e\165\155" => $lineNum + 1, "\x63\157\156\164\145\156\164" => $line); } } echo "\12{$bta}\x48\x41\123\x49\x4c\x20\x50\x45\x4e\x43\101\122\x49\101\x4e\72\40\47{$keyword}\47{$p}\12"; echo "{$u}" . str_repeat("\55", 80) . "{$p}\xa"; if (empty($foundLines)) { echo "{$m}\124\151\144\141\x6b\x20\144\151\164\145\155\165\153\141\156\x20\x62\x61\162\x69\163\40\x64\x65\156\147\141\156\x20\x6b\x61\x74\x61\40\153\165\x6e\x63\x69\x20\47{$keyword}\47\x2e{$p}\12"; } else { echo "{$h}\x44\151\x74\145\x6d\165\153\x61\156\40" . count($foundLines) . "\40\142\141\162\x69\x73\x3a{$p}\12\xa"; foreach ($foundLines as $found) { $highlighted = str_ireplace($keyword, "{$h}{$keyword}{$p}", htmlspecialchars($found["\143\x6f\156\164\145\156\164"])); echo "{$k}\102\141\162\x69\163\x20{$found["\x6c\151\156\145\x5f\x6e\x75\x6d"]}\x3a\40{$p}{$highlighted}{$p}\12"; } } echo "\xa{$h}\x54\x65\153\141\156\x20\105\156\x74\x65\x72\40\x75\156\164\165\153\40\155\x65\x6c\x61\156\x6a\x75\164\x6b\x61\x6e\56\x2e\x2e{$p}"; fgets(STDIN); break; case "\63": echo "\12{$k}\115\141\163\165\x6b\x6b\x61\156\x20\156\x6f\155\157\x72\x20\142\x61\162\x69\x73\x20\x61\x77\141\x6c\40\50\61\x2d{$totalLines}\x29\x3a\40{$p}"; $startLine = (int) trim(fgets(STDIN)) - 1; $startLine = max(0, min($startLine, $totalLines - 1)); echo "{$k}\115\141\x73\165\x6b\x6b\141\x6e\40\152\165\x6d\x6c\x61\150\40\x62\141\x72\x69\x73\40\x79\x61\156\x67\x20\x61\x6b\x61\x6e\40\x64\x69\x74\x61\x6d\x70\151\x6c\153\141\x6e\40\50\61\x2d\61\60\60\x29\72\x20{$p}"; $numLines = (int) trim(fgets(STDIN)); $numLines = max(1, min($numLines, 100)); $endLine = min($startLine + $numLines, $totalLines); echo "\12{$bta}\x4d\105\116\101\x4d\120\111\114\x4b\x41\x4e\x20\102\101\122\111\123\40{$p}" . ($startLine + 1) . "{$bta}\40\x53\101\115\x50\101\111\40{$p}" . $endLine . "{$p}\12"; echo "{$u}" . str_repeat("\55", 80) . "{$p}\xa"; for ($i = $startLine; $i < $endLine; $i++) { $lineNum = $i + 1; $line = $lines[$i]; if (preg_match("\57\x5e\134\x64\53\134\56\57", $line)) { echo "{$h}{$lineNum}\72\x20{$p}{$line}{$p}\xa"; } elseif (preg_match("\x2f\x5e\133\75\52\x2d\135\x2b\44\57", $line)) { echo "{$ab}{$lineNum}\72\40{$line}{$p}\xa"; } else { echo "{$p}{$lineNum}\72\40{$line}{$p}\xa"; } } echo "\12{$h}\x54\x65\x6b\141\156\x20\x45\x6e\164\145\x72\40\x75\x6e\164\165\x6b\40\155\x65\154\141\156\152\x75\164\x6b\141\x6e\56\x2e\x2e{$p}"; fgets(STDIN); break; case "\64": echo "\xa{$k}\x4d\141\163\165\153\x6b\141\x6e\40\x6e\141\155\141\40\x66\x69\154\x65\x20\142\141\x72\165\x20\50\143\157\x6e\164\157\x68\x3a\x20\152\x61\167\141\x62\141\x6e\x5f\146\151\x6c\x74\145\162\x65\144\56\x74\170\164\x29\72\40{$p}"; $newFilename = trim(fgets(STDIN)); if (empty($newFilename)) { echo "{$m}\116\x61\x6d\x61\x20\146\x69\154\145\40\164\151\x64\141\153\x20\x62\x6f\154\x65\150\x20\x6b\157\x73\x6f\x6e\x67\x2e{$p}\12"; echo "\xa{$h}\124\145\x6b\x61\x6e\40\105\156\x74\x65\x72\x20\x75\156\x74\x75\153\x20\155\145\154\141\156\x6a\x75\164\x6b\141\156\x2e\56\x2e{$p}"; fgets(STDIN); break; } if (!preg_match("\x2f\134\56\x74\170\x74\44\57\151", $newFilename)) { $newFilename .= "\x2e\x74\x78\164"; } $newPath = dirname($filePath) . "\x2f" . $newFilename; if (file_exists($newPath)) { echo "{$k}\106\x69\154\145\x20\163\x75\144\x61\150\40\x61\144\x61\x2e\40\124\x69\x6d\x70\x61\x3f\40\50\x79\57\156\51\72\x20{$p}"; $overwrite = trim(fgets(STDIN)); if (strtolower($overwrite) !== "\171") { echo "{$m}\x44\151\142\141\x74\x61\x6c\x6b\x61\x6e\x2e{$p}\xa"; echo "\12{$h}\x54\145\153\141\156\40\105\x6e\164\145\162\40\165\x6e\x74\165\x6b\40\x6d\x65\x6c\x61\x6e\x6a\x75\x74\x6b\141\156\x2e\x2e\x2e{$p}"; fgets(STDIN); break; } } if (copy($filePath, $newPath)) { echo "{$h}\342\234\223\x20\106\151\x6c\x65\x20\x62\145\x72\150\141\163\x69\x6c\40\x64\151\x73\141\x6c\x69\x6e\x20\x6b\x65\72\40{$newPath}{$p}\12"; } else { echo "{$m}\xe2\234\x97\40\107\x61\147\x61\154\40\x6d\x65\x6e\x79\141\154\x69\156\x20\x66\x69\154\145\x2e{$p}\xa"; } echo "\12{$h}\x54\145\153\141\156\40\x45\x6e\x74\x65\x72\40\165\x6e\x74\165\153\x20\155\145\x6c\141\156\152\165\x74\x6b\141\156\x2e\x2e\x2e{$p}"; fgets(STDIN); break; case "\65": return; default: echo "{$m}\x50\151\154\151\150\141\x6e\40\164\151\x64\141\x6b\x20\166\x61\154\151\144\x2e{$p}\xa"; echo "\xa{$h}\124\x65\153\141\156\x20\x45\x6e\x74\x65\x72\x20\x75\156\164\x75\153\40\155\145\154\141\x6e\x6a\x75\x74\x6b\x61\x6e\x2e\x2e\x2e{$p}"; fgets(STDIN); break; } } } goto PVOok; OCzDb: function formatQuestionForText($question, $globalNumber, $showAnswers = true) { $output = ''; $output .= str_repeat("\342\225\x90", 60) . "\xa"; $output .= sprintf("\x50\x45\122\124\101\x4e\131\x41\101\x4e\40\43\x25\60\x33\144\x20\x28\x41\x73\154\151\x3a\40\x23\45\163\x29\xa", $globalNumber, $question["\156\x75\155\x62\x65\162"]); $choiceTypeLabel = ''; if ($question["\x74\171\x70\x65"] === "\x6d\x75\154\x74\151\143\x68\157\x69\143\x65") { $choiceTypeLabel = isset($question["\151\x73\137\155\x75\x6c\x74\151\160\x6c\x65\137\141\156\163\x77\145\x72"]) && $question["\x69\x73\137\155\165\154\164\151\x70\x6c\x65\137\x61\156\163\167\145\x72"] ? "\115\165\154\164\x69\160\154\145\40\103\150\x6f\x69\x63\x65" : "\x53\x69\156\147\x6c\145\x20\103\x68\157\x69\x63\x65"; } $output .= sprintf("\112\x65\156\x69\163\x3a\x20\45\x2d\x31\65\x73\40\x7c\40\x54\x69\x70\x65\x3a\40\45\55\x31\65\163\x20\174\40\123\164\141\164\165\x73\x3a\40\x25\x2d\x32\60\x73\x20\174\x20\116\x69\x6c\x61\151\x3a\x20\45\x73\12", $question["\x74\171\x70\145"], $choiceTypeLabel, $question["\x73\x74\141\164\x65"], $question["\x67\x72\141\x64\x65"]); $output .= str_repeat("\55", 80) . "\12\xa"; $cleanText = strip_tags($question["\x74\145\170\164"]); $cleanText = html_entity_decode($cleanText, ENT_QUOTES | ENT_HTML5, "\125\124\106\x2d\70"); $output .= "\124\x45\x4b\x53\40\x50\x45\x52\124\x41\x4e\x59\x41\x41\x4e\x3a\xa"; $output .= wordwrap($cleanText, 78, "\xa") . "\xa\xa"; if (!empty($question["\151\155\141\x67\145\x73"])) { $output .= "\107\x41\115\x42\x41\122\40\50" . count($question["\x69\155\x61\x67\145\163"]) . "\x29\72\xa"; foreach ($question["\151\155\141\147\145\x73"] as $idx => $image) { $imgNum = $idx + 1; $status = isset($image["\144\157\167\156\x6c\157\141\x64\145\x64"]) && $image["\x64\x6f\x77\x6e\154\x6f\x61\x64\x65\144"] ? "\xe2\x9c\223" : "\342\234\x97"; $output .= sprintf("\x20\40\x25\x64\56\x20\x5b\x25\x73\x5d\x20\x25\x73\xa", $imgNum, $status, $image["\141\x6c\164"]); $output .= sprintf("\40\40\40\40\x20\x20\106\151\x6c\x65\72\40\45\163\xa", $image["\x66\x69\x6c\x65\x6e\141\x6d\x65"]); if (isset($image["\144\x6f\167\156\154\x6f\x61\x64\145\x64"]) && $image["\x64\157\167\156\154\157\141\144\x65\144"]) { $output .= sprintf("\x20\x20\40\40\x20\x20\x4c\x6f\153\x61\154\72\40\x25\x73\12", basename($image["\x6c\157\x63\x61\154\x5f\x70\x61\x74\x68"])); } } $output .= "\12"; } if ($showAnswers && !empty($question["\141\156\x73\167\x65\x72\163"])) { switch ($question["\164\171\160\145"]) { case "\155\x61\x74\x63\150": case "\x64\162\x6f\x70\144\157\x77\x6e": $output .= formatMatchAnswersForText($question); break; case "\x6d\165\154\x74\151\143\x68\157\151\143\145": case "\x74\x72\165\x65\146\x61\x6c\x73\145": $output .= formatChoiceAnswersForText($question); break; case "\x65\x73\x73\141\x79": case "\x73\150\157\162\x74\141\156\163\167\x65\x72": $output .= formatTextAnswersForText($question); break; default: $output .= formatGenericAnswersForText($question); } } if ($question["\141\156\x73\x77\x65\162\137\x73\x61\x76\145\144"]) { $output .= "\xe2\x9c\223\40\x4a\141\x77\141\x62\141\x6e\x20\164\145\154\x61\150\40\x64\151\x73\x69\x6d\x70\x61\156\40\x64\x69\40\x73\151\x73\164\145\x6d\12\xa"; } $output .= "\xa" . str_repeat("\55", 80) . "\12"; return $output; } goto LGuyu; TrbLM: function extractUsernameFromDashboard($dashboardContent) { global $m, $h, $p, $k; if (empty($dashboardContent)) { return "\125\x6e\x6b\x6e\x6f\x77\x6e\x20\125\163\x65\162"; } libxml_use_internal_errors(true); $dom = new DOMDocument(); @$dom->loadHTML(mb_convert_encoding($dashboardContent, "\x48\x54\x4d\114\x2d\105\x4e\x54\111\x54\x49\x45\123", "\x55\124\x46\x2d\x38")); $xpath = new DOMXPath($dom); $username = ''; $userElements = $xpath->query("\57\x2f\x73\x70\141\156\x5b\x63\157\156\x74\x61\151\156\x73\50\x40\143\154\141\x73\x73\54\40\47\x75\x73\x65\162\x69\156\151\164\151\141\154\x73\x27\51\135"); if ($userElements->length > 0) { foreach ($userElements as $element) { $title = $element->getAttribute("\164\151\x74\x6c\145"); if (!empty($title)) { $username = trim($title); break; } $ariaLabel = $element->getAttribute("\x61\x72\x69\x61\55\154\x61\x62\145\x6c"); if (!empty($ariaLabel)) { $username = trim($ariaLabel); break; } $text = trim($element->nodeValue); if (!empty($text) && strlen($text) <= 5) { $parent = $element->parentNode; if ($parent) { $parentTitle = $parent->getAttribute("\164\x69\x74\x6c\145"); if (!empty($parentTitle)) { $username = trim($parentTitle); break; } } } } } if (empty($username)) { $dropdownElements = $xpath->query("\57\x2f\x61\133\x40\151\144\x3d\x27\x75\163\145\x72\x2d\x6d\x65\x6e\165\55\x74\x6f\x67\x67\154\145\47\135"); if ($dropdownElements->length > 0) { $dropdown = $dropdownElements->item(0); $spans = $xpath->query("\56\57\x2f\163\160\x61\x6e", $dropdown); foreach ($spans as $span) { $title = $span->getAttribute("\164\x69\x74\154\145"); if (!empty($title) && strlen($title) > 10) { $username = trim($title); break; } $ariaLabel = $span->getAttribute("\141\x72\151\x61\x2d\154\x61\142\x65\x6c"); if (!empty($ariaLabel) && strlen($ariaLabel) > 10) { $username = trim($ariaLabel); break; } } } } if (empty($username)) { $userButtons = $xpath->query("\x2f\x2f\x73\160\141\x6e\133\143\157\156\164\x61\151\156\x73\50\x40\x63\154\x61\x73\x73\54\40\47\x75\x73\145\162\142\165\164\164\157\156\x27\x29\135"); foreach ($userButtons as $button) { $title = $button->getAttribute("\164\x69\x74\154\145"); $ariaLabel = $button->getAttribute("\141\162\151\x61\x2d\x6c\x61\x62\x65\154"); if (!empty($title) && strlen($title) > 10) { $username = trim($title); break; } if (!empty($ariaLabel) && strlen($ariaLabel) > 10) { $username = trim($ariaLabel); break; } $childSpans = $xpath->query("\56\57\x2f\x73\x70\141\x6e", $button); foreach ($childSpan as $child) { $childTitle = $child->getAttribute("\164\x69\164\154\145"); if (!empty($childTitle) && strlen($childTitle) > 10) { $username = trim($childTitle); break 2; } } } } if (empty($username)) { $fullHtml = $dom->saveHTML(); if (preg_match("\57\x5b\101\x2d\x5a\135\x5b\x41\x2d\132\134\x73\135\53\x5b\x41\x2d\132\135\53\134\x64\53\137\134\144\x2b\57", $fullHtml, $matches)) { $username = trim($matches[0]); } elseif (preg_match("\x2f\x5b\x41\x2d\x5a\135\x5b\141\55\x7a\135\53\x20\133\101\55\x5a\135\x5b\141\x2d\x7a\135\53\x20\x5b\x41\x2d\x5a\x5d\x5b\141\x2d\x7a\x5d\53\57", $fullHtml, $matches)) { $username = trim($matches[0]); } elseif (preg_match("\57\164\151\x74\x6c\x65\x3d\x22\x28\133\136\x22\x5d\x7b\61\x35\x2c\x7d\51\42\57", $fullHtml, $matches)) { $username = trim($matches[1]); } elseif (preg_match("\57\141\162\151\141\55\x6c\x61\142\145\154\x3d\x22\50\x5b\x5e\x22\x5d\x7b\x31\65\x2c\x7d\51\x22\57", $fullHtml, $matches)) { $username = trim($matches[1]); } } if (!empty($username)) { $username = html_entity_decode($username, ENT_QUOTES | ENT_HTML5, "\125\x54\106\55\x38"); $username = preg_replace("\57\x5c\x73\53\57", "\40", $username); $username = preg_replace("\x2f\x5c\x73\52\163\151\x7a\x65\x2d\x5c\144\53\57\x69", '', $username); $username = preg_replace("\x2f\136\134\x73\x2a\x5b\101\55\132\135\x7b\61\x2c\x35\x7d\x5c\163\x2a\x24\57\x69", '', $username); if (strlen($username) < 5) { $username = ''; } } if (empty($username)) { $username = "\x55\156\x6b\156\x6f\x77\x6e\40\x55\x73\145\162"; } return $username; } goto SEhKU; T0igM: function formatChoiceAnswersForText($question) { $output = "\120\x49\x4c\111\x48\x41\x4e\x20\112\x41\x57\x41\x42\x41\116\72\xa"; $output .= str_repeat("\x2d", 40) . "\xa"; if ($question["\164\171\160\x65"] === "\155\165\154\x74\151\x63\150\x6f\151\143\145") { $typeLabel = isset($question["\x69\163\x5f\155\165\154\164\x69\x70\x6c\145\137\x61\156\x73\x77\x65\x72"]) && $question["\151\x73\137\x6d\x75\x6c\164\x69\160\154\x65\x5f\x61\156\x73\167\x65\162"] ? "\x4d\x55\114\124\x49\x50\x4c\105\40\x43\x48\117\111\x43\x45\x20\x28\142\x69\x73\141\40\154\145\x62\x69\x68\40\x64\x61\162\x69\40\x73\x61\x74\x75\x29" : "\123\x49\x4e\107\x4c\105\x20\103\x48\x4f\111\x43\x45\x20\50\x68\x61\156\171\141\40\163\141\164\x75\40\x6a\x61\167\x61\142\141\x6e\51"; $output .= "\x54\x69\160\x65\72\x20{$typeLabel}\12"; $output .= str_repeat("\55", 20) . "\12"; } foreach ($question["\141\x6e\x73\x77\145\x72\163"] as $answer) { $symbol = ''; if ($question["\x74\171\160\x65"] === "\155\165\154\x74\x69\x63\x68\x6f\151\x63\x65") { if (isset($answer["\151\163\137\143\157\162\x72\145\x63\164"]) && $answer["\x69\x73\137\x63\x6f\x72\162\x65\x63\164"]) { if (isset($question["\x69\x73\137\x6d\x75\154\x74\x69\160\x6c\x65\137\x61\x6e\x73\x77\x65\x72"]) && $question["\x69\163\137\155\165\154\164\x69\160\154\x65\137\141\156\x73\x77\x65\x72"]) { $symbol = "\x5b\xe2\x9c\223\x5d"; } else { $symbol = "\133\342\x98\205\135"; } } else { if (isset($answer["\x63\150\x6f\151\143\x65\137\x74\171\x70\x65"]) && $answer["\143\x68\157\151\143\x65\137\164\171\x70\x65"] === "\143\150\x65\143\153\x62\157\170") { $symbol = "\x5b\x20\x5d"; } else { $symbol = "\133\xe2\227\x8b\x5d"; } } } else { $symbol = $answer["\151\x73\x5f\143\157\162\x72\x65\143\164"] ? "\133\342\x9c\x93\x5d" : "\133\40\x5d"; } $answerText = strip_tags($answer["\164\x65\170\164"]); $answerText = html_entity_decode($answerText, ENT_QUOTES | ENT_HTML5, "\125\x54\106\55\70"); $output .= sprintf("\x25\x73\40\x25\x73\x2e\x20\45\x73\xa", $symbol, $answer["\154\x65\164\164\145\x72"], $answerText); if (isset($answer["\151\156\160\x75\x74\137\x6e\x61\x6d\145"])) { $output .= sprintf("\40\x20\40\40\133\156\x61\155\x65\x3a\40\45\x73\x2c\x20\166\141\154\165\145\72\x20\45\163\x2c\40\164\x79\x70\145\72\40\45\x73\x5d\xa", $answer["\x69\156\160\x75\164\x5f\156\141\x6d\x65"], $answer["\x76\x61\x6c\x75\x65"], $answer["\x74\x79\x70\x65"] ?? "\x75\156\x6b\156\157\x77\x6e"); } } if ($question["\x63\x6f\162\x72\145\143\x74\x5f\x61\156\x73\x77\x65\x72"]) { $output .= "\xa\x4a\101\127\101\x42\x41\x4e\x20\102\x45\x4e\x41\x52\72\x20"; if (is_array($question["\x63\x6f\162\162\x65\143\x74\137\x61\x6e\x73\x77\145\x72"])) { if (isset($question["\x63\x6f\162\x72\145\x63\164\137\x61\156\x73\167\145\x72"][0]["\161\x75\x65\163\164\x69\x6f\x6e"])) { foreach ($question["\x63\157\162\x72\x65\143\x74\x5f\x61\156\163\x77\145\162"] as $correct) { $output .= sprintf("\x25\163\40\342\x86\222\40\x25\x73\x2c\x20", $correct["\161\x75\x65\x73\x74\x69\157\x6e"], $correct["\141\x6e\163\167\145\162"]); } } else { $output .= implode("\54\x20", $question["\143\157\x72\162\145\x63\x74\x5f\x61\x6e\163\x77\x65\162"]); if ($question["\164\171\160\145"] === "\155\165\x6c\x74\x69\x63\x68\x6f\x69\143\145" && isset($question["\x69\163\137\155\x75\154\x74\151\x70\x6c\x65\x5f\141\x6e\x73\167\x65\x72"]) && $question["\151\163\137\155\165\154\164\151\x70\154\x65\137\141\x6e\163\x77\x65\x72"]) { $output .= "\40\50\155\x75\154\164\x69\x70\x6c\x65\40\143\x68\x6f\151\x63\145\x29"; } } } else { $output .= $question["\x63\157\162\x72\145\x63\x74\x5f\x61\x6e\x73\167\145\x72"]; if ($question["\164\171\160\x65"] === "\x6d\165\154\164\151\143\x68\157\151\x63\x65") { $output .= "\40\x28\163\x69\x6e\147\x6c\145\x20\143\150\157\151\x63\x65\x29"; } } $output .= "\xa"; } $output .= "\12"; return $output; } goto SWAVg; GI_AX: function showGeminiMenuStaged($downloadDir, $allQuestions, $apiKey) { global $m, $h, $p, $k; system("\143\x6c\145\141\x72"); echo "\12{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; echo "{$h}\115\x45\116\125\x20\107\x45\x4d\111\x4e\x49\40\101\x50\x49\40\55\40\x50\105\x4e\x47\111\122\x49\115\101\x4e\40\102\105\122\124\101\110\x41\x50{$p}\12"; echo "{$bta}" . str_repeat("\xe2\x95\x90", 60) . "{$p}\12"; $totalQuestions = 0; foreach ($allQuestions as $questions) { $totalQuestions += count($questions); } echo "{$h}\x54\157\164\x61\x6c\40\x70\x65\162\164\141\x6e\x79\141\141\x6e\40\x64\x69\x74\x65\155\165\x6b\x61\156\72\40{$totalQuestions}{$p}\xa"; $imagesDir = $downloadDir . "\x2f\141\x6c\154\137\151\155\141\x67\145\x73"; if (!is_dir($imagesDir)) { $imagesDir = $downloadDir . "\x2f\x69\x6d\141\147\145\163"; } $imageCount = 0; if (is_dir($imagesDir)) { $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($imagesDir)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower(pathinfo($file->getFilename(), PATHINFO_EXTENSION)); if (in_array($ext, array("\152\160\147", "\x6a\x70\x65\x67", "\160\x6e\147", "\x67\151\x66", "\x62\x6d\160", "\167\145\x62\x70"))) { $imageCount++; } } } } echo "{$h}\x54\x6f\164\x61\x6c\40\x67\141\155\x62\x61\x72\40\x64\151\164\145\x6d\x75\153\x61\156\x3a\x20{$imageCount}{$p}\xa\12"; echo "{$k}\x4d\x65\156\x67\x67\x75\156\141\153\141\156\x20\x41\120\x49\x20\113\145\171\x20\x47\x45\x4d\111\x4e\x49\40\171\141\156\x67\40\164\145\x72\163\x69\155\x70\x61\x6e\x3a\x20{$p}" . substr($apiKey, 0, 8) . "\56\56\56" . substr($apiKey, -8) . "{$p}\12"; echo "\12{$k}\x50\151\154\x69\x68\40\152\x75\x6d\x6c\x61\x68\40\x62\141\x67\151\x61\156\40\x70\145\x6e\147\151\162\x69\x6d\x61\156\x3a{$p}\xa"; echo "{$h}\x20\x20\x31\x2e\x20\x32\x20\142\x61\147\151\141\156\x20\x28\x73\x65\x74\145\x6e\147\141\150\x2d\163\x65\164\145\156\x67\x61\150\x29{$p}\xa"; echo "{$h}\x20\x20\62\56\x20\63\40\x62\141\x67\151\x61\156{$p}\xa"; echo "{$h}\40\40\x33\x2e\40\64\x20\x62\141\147\x69\x61\156{$p}\12"; echo "{$h}\x20\40\x34\x2e\40\65\x20\x62\141\147\x69\141\x6e{$p}\12"; echo "{$h}\40\40\x35\x2e\40\x53\145\x73\165\141\x69\x6b\141\156\x20\152\165\155\154\x61\x68\40\142\x61\x67\x69\141\x6e{$p}\12"; echo "{$k}\x50\151\154\151\150\141\156\40\x28\61\55\x35\54\x20\x64\145\x66\141\x75\x6c\164\x3a\40\x33\x20\142\141\147\x69\141\x6e\51\x3a\40{$p}"; $choice = trim(fgets(STDIN)); $parts = 3; switch ($choice) { case "\61": $parts = 2; break; case "\62": $parts = 3; break; case "\63": $parts = 4; break; case "\x34": $parts = 5; break; case "\65": echo "{$k}\x4d\x61\163\x75\153\153\x61\156\40\x6a\x75\155\154\141\150\x20\x62\x61\147\151\141\156\40\x79\141\x6e\147\x20\x64\x69\x69\156\147\151\x6e\x6b\x61\x6e\x20\x28\x32\55\x31\60\x29\72\40{$p}"; $customParts = (int) trim(fgets(STDIN)); $parts = max(2, min(10, $customParts)); break; default: $parts = 3; break; } $questionsPerPart = ceil($totalQuestions / $parts); system("\143\x6c\x65\141\x72"); echo "\12{$bta}" . str_repeat("\342\x95\220", 60) . "{$p}\12"; echo "{$h}\x52\x49\116\x43\x49\101\x4e\40\x50\x45\116\107\x49\122\x49\x4d\101\116\40\102\105\x52\x54\101\110\101\120{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; echo "{$h}\124\157\x74\141\x6c\x20\x50\145\x72\164\x61\x6e\171\141\x61\x6e\x3a\x20{$totalQuestions}{$p}\xa"; echo "{$h}\x4a\165\x6d\x6c\141\x68\40\x42\141\x67\x69\141\x6e\x20\x20\72\x20{$parts}{$p}\xa"; echo "{$h}\x50\145\162\40\x42\141\147\151\x61\x6e\40\x20\x20\x20\40\x3a\40\176{$questionsPerPart}\x20\160\x65\162\164\x61\x6e\x79\141\x61\156{$p}\12"; echo "{$h}\124\157\x74\141\x6c\x20\x47\141\x6d\x62\141\162\40\40\40\72\40{$imageCount}{$p}\xa"; echo "{$h}\120\x65\162\x6b\151\x72\x61\141\x6e\40\107\141\x6d\142\x61\162\x20\x70\145\x72\40\x42\141\147\151\141\x6e\x3a\x20\176" . ceil($imageCount / $parts) . "\x20\x67\141\x6d\x62\141\x72{$p}\xa"; echo "\12{$k}\x4b\157\156\146\x69\x72\x6d\x61\x73\151\40\160\x65\156\147\x69\x72\151\155\141\156\x3f\40\50\131\57\x6e\51\x3a\x20{$p}"; $confirm = trim(fgets(STDIN)); if (strtolower($confirm ?: "\171") !== "\x79") { echo "{$m}\342\x9c\227\x20\104\x69\x62\x61\x74\x61\x6c\153\141\x6e\x20\157\154\x65\x68\x20\x70\145\156\147\x67\x75\156\x61\x2e{$p}\xa"; return false; } return array("\x61\x70\151\x5f\x6b\x65\x79" => $apiKey, "\x70\x61\x72\164\x73" => $parts, "\x69\155\x61\x67\x65\x73\137\x64\x69\162" => $imagesDir, "\x74\157\x74\141\x6c\137\161\165\x65\163\164\151\157\156\163" => $totalQuestions, "\x74\157\164\x61\154\x5f\x69\x6d\141\147\145\x73" => $imageCount); } goto XE8XN; LOY3B: if (!empty($collectedImages)) { $indexContent = "\x3c\41\104\x4f\x43\x54\131\120\x45\40\x68\164\x6d\x6c\x3e\12"; $indexContent .= "\74\150\x74\x6d\x6c\40\x6c\141\156\x67\75\47\151\144\47\x3e\xa"; $indexContent .= "\74\150\145\141\144\x3e\xa"; $indexContent .= "\40\x20\x20\40\74\155\145\x74\x61\40\143\x68\x61\x72\x73\145\x74\75\47\125\x54\x46\x2d\x38\x27\76\12"; $indexContent .= "\40\40\x20\x20\74\155\x65\164\x61\40\x6e\141\x6d\x65\x3d\x27\x76\151\x65\167\x70\x6f\x72\x74\x27\40\143\x6f\156\164\145\156\164\x3d\x27\167\x69\144\x74\x68\75\x64\x65\x76\x69\x63\145\55\x77\x69\144\x74\x68\54\x20\x69\156\151\x74\151\x61\x6c\55\x73\143\141\154\145\75\61\x2e\60\x27\76\xa"; $indexContent .= "\x20\40\40\x20\x3c\164\x69\x74\154\x65\76\107\x61\154\154\x65\162\x79\x20\123\145\x6d\165\141\x20\107\x61\x6d\142\141\x72\74\57\164\151\164\x6c\x65\76\12"; $indexContent .= "\x20\x20\x20\x20\74\x73\164\171\x6c\x65\76\xa"; $indexContent .= "\x20\x20\40\x20\40\x20\x20\40\142\x6f\x64\171\40\x7b\x20\x66\x6f\156\164\x2d\146\x61\155\x69\154\171\72\40\101\x72\x69\x61\x6c\x2c\40\163\141\x6e\x73\x2d\163\x65\162\x69\146\73\x20\x6d\x61\x72\x67\x69\x6e\72\40\x32\x30\160\x78\73\40\142\141\143\x6b\x67\x72\157\x75\156\144\x3a\40\x23\146\x35\146\65\146\65\x3b\x20\x7d\xa"; $indexContent .= "\40\x20\40\x20\x20\40\40\40\x2e\150\145\141\144\x65\162\x20\x7b\x20\142\x61\x63\153\147\162\157\x75\x6e\144\x3a\x20\43\64\103\101\106\x35\60\x3b\40\x63\x6f\154\x6f\162\x3a\40\x77\150\151\x74\145\x3b\40\x70\x61\144\x64\x69\156\x67\72\x20\62\x30\x70\170\x3b\x20\x62\x6f\x72\144\x65\x72\55\162\141\x64\x69\165\x73\x3a\40\65\x70\170\73\40\x6d\141\x72\147\151\156\x2d\142\x6f\164\x74\x6f\155\72\x20\x32\x30\x70\x78\73\x20\x7d\12"; $indexContent .= "\40\x20\40\40\40\x20\40\x20\x2e\147\x61\154\154\145\162\171\x20\173\x20\144\x69\x73\160\154\x61\x79\72\40\147\x72\151\x64\x3b\x20\147\162\x69\x64\x2d\x74\x65\x6d\160\154\141\x74\145\55\x63\157\x6c\165\155\x6e\x73\72\x20\x72\x65\x70\x65\141\164\50\141\x75\x74\x6f\x2d\x66\x69\154\x6c\x2c\40\155\x69\x6e\x6d\x61\x78\50\x32\65\60\160\x78\54\40\61\146\x72\51\x29\x3b\x20\147\x61\x70\72\40\x32\x30\x70\170\73\40\175\12"; $indexContent .= "\40\x20\x20\40\40\x20\40\40\56\151\155\141\x67\x65\x2d\x63\141\162\144\40\173\x20\x62\141\143\153\x67\x72\x6f\165\156\144\72\x20\x77\x68\x69\164\x65\x3b\40\142\157\x72\144\x65\x72\55\x72\141\x64\151\x75\163\x3a\x20\x38\160\x78\73\40\160\x61\x64\x64\151\156\147\x3a\x20\x31\x35\160\x78\73\x20\x62\157\x78\x2d\163\x68\x61\144\x6f\167\x3a\40\60\40\x32\160\170\40\x35\160\170\40\162\x67\x62\141\50\x30\x2c\x30\x2c\x30\x2c\60\x2e\x31\x29\x3b\x20\175\xa"; $indexContent .= "\x20\40\x20\40\40\40\40\40\56\151\x6d\141\147\145\55\143\141\x72\x64\x20\x69\x6d\147\40\173\40\x77\x69\144\164\x68\72\x20\61\x30\60\x25\73\40\150\x65\151\147\x68\x74\x3a\x20\x32\x30\60\x70\170\x3b\x20\157\142\152\x65\x63\164\x2d\x66\x69\x74\x3a\40\x63\x6f\166\145\x72\73\40\x62\157\162\144\x65\x72\x2d\162\x61\x64\151\x75\x73\x3a\40\65\160\x78\73\x20\175\12"; $indexContent .= "\x20\x20\x20\40\x20\40\x20\x20\56\151\155\x61\x67\x65\55\x69\x6e\x66\x6f\40\173\40\x6d\141\162\x67\151\x6e\55\x74\x6f\160\72\40\61\x30\160\170\73\x20\x66\x6f\156\x74\x2d\163\x69\172\145\72\40\61\x34\x70\170\73\40\175\12"; $indexContent .= "\x20\x20\40\x20\x20\x20\x20\x20\56\x69\x6d\x61\x67\x65\x2d\x69\x6e\x66\x6f\40\x73\164\162\157\x6e\147\40\x7b\40\143\x6f\154\x6f\162\72\40\43\63\63\63\73\40\x7d\12"; $indexContent .= "\x20\x20\40\x20\40\x20\40\x20\x2e\163\164\x61\x74\x73\x20\x7b\40\142\x61\143\153\147\x72\x6f\x75\x6e\144\72\40\x77\x68\151\164\145\73\x20\x70\141\144\144\x69\156\147\x3a\x20\61\65\160\x78\x3b\x20\x62\157\162\x64\x65\162\x2d\162\x61\144\151\165\x73\72\x20\x35\160\170\73\x20\x6d\141\x72\x67\x69\156\55\142\x6f\x74\x74\x6f\155\72\40\x32\x30\160\170\73\x20\142\x6f\x78\x2d\163\150\x61\144\x6f\x77\x3a\x20\60\x20\x32\x70\170\x20\65\160\x78\x20\x72\147\x62\x61\x28\x30\x2c\60\x2c\60\x2c\x30\x2e\x31\x29\x3b\x20\175\xa"; $indexContent .= "\x20\x20\x20\x20\74\x2f\163\x74\x79\154\145\x3e\12"; $indexContent .= "\x3c\57\150\145\141\144\x3e\12"; $indexContent .= "\x3c\142\x6f\x64\171\76\12"; $indexContent .= "\40\x20\40\x20\x3c\x64\x69\x76\x20\143\x6c\x61\163\163\75\x27\x68\x65\x61\x64\145\x72\x27\76\12"; $indexContent .= "\x20\x20\x20\40\40\x20\40\40\74\x68\x31\76\xf0\x9f\x93\270\40\107\x61\154\154\x65\x72\171\40\x53\x65\155\165\141\x20\x47\x61\x6d\x62\141\x72\x20\x64\141\162\151\x20\x51\165\151\x7a\x3c\x2f\x68\61\x3e\12"; $indexContent .= "\x20\x20\x20\x20\40\40\40\x20\74\x70\x3e\x54\157\164\141\x6c\40" . count($collectedImages) . "\x20\147\x61\x6d\x62\x61\x72\74\57\160\76\12"; $indexContent .= "\x20\x20\40\x20\x3c\x2f\x64\x69\166\x3e\12"; $indexContent .= "\40\x20\x20\40\12"; $indexContent .= "\x20\x20\40\x20\x3c\x64\151\x76\40\143\x6c\141\163\x73\75\47\163\164\141\x74\163\x27\76\xa"; $indexContent .= "\x20\x20\x20\40\x20\40\40\x20\x3c\160\76\74\163\x74\162\157\156\x67\76\123\164\141\164\165\163\72\74\x2f\x73\164\162\157\156\x67\76\x20{$successCount}\x20\x67\141\155\x62\141\162\40\142\145\x72\x68\141\163\151\154\x20\144\151\x6b\x75\155\160\x75\x6c\153\x61\x6e\x2c\40{$failCount}\x20\x67\x61\x67\141\x6c\74\x2f\160\76\12"; $indexContent .= "\x20\x20\40\40\x20\40\x20\40\x3c\x70\x3e\74\163\164\162\157\x6e\147\76\114\x6f\153\x61\163\151\72\x3c\57\x73\164\162\x6f\x6e\x67\76\40" . realpath($allImagesDir) . "\x3c\57\160\x3e\12"; $indexContent .= "\x20\40\x20\x20\74\x2f\x64\151\x76\x3e\12"; $indexContent .= "\x20\x20\40\40\12"; $indexContent .= "\x20\x20\40\x20\x3c\144\x69\166\40\x63\154\141\x73\x73\75\x27\x67\x61\x6c\x6c\x65\162\171\47\76\12"; foreach ($collectedImages as $image) { $imagePath = basename($image["\x63\157\x6c\154\145\x63\x74\145\144\x5f\x66\x69\154\x65\x6e\x61\x6d\x65"]); $questionInfo = "\120\x65\162\164\141\156\171\141\x61\x6e\40\x23" . ($image["\161\x75\145\163\x74\x69\x6f\156\x5f\156\165\x6d\142\145\x72"] ?? "\77"); $indexContent .= "\40\x20\40\40\x20\40\40\40\x3c\144\x69\166\x20\143\154\141\163\163\75\47\151\155\x61\x67\145\55\x63\141\x72\144\x27\x3e\12"; $indexContent .= "\x20\40\x20\x20\40\x20\x20\40\40\x20\40\40\x3c\x69\x6d\x67\40\x73\x72\x63\x3d\x27" . htmlspecialchars($imagePath) . "\47\x20\141\x6c\164\75\x27" . htmlspecialchars($image["\x61\x6c\x74"] ?? '') . "\47\76\12"; $indexContent .= "\x20\40\x20\x20\40\x20\x20\x20\x20\40\x20\40\74\144\x69\x76\x20\x63\x6c\x61\x73\163\x3d\x27\151\155\x61\x67\x65\55\151\x6e\146\157\x27\76\xa"; $indexContent .= "\40\x20\x20\x20\x20\40\40\40\x20\40\x20\x20\x20\40\x20\40\74\160\x3e\74\x73\164\162\x6f\156\147\76" . htmlspecialchars($questionInfo) . "\74\57\x73\x74\162\x6f\156\147\x3e\74\x2f\x70\76\12"; $indexContent .= "\x20\40\x20\x20\x20\x20\40\40\x20\40\x20\40\40\x20\x20\40\x3c\x70\76\74\x73\x74\162\x6f\156\x67\x3e\106\151\x6c\145\72\x3c\x2f\x73\x74\162\x6f\x6e\147\x3e\40" . htmlspecialchars($image["\x63\157\x6c\154\x65\x63\x74\x65\x64\x5f\x66\151\154\145\156\x61\155\145"]) . "\74\57\x70\76\xa"; $indexContent .= "\x20\40\x20\x20\x20\40\40\x20\x20\x20\40\40\x20\40\40\40\74\160\x3e\x3c\163\x74\x72\157\156\147\x3e\x55\153\x75\x72\x61\156\x3a\74\57\163\164\x72\157\x6e\147\x3e\40" . round(($image["\x73\x69\x7a\145"] ?? 0) / 1024, 2) . "\40\113\x42\74\x2f\160\x3e\xa"; $indexContent .= "\40\x20\40\x20\x20\40\x20\x20\40\x20\40\40\x20\x20\x20\x20\74\160\76\x3c\163\x74\x72\157\x6e\147\76\x44\x65\x73\x6b\x72\x69\x70\x73\x69\x3a\x3c\x2f\x73\x74\x72\157\x6e\147\76\40" . htmlspecialchars($image["\141\x6c\164"] ?? "\124\151\x64\x61\153\40\x61\x64\x61\x20\x64\x65\163\153\x72\151\x70\163\151") . "\74\57\160\76\xa"; $indexContent .= "\40\40\x20\40\40\x20\40\40\40\40\40\x20\x3c\57\144\151\x76\76\xa"; $indexContent .= "\40\x20\40\40\x20\x20\x20\x20\74\x2f\144\x69\166\x3e\12"; } $indexContent .= "\40\x20\x20\x20\74\57\144\151\x76\76\12"; $indexContent .= "\40\40\40\x20\12"; $indexContent .= "\40\40\x20\40\74\144\151\166\40\163\x74\x79\154\145\x3d\x27\x6d\x61\x72\x67\x69\156\55\164\157\160\72\x20\x33\60\x70\170\x3b\x20\x70\141\x64\x64\151\156\147\72\x20\x32\x30\x70\x78\73\40\x62\x61\143\x6b\147\162\157\x75\x6e\x64\x3a\x20\167\x68\x69\x74\145\73\x20\x62\157\162\x64\x65\162\x2d\162\x61\144\x69\165\163\x3a\x20\65\160\170\x3b\47\76\xa"; $indexContent .= "\x20\x20\x20\40\x20\40\x20\x20\74\150\x33\76\xf0\x9f\x93\x8b\40\x44\x61\x66\164\141\162\40\x46\x69\x6c\145\40\107\x61\x6d\x62\141\x72\x3c\x2f\x68\63\x3e\12"; $indexContent .= "\40\40\x20\40\40\40\40\40\x3c\x75\154\76\xa"; foreach ($collectedImages as $image) { $indexContent .= "\x20\40\40\x20\x20\40\40\40\40\40\x20\40\74\x6c\151\76" . htmlspecialchars($image["\x63\x6f\x6c\x6c\145\x63\164\x65\144\x5f\146\x69\x6c\x65\156\141\x6d\x65"]) . "\40\x28" . round(($image["\x73\151\172\145"] ?? 0) / 1024, 2) . "\40\113\x42\51" . "\x20\x2d\40\x50\145\162\164\141\x6e\171\x61\x61\156\x20\43" . ($image["\x71\165\145\x73\x74\151\157\156\x5f\x6e\x75\x6d\x62\145\x72"] ?? "\77") . "\x3c\x2f\154\x69\76\12"; } $indexContent .= "\40\x20\40\40\x20\x20\40\40\x3c\57\x75\x6c\x3e\12"; $indexContent .= "\x20\x20\40\40\74\57\144\x69\x76\76\xa"; $indexContent .= "\74\57\142\x6f\144\171\76\12"; $indexContent .= "\74\x2f\x68\164\x6d\154\76"; $indexPath = $allImagesDir . "\x2f\151\x6e\144\x65\170\x2e\x68\164\x6d\154"; file_put_contents($indexPath, $indexContent); $jsonPath = $allImagesDir . "\57\151\155\141\x67\145\x73\x5f\x64\141\x74\x61\x2e\x6a\x73\157\x6e"; file_put_contents($jsonPath, json_encode($collectedImages, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE)); echo "{$h}\12\xe2\234\x93\x20\x47\141\x6c\x6c\145\x72\x79\40\x48\x54\115\x4c\40\x64\x69\142\x75\141\164\72\40{$indexPath}{$p}\12"; echo "{$h}\xe2\x9c\x93\40\x44\141\164\x61\40\x4a\123\x4f\116\x20\x64\151\163\151\155\160\141\x6e\x3a\40{$jsonPath}{$p}\xa"; return array("\143\157\154\154\145\143\x74\145\144\x5f\x69\x6d\141\x67\145\163" => $collectedImages, "\x61\x6c\x6c\137\x69\155\141\x67\145\x73\x5f\144\x69\162" => $allImagesDir, "\163\x75\x63\x63\145\163\x73\137\x63\157\165\x6e\x74" => $successCount, "\x66\141\x69\x6c\x5f\143\x6f\x75\x6e\x74" => $failCount); } goto POssC; KS4Ar: function buildQuestionImageMapping($downloadDir) { $mapping = array(); echo "{$k}\115\x65\x6d\142\141\x6e\x67\165\156\40\x6d\x61\x70\160\151\x6e\147\40\147\x61\x6d\142\141\162\x2e\x2e\x2e{$p}\xa"; $imageFolders = array($downloadDir . "\x2f\151\x6d\x61\147\145\163", $downloadDir . "\57\141\x6c\x6c\x5f\151\x6d\141\147\x65\163"); $totalImagesFound = 0; foreach ($imageFolders as $folder) { if (!is_dir($folder)) { continue; } $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($folder, RecursiveDirectoryIterator::SKIP_DOTS)); foreach ($iterator as $file) { if ($file->isFile()) { $ext = strtolower($file->getExtension()); if (in_array($ext, array("\x6a\160\x67", "\x6a\x70\145\x67", "\x70\156\x67", "\147\151\x66", "\x62\155\160", "\167\145\142\160"))) { $filename = $file->getFilename(); $path = $file->getPathname(); $totalImagesFound++; $questionId = null; $questionNumber = null; if (preg_match("\57\161\50\x5c\144\x2b\x29\137\x69\155\147\134\144\x2b\x5f\x2f", $filename, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\57\x71\50\x5c\x64\53\51\137\133\141\x2d\146\60\x2d\x39\135\53\134\x2e\x2f", $filename, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\x2f\x71\50\134\x64\x2b\x29\137\x69\155\x67\x5c\x64\x2b\x5c\x2e\x2f", $filename, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\x2f\x71\x28\134\144\53\51\x5c\57\x2f", $path, $matches)) { $questionId = $matches[1]; } elseif (preg_match("\x2f\160\145\162\x74\141\156\x79\141\x61\x6e\x5f\50\134\x64\53\x29\137\x2f", $filename, $matches)) { $questionNumber = $matches[1]; } elseif (preg_match("\57\163\157\141\x6c\x5f\50\x5c\144\53\x29\137\x2f", $filename, $matches)) { $questionNumber = $matches[1]; } elseif (preg_match("\57\x71\165\145\163\164\x69\x6f\156\133\137\55\135\50\x5c\x64\53\51\57\x69", $path, $matches)) { $questionNumber = $matches[1]; } if ($questionId) { $key = "\151\x64\x5f{$questionId}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\x70\141\164\150" => $path, "\x66\x69\x6c\145\x6e\x61\x6d\145" => $filename, "\161\165\145\163\x74\x69\157\x6e\x5f\151\x64" => $questionId, "\161\x75\145\x73\164\151\x6f\x6e\137\156\165\155\142\x65\x72" => $questionNumber, "\x66\157\x6c\144\x65\x72" => basename(dirname($path)), "\x66\x75\154\x6c\x5f\160\x61\164\150" => $path); } if ($questionNumber && !$questionId) { $key = "\156\165\x6d\137{$questionNumber}"; if (!isset($mapping[$key])) { $mapping[$key] = array(); } $mapping[$key][] = array("\x70\x61\164\x68" => $path, "\146\x69\x6c\x65\156\141\x6d\x65" => $filename, "\x71\x75\145\163\164\151\157\x6e\137\156\x75\155\142\x65\x72" => $questionNumber, "\x66\x6f\154\x64\x65\x72" => basename(dirname($path)), "\146\x75\154\x6c\x5f\160\x61\x74\150" => $path); } } } } } echo "{$h}\xe2\234\223\40\104\151\x74\x65\155\x75\x6b\141\x6e\x20{$totalImagesFound}\40\x67\x61\x6d\142\x61\x72\40\x75\x6e\x74\165\x6b\40\x6d\141\x70\x70\151\x6e\147{$p}\xa"; $jsonFiles = array($downloadDir . "\57\x64\x6f\x77\x6e\154\157\141\x64\x65\144\x5f\x69\155\x61\147\145\x73\56\x6a\163\157\x6e", $downloadDir . "\x2f\x71\x75\x65\163\x74\x69\157\156\x73\x5f\x65\170\164\162\x61\x63\x74\145\x64\x2e\x6a\x73\157\x6e", $downloadDir . "\x2f\x69\x6d\141\147\x65\x73\x2f\151\x6d\x61\147\x65\137\155\141\160\160\x69\x6e\147\x5f\x2a\x2e\x6a\163\157\x6e"); $jsonDataProcessed = 0; foreach ($jsonFiles as $jsonPattern) { if (strpos($jsonPattern, "\52") !== false) { $files = glob($jsonPattern); foreach ($files as $jsonFile) { if (file_exists($jsonFile)) { $data = json_decode(file_get_contents($jsonFile), true); if (is_array($data)) { processJsonDataForMapping($data, $mapping); $jsonDataProcessed++; } } } } elseif (file_exists($jsonPattern)) { $data = json_decode(file_get_contents($jsonPattern), true); if (is_array($data)) { processJsonDataForMapping($data, $mapping); $jsonDataProcessed++; } } } if ($jsonDataProcessed > 0) { echo "{$h}\342\234\223\40\x4d\x65\x6d\160\162\157\163\145\x73\40{$jsonDataProcessed}\40\x66\x69\154\x65\40\112\123\117\x4e\40\x75\x6e\164\165\x6b\x20\155\141\x70\160\x69\156\x67\x20\164\141\155\142\141\x68\x61\156{$p}\12"; } $totalMappings = 0; foreach ($mapping as $key => $items) { $totalMappings += count($items); } echo "{$h}\342\234\x93\x20\x54\x6f\164\x61\154\40\155\141\160\160\x69\156\147\x20\171\141\x6e\147\40\x64\x69\142\x75\x61\x74\72\40{$totalMappings}{$p}\12"; return $mapping; } goto dmeHP; Br4Vb: function compareAnswersWithGemini($allQuestions, $geminiAnswers, $downloadDir) { global $h, $m, $p, $k, $bta; echo "\12{$bta}" . str_repeat("\xe2\225\220", 60) . "{$p}\12"; echo "{$h}\x4d\x45\115\102\x41\116\x44\x49\116\x47\113\101\x4e\x20\x4a\101\x57\101\x42\101\116\x20\x47\x45\115\111\116\111\40\104\105\x4e\x47\x41\x4e\x20\112\101\127\x41\102\x41\x4e\40\131\x41\116\107\x20\101\104\101{$p}\xa"; echo "{$bta}" . str_repeat("\xe2\225\x90", 60) . "{$p}\12"; $comparisonPath = $downloadDir . "\57\x50\x45\x52\102\x41\x4e\x44\x49\x4e\x47\101\x4e\x5f\112\101\x57\101\102\101\116\x5f" . date("\x59\155\144\137\110\x69\x73") . "\56\x74\170\x74"; $comparisonContent = "\x50\x45\122\102\x41\116\104\111\x4e\107\101\116\40\112\101\x57\x41\102\101\116\x3a\x20\123\x69\x73\164\x65\x6d\40\x76\x73\40\107\105\115\111\x4e\111\x20\101\120\x49\xa"; $comparisonContent .= "\75\x3d\75\x3d\75\75\75\75\x3d\x3d\75\x3d\x3d\75\75\x3d\x3d\x3d\x3d\x3d\75\75\75\75\75\x3d\75\75\75\75\x3d\75\x3d\75\x3d\75\75\75\75\75\75\75\75\xa\12"; $totalQuestions = 0; $matchingAnswers = 0; $differentAnswers = 0; $detailedComparison = array(); $geminiLines = explode("\12", $geminiAnswers); $geminiAnswerMap = array(); $currentQuestion = 0; foreach ($geminiLines as $line) { $line = trim($line); if (preg_match("\57\x5e\x28\x5c\144\x2b\51\134\56\134\163\53\50\133\x41\55\x5a\x5d\x29\x5c\56\x5c\x73\53\50\x2e\x2b\51\x24\57", $line, $matches)) { $questionNum = intval($matches[1]); $letter = $matches[2]; $answerText = $matches[3]; if (!isset($geminiAnswerMap[$questionNum])) { $geminiAnswerMap[$questionNum] = array(); } $geminiAnswerMap[$questionNum][] = array("\x6c\x65\164\164\x65\x72" => $letter, "\x74\145\170\x74" => $answerText, "\x66\165\154\x6c" => $line); $currentQuestion = $questionNum; } elseif (preg_match("\x2f\x5e\134\163\52\50\x5b\x41\x2d\132\135\x29\x5c\x2e\134\x73\x2b\x28\56\x2b\51\x24\x2f", $line, $matches) && $currentQuestion > 0) { $letter = $matches[1]; $answerText = $matches[2]; if (!isset($geminiAnswerMap[$currentQuestion])) { $geminiAnswerMap[$currentQuestion] = array(); } $geminiAnswerMap[$currentQuestion][] = array("\154\145\x74\164\x65\x72" => $letter, "\164\145\170\x74" => $answerText, "\x66\x75\x6c\154" => $line); } elseif (preg_match("\57\136\x28\x5c\144\x2b\x29\x5c\x2e\134\x73\53\x28\x5b\x41\x2d\x5a\x2c\x5d\53\51\44\57\151", $line, $matches)) { $questionNum = intval($matches[1]); $answerLetters = strtoupper($matches[2]); if (!isset($geminiAnswerMap[$questionNum])) { $geminiAnswerMap[$questionNum] = array(); } $letters = explode("\x2c", $answerLetters); foreach ($letters as $letter) { $letter = trim($letter); if (!empty($letter)) { $geminiAnswerMap[$questionNum][] = array("\x6c\x65\x74\164\x65\162" => $letter, "\164\145\x78\164" => '', "\x66\165\x6c\154" => $line); } } } elseif (preg_match("\x2f\x5e\x28\x5c\x64\53\x29\x5c\56\x5c\x73\53\x28\x5b\x41\55\x5a\x5d\51\x5c\56\134\163\x2b\50\x54\162\165\145\174\106\x61\154\163\145\x29\x24\x2f\x69", $line, $matches)) { $questionNum = intval($matches[1]); $letter = strtoupper($matches[2]); $answerText = $matches[3]; $geminiAnswerMap[$questionNum] = array(array("\154\x65\x74\x74\x65\x72" => $letter, "\164\x65\x78\164" => $answerText, "\146\165\154\x6c" => $line)); } } function normalizeAnswer($answer) { if (is_array($answer)) { if (isset($answer[0]["\161\x75\145\x73\164\x69\157\156"])) { $result = array(); foreach ($answer as $item) { if (isset($item["\161\x75\x65\163\164\x69\x6f\156"]) && isset($item["\x61\156\163\x77\145\x72"])) { $q = preg_replace("\57\x5c\163\x2b\57", "\40", trim(strtolower($item["\161\165\x65\163\164\151\x6f\156"]))); $a = preg_replace("\x2f\x5c\163\x2b\x2f", "\40", trim(strtolower($item["\141\x6e\x73\x77\145\x72"]))); $result[] = $q . "\40\xe2\x86\222\40" . $a; } } sort($result); return implode("\73\40", $result); } else { sort($answer); return implode("\x2c", $answer); } } elseif (is_string($answer)) { $normalized = preg_replace("\57\x5c\x73\53\57", "\40", trim(strtoupper($answer))); $normalized = rtrim($normalized, "\56"); return $normalized; } return ''; } function extractLettersFromGemini($geminiAnswer) { if (!is_array($geminiAnswer)) { return array(); } $letters = array(); foreach ($geminiAnswer as $item) { if (isset($item["\x6c\145\164\164\145\162"])) { $letters[] = strtoupper(trim($item["\154\x65\164\x74\145\162"])); } } sort($letters); return array_unique($letters); } function extractTextFromGemini($geminiAnswer) { if (!is_array($geminiAnswer)) { return array(); } $items = array(); foreach ($geminiAnswer as $item) { if (isset($item["\x74\145\x78\x74"]) && !empty(trim($item["\x74\145\170\164"]))) { $items[] = preg_replace("\57\x5c\163\x2b\x2f", "\40", trim(strtolower($item["\164\x65\x78\x74"]))); } } sort($items); return $items; } $questionCounter = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { $questionCounter++; $comparisonContent .= "\xa" . str_repeat("\55", 60) . "\12"; $comparisonContent .= "\x50\105\x52\x54\x41\116\131\x41\x41\x4e\x20\x23" . $questionCounter . "\x20\x28\x41\163\x6c\151\72\x20\43" . $question["\156\x75\x6d\x62\x65\x72"] . "\51\xa"; $comparisonContent .= "\x4a\x65\156\x69\163\x3a\40" . $question["\164\171\x70\145"] . "\40\174\40\123\164\x61\x74\x75\x73\72\40" . $question["\x73\x74\x61\x74\145"] . "\12"; $shortText = substr(strip_tags($question["\164\145\x78\164"]), 0, 100); if (strlen($question["\164\x65\x78\164"]) > 100) { $shortText .= "\x2e\x2e\56"; } $comparisonContent .= "\120\x65\162\x74\x61\156\x79\x61\141\x6e\x3a\x20" . $shortText . "\xa\xa"; $systemAnswer = $question["\x63\157\162\162\x65\143\x74\137\141\x6e\163\167\145\162"] ?? null; $systemNormalized = normalizeAnswer($systemAnswer); $geminiAnswer = isset($geminiAnswerMap[$questionCounter]) ? $geminiAnswerMap[$questionCounter] : null; $comparisonContent .= "\x4a\x41\x57\x41\102\101\x4e\x20\x53\111\x53\124\105\115\x20\72\x20" . (is_array($systemAnswer) ? json_encode($systemAnswer) : $systemAnswer) . "\12"; if ($geminiAnswer) { $geminiDisplay = ''; foreach ($geminiAnswer as $item) { if (isset($item["\x66\x75\154\154"])) { $geminiDisplay .= $item["\146\165\154\x6c"] . "\xa"; } } $comparisonContent .= "\x4a\x41\x57\101\x42\x41\116\x20\107\x45\115\111\x4e\111\40\72\12" . trim($geminiDisplay) . "\xa\xa"; } else { $comparisonContent .= "\x4a\x41\127\101\x42\x41\116\40\107\105\x4d\111\116\111\40\x3a\x20\124\151\144\x61\x6b\40\x61\x64\x61\x20\x6a\141\x77\141\x62\x61\x6e\x20\144\141\162\x69\40\x47\x65\x6d\151\x6e\151\12\12"; } $isMatch = false; if ($geminiAnswer && $systemAnswer) { switch ($question["\164\x79\160\x65"]) { case "\x6d\165\x6c\164\x69\x63\150\x6f\x69\143\x65": case "\x74\x72\165\x65\146\141\154\163\x65": $systemLetters = array(); if (is_array($systemAnswer)) { $systemLetters = $systemAnswer; } elseif (is_string($systemAnswer)) { $systemLetters = array($systemAnswer); } $geminiLetters = extractLettersFromGemini($geminiAnswer); sort($systemLetters); $systemLetters = array_unique($systemLetters); $geminiLetters = array_unique($geminiLetters); $systemStr = implode("\54", $systemLetters); $geminiStr = implode("\54", $geminiLetters); $isMatch = $systemStr === $geminiStr; if (!$isMatch) { $diff1 = array_diff($systemLetters, $geminiLetters); $diff2 = array_diff($geminiLetters, $systemLetters); $isMatch = empty($diff1) && empty($diff2); } break; case "\x6d\x61\x74\143\x68": $systemItems = array(); if (is_array($systemAnswer) && isset($systemAnswer[0]["\x71\x75\x65\x73\x74\151\x6f\156"])) { foreach ($systemAnswer as $item) { if (isset($item["\x71\165\x65\x73\164\151\x6f\156"]) && isset($item["\141\x6e\x73\167\145\x72"])) { $key = preg_replace("\x2f\134\x73\x2b\57", "\x20", trim(strtolower($item["\x71\x75\x65\163\x74\151\x6f\156"]))); $value = preg_replace("\x2f\x5c\x73\x2b\x2f", "\x20", trim(strtolower($item["\x61\156\x73\x77\x65\162"]))); $systemItems[$key] = $value; } } } $geminiItems = array(); foreach ($geminiAnswer as $item) { if (isset($item["\164\x65\170\x74"])) { if (strpos($item["\164\145\170\164"], "\xe2\x86\x92") !== false) { $parts = explode("\342\206\222", $item["\x74\x65\170\x74"]); if (count($parts) >= 2) { $key = preg_replace("\57\x5c\x73\x2b\x2f", "\40", trim(strtolower($parts[0]))); $value = preg_replace("\x2f\134\x73\x2b\x2f", "\40", trim(strtolower($parts[1]))); $geminiItems[$key] = $value; } } } } ksort($systemItems); ksort($geminiItems); $isMatch = $systemItems == $geminiItems; if (!$isMatch) { $comparisonContent .= "\104\x45\102\x55\x47\x20\x4d\101\x54\x43\x48\111\x4e\107\x3a\12"; $comparisonContent .= "\x53\x79\x73\164\145\x6d\x3a\x20" . json_encode($systemItems) . "\xa"; $comparisonContent .= "\107\145\155\x69\156\151\x3a\40" . json_encode($geminiItems) . "\xa"; } break; default: $geminiText = ''; foreach ($geminiAnswer as $item) { if (isset($item["\164\145\170\164"])) { $geminiText .= $item["\164\x65\x78\x74"] . "\40"; } } $geminiText = trim($geminiText); $sysNorm = preg_replace("\x2f\133\136\101\x2d\132\x61\x2d\172\60\x2d\71\x5d\57", '', strtolower($systemNormalized)); $gemNorm = preg_replace("\57\133\136\101\55\132\x61\55\x7a\x30\x2d\x39\x5d\57", '', strtolower($geminiText)); $isMatch = $sysNorm === $gemNorm; } } if ($isMatch) { $comparisonContent .= "\x53\124\x41\x54\125\x53\72\x20\342\234\223\x20\x53\101\x4d\101\12"; $matchingAnswers++; $detailedComparison[] = array("\x71\165\x65\163\164\x69\x6f\156" => $questionCounter, "\x73\164\141\x74\x75\163" => "\x6d\141\x74\143\150", "\163\171\x73\x74\145\x6d" => $systemAnswer, "\x67\145\155\x69\x6e\x69" => $geminiAnswer); } else { $comparisonContent .= "\123\x54\101\x54\125\123\72\x20\xe2\x9c\227\40\102\105\122\102\105\x44\x41\xa"; $differentAnswers++; $detailedComparison[] = array("\161\x75\x65\163\164\151\157\156" => $questionCounter, "\x73\x74\x61\164\165\x73" => "\144\151\x66\146\145\162\145\x6e\164", "\x73\171\163\164\145\155" => $systemAnswer, "\x67\x65\x6d\151\156\151" => $geminiAnswer); } $totalQuestions++; } } $comparisonContent .= "\xa" . str_repeat("\xe2\225\x90", 60) . "\xa"; $comparisonContent .= "\x53\x54\101\124\111\123\x54\x49\113\40\120\105\x52\102\x41\x4e\x44\111\x4e\107\101\x4e\12"; $comparisonContent .= str_repeat("\342\x95\x90", 60) . "\xa\12"; $comparisonContent .= "\124\157\164\x61\x6c\40\120\x65\x72\164\141\x6e\171\x61\141\x6e\x3a\x20" . $totalQuestions . "\xa"; $comparisonContent .= "\112\141\167\141\142\141\156\40\x53\x61\155\141\x20\x20\40\40\72\x20" . $matchingAnswers . "\40\50" . ($totalQuestions > 0 ? round($matchingAnswers / $totalQuestions * 100, 1) : 0) . "\x25\x29\xa"; $comparisonContent .= "\x4a\x61\x77\x61\x62\x61\156\40\102\145\x72\142\145\x64\141\x20\72\40" . $differentAnswers . "\40\50" . ($totalQuestions > 0 ? round($differentAnswers / $totalQuestions * 100, 1) : 0) . "\45\51\xa"; if ($differentAnswers > 0) { $comparisonContent .= "\12" . str_repeat("\x2d", 60) . "\xa"; $comparisonContent .= "\104\x45\x54\101\x49\x4c\40\120\105\x52\102\x45\104\101\101\116\x20\50" . $differentAnswers . "\40\x70\145\162\164\141\x6e\171\141\x61\x6e\x29\x3a\xa"; $comparisonContent .= str_repeat("\x2d", 60) . "\xa\12"; foreach ($detailedComparison as $item) { if ($item["\163\164\x61\x74\x75\x73"] === "\x64\151\146\146\x65\162\145\x6e\164") { $comparisonContent .= "\120\x65\x72\x74\x61\156\171\141\x61\156\x20\x23" . $item["\x71\x75\145\163\x74\x69\x6f\x6e"] . "\72\12"; $comparisonContent .= "\x20\40\123\x69\x73\x74\145\x6d\72\x20" . (is_array($item["\163\x79\x73\164\x65\x6d"]) ? json_encode($item["\163\171\x73\164\145\155"]) : $item["\x73\x79\163\x74\145\x6d"]) . "\12"; $comparisonContent .= "\40\40\107\x65\x6d\x69\156\151\x3a\x20" . (is_array($item["\147\145\x6d\151\x6e\x69"]) ? json_encode($item["\x67\x65\155\151\156\x69"]) : $item["\x67\x65\155\x69\156\x69"]) . "\xa\xa"; } } } $comparisonContent .= "\12" . str_repeat("\xe2\x95\220", 60) . "\xa"; $comparisonContent .= "\x41\116\x41\x4c\111\123\x49\123\x20\120\105\122\102\105\x44\101\x41\x4e\xa"; $comparisonContent .= str_repeat("\342\225\220", 60) . "\xa\12"; $typeAnalysis = array(); foreach ($detailedComparison as $item) { if ($item["\163\x74\x61\x74\x75\163"] === "\x64\x69\x66\x66\x65\x72\x65\156\164") { $sysType = gettype($item["\x73\x79\163\164\x65\x6d"]); $gemType = gettype($item["\147\145\x6d\151\156\x69"]); $key = $sysType . "\40\x76\x73\40" . $gemType; if (!isset($typeAnalysis[$key])) { $typeAnalysis[$key] = 0; } $typeAnalysis[$key]++; } } foreach ($typeAnalysis as $type => $count) { $percentage = round($count / $differentAnswers * 100, 1); $comparisonContent .= sprintf("\45\55\x33\60\163\72\40\45\x32\144\x20\50\45\65\x2e\x31\146\x25\x25\x29\xa", $type, $count, $percentage); } file_put_contents($comparisonPath, $comparisonContent); echo "{$h}\342\234\223\40\120\145\162\x62\x61\x6e\144\151\x6e\147\141\156\x20\x64\x69\x73\151\x6d\x70\x61\156\x20\x6b\145\x3a\40{$comparisonPath}{$p}\12"; echo "{$k}\124\x6f\x74\141\154\x20\x70\145\x72\164\x61\x6e\x79\141\x61\x6e\x3a\x20{$totalQuestions}{$p}\12"; echo "{$h}\112\141\x77\x61\142\x61\x6e\x20\163\x61\x6d\141\72\40{$matchingAnswers}\x20\x28" . ($totalQuestions > 0 ? round($matchingAnswers / $totalQuestions * 100, 1) : 0) . "\x25\x29{$p}\xa"; echo "{$m}\x4a\141\167\x61\142\x61\x6e\x20\142\145\x72\x62\x65\144\x61\72\x20{$differentAnswers}\40\50" . ($totalQuestions > 0 ? round($differentAnswers / $totalQuestions * 100, 1) : 0) . "\45\51{$p}\xa"; if ($differentAnswers > 0) { echo "\12{$k}\x43\x6f\x6e\x74\157\150\40\160\145\162\142\145\x64\141\x61\x6e\72{$p}\12"; $exampleCount = 0; foreach ($detailedComparison as $item) { if ($item["\163\x74\x61\164\x75\163"] === "\x64\151\146\x66\145\162\x65\156\x74" && $exampleCount < 3) { echo "{$m}\40\40\x23{$item["\161\x75\x65\163\164\x69\x6f\156"]}\72\40\x53\x69\163\x74\x65\155\x20\x3d\x20\47{$item["\x73\171\163\164\x65\x6d"]}\47\x20\x76\163\x20\107\145\x6d\151\x6e\x69\40\75\x20\47"; if (is_array($item["\x67\x65\155\x69\x6e\x69"])) { foreach ($item["\147\145\x6d\x69\156\151"] as $gem) { if (isset($gem["\154\145\x74\164\x65\x72"])) { echo $gem["\x6c\145\164\164\x65\x72"]; } if (isset($gem["\x74\145\x78\x74"])) { echo "\x2e\40" . $gem["\x74\x65\x78\164"]; } } } else { echo $item["\x67\x65\x6d\151\x6e\151"]; } echo "\47{$p}\12"; $exampleCount++; } } } return array("\x74\157\x74\141\x6c" => $totalQuestions, "\155\141\x74\x63\x68\151\156\147" => $matchingAnswers, "\144\x69\x66\146\145\162\145\156\x74" => $differentAnswers, "\146\151\154\x65\x5f\x70\x61\164\x68" => $comparisonPath, "\x64\x65\164\141\x69\x6c\x73" => $detailedComparison); } goto GI_AX; DnAev: function createTextForGeminiPart($questionsPart) { $output = str_repeat("\342\225\220", 60) . "\12"; $output .= "\x42\x41\107\x49\x41\x4e\40{$questionsPart["\x70\141\162\x74\137\x6e\165\155\142\x65\x72"]}\x20\55\x20\120\x45\x52\124\101\116\x59\x41\x41\116\x20{$questionsPart["\x73\x74\x61\162\164\x5f\147\x6c\157\142\x61\154"]}\40\x73\141\x6d\160\141\151\40{$questionsPart["\145\156\x64\x5f\147\x6c\x6f\142\141\x6c"]}\xa"; $output .= str_repeat("\342\225\x90", 60) . "\xa\xa"; foreach ($questionsPart["\x71\x75\145\x73\x74\x69\x6f\156\x73"] as $item) { $output .= formatQuestionForText($item["\161\165\145\163\x74\x69\x6f\156"], $item["\147\154\x6f\x62\x61\154\x5f\156\165\x6d\x62\x65\162"], true); } return $output; } goto OQQoU; fFba2: function Save($namadata) { global $p, $h, $k; if (file_exists($namadata)) { $data = file_get_contents($namadata); echo "{$h}\xe2\x9c\223\x20\x4d\x65\x6d\165\141\x74\x20\47{$namadata}\x27\56\x2e\56{$p}\12"; } else { echo "{$k}\111\156\160\x75\164\40\47{$namadata}\47\40\x28\x61\x6b\x61\x6e\40\144\x69\x73\x69\x6d\x70\x61\156\x29\x3a\x20{$p}"; $data = trim(fgets(STDIN)); file_put_contents($namadata, $data); echo "{$h}\xe2\x9c\223\40\47{$namadata}\x27\40\142\145\162\x68\141\163\151\x6c\40\x64\151\163\151\155\160\141\156\56{$p}\xa"; } return $data; } goto mLMER; u4g9z: function getUsernameFromFile($downloadDir = "\x2e\x2f\144\x6f\167\156\154\x6f\141\x64") { $usernameFile = $downloadDir . "\57\x75\163\145\162\x6e\x61\155\145\56\x74\x78\x74"; if (file_exists($usernameFile)) { $username = trim(file_get_contents($usernameFile)); if (!empty($username) && $username != "\x55\156\153\156\x6f\167\156\x20\x55\163\x65\x72") { $username = preg_replace("\57\x5c\x73\x2b\57", "\x20", $username); if (strlen($username) > 30) { $username = substr($username, 0, 27) . "\56\x2e\56"; } return $username; } } $metadataFile = $downloadDir . "\57\155\x65\164\141\x64\x61\164\x61\x2e\x6a\x73\x6f\156"; if (file_exists($metadataFile)) { $metadata = json_decode(file_get_contents($metadataFile), true); if (isset($metadata["\165\163\145\162\x6e\141\155\x65"]) && !empty($metadata["\x75\x73\145\x72\156\x61\x6d\x65"]) && $metadata["\x75\x73\145\x72\x6e\x61\155\x65"] != "\125\156\153\156\157\167\x6e\40\x55\163\145\162") { $username = $metadata["\x75\163\x65\162\156\141\x6d\x65"]; if (strlen($username) > 30) { $username = substr($username, 0, 27) . "\x2e\56\x2e"; } return $username; } } return "\107\x75\x65\163\164"; } goto GF0s5; g3cno: $GLOBALS["\x69\x6d\x61\147\x65\x4d\x61\x70\x70\x69\156\x67\103\141\x63\x68\145\124\151\155\145"] = array(); goto anwCX; nu7KO: function runScrapingProcess() { global $ab, $m, $h, $k, $bg, $u, $bta, $p; system("\x63\x6c\x65\x61\162"); echo "\x1b\133\x31\x3b\x39\x36\x6d\75\x3d\x3d\x3d\75\x3d\75\x3d\x3d\x3d\x3d\x3d\x3d\75\x3d\75\x3d\75\75\x3d\75\x3d\75\75\x3d\x3d\75\75\x3d\x3d\x3d\75\75\x3d\75\75\75\75\75\x3d\x3d\x3d\75\x3d\75\75\x3d\75\x3d\75\12"; echo "\x20\x20\x20\x20\40\x20\x20\x20\115\x45\115\125\x4c\x41\111\40\120\122\x4f\x53\x45\123\x20\123\x43\122\101\120\x49\x4e\107\40\x26\x20\105\x4b\x53\x54\x52\x41\x4b\x53\x49\12"; echo "\75\75\x3d\75\75\75\75\x3d\x3d\75\x3d\75\x3d\x3d\x3d\x3d\75\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\75\75\75\75\75\x3d\x3d\x3d\75\x3d\x3d\x3d\x3d\x3d\75\75\x3d\x3d\75\x3d\75\x3d\75\75\x1b\x5b\60\x6d\xa\12"; $downloadDir = ensureDownloadDirectory(); echo "\xa{$h}\x3e\76\76\40\115\145\x6d\165\x61\164\x20\113\x6f\x6e\146\x69\x67\x75\x72\x61\163\x69\x20\x50\145\156\147\147\x75\x6e\141\40\x3c\x3c\74{$p}\12"; $usernameFile = $downloadDir . "\57\165\163\145\x72\x6e\x61\x6d\145\56\164\x78\164"; $existingUsername = ''; if (file_exists($usernameFile)) { $existingUsername = trim(file_get_contents($usernameFile)); if ($existingUsername != "\x55\x6e\153\156\x6f\167\156\x20\125\x73\x65\x72" && !empty($existingUsername)) { echo "{$h}\342\x9c\223\40\125\163\145\162\156\x61\155\145\x3a\x20{$existingUsername}{$p}\12"; echo "{$k}\107\165\x6e\141\153\x61\x6e\40\x75\163\x65\x72\156\141\155\145\x20\171\141\x6e\147\40\x73\165\x64\x61\150\x20\141\x64\141\x3f\40\50\171\x3d\x67\x75\x6e\141\x6b\x61\156\57\164\x3d\141\155\x62\x69\154\40\x62\141\162\x75\x29\72\40{$p}"; $useExisting = trim(fgets(STDIN)); if (strtolower($useExisting) === "\171") { $username = $existingUsername; if (file_exists("\165\163\x65\x72\55\x61\147\x65\156\x74") && file_exists("\x43\x6f\157\x6b\151\145")) { $user = trim(file_get_contents("\165\x73\145\162\55\141\147\145\x6e\x74")); $cook = trim(file_get_contents("\x43\157\x6f\153\x69\x65")); echo "{$h}\342\234\x93\40\103\157\x6f\153\151\x65\x20\x64\x61\x6e\x20\x75\x73\145\162\x2d\141\147\x65\x6e\164\40\144\x69\155\165\141\x74\x20\144\x61\x72\151\x20\x66\x69\154\145{$p}\xa"; } else { $user = Save("\165\163\x65\162\55\141\147\145\x6e\x74"); $cook = Save("\103\x6f\157\x6b\x69\x65"); } echo "\12\x1b\133\x31\x3b\71\66\x6d\133\x4b\x6f\x6e\146\x69\147\x75\162\x61\x73\x69\40\x41\x74\x74\x65\x6d\x70\x74\x5d\33\133\x30\x6d\xa"; $attempt = inputNumericNoDefault("\x1b\133\61\x3b\71\x33\x6d\115\141\x73\165\153\x6b\141\x6e\x20\x61\x74\x74\x65\x6d\160\164\x20\x49\104\x3a\40\x1b\x5b\x30\x6d"); if ($attempt === null) { return; } $cmid = inputNumericNoDefault("\x1b\x5b\x31\x3b\71\x33\x6d\115\141\163\x75\x6b\153\141\156\40\143\x6d\x69\x64\72\40\33\133\60\155"); if ($cmid === null) { return; } goto config_pages; } } } $user = Save("\165\163\145\162\x2d\x61\147\145\x6e\x74"); $cook = Save("\103\x6f\x6f\x6b\151\x65"); echo "\12\x1b\x5b\61\73\71\x36\155\133\113\x6f\x6e\146\x69\x67\x75\162\141\163\151\x20\101\x74\x74\145\155\160\164\135\x1b\x5b\x30\155\xa"; $attempt = inputNumericNoDefault("\x1b\x5b\x31\x3b\71\63\x6d\x4d\141\163\165\x6b\x6b\x61\x6e\40\141\x74\x74\145\155\160\x74\40\111\104\72\x20\33\x5b\60\155"); if ($attempt === null) { return; } $cmid = inputNumericNoDefault("\33\x5b\x31\x3b\x39\63\155\115\x61\x73\165\x6b\153\141\156\x20\143\155\151\x64\x3a\40\33\133\x30\155"); if ($cmid === null) { return; } config_pages: echo "\12\x1b\x5b\61\x3b\x39\x36\x6d\133\113\x6f\x6e\146\x69\147\x75\x72\x61\x73\x69\x20\110\141\154\141\155\141\156\x5d\x1b\133\x30\x6d\12"; $input = inputNumeric("\x1b\133\61\73\71\63\155\115\141\163\165\153\153\x61\156\x20\152\x75\155\154\x61\150\40\x73\157\x61\x6c\x20\x28\144\145\146\x61\x75\x6c\164\40\63\60\51\72\40\x1b\133\60\x6d", 30); $maxPages = max(0, $input - 1); echo "\12\x1b\133\61\73\71\66\x6d\x5b\117\160\x73\151\x20\124\x61\155\x62\x61\x68\141\156\135\33\x5b\60\155\12"; echo "\33\x5b\61\73\x39\63\155\123\x69\155\160\141\156\x20\150\141\154\141\155\x61\156\40\141\156\141\154\151\x73\151\x73\x3f\40\50\x79\x2f\x6e\54\40\x64\x65\146\141\x75\154\164\x3a\x20\x79\x29\72\x20\x1b\133\x30\x6d"; $saveAnalisis = trim(fgets(STDIN)); $saveAnalisis = strtolower($saveAnalisis) === "\156" ? false : true; echo "\x1b\133\61\x3b\x39\63\x6d\x53\151\155\x70\x61\x6e\x20\x68\x61\154\x61\x6d\x61\x6e\40\x66\x69\156\x69\x73\x68\x3f\x20\x28\171\x2f\156\54\x20\144\x65\x66\141\165\x6c\x74\72\40\x79\x29\72\40\33\x5b\60\x6d"; $saveFinish = trim(fgets(STDIN)); $saveFinish = strtolower($saveFinish) === "\156" ? false : true; $extractQuestions = true; $downloadImages = true; echo "\33\133\61\x3b\71\x32\x6d\342\x9c\x93\40\105\153\x73\x74\x72\x61\x6b\x73\x69\x20\160\x65\162\164\141\x6e\171\x61\x61\156\x20\x64\141\x6e\40\x64\157\x77\156\154\x6f\141\x64\x20\x67\141\155\142\141\162\40\x64\151\x61\153\164\151\x66\153\141\x6e\33\133\60\155\12"; $collectImages = false; if ($downloadImages) { echo "\12\x1b\x5b\x31\73\71\66\155\x5b\117\160\x73\151\x20\120\x65\156\147\x75\x6d\x70\165\x6c\141\156\x20\107\x61\x6d\x62\141\x72\135\x1b\133\60\155\12"; echo "\33\133\x31\73\71\x33\x6d\x4b\x75\155\x70\x75\x6c\153\x61\x6e\40\x73\145\155\x75\x61\x20\147\141\155\142\x61\162\40\x6b\145\x20\163\141\x74\x75\x20\146\x6f\154\x64\x65\162\77\x20\x28\171\57\x6e\54\x20\x64\x65\146\141\x75\x6c\x74\72\x20\x79\x29\x3a\x20\x1b\x5b\60\x6d"; $collectImagesInput = trim(fgets(STDIN)); $collectImages = strtolower($collectImagesInput) === "\x6e" ? false : true; } echo "\33\x5b\61\x3b\71\x33\155\xa\x4d\x65\x6d\x75\x6c\141\x69\40\x73\x63\162\x61\x70\151\156\147\x20\x64\x61\154\141\x6d\x20\x33\x20\x64\145\x74\151\x6b\x2e\56\x2e{$p}\xa"; sleep(3); system("\x63\154\145\141\x72"); $ua = array("\x48\157\x73\164\x3a\x20\145\x6c\x65\x61\162\x6e\151\x6e\x67\x2e\163\155\153\x32\55\x79\x6b\x2e\x73\143\x68\56\151\x64", "\130\55\x52\x65\161\165\x65\163\x74\145\144\x2d\x57\151\x74\x68\x3a\x20\x58\115\x4c\110\164\x74\x70\122\x65\x71\165\145\163\x74", "\165\x73\x65\x72\x2d\x61\x67\145\x6e\x74\72\x20{$user}", "\x63\x6f\x6f\153\x69\x65\72\x20{$cook}"); $baseUrl = "\x68\164\164\160\163\x3a\57\x2f\x65\x6c\145\x61\x72\x6e\151\156\147\x2e\x73\155\153\x32\x2d\x79\153\x2e\x73\143\x68\x2e\151\144"; $dashboardUrl = "{$baseUrl}\x2f\x6d\171\57"; $soalUrl = "{$baseUrl}\57\x6d\157\144\57\161\165\151\172\x2f\x76\151\145\167\56\x70\x68\x70\x3f\x69\x64\75{$cmid}"; echo "\x1b\x5b\61\x3b\x39\66\155" . str_repeat("\342\x95\x90", 60) . "\33\133\x30\x6d\12"; echo "\33\x5b\61\73\71\x32\x6d\115\105\115\125\114\101\111\40\123\x43\x52\101\120\111\116\x47\x20\104\x41\x54\101\33\x5b\60\155\xa"; echo "\33\x5b\61\x3b\71\62\155\x44\x69\x72\145\x6b\164\157\162\x69\x20\160\145\x6e\171\x69\155\160\141\156\141\156\72\x20{$downloadDir}\x1b\x5b\60\x6d\xa"; echo "\33\x5b\x31\x3b\x39\x36\155" . str_repeat("\xe2\225\x90", 60) . "\x1b\x5b\x30\x6d\xa"; if (isset($username) && $username != "\x55\156\153\156\x6f\167\x6e\x20\x55\163\145\x72") { echo "\33\133\61\x3b\71\x32\x6d\120\x65\156\147\147\165\x6e\141\72\x20\33\133\61\73\x39\x36\155{$username}\33\x5b\60\155\xa"; } echo "\x1b\x5b\61\x3b\x39\x36\x6d" . str_repeat("\342\225\x90", 60) . "\33\x5b\60\x6d\xa"; $allFiles = array(); echo "\33\133\61\x3b\71\62\x6d\133\x31\135\x20\115\145\156\x67\141\155\142\x69\154\40\144\141\164\141\x20\x64\141\x73\150\142\157\x61\x72\144\56\56\56\33\133\60\x6d\12"; $dashboard = get($dashboardUrl, $ua); $dashboardPath = saveToDownloadDir("\x64\x61\163\x68\142\x6f\141\162\x64\56\150\x74\155\x6c", $dashboard, $downloadDir); $allFiles["\x64\141\163\150\142\157\x61\162\x64\56\x68\164\x6d\x6c"] = $dashboardPath; echo "\x1b\133\x31\x3b\x39\x32\155\xe2\234\223\40\x44\141\163\150\142\x6f\141\162\x64\40\x64\x69\163\151\x6d\x70\141\x6e\40\x6b\145\40{$dashboardPath}\33\x5b\x30\x6d\12"; echo "\xa\x1b\x5b\x31\73\71\62\x6d\x5b\61\x61\135\x20\x4d\x65\x6e\x67\145\153\x73\x74\x72\x61\153\40\151\156\146\x6f\162\155\x61\163\x69\x20\x70\x65\156\147\x67\165\x6e\x61\x2e\56\56\x1b\x5b\60\155\xa"; $username = extractUsernameFromDashboard($dashboard); echo "\x1b\133\x31\x3b\71\62\x6d\xe2\x9c\223\40\x55\x73\145\x72\156\x61\155\145\40\164\145\162\x64\145\x74\x65\x6b\x73\151\72\40\x1b\133\61\x3b\71\x36\155{$username}\x1b\x5b\60\155\xa"; $usernamePath = saveToDownloadDir("\165\163\145\x72\156\141\x6d\145\56\x74\170\164", $username, $downloadDir); echo "\33\x5b\61\x3b\x39\62\155\xe2\234\x93\x20\x55\x73\x65\162\156\x61\x6d\x65\40\x64\151\x73\x69\155\160\x61\x6e\40\153\145\40{$usernamePath}\x1b\x5b\60\x6d\xa"; echo "\12\33\133\61\x3b\71\x32\155\x5b\62\135\x20\x4d\x65\x6e\147\141\155\142\151\x6c\x20\x64\x61\x74\x61\x20\163\x6f\x61\x6c\56\x2e\x2e\x1b\133\x30\155\xa"; $soal = get($soalUrl, $ua); $soalPath = saveToDownloadDir("\163\x6f\x61\154\56\150\164\x6d\x6c", $soal, $downloadDir); $allFiles["\163\157\141\154\56\x68\x74\x6d\x6c"] = $soalPath; echo "\x1b\x5b\x31\x3b\71\62\x6d\xe2\x9c\223\x20\123\x6f\141\154\40\144\x69\x73\x69\x6d\x70\x61\x6e\x20\153\145\40{$soalPath}\33\133\x30\155\12"; echo "\12\33\133\61\x3b\x39\62\155\133\63\x5d\40\x4d\145\156\147\141\155\142\151\x6c\x20\150\141\154\x61\x6d\141\x6e\x20\x61\164\x74\x65\155\160\x74\x2e\x2e\x2e\x1b\x5b\60\x6d\xa"; $savedFiles = scrapeAllPages($baseUrl, $attempt, $cmid, $ua, $maxPages, $downloadDir); foreach ($savedFiles as $file) { $allFiles[$file[0]] = $file[1]; } if ($saveFinish) { echo "\12\33\x5b\x31\x3b\x39\62\155\x5b\x34\135\40\115\x65\x6e\147\141\x6d\x62\151\x6c\x20\x68\141\154\x61\155\x61\156\x20\146\151\x6e\x69\163\150\56\56\x2e\x1b\133\60\155\12"; $finishUrl = "{$baseUrl}\x2f\x6d\157\144\57\x71\x75\151\x7a\x2f\163\165\155\x6d\141\162\x79\56\160\x68\160\x3f\141\164\x74\x65\155\160\x74\x3d{$attempt}\46\x63\x6d\x69\x64\75{$cmid}"; $finish = get($finishUrl, $ua); $finishPath = saveToDownloadDir("\146\x69\156\151\x73\150\x2e\150\164\155\154", $finish, $downloadDir); $allFiles["\146\x69\x6e\151\163\x68\56\150\x74\x6d\154"] = $finishPath; echo "\x1b\133\x31\x3b\71\62\x6d\342\x9c\x93\x20\x48\141\x6c\141\x6d\x61\156\x20\x66\x69\156\151\163\150\x20\144\151\163\x69\155\x70\x61\156\x20\x6b\x65\x20{$finishPath}\33\x5b\x30\x6d\xa"; } if ($saveAnalisis) { echo "\xa\33\x5b\61\x3b\x39\x32\155\133\65\x5d\x20\x4d\x65\x6e\x67\141\155\142\x69\154\40\150\x61\x6c\x61\155\x61\x6e\x20\141\x6e\141\154\151\x73\x69\163\x2e\56\56\x1b\x5b\60\x6d\12"; $analisisAttempt = $attempt; $analisisUrl = "{$baseUrl}\57\155\x6f\x64\x2f\x71\165\151\172\57\x72\x65\166\x69\145\167\56\160\x68\160\77\x61\x74\x74\x65\x6d\160\164\75{$analisisAttempt}\46\143\155\x69\144\x3d{$cmid}"; $analisis = get($analisisUrl, $ua); $analisisPath = saveToDownloadDir("\x61\156\x61\x6c\151\x73\151\x73\56\150\164\155\x6c", $analisis, $downloadDir); $allFiles["\x61\x6e\141\x6c\x69\163\x69\163\x2e\x68\164\155\x6c"] = $analisisPath; echo "\33\x5b\x31\x3b\71\x32\x6d\342\234\223\40\110\x61\154\141\x6d\141\156\40\141\x6e\x61\154\151\x73\x69\163\40\x64\151\163\151\155\x70\x61\156\40\153\x65\40{$analisisPath}\x1b\133\x30\x6d\xa"; } $totalFiles = count($allFiles); echo "\xa\33\x5b\61\73\71\66\155" . str_repeat("\342\x95\220", 60) . "\x1b\x5b\60\x6d\12"; echo "\x1b\133\x31\73\71\62\155\123\103\x52\101\120\x49\116\x47\40\123\105\114\x45\x53\101\x49\41\x1b\x5b\60\x6d\12"; echo "\33\133\61\x3b\x39\62\x6d\x53\x65\155\x75\x61\40\x66\151\x6c\x65\40\x64\151\163\x69\155\x70\141\x6e\x20\x64\151\x3a\x20{$downloadDir}\x1b\x5b\60\x6d\12"; echo "\x1b\133\x31\73\x39\x36\x6d" . str_repeat("\342\x95\x90", 60) . "\x1b\133\x30\x6d\xa"; echo "\x1b\133\61\x3b\71\63\155\101\x74\x74\x65\x6d\160\x74\x20\111\x44\72\x20\33\x5b\61\73\x39\67\x6d{$attempt}\33\133\60\x6d\12"; echo "\33\x5b\61\x3b\71\x33\x6d\103\x6f\165\x72\163\x65\x20\x4d\157\x64\x75\x6c\x65\x20\111\104\72\40\33\x5b\x31\73\71\x37\155{$cmid}\x1b\x5b\60\155\xa"; echo "\x1b\133\61\73\71\63\155\x4a\x75\x6d\x6c\x61\x68\40\x68\141\154\141\x6d\141\x6e\x20\x64\x69\x63\x6f\x62\141\x3a\x20\33\x5b\61\73\71\x37\x6d" . ($maxPages + 1) . "\33\133\x30\x6d\xa"; echo "\33\133\61\x3b\x39\63\155\110\141\x6c\141\155\141\156\40\141\164\x74\x65\x6d\160\164\40\142\145\162\x68\141\x73\x69\x6c\x20\x64\151\141\155\x62\x69\x6c\72\x20\33\x5b\61\x3b\x39\x37\x6d" . count($savedFiles) . "\x1b\133\60\x6d\xa"; echo "\x1b\x5b\x31\x3b\71\x33\155\x54\x6f\x74\141\x6c\40\146\x69\154\145\40\x64\151\x73\151\155\160\x61\156\72\x20\33\x5b\61\x3b\71\x37\155{$totalFiles}\33\133\x30\155\xa"; echo "\12\33\133\61\73\71\66\x6d\x5b\x44\101\x46\124\x41\x52\40\106\111\114\x45\x20\124\x45\x52\123\x49\115\120\101\116\135\33\133\60\155\xa"; $counter = 1; foreach ($allFiles as $filename => $fullPath) { $fileSize = filesize($fullPath); $sizeFormatted = round($fileSize / 1024, 2) . "\40\x4b\x42"; echo "\33\133\x31\73\71\62\x6d{$counter}\x2e\40{$filename}\x20\x1b\x5b\x31\x3b\x39\x30\155\x28{$sizeFormatted}\x29\40\55\76\x20{$fullPath}\33\133\x30\x6d\xa"; $counter++; } echo "\33\x5b\x31\73\x39\x36\155" . str_repeat("\xe2\225\x90", 60) . "\33\x5b\60\155\xa"; $allQuestions = array(); if ($extractQuestions) { $extractionResult = extractAndDownloadAllQuestions($downloadDir, $allFiles, $ua); $allQuestions = $extractionResult["\161\x75\145\163\164\x69\x6f\156\163"]; if (!empty($allQuestions)) { echo "\xa\x1b\133\x31\73\x39\63\155\x49\x6e\x67\x69\x6e\x20\155\x65\154\x69\x68\x61\164\x20\160\x72\x65\166\x69\x65\x77\x20\160\145\x72\x74\141\156\171\x61\x61\x6e\x3f\x20\50\171\x2f\156\x2c\40\x64\145\x66\141\165\154\x74\x3a\x20\171\x29\72\40\x1b\x5b\x30\155"; $showPreview = trim(fgets(STDIN)); $showPreview = strtolower($showPreview) === "\x6e" ? false : true; if ($showPreview) { echo "\33\133\61\73\71\x33\155\x50\x69\154\151\x68\x20\x6d\157\x64\145\40\x70\162\145\166\x69\x65\167\72\33\133\x30\155\xa"; echo "\33\133\61\73\x39\62\155\x20\40\61\56\x20\120\162\145\166\x69\145\167\x20\163\x65\x6d\165\x61\40\x70\x65\x72\x74\141\x6e\x79\x61\x61\156\40\144\141\162\151\x20\163\145\x6d\x75\x61\40\x66\x69\x6c\x65\x1b\133\60\155\xa"; echo "\33\x5b\61\x3b\71\62\155\x20\x20\x32\x2e\40\120\162\145\x76\x69\145\167\40\x66\x69\x6c\x65\40\x74\145\x72\164\145\156\164\x75\40\x73\141\x6a\141\33\x5b\60\155\xa"; echo "\x1b\133\61\73\x39\x32\x6d\40\x20\63\56\x20\120\162\145\x76\x69\145\x77\x20\x70\145\x72\164\141\156\171\x61\x61\156\x20\x64\x65\156\x67\x61\156\x20\147\141\155\142\141\x72\x20\163\141\152\141\33\133\x30\x6d\12"; echo "\x1b\133\x31\x3b\71\x32\x6d\40\40\64\56\40\x50\x72\145\x76\x69\145\x77\40\x62\145\x72\144\141\163\141\x72\153\141\156\x20\x6a\145\156\151\163\x20\x70\x65\x72\164\x61\x6e\171\x61\x61\156\x1b\133\60\x6d\12"; echo "\x1b\x5b\x31\x3b\71\62\x6d\x20\x20\x35\56\x20\120\162\145\166\x69\145\167\40\153\x68\x75\x73\165\x73\40\x70\x65\x72\164\x61\156\x79\x61\x61\156\40\144\x72\157\x70\x64\x6f\x77\x6e\x2f\155\x61\x74\x63\x68\33\x5b\x30\155\12"; echo "\33\133\61\x3b\71\63\155\120\151\x6c\x69\150\x61\156\x20\x28\61\x2d\65\x2c\40\144\x65\146\x61\x75\154\164\72\x20\x31\51\72\x20\x1b\133\x30\x6d"; $previewChoice = trim(fgets(STDIN)); if ($previewChoice == "\x32") { echo "\xa\33\x5b\61\x3b\x39\63\155\x50\151\154\151\150\40\x66\151\154\x65\x20\165\x6e\164\165\153\40\160\162\145\166\151\145\167\x20\x28\155\x61\x73\x75\153\153\141\156\x20\x6e\157\155\157\x72\51\x3a\40\x1b\x5b\x30\x6d\xa"; $fileList = array(); $fileCounter = 1; foreach ($allQuestions as $filename => $questions) { echo "\x1b\x5b\x31\x3b\71\x32\155\x20\x20{$fileCounter}\56\x20{$filename}\x20\x1b\x5b\x31\73\x39\x30\x6d\50" . count($questions) . "\40\x70\x65\162\x74\141\156\171\x61\141\156\51\x1b\x5b\x30\x6d\xa"; $fileList[$fileCounter] = $filename; $fileCounter++; } echo "\x1b\133\61\x3b\71\63\155\x50\x69\x6c\x69\150\141\156\72\x20\33\x5b\60\x6d"; $fileChoice = inputNumeric('', 1); if (isset($fileList[$fileChoice])) { $selectedFile = $fileList[$fileChoice]; displayQuestionsWithImages($allQuestions[$selectedFile], $selectedFile); } } elseif ($previewChoice == "\63") { echo "\xa\33\133\61\73\71\63\155\x50\x72\x65\x76\151\x65\167\x20\x70\145\x72\164\141\156\171\x61\x61\156\x20\x64\145\156\x67\141\156\40\x67\x61\155\142\x61\162\x3a\x1b\x5b\x30\155\12"; $questionsWithImages = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { if (!empty($question["\151\155\141\x67\145\163"])) { $questionsWithImages++; echo "\xa\x1b\133\x31\x3b\71\x35\x6d" . str_repeat("\x2d", 60) . "\33\x5b\60\x6d\12"; echo "\x1b\x5b\x31\73\71\66\155\120\105\122\124\101\x4e\131\x41\x41\116\40\43{$question["\x6e\165\155\x62\x65\x72"]}\40\x64\x61\x72\x69\x20{$filename}\x1b\133\x30\155\xa"; echo "\33\x5b\x31\73\71\x33\155\x4a\x65\156\x69\x73\72\x20{$question["\164\x79\x70\x65"]}\x20\x7c\x20\x53\x74\x61\164\165\163\72\x20{$question["\x73\x74\x61\164\145"]}\x1b\133\60\x6d\12"; $shortText = substr(strip_tags($question["\x74\145\x78\x74"]), 0, 100) . (strlen($question["\164\145\x78\164"]) > 100 ? "\56\x2e\x2e" : ''); echo "\x1b\133\61\x3b\71\67\x6d" . $shortText . "\33\x5b\x30\x6d\12"; echo "\33\x5b\61\73\71\62\155\x47\141\155\x62\141\162\x3a\40" . count($question["\151\155\141\x67\x65\x73"]) . "\x1b\133\x30\155\12"; foreach ($question["\151\x6d\x61\147\145\163"] as $image) { echo "\x20\40\55\x20{$image["\146\x69\154\x65\156\x61\x6d\x65"]}\40\50{$image["\141\154\x74"]}\x29\12"; } } } } echo "\xa\33\133\x31\x3b\x39\62\x6d\x54\157\164\x61\x6c\40\160\x65\x72\164\x61\x6e\171\141\x61\x6e\x20\x64\145\x6e\147\x61\x6e\40\x67\x61\155\142\x61\x72\x3a\x20{$questionsWithImages}\x1b\133\60\155\12"; } elseif ($previewChoice == "\64") { echo "\12\33\x5b\x31\73\71\x33\x6d\x50\151\x6c\151\x68\40\152\x65\156\151\x73\x20\160\145\x72\x74\141\x6e\171\x61\x61\156\40\165\x6e\164\165\153\40\160\x72\x65\166\x69\145\167\72\33\x5b\x30\155\xa"; echo "\33\x5b\x31\73\x39\x32\x6d\x20\40\x31\56\x20\x50\x69\154\151\x68\x61\x6e\x20\x47\141\156\x64\141\40\x28\115\x75\154\164\151\160\x6c\x65\x20\103\150\157\151\x63\145\x29\33\133\60\x6d\12"; echo "\x1b\133\x31\73\x39\x32\x6d\40\40\62\x2e\40\104\162\x6f\x70\144\157\x77\x6e\57\x4d\141\164\x63\x68\151\x6e\147\33\133\x30\155\12"; echo "\x1b\133\61\73\71\62\155\40\40\x33\56\40\x42\145\156\x61\x72\x2f\123\141\154\141\150\x20\50\x54\x72\x75\145\57\106\x61\x6c\163\x65\x29\x1b\133\x30\x6d\12"; echo "\x1b\x5b\x31\73\71\62\x6d\x20\40\x34\56\x20\125\162\x61\151\x61\156\x20\x28\105\x73\x73\x61\171\51\x1b\x5b\x30\155\xa"; echo "\x1b\133\x31\73\71\62\155\x20\x20\65\56\x20\x4a\141\167\x61\142\141\156\x20\x53\x69\156\x67\153\141\164\40\x28\123\150\157\162\x74\40\101\156\163\167\145\x72\x29\33\x5b\60\x6d\12"; echo "\x1b\133\x31\73\x39\x33\155\120\151\x6c\x69\150\141\156\40\50\61\55\65\x29\72\x20\33\133\x30\x6d"; $typeChoice = trim(fgets(STDIN)); $typeMap = array("\61" => "\155\165\x6c\x74\151\x63\150\x6f\151\143\x65", "\62" => "\x6d\141\164\143\150", "\63" => "\164\162\165\145\x66\141\154\163\145", "\64" => "\x65\163\x73\141\x79", "\x35" => "\x73\150\x6f\x72\x74\141\x6e\x73\167\x65\x72"); $selectedType = isset($typeMap[$typeChoice]) ? $typeMap[$typeChoice] : "\x6d\x75\154\164\x69\143\x68\x6f\x69\x63\x65"; $typeCount = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { if ($question["\x74\171\160\x65"] === $selectedType) { $typeCount++; echo "\12\33\x5b\x31\x3b\x39\x35\155" . str_repeat("\55", 60) . "\33\133\60\155\xa"; echo "\33\x5b\x31\x3b\x39\66\x6d\120\x45\122\x54\101\x4e\x59\x41\101\x4e\x20\43{$question["\156\165\155\142\x65\162"]}\x20\144\x61\x72\x69\x20{$filename}\x1b\x5b\x30\155\xa"; echo "\33\133\61\x3b\71\x33\155\112\145\x6e\x69\x73\72\40{$question["\x74\x79\x70\145"]}\x20\x7c\x20\123\x74\x61\x74\165\163\72\x20{$question["\163\164\x61\164\145"]}\33\133\60\155\12"; $shortText = substr(strip_tags($question["\164\x65\170\164"]), 0, 150) . (strlen($question["\x74\145\x78\164"]) > 150 ? "\x2e\56\x2e" : ''); echo "\x1b\x5b\61\73\x39\x37\x6d" . $shortText . "\33\x5b\x30\x6d\12"; } } } echo "\xa\33\133\x31\x3b\71\62\155\x54\x6f\164\x61\x6c\x20\160\145\162\x74\x61\156\x79\x61\x61\156\x20\x6a\x65\156\151\163\x20\47{$selectedType}\47\x3a\40{$typeCount}\x1b\x5b\60\155\xa"; } elseif ($previewChoice == "\65") { echo "\xa\33\x5b\x31\73\71\x33\x6d\120\162\145\166\x69\x65\x77\x20\x6b\150\165\x73\165\163\x20\160\145\x72\164\x61\156\171\141\141\x6e\x20\144\162\157\160\144\157\167\156\x2f\x6d\141\164\x63\150\x3a\x1b\133\60\x6d\12"; $matchQuestionsCount = 0; foreach ($allQuestions as $filename => $questions) { $matchQuestions = array(); foreach ($questions as $question) { if ($question["\164\x79\x70\145"] === "\155\x61\x74\x63\150") { $matchQuestions[] = $question; $matchQuestionsCount++; } } if (!empty($matchQuestions)) { displayMatchQuestions($matchQuestions, $filename); } } if ($matchQuestionsCount == 0) { echo "\12\x1b\133\x31\73\x39\61\155\124\151\x64\x61\153\40\144\151\164\145\x6d\165\x6b\141\156\x20\160\x65\x72\164\141\x6e\171\141\x61\x6e\x20\x64\162\x6f\x70\x64\x6f\x77\x6e\x2f\155\x61\164\x63\x68\56\33\133\x30\155\xa"; } else { echo "\xa\33\133\x31\73\71\x32\x6d\x54\x6f\x74\x61\154\40\160\145\x72\164\x61\156\x79\x61\x61\156\40\144\162\157\160\x64\157\x77\x6e\57\155\141\164\x63\x68\40\144\x69\164\x65\x6d\x75\153\141\156\72\x20{$matchQuestionsCount}\x1b\x5b\60\155\xa"; } } else { $totalAllQuestions = 0; foreach ($allQuestions as $filename => $questions) { displayQuestionsWithImages($questions, $filename); $totalAllQuestions += count($questions); } echo "\xa\x1b\133\x31\73\x39\x32\x6d\124\x4f\x54\x41\x4c\40\123\x45\115\125\x41\x20\x50\105\122\124\101\x4e\x59\101\101\116\72\40{$totalAllQuestions}\x1b\x5b\x30\x6d\12"; } } echo "\xa{$h}\124\145\x6b\141\x6e\40\105\156\164\145\x72\x20\x75\x6e\x74\x75\153\40\x6d\x65\154\141\156\152\165\x74\x6b\141\156\x2e\56\x2e{$p}"; fgets(STDIN); echo "\xa\33\133\x31\73\x39\62\155\342\x9c\223\40\x4d\157\x64\145\x20\x70\x65\x6e\171\x69\x6d\160\x61\156\141\156\40\x74\x65\153\x73\x20\x64\x69\141\x6b\x74\x69\146\153\141\x6e\33\133\60\x6d\12"; $saveAllTxt = "\x79"; if (strtolower($saveAllTxt) === "\171") { $allTxtContent = str_repeat("\xe2\x95\220", 60) . "\xa"; $allTxtContent .= "\113\x55\115\x50\x55\114\x41\x4e\x20\123\x45\x4d\125\x41\40\x50\105\122\x54\101\116\131\101\x41\x4e\x20\x44\101\x4e\40\112\101\127\101\102\x41\116\12"; $allTxtContent .= "\75\x3d\75\x3d\x3d\75\x3d\75\75\75\75\75\x3d\75\75\x3d\x3d\75\75\75\x3d\75\x3d\x3d\75\x3d\75\x3d\75\75\x3d\75\75\x3d\75\x3d\xa\xa"; $allTxtContent .= "\115\x45\x54\101\104\101\124\x41\x3a\12"; $allTxtContent .= str_repeat("\x2d", 40) . "\12"; $allTxtContent .= sprintf("\x41\x74\x74\x65\x6d\160\164\40\111\104\40\40\40\x20\40\x3a\x20\x25\x73\12", $attempt); $allTxtContent .= sprintf("\x43\x4d\111\104\40\x20\40\x20\40\40\x20\x20\x20\40\40\72\x20\45\x73\12", $cmid); $allTxtContent .= sprintf("\x50\x65\x6e\x67\147\x75\x6e\141\40\40\40\x20\40\40\40\x3a\40\45\163\12", isset($username) ? $username : "\125\x6e\153\x6e\x6f\167\156\40\x55\x73\145\x72"); $allTxtContent .= sprintf("\x54\141\156\x67\147\x61\154\40\x53\x63\162\141\x70\145\x20\72\40\x25\x73\xa", date("\131\55\155\x2d\x64\40\110\72\151\72\163")); $allTxtContent .= sprintf("\x54\157\x74\x61\154\40\x46\x69\154\145\x20\x20\40\40\x20\72\40\x25\144\xa", count($allQuestions)); $typeStats = array(); $multipleChoiceCount = 0; $singleChoiceCount = 0; $totalQuestionsCount = 0; foreach ($allQuestions as $filename => $questions) { foreach ($questions as $question) { $totalQuestionsCount++; $type = $question["\164\171\x70\145"]; if (!isset($typeStats[$type])) { $typeStats[$type] = 0; } $typeStats[$type]++; if ($type === "\x6d\x75\154\x74\x69\x63\x68\x6f\x69\x63\x65") { if (isset($question["\x69\163\137\x6d\x75\x6c\164\x69\160\x6c\145\x5f\141\x6e\163\167\145\162"]) && $question["\x69\163\137\155\165\x6c\164\x69\160\154\x65\137\141\156\x73\x77\145\162"]) { $multipleChoiceCount++; } else { $singleChoiceCount++; } } } } $allTxtContent .= sprintf("\x54\x6f\x74\141\154\x20\120\x65\x72\164\141\x6e\x79\x61\141\156\72\x20\x25\144\xa", $totalQuestionsCount); $allTxtContent .= sprintf("\115\x75\x6c\x74\x69\160\x6c\x65\40\x43\x68\x6f\x69\143\x65\40\72\x20\45\144\12", $multipleChoiceCount); $allTxtContent .= sprintf("\x53\x69\156\x67\x6c\x65\40\103\150\x6f\x69\x63\x65\40\x20\40\x3a\40\45\144\12", $singleChoiceCount); $allTxtContent .= "\12" . str_repeat("\342\225\x90", 60) . "\12\12"; $questionCounter = 0; foreach ($allQuestions as $filename => $questions) { $allTxtContent .= "\xa" . str_repeat("\342\x95\x90", 60) . "\12"; $allTxtContent .= "\106\x49\114\x45\72\x20" . strtoupper($filename) . "\12"; $allTxtContent .= sprintf("\112\x75\x6d\x6c\x61\150\40\120\145\162\164\x61\156\171\141\141\x6e\72\x20\45\x64\12", count($questions)); $allTxtContent .= str_repeat("\xe2\x95\220", 60) . "\12\xa"; foreach ($questions as $question) { $questionCounter++; $allTxtContent .= formatQuestionForText($question, $questionCounter); } $allTxtContent .= "\xa" . str_repeat("\x2d", 60) . "\12"; $allTxtContent .= "\x53\x54\x41\x54\111\123\x54\x49\113\x20\106\x49\114\x45\x20" . strtoupper($filename) . "\x3a\12"; $allTxtContent .= str_repeat("\x2d", 60) . "\xa"; $fileTypeStats = array(); foreach ($questions as $question) { $type = $question["\x74\x79\160\x65"]; if (!isset($fileTypeStats[$type])) { $fileTypeStats[$type] = 0; } $fileTypeStats[$type]++; } foreach ($fileTypeStats as $type => $count) { $typeName = ucfirst($type); $percentage = round($count / count($questions) * 100, 1); if ($type === "\155\165\154\164\151\143\x68\157\x69\x63\x65") { $multiCount = 0; $singleCount = 0; foreach ($questions as $q) { if ($q["\x74\x79\x70\x65"] === "\x6d\165\x6c\x74\x69\143\150\x6f\x69\143\145") { if (isset($q["\x69\163\x5f\x6d\165\154\164\x69\x70\154\145\137\141\x6e\x73\167\145\x72"]) && $q["\151\x73\137\155\x75\154\x74\151\x70\x6c\145\137\x61\x6e\x73\x77\145\x72"]) { $multiCount++; } else { $singleCount++; } } } $allTxtContent .= sprintf("\x25\55\x32\60\163\x3a\40\45\x32\144\x20\50\x25\x35\x2e\x31\x66\x25\45\51\xa", $typeName, $count, $percentage); $allTxtContent .= sprintf("\40\40\55\x20\115\165\x6c\164\x69\160\x6c\145\40\x43\x68\157\151\x63\145\x3a\40\45\x32\x64\40\50\x25\65\56\x31\146\x25\45\x29\xa", $multiCount, round($multiCount / count($questions) * 100, 1)); $allTxtContent .= sprintf("\x20\x20\x2d\40\123\151\x6e\147\x6c\x65\x20\x43\150\157\151\x63\x65\40\40\x3a\40\45\x32\144\x20\50\45\65\56\x31\146\x25\45\x29\12", $singleCount, round($singleCount / count($questions) * 100, 1)); } else { $allTxtContent .= sprintf("\45\55\62\x30\x73\x3a\x20\45\x32\144\40\x28\x25\65\56\x31\146\x25\x25\x29\12", $typeName, $count, $percentage); } } $allTxtContent .= "\xa" . str_repeat("\342\225\x90", 60) . "\12\12"; } $allTxtContent .= "\12" . str_repeat("\xe2\225\220", 60) . "\xa"; $allTxtContent .= "\122\111\x4e\107\x4b\101\123\101\x4e\40\101\x4b\110\x49\x52\xa"; $allTxtContent .= str_repeat("\342\x95\220", 60) . "\xa\xa"; $allTxtContent .= "\x53\124\x41\124\x49\x53\x54\x49\113\40\112\x45\x4e\111\x53\x20\x50\x45\122\x54\x41\x4e\131\x41\x41\x4e\72\xa"; $allTxtContent .= str_repeat("\55", 40) . "\xa"; foreach ($typeStats as $type => $count) { $typeName = ucfirst($type); $percentage = round($count / $totalQuestionsCount * 100, 1); if ($type === "\x6d\165\x6c\x74\x69\x63\x68\157\x69\143\145") { $multiPercentage = $totalQuestionsCount > 0 ? round($multipleChoiceCount / $totalQuestionsCount * 100, 1) : 0; $singlePercentage = $totalQuestionsCount > 0 ? round($singleChoiceCount / $totalQuestionsCount * 100, 1) : 0; $allTxtContent .= sprintf("\x25\x2d\x32\x30\163\x3a\40\x25\x33\x64\40\50\45\x35\56\61\x66\x25\x25\x29\12", $typeName, $count, $percentage); $allTxtContent .= sprintf("\40\x20\55\40\x4d\165\x6c\164\x69\x70\154\x65\x20\x43\x68\x6f\x69\x63\145\x3a\x20\x25\x33\x64\x20\x28\x25\65\56\61\146\45\x25\51\xa", $multipleChoiceCount, $multiPercentage); $allTxtContent .= sprintf("\40\x20\55\x20\x53\151\x6e\147\154\x65\x20\x43\x68\157\151\143\145\x20\40\72\x20\x25\63\x64\40\x28\45\x35\56\x31\x66\45\45\x29\xa", $singleChoiceCount, $singlePercentage); } else { $allTxtContent .= sprintf("\45\x2d\x32\60\x73\72\x20\x25\63\x64\x20\x28\45\x35\56\x31\146\45\45\x29\xa", $typeName, $count, $percentage); } } $allTxtContent .= "\12" . str_repeat("\55", 40) . "\12"; $allTxtContent .= sprintf("\x54\x4f\x54\101\x4c\40\120\105\122\x54\101\x4e\131\x41\x41\116\40\40\72\40\x25\144\12", $totalQuestionsCount); $allTxtContent .= "\xa\xa" . str_repeat("\342\x95\x90", 60) . "\xa"; $allTxtContent .= "\x49\116\106\x4f\x52\x4d\x41\x53\111\x20\106\111\x4c\105\xa"; $allTxtContent .= str_repeat("\342\225\x90", 60) . "\xa\12"; $allTxtContent .= sprintf("\x46\x69\x6c\x65\40\151\156\x69\40\144\x69\x62\165\x61\164\40\160\141\x64\x61\x20\x20\x3a\40\x25\163\12", date("\x59\x2d\155\55\x64\40\x48\x3a\151\x3a\x73")); $allTxtContent .= sprintf("\x44\x69\162\145\153\164\157\162\151\x20\160\145\x6e\x79\x69\155\x70\141\x6e\141\156\x20\72\40\x25\x73\xa", realpath($downloadDir)); $allTxtContent .= sprintf("\x4a\x75\x6d\x6c\141\x68\40\146\151\154\145\40\x73\x75\155\x62\145\x72\40\x20\40\x20\72\x20\45\144\12", count($allQuestions)); if (isset($extractionResult["\151\x6d\141\147\x65\x73"])) { $imageCount = count($extractionResult["\x69\x6d\141\x67\x65\163"]); $allTxtContent .= sprintf("\124\x6f\164\141\x6c\x20\x67\141\155\142\141\x72\x20\40\x20\40\x20\40\x20\x20\x20\72\x20\45\144\12", $imageCount); } $allTxtContent .= "\12" . str_repeat("\x2a", 80) . "\xa"; $allTxtContent .= "\114\105\x47\x45\116\x44\101\x3a\12"; $allTxtContent .= "\x5b\xe2\234\x93\135\40\x2d\x20\x43\x68\x65\x63\153\142\x6f\170\40\171\141\x6e\147\40\x64\151\160\151\154\151\x68\40\50\115\165\154\164\151\160\154\x65\x20\x43\x68\157\x69\x63\x65\x29\xa"; $allTxtContent .= "\133\342\x98\x85\x5d\40\x2d\x20\x52\141\x64\151\x6f\x20\x79\141\x6e\147\x20\x64\x69\160\151\154\x69\x68\x20\50\x53\x69\x6e\147\x6c\x65\x20\x43\150\x6f\151\143\145\51\xa"; $allTxtContent .= "\133\40\135\x20\55\x20\x4f\x70\163\x69\x20\x74\x69\x64\x61\153\40\144\151\160\x69\x6c\151\150\12"; $allTxtContent .= "\x5b\xe2\227\213\135\40\55\40\122\x61\144\151\x6f\40\x74\x69\144\x61\x6b\x20\144\x69\x70\x69\x6c\151\150\xa"; $allTxtContent .= "\xe2\x9c\223\40\x20\40\40\x2d\40\111\x74\x65\155\40\144\x72\157\160\144\157\x77\x6e\40\171\x61\156\x67\40\x74\145\154\x61\150\x20\144\x69\152\x61\167\x61\142\12"; $allTxtContent .= "\342\x9c\x97\40\40\x20\x20\55\x20\111\164\x65\x6d\40\x64\162\x6f\x70\144\157\167\x6e\40\142\x65\154\x75\155\x20\144\x69\152\x61\x77\x61\x62\xa"; $allTxtContent .= str_repeat("\x2a", 80) . "\12"; $allTxtPath = $downloadDir . "\57\x53\x45\x4d\125\101\137\120\105\x52\x54\101\116\131\101\x41\116\x2e\164\x78\x74"; file_put_contents($allTxtPath, $allTxtContent); echo "\33\x5b\x31\73\x39\62\155\xe2\x9c\x93\40\106\151\x6c\145\40\147\x61\x62\x75\x6e\147\141\156\x20\x73\145\x6d\x75\141\x20\x70\x65\162\x74\x61\156\171\x61\141\x6e\40\x64\x69\163\x69\x6d\160\141\156\40\x6b\x65\x20{$allTxtPath}\33\133\x30\155\12"; foreach ($allQuestions as $filename => $questions) { $individualContent = str_repeat("\xe2\x95\x90", 60) . "\12"; $individualContent .= strtoupper(str_replace("\56\150\164\x6d\x6c", '', $filename)) . "\xa"; $individualContent .= sprintf("\104\141\x72\x69\40\101\164\164\145\155\x70\164\x3a\40\x25\x73\40\174\40\x43\115\111\104\x3a\x20\x25\163\12", $attempt, $cmid); $individualContent .= str_repeat("\xe2\225\x90", 60) . "\12\12"; $fileQuestionCount = 0; $fileTypeStats = array(); $fileMultiCount = 0; $fileSingleCount = 0; foreach ($questions as $question) { $fileQuestionCount++; $individualContent .= formatQuestionForText($question, $fileQuestionCount); $type = $question["\164\x79\x70\145"]; if (!isset($fileTypeStats[$type])) { $fileTypeStats[$type] = 0; } $fileTypeStats[$type]++; if ($type === "\x6d\x75\154\x74\151\x63\x68\157\151\x63\x65") { if (isset($question["\151\x73\137\155\165\154\x74\151\160\x6c\145\137\141\x6e\163\167\x65\x72"]) && $question["\x69\x73\x5f\x6d\165\154\164\151\x70\x6c\145\x5f\141\x6e\163\167\145\162"]) { $fileMultiCount++; } else { $fileSingleCount++; } } } $individualContent .= "\xa" . str_repeat("\xe2\x95\x90", 60) . "\12"; $individualContent .= "\123\x54\101\124\x49\123\124\111\x4b\xa"; $individualContent .= str_repeat("\342\225\220", 60) . "\xa\12"; $individualContent .= "\112\x75\x6d\x6c\x61\x68\x20\x50\145\x72\164\x61\156\x79\x61\141\156\x3a\40" . count($questions) . "\xa\xa"; foreach ($fileTypeStats as $type => $count) { $typeName = ucfirst($type); $percentage = round($count / count($questions) * 100, 1); if ($type === "\155\x75\154\x74\151\143\x68\x6f\151\x63\145") { $multiPercent = round($fileMultiCount / count($questions) * 100, 1); $singlePercent = round($fileSingleCount / count($questions) * 100, 1); $individualContent .= sprintf("\x25\55\62\x30\x73\72\40\45\62\x64\40\50\45\x35\x2e\x31\146\45\45\51\12", $typeName, $count, $percentage); $individualContent .= sprintf("\x20\x20\x2d\40\x4d\x75\x6c\164\x69\160\x6c\x65\40\103\150\157\151\143\145\x3a\40\45\62\144\x20\x28\x25\65\56\x31\146\x25\x25\x29\xa", $fileMultiCount, $multiPercent); $individualContent .= sprintf("\x20\x20\55\x20\x53\x69\x6e\x67\154\x65\40\103\x68\x6f\151\x63\x65\40\x20\72\40\45\62\144\x20\50\x25\x35\56\61\x66\x25\x25\x29\xa", $fileSingleCount, $singlePercent); } else { $individualContent .= sprintf("\45\55\62\60\163\72\x20\x25\62\144\40\x28\45\x35\56\61\146\45\45\x29\12", $typeName, $count, $percentage); } } $individualContent .= "\12" . str_repeat("\x2a", 80) . "\xa"; $individualContent .= "\104\151\142\165\x61\164\72\x20" . date("\131\x2d\155\55\144\40\x48\x3a\151\x3a\163") . "\xa"; $individualContent .= "\x46\x69\x6c\145\72\40" . $filename . "\12"; $individualContent .= str_repeat("\x2a", 80) . "\12"; $txtFilename = str_replace("\x2e\x68\164\x6d\154", "\x5f\104\x45\124\101\x49\114\x2e\164\x78\x74", $filename); $txtPath = $downloadDir . "\57" . $txtFilename; file_put_contents($txtPath, $individualContent); echo "\33\133\x31\x3b\71\x32\x6d\342\x9c\223\x20\110\x61\163\x69\x6c\x20{$filename}\40\x64\151\163\151\x6d\160\141\156\x20\153\x65\40{$txtPath}\33\133\x30\155\xa"; } echo "\xa\x1b\133\x31\73\x39\62\x6d\xe2\234\x93\40\x47\105\x4d\x49\116\x49\40\x41\x50\x49\40\x64\x69\x61\x6b\164\x69\146\153\141\156\33\133\x30\155\xa"; $useGeminiStaged = "\171"; if (strtolower($useGeminiStaged) === "\x79") { $apiKeyFile = "\107\105\115\x49\x4e\x49\x5f\141\x70\151\x2e\164\x78\164"; $geminiApiKey = file_exists($apiKeyFile) ? trim(file_get_contents($apiKeyFile)) : ''; if (empty($geminiApiKey)) { echo "{$m}\xe2\232\240\357\xb8\217\x20\x41\x50\111\40\113\145\171\x20\107\x45\x4d\x49\116\x49\x20\164\151\x64\x61\x6b\x20\x64\151\164\145\x6d\165\153\x61\156\56\40\110\x61\x72\141\x70\40\x73\151\155\160\x61\156\x20\x41\x50\111\40\x4b\x65\171\40\164\x65\x72\x6c\145\x62\151\x68\40\x64\x61\150\x75\x6c\165\x20\155\145\154\141\154\165\x69\x20\155\145\156\165\x20\165\164\x61\155\x61\56{$p}\xa"; } else { $geminiConfig = showGeminiMenuStaged($downloadDir, $allQuestions, $geminiApiKey); if ($geminiConfig) { $geminiResult = sendToGeminiAPIInParts($allQuestions, $geminiConfig["\x69\155\141\147\145\163\x5f\x64\x69\x72"], $geminiConfig["\141\x70\x69\137\153\x65\171"], $geminiConfig["\160\x61\x72\x74\163"]); if ($geminiResult && $geminiResult["\163\x75\143\143\x65\x73\x73"]) { echo "\12\x1b\133\x31\73\71\x33\155\111\x6e\147\x69\156\40\155\145\155\x62\141\156\144\x69\156\x67\153\141\x6e\x20\x6a\x61\x77\141\x62\x61\156\x20\107\x45\115\111\116\x49\40\144\145\156\147\x61\x6e\x20\x6a\141\167\x61\x62\141\156\x20\x79\x61\156\x67\40\x73\x75\x64\141\150\40\141\144\141\77\40\x28\171\x2f\x6e\51\72\40\33\133\60\x6d"; $compareAnswers = trim(fgets(STDIN)); if (strtolower($compareAnswers) === "\171") { if (file_exists($geminiResult["\x63\157\x6d\x62\x69\156\x65\144\137\146\151\x6c\145"])) { $geminiAnswers = file_get_contents($geminiResult["\143\157\x6d\142\x69\x6e\145\144\137\x66\x69\154\x65"]); if (!empty($geminiAnswers)) { $comparisonResult = compareAnswersWithGemini($allQuestions, $geminiAnswers, $downloadDir); if ($comparisonResult && isset($comparisonResult["\146\151\154\145\x5f\x70\141\x74\150"])) { echo "\12\x1b\133\61\73\x39\x32\155\342\234\223\40\x46\x69\x6c\145\x20\x70\x65\162\142\x61\156\x64\151\x6e\147\141\x6e\40\144\x69\142\165\x61\164\x3a\x20" . basename($comparisonResult["\x66\151\x6c\145\137\x70\141\x74\150"]) . "\33\x5b\x30\x6d\12"; echo "\x1b\x5b\61\x3b\71\x33\155\x52\x69\156\x67\153\x61\x73\x61\156\x20\120\x65\162\x62\141\156\144\x69\156\x67\141\x6e\72\x1b\133\60\155\12"; echo "\33\133\61\x3b\71\62\x6d\x20\x20\x54\157\x74\141\x6c\40\x70\145\x72\x74\x61\x6e\x79\141\x61\156\72\40" . $comparisonResult["\164\157\x74\x61\154"] . "\x1b\133\60\x6d\xa"; echo "\33\x5b\x31\73\71\62\155\40\x20\x43\157\143\x6f\153\72\40" . $comparisonResult["\x6d\141\164\x63\150\x69\156\147"] . "\x20\x28" . ($comparisonResult["\x74\157\164\x61\x6c"] > 0 ? round($comparisonResult["\155\x61\x74\143\x68\x69\x6e\147"] / $comparisonResult["\x74\x6f\164\141\154"] * 100, 1) : 0) . "\45\x29\x1b\133\x30\x6d\xa"; echo "\x1b\133\x31\x3b\71\x31\155\x20\40\x42\145\x72\142\x65\144\x61\x3a\40" . $comparisonResult["\144\x69\146\146\x65\x72\x65\156\x74"] . "\40\x28" . ($comparisonResult["\164\157\164\141\154"] > 0 ? round($comparisonResult["\144\151\x66\146\x65\x72\x65\x6e\164"] / $comparisonResult["\164\157\x74\141\154"] * 100, 1) : 0) . "\45\51\x1b\133\60\155\12"; } } else { echo "\x1b\x5b\61\73\71\61\x6d\342\x9c\x97\x20\106\x69\x6c\145\x20\152\x61\x77\141\x62\141\x6e\40\107\145\155\x69\156\151\x20\x6b\157\x73\157\156\x67\40\x61\x74\x61\x75\40\164\x69\x64\x61\153\x20\x62\151\163\141\x20\x64\151\142\x61\143\141\33\133\60\155\12"; } } else { echo "\x1b\x5b\x31\73\x39\x31\155\342\x9c\227\40\106\151\x6c\x65\x20\x6a\141\167\x61\142\x61\x6e\40\x47\x65\155\151\156\x69\x20\x74\151\144\141\153\x20\144\151\164\x65\x6d\x75\153\141\156\72\x20" . $geminiResult["\143\157\155\142\x69\x6e\145\144\137\x66\151\154\145"] . "\33\133\x30\155\12"; } } echo "\xa\x1b\x5b\x31\73\71\66\x6d" . str_repeat("\342\x95\220", 60) . "\x1b\133\60\155\12"; echo "\x1b\x5b\61\x3b\71\62\x6d\x46\x49\x4c\105\40\112\101\127\x41\x42\x41\116\40\131\101\x4e\x47\x20\x44\111\102\125\x41\124\x3a\x1b\x5b\x30\155\xa"; echo "\33\133\x31\x3b\71\x36\155" . str_repeat("\xe2\225\x90", 60) . "\33\133\60\x6d\xa"; if (file_exists($geminiResult["\143\x6f\x6d\142\x69\x6e\x65\144\x5f\x66\x69\x6c\145"])) { $fileSize = filesize($geminiResult["\143\x6f\155\142\151\x6e\145\x64\137\146\x69\154\145"]); $sizeFormatted = round($fileSize / 1024, 2) . "\x20\113\x42"; echo "\33\133\x31\x3b\71\x32\x6d\xe2\x9c\223\40\112\141\x77\x61\142\x61\156\40\114\x65\x6e\147\153\141\160\72\40" . basename($geminiResult["\143\x6f\155\142\151\156\x65\144\137\x66\x69\x6c\145"]) . "\x20\x28{$sizeFormatted}\x29\33\133\60\x6d\xa"; } $partFiles = glob($downloadDir . "\x2f\x4a\101\x57\101\x42\101\116\137\x42\x41\107\x49\101\x4e\137\x2a\x2e\164\x78\x74"); if (!empty($partFiles)) { echo "\12\x1b\133\61\73\x39\x33\x6d\106\151\154\x65\x20\112\141\167\141\142\x61\156\x20\x70\x65\x72\x20\x42\x61\x67\x69\141\x6e\x3a\x1b\133\60\x6d\12"; foreach ($partFiles as $partFile) { $partSize = filesize($partFile); $partSizeFormatted = round($partSize / 1024, 2) . "\40\x4b\102"; echo "\33\133\x31\x3b\71\x32\155\x20\x20\x2d\x20" . basename($partFile) . "\x20\50{$partSizeFormatted}\51\33\x5b\60\155\xa"; } } $comparisonFiles = glob($downloadDir . "\x2f\120\x45\x52\x42\101\116\104\111\116\x47\x41\x4e\x5f\112\x41\x57\101\x42\101\116\137\52\56\164\170\x74"); if (!empty($comparisonFiles)) { echo "\12\x1b\x5b\61\73\x39\63\155\x46\x69\154\145\40\x50\145\x72\x62\x61\x6e\144\x69\156\147\141\x6e\x3a\33\x5b\60\155\xa"; foreach ($comparisonFiles as $compFile) { $compSize = filesize($compFile); $compSizeFormatted = round($compSize / 1024, 2) . "\x20\113\102"; echo "\x1b\x5b\x31\x3b\x39\62\x6d\x20\40\x2d\40" . basename($compFile) . "\x20\x28{$compSizeFormatted}\x29\x1b\x5b\60\x6d\xa"; } } echo "\xa\33\133\x31\73\x39\63\155\111\x6e\x67\x69\x6e\x20\155\145\154\151\150\x61\164\x20\x70\x72\x65\166\x69\145\x77\x20\x6a\141\x77\141\x62\141\x6e\x3f\40\x28\171\57\156\x29\x3a\x20\33\133\x30\155"; $previewAnswer = trim(fgets(STDIN)); if (strtolower($previewAnswer) === "\171") { if (file_exists($geminiResult["\143\x6f\155\x62\x69\156\145\x64\x5f\146\151\x6c\145"])) { $content = file_get_contents($geminiResult["\x63\157\x6d\142\x69\x6e\x65\144\137\x66\x69\x6c\x65"]); $lines = explode("\xa", $content); echo "\12\33\133\x31\73\71\66\x6d" . str_repeat("\xe2\x95\220", 60) . "\x1b\133\60\155\xa"; echo "\33\133\x31\73\x39\62\155\x50\122\x45\126\x49\x45\x57\x20\112\x41\x57\x41\102\x41\116\x20\x47\x45\115\x49\x4e\x49\x3a\x1b\x5b\60\155\xa"; echo "\x1b\133\61\73\x39\66\155" . str_repeat("\xe2\225\220", 60) . "\33\x5b\x30\x6d\xa"; $previewCount = 0; for ($i = 0; $i < min(10, count($lines)); $i++) { $line = $lines[$i]; if (trim($line) !== '' && !preg_match("\x2f\136\x5b\75\x2a\x2d\x5d\x2b\44\x2f", $line)) { if (preg_match("\57\x5e\x5c\x64\x2b\x5c\56\57", $line)) { echo "\x1b\133\61\73\71\66\x6d" . $line . "\33\x5b\x30\155\12"; } else { echo "\x1b\133\x31\x3b\x39\67\x6d" . $line . "\33\x5b\x30\155\xa"; } $previewCount++; } } if (count($lines) > 10) { echo "\xa\x1b\133\61\73\71\63\x6d\x2e\x2e\56\x20\x28\154\141\x6e\152\165\164\x6b\x61\156\40\144\x69\40\146\x69\154\145\40\x6c\x65\x6e\147\153\x61\x70\51\33\133\x30\155\12"; } echo "\12\x1b\133\x31\73\x39\62\155\124\157\164\141\154\40\x62\x61\x72\151\163\40\144\141\x6c\141\x6d\x20\x66\x69\x6c\145\72\x20" . count($lines) . "\x1b\x5b\60\155\12"; echo "\xa\33\x5b\61\x3b\71\63\x6d\x54\x65\153\x61\156\x20\105\156\x74\145\162\x20\x75\156\x74\165\153\x20\155\145\x6c\141\156\x6a\x75\164\x6b\x61\x6e\56\56\x2e\x1b\x5b\60\x6d"; fflush(STDOUT); stream_set_blocking(STDIN, false); while (fgets(STDIN) !== false) { } stream_set_blocking(STDIN, true); fgets(STDIN); } } } } } } } } } $metadata = array("\x73\x63\162\x61\160\145\x64\137\141\x74" => date("\131\x2d\155\x2d\x64\x20\110\72\x69\x3a\x73"), "\141\164\164\x65\155\160\x74\137\x69\144" => $attempt, "\143\155\151\x64" => $cmid, "\x75\x73\x65\162\x6e\141\x6d\x65" => isset($username) ? $username : "\125\156\153\156\157\x77\x6e\x20\125\x73\145\162", "\155\141\170\137\160\x61\147\145\x73\x5f\x74\x72\151\145\144" => $maxPages + 1, "\163\165\143\x63\x65\x73\163\x66\x75\x6c\x5f\x70\x61\x67\145\x73" => count($savedFiles), "\x74\x6f\x74\141\x6c\137\x66\151\x6c\x65\163" => $totalFiles, "\x64\x6f\x77\156\x6c\x6f\141\144\x5f\144\x69\x72\145\x63\164\x6f\162\171" => realpath($downloadDir), "\161\165\145\163\x74\151\157\156\x73\x5f\x65\170\164\x72\141\x63\x74\x65\x64" => $extractQuestions, "\x69\155\141\147\145\x73\x5f\x64\157\167\x6e\x6c\157\141\144\x65\144" => $downloadImages, "\146\151\154\x65\x73" => array_keys($allFiles)); $metadataPath = saveToDownloadDir("\x6d\145\x74\141\x64\141\164\x61\x2e\x6a\163\x6f\156", json_encode($metadata, JSON_PRETTY_PRINT), $downloadDir); echo "\12\x1b\133\61\73\71\x32\155\342\x9c\x93\40\115\x65\164\141\x64\x61\164\x61\x20\144\151\163\x69\155\160\x61\x6e\40\x6b\145\40{$metadataPath}\33\133\60\x6d\12"; echo "\12\33\133\x31\73\x39\66\155" . str_repeat("\xe2\225\x90", 60) . "\x1b\133\x30\155\xa"; echo "\33\133\61\x3b\x39\62\155\120\122\117\x53\x45\123\40\x53\x45\x4c\105\x53\101\111\x21\33\133\60\155\12"; echo "\33\133\61\73\71\x33\x6d\123\145\x6d\x75\x61\x20\x64\141\164\x61\40\164\145\x6c\141\x68\40\x64\x69\x73\x69\x6d\160\x61\156\40\144\151\x3a\x20" . realpath($downloadDir) . "\33\x5b\x30\x6d\12"; echo "\12\33\133\61\x3b\71\x36\x6d\133\123\124\x52\x55\x4b\x54\x55\x52\40\x46\117\114\x44\105\122\135\33\x5b\60\155\xa"; echo "\x1b\x5b\x31\73\71\60\155" . realpath($downloadDir) . "\57\33\133\60\155\xa"; echo "\33\133\61\x3b\71\x30\155\xe2\224\234\342\x94\200\xe2\224\x80\x20\144\141\x73\x68\142\157\x61\162\144\56\150\164\155\x6c\x1b\x5b\60\x6d\12"; echo "\x1b\x5b\61\73\x39\x30\x6d\xe2\224\x9c\xe2\x94\x80\342\x94\x80\x20\163\157\141\154\x2e\x68\x74\155\154\x1b\133\60\x6d\12"; echo "\33\133\61\73\x39\x30\x6d\342\x94\234\342\224\x80\xe2\x94\x80\40\x6b\145\162\x6a\x61\60\x2e\150\x74\x6d\154\x2c\x20\153\x65\162\x6a\141\x31\x2e\150\x74\155\x6c\54\x20\x2e\x2e\x2e\33\133\x30\x6d\12"; echo "\33\133\61\73\x39\x30\x6d\342\x94\234\342\224\x80\xe2\x94\x80\x20\x66\151\156\x69\163\x68\x2e\x68\x74\155\154\33\x5b\60\x6d\12"; echo "\x1b\x5b\61\73\71\60\x6d\xe2\x94\x9c\342\224\200\342\224\200\40\141\x6e\x61\154\x69\163\x69\163\x2e\x68\x74\x6d\x6c\x1b\x5b\60\x6d\xa"; echo "\x1b\133\x31\73\71\60\x6d\xe2\224\x9c\342\224\x80\xe2\224\200\x20\155\x65\x74\x61\144\x61\164\x61\x2e\x6a\x73\x6f\x6e\33\133\60\155\xa"; if ($extractQuestions) { echo "\33\x5b\61\x3b\71\x30\155\342\224\234\xe2\x94\x80\342\x94\200\x20\x71\165\145\x73\164\151\x6f\156\163\137\x65\x78\x74\162\x61\143\164\x65\x64\x2e\152\163\x6f\x6e\33\133\60\155\12"; echo "\33\133\x31\73\x39\x30\x6d\342\224\x9c\xe2\224\x80\xe2\224\x80\x20\x64\x6f\x77\x6e\x6c\157\x61\x64\x65\144\137\x69\x6d\x61\147\145\x73\x2e\152\x73\157\156\33\133\x30\x6d\xa"; echo "\x1b\133\61\73\x39\x30\x6d\xe2\224\x9c\xe2\x94\x80\342\x94\x80\x20\123\x45\115\x55\101\x5f\120\105\122\124\101\116\131\x41\x41\116\x2e\x74\x78\164\x1b\133\x30\x6d\12"; echo "\33\133\x31\73\x39\60\155\342\224\234\342\224\200\xe2\x94\200\40\133\156\141\155\141\137\146\x69\154\145\x5d\x5f\x44\x45\124\x41\x49\x4c\56\164\170\x74\x1b\x5b\60\x6d\xa"; echo "\33\133\61\73\71\x30\x6d\xe2\224\234\342\x94\x80\xe2\224\200\40\x69\x6d\141\147\145\163\57\33\x5b\60\x6d\xa"; echo "\x1b\133\61\73\x39\60\x6d\xe2\224\x82\x20\x20\x20\342\224\x9c\342\x94\200\342\224\200\40\x6b\x65\162\152\x61\60\x2f\x1b\133\60\x6d\12"; echo "\x1b\x5b\61\x3b\71\60\x6d\342\x94\202\x20\x20\x20\342\224\x82\x20\x20\40\xe2\x94\234\342\x94\200\342\x94\200\x20\x71\133\161\165\x65\x73\x74\151\157\156\137\151\144\135\57\x1b\133\x30\x6d\12"; echo "\33\x5b\61\x3b\71\x30\x6d\342\224\x82\x20\x20\x20\xe2\x94\202\x20\40\40\342\224\202\x20\40\x20\xe2\224\224\342\224\200\xe2\224\x80\x20\x5b\147\141\x6d\142\141\162\135\33\x5b\x30\x6d\xa"; echo "\33\x5b\x31\x3b\x39\x30\x6d\342\224\x82\40\40\40\xe2\x94\202\x20\40\x20\xe2\x94\x94\xe2\224\200\342\224\x80\40\56\56\56\33\133\60\x6d\xa"; echo "\x1b\133\x31\73\x39\x30\x6d\xe2\224\202\40\40\40\xe2\224\224\342\x94\200\342\224\200\40\56\56\56\x1b\x5b\x30\x6d\xa"; if (isset($extractionResult["\x61\x6c\154\137\x69\x6d\x61\x67\145\x73\x5f\x64\x69\162"])) { echo "\33\133\x31\x3b\71\x30\155\342\224\x9c\xe2\x94\200\342\224\x80\x20\141\154\154\x5f\x69\155\x61\x67\x65\x73\57\x1b\x5b\60\155\xa"; echo "\33\133\61\73\71\60\155\342\224\202\x20\40\x20\xe2\x94\x9c\xe2\224\x80\342\224\200\40\x69\x6e\144\x65\170\x2e\x68\x74\x6d\x6c\x20\x28\x67\x61\154\154\x65\x72\171\51\33\x5b\60\155\xa"; echo "\33\x5b\x31\x3b\x39\x30\x6d\xe2\x94\202\x20\x20\40\342\224\x9c\342\224\x80\xe2\224\x80\x20\x69\155\141\147\x65\x73\137\x64\x61\x74\141\56\x6a\x73\x6f\x6e\33\133\60\155\xa"; echo "\33\133\61\x3b\71\x30\155\xe2\x94\202\40\x20\x20\xe2\224\x94\342\x94\200\342\x94\x80\x20\133\x73\x65\x6d\x75\141\137\x67\x61\x6d\x62\x61\162\x5f\144\x69\153\165\155\x70\165\x6c\x6b\141\x6e\x5d\x1b\133\x30\155\xa"; } echo "\x1b\x5b\61\73\71\x30\155\342\224\x9c\xe2\x94\x80\xe2\224\x80\40\162\145\160\x6f\x72\x74\163\x2f\33\133\60\x6d\12"; echo "\x1b\x5b\x31\73\71\x30\155\342\x94\202\40\x20\40\342\x94\x94\342\x94\x80\xe2\224\x80\x20\x69\x6d\141\x67\x65\x73\137\162\145\160\157\162\164\137\133\x74\151\155\x65\x73\x74\x61\155\x70\135\x2e\164\170\x74\x1b\133\60\155\12"; $geminiFiles = glob($downloadDir . "\57\112\101\127\x41\102\101\116\137\52\x2e\x74\170\164"); if (!empty($geminiFiles)) { foreach ($geminiFiles as $geminiFile) { if (strpos($geminiFile, "\x47\x45\x4d\x49\x4e\111") !== false || strpos($geminiFile, "\x42\101\107\111\101\116") !== false) { echo "\x1b\x5b\61\x3b\x39\x32\x6d\342\x94\234\342\x94\x80\xe2\224\x80\40" . basename($geminiFile) . "\x1b\133\x30\155\xa"; } } } $comparisonFiles = glob($downloadDir . "\57\x50\105\122\x42\x41\116\104\111\116\x47\101\x4e\x5f\x2a\56\164\x78\x74"); if (!empty($comparisonFiles)) { foreach ($comparisonFiles as $comparisonFile) { echo "\33\133\61\73\71\x34\155\xe2\x94\x9c\342\x94\200\342\224\200\40" . basename($comparisonFile) . "\33\133\x30\155\12"; } } if (isset($createZip) && $createZip) { echo "\33\133\61\73\x39\60\x6d\xe2\224\x94\xe2\x94\200\xe2\x94\200\x20\x61\x6c\154\x5f\x69\x6d\x61\x67\x65\163\x5f\x5b\164\151\155\x65\163\x74\141\x6d\160\x5d\x2e\x7a\x69\x70\x1b\133\60\x6d\12"; } } echo "\33\x5b\61\73\x39\66\155" . str_repeat("\342\225\x90", 60) . "\x1b\x5b\60\x6d\xa"; echo "\12\33\133\x31\x3b\x39\62\155\x54\145\x72\151\155\x61\x20\153\141\163\151\150\x20\164\145\x6c\141\x68\40\155\145\x6e\147\x67\165\156\141\x6b\x61\x6e\40\105\55\114\145\141\162\156\x69\156\147\x20\121\165\145\163\164\151\x6f\156\40\123\x63\x72\141\160\145\x72\x21\33\x5b\x30\155\12"; echo "\x1b\x5b\x31\x3b\71\x33\x6d\x55\x6e\164\x75\153\x20\x6d\x65\x6c\151\150\141\164\x20\x67\x61\x6c\154\145\x72\x79\x20\147\141\x6d\x62\x61\x72\x2c\40\x62\165\153\x61\40\x66\x69\154\145\72\x1b\133\60\x6d\12"; if (isset($extractionResult["\x61\x6c\x6c\x5f\151\x6d\x61\147\145\x73\137\144\x69\x72"])) { echo "\x1b\x5b\61\73\x39\67\x6d\40\x20" . $extractionResult["\x61\154\x6c\x5f\x69\x6d\x61\147\x65\163\137\x64\151\x72"] . "\x2f\x69\156\x64\x65\170\x2e\x68\164\x6d\x6c\x1b\133\x30\x6d\12"; } else { echo "\x1b\x5b\61\x3b\71\x37\155\40\40" . realpath($downloadDir) . "\x2f\x69\155\x61\x67\145\x73\x2f\33\133\60\x6d\xa"; } $geminiFiles = glob($downloadDir . "\57\x4a\101\x57\x41\x42\x41\x4e\x5f\x2a\56\x74\x78\164"); if (!empty($geminiFiles)) { echo "\xa\33\x5b\61\x3b\71\x32\x6d\360\237\223\x9d\40\112\141\167\x61\142\141\156\x20\144\x61\x72\151\x20\x47\x45\115\x49\116\111\x20\x41\120\x49\x3a\x1b\133\x30\x6d\xa"; foreach ($geminiFiles as $geminiFile) { if (strpos($geminiFile, "\x47\105\x4d\111\116\111") !== false || strpos($geminiFile, "\x42\101\x47\x49\x41\116") !== false) { echo "\x1b\133\x31\73\71\x37\155\40\x20" . basename($geminiFile) . "\x1b\x5b\x30\155\xa"; } } } echo "\12{$h}\x54\x65\x6b\141\x6e\x20\105\x6e\x74\145\x72\x20\165\156\164\165\153\40\x6b\x65\155\142\x61\154\151\40\x6b\x65\x20\x4d\x65\x6e\x75\x20\125\164\x61\x6d\141\x2e\56\x2e{$p}"; fgets(STDIN); } goto cY2G3; SKmb4: function extractTextAnswers($questionNode, $xpath, &$questionData) { $textareas = $xpath->query("\x2e\x2f\57\164\145\x78\x74\141\x72\145\x61", $questionNode); $inputs = $xpath->query("\56\x2f\x2f\151\156\160\165\x74\x5b\x40\164\x79\x70\145\x3d\x27\x74\x65\170\x74\47\x5d", $questionNode); if ($textareas->length > 0) { $textarea = $textareas->item(0); $answer = trim($textarea->nodeValue); $questionData["\x61\156\x73\167\145\162\163"][] = array("\x6c\x65\164\x74\145\x72" => "\x41", "\x74\x65\x78\x74" => $answer ?: "\133\112\x61\x77\141\142\141\156\40\125\x72\141\x69\x61\x6e\40\x2d\40\x4b\x6f\x73\x6f\x6e\x67\135", "\151\163\x5f\x63\x6f\x72\162\x65\143\x74" => false, "\164\171\160\x65" => "\164\x65\170\164\x61\162\145\141", "\x69\163\x5f\145\x73\163\141\x79" => true); } elseif ($inputs->length > 0) { $input = $inputs->item(0); $answer = $input->getAttribute("\166\x61\x6c\x75\145"); $questionData["\141\156\163\x77\x65\162\163"][] = array("\x6c\145\164\x74\x65\162" => "\101", "\164\145\170\x74" => $answer ?: "\133\x4a\141\167\141\142\x61\156\x20\x53\x69\156\147\153\141\164\x20\55\40\x4b\x6f\163\x6f\156\147\135", "\151\x73\137\x63\x6f\162\162\x65\143\164" => false, "\164\x79\x70\x65" => "\164\145\170\164\x69\156\x70\165\x74", "\151\163\x5f\x73\150\157\162\164\x61\156\163\x77\x65\x72" => true); } } goto etUo0; kbh9e: ?>